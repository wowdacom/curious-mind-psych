function Al(t,e){const n=Object.create(null),r=t.split(",");for(let s=0;s<r.length;s++)n[r[s]]=!0;return e?s=>!!n[s.toLowerCase()]:s=>!!n[s]}const jv="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Gv=Al(jv);function cf(t){return!!t||t===""}function Cl(t){if(at(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=ce(r)?Qv(r):Cl(r);if(s)for(const a in s)e[a]=s[a]}return e}else{if(ce(t))return t;if(re(t))return t}}const Yv=/;(?![^(]*\))/g,Xv=/:(.+)/;function Qv(t){const e={};return t.split(Yv).forEach(n=>{if(n){const r=n.split(Xv);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Ll(t){let e="";if(ce(t))e=t;else if(at(t))for(let n=0;n<t.length;n++){const r=Ll(t[n]);r&&(e+=r+" ")}else if(re(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const _C=t=>t==null?"":at(t)||re(t)&&(t.toString===pf||!ht(t.toString))?JSON.stringify(t,hf,2):String(t),hf=(t,e)=>e&&e.__v_isRef?hf(t,e.value):Hi(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s])=>(n[`${r} =>`]=s,n),{})}:ff(e)?{[`Set(${e.size})`]:[...e.values()]}:re(e)&&!at(e)&&!mf(e)?String(e):e,Vt={},Vi=[],qe=()=>{},Jv=()=>!1,ty=/^on[^a-z]/,oo=t=>ty.test(t),Il=t=>t.startsWith("onUpdate:"),_e=Object.assign,Nl=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},ey=Object.prototype.hasOwnProperty,Pt=(t,e)=>ey.call(t,e),at=Array.isArray,Hi=t=>ao(t)==="[object Map]",ff=t=>ao(t)==="[object Set]",ht=t=>typeof t=="function",ce=t=>typeof t=="string",Ml=t=>typeof t=="symbol",re=t=>t!==null&&typeof t=="object",df=t=>re(t)&&ht(t.then)&&ht(t.catch),pf=Object.prototype.toString,ao=t=>pf.call(t),ny=t=>ao(t).slice(8,-1),mf=t=>ao(t)==="[object Object]",kl=t=>ce(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,lo=Al(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),uo=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},iy=/-(\w)/g,nn=uo(t=>t.replace(iy,(e,n)=>n?n.toUpperCase():"")),ry=/\B([A-Z])/g,$i=uo(t=>t.replace(ry,"-$1").toLowerCase()),co=uo(t=>t.charAt(0).toUpperCase()+t.slice(1)),Rl=uo(t=>t?`on${co(t)}`:""),zr=(t,e)=>!Object.is(t,e),Ol=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},ho=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},sy=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let gf;const oy=()=>gf||(gf=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let ei;const fo=[];class ay{constructor(e=!1){this.active=!0,this.effects=[],this.cleanups=[],!e&&ei&&(this.parent=ei,this.index=(ei.scopes||(ei.scopes=[])).push(this)-1)}run(e){if(this.active)try{return this.on(),e()}finally{this.off()}}on(){this.active&&(fo.push(this),ei=this)}off(){this.active&&(fo.pop(),ei=fo[fo.length-1])}stop(e){if(this.active){if(this.effects.forEach(n=>n.stop()),this.cleanups.forEach(n=>n()),this.scopes&&this.scopes.forEach(n=>n.stop(!0)),this.parent&&!e){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.active=!1}}}function ly(t,e){e=e||ei,e&&e.active&&e.effects.push(t)}const Dl=t=>{const e=new Set(t);return e.w=0,e.n=0,e},_f=t=>(t.w&Rn)>0,vf=t=>(t.n&Rn)>0,uy=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=Rn},cy=t=>{const{deps:e}=t;if(e.length){let n=0;for(let r=0;r<e.length;r++){const s=e[r];_f(s)&&!vf(s)?s.delete(t):e[n++]=s,s.w&=~Rn,s.n&=~Rn}e.length=n}},zl=new WeakMap;let Br=0,Rn=1;const Bl=30,Fr=[];let ni;const ii=Symbol(""),Fl=Symbol("");class Ul{constructor(e,n=null,r){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],ly(this,r)}run(){if(!this.active)return this.fn();if(!Fr.includes(this))try{return Fr.push(ni=this),hy(),Rn=1<<++Br,Br<=Bl?uy(this):yf(this),this.fn()}finally{Br<=Bl&&cy(this),Rn=1<<--Br,ri(),Fr.pop();const e=Fr.length;ni=e>0?Fr[e-1]:void 0}}stop(){this.active&&(yf(this),this.onStop&&this.onStop(),this.active=!1)}}function yf(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let Zi=!0;const Vl=[];function qi(){Vl.push(Zi),Zi=!1}function hy(){Vl.push(Zi),Zi=!0}function ri(){const t=Vl.pop();Zi=t===void 0?!0:t}function ke(t,e,n){if(!wf())return;let r=zl.get(t);r||zl.set(t,r=new Map);let s=r.get(n);s||r.set(n,s=Dl()),xf(s)}function wf(){return Zi&&ni!==void 0}function xf(t,e){let n=!1;Br<=Bl?vf(t)||(t.n|=Rn,n=!_f(t)):n=!t.has(ni),n&&(t.add(ni),ni.deps.push(t))}function yn(t,e,n,r,s,a){const u=zl.get(t);if(!u)return;let h=[];if(e==="clear")h=[...u.values()];else if(n==="length"&&at(t))u.forEach((f,p)=>{(p==="length"||p>=r)&&h.push(f)});else switch(n!==void 0&&h.push(u.get(n)),e){case"add":at(t)?kl(n)&&h.push(u.get("length")):(h.push(u.get(ii)),Hi(t)&&h.push(u.get(Fl)));break;case"delete":at(t)||(h.push(u.get(ii)),Hi(t)&&h.push(u.get(Fl)));break;case"set":Hi(t)&&h.push(u.get(ii));break}if(h.length===1)h[0]&&Hl(h[0]);else{const f=[];for(const p of h)p&&f.push(...p);Hl(Dl(f))}}function Hl(t,e){for(const n of at(t)?t:[...t])(n!==ni||n.allowRecurse)&&(n.scheduler?n.scheduler():n.run())}const fy=Al("__proto__,__v_isRef,__isVue"),Ef=new Set(Object.getOwnPropertyNames(Symbol).map(t=>Symbol[t]).filter(Ml)),dy=$l(),py=$l(!1,!0),my=$l(!0),Tf=gy();function gy(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const r=Ct(this);for(let a=0,u=this.length;a<u;a++)ke(r,"get",a+"");const s=r[e](...n);return s===-1||s===!1?r[e](...n.map(Ct)):s}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){qi();const r=Ct(this)[e].apply(this,n);return ri(),r}}),t}function $l(t=!1,e=!1){return function(r,s,a){if(s==="__v_isReactive")return!t;if(s==="__v_isReadonly")return t;if(s==="__v_raw"&&a===(t?e?My:Mf:e?Nf:If).get(r))return r;const u=at(r);if(!t&&u&&Pt(Tf,s))return Reflect.get(Tf,s,a);const h=Reflect.get(r,s,a);return(Ml(s)?Ef.has(s):fy(s))||(t||ke(r,"get",s),e)?h:Ee(h)?!u||!kl(s)?h.value:h:re(h)?t?kf(h):Ur(h):h}}const _y=bf(),vy=bf(!0);function bf(t=!1){return function(n,r,s,a){let u=n[r];if(!t&&!Kl(s)&&(s=Ct(s),u=Ct(u),!at(n)&&Ee(u)&&!Ee(s)))return u.value=s,!0;const h=at(n)&&kl(r)?Number(r)<n.length:Pt(n,r),f=Reflect.set(n,r,s,a);return n===Ct(a)&&(h?zr(s,u)&&yn(n,"set",r,s):yn(n,"add",r,s)),f}}function yy(t,e){const n=Pt(t,e);t[e];const r=Reflect.deleteProperty(t,e);return r&&n&&yn(t,"delete",e,void 0),r}function wy(t,e){const n=Reflect.has(t,e);return(!Ml(e)||!Ef.has(e))&&ke(t,"has",e),n}function xy(t){return ke(t,"iterate",at(t)?"length":ii),Reflect.ownKeys(t)}const Pf={get:dy,set:_y,deleteProperty:yy,has:wy,ownKeys:xy},Ey={get:my,set(t,e){return!0},deleteProperty(t,e){return!0}},Ty=_e({},Pf,{get:py,set:vy}),Zl=t=>t,po=t=>Reflect.getPrototypeOf(t);function mo(t,e,n=!1,r=!1){t=t.__v_raw;const s=Ct(t),a=Ct(e);e!==a&&!n&&ke(s,"get",e),!n&&ke(s,"get",a);const{has:u}=po(s),h=r?Zl:n?jl:Vr;if(u.call(s,e))return h(t.get(e));if(u.call(s,a))return h(t.get(a));t!==s&&t.get(e)}function go(t,e=!1){const n=this.__v_raw,r=Ct(n),s=Ct(t);return t!==s&&!e&&ke(r,"has",t),!e&&ke(r,"has",s),t===s?n.has(t):n.has(t)||n.has(s)}function _o(t,e=!1){return t=t.__v_raw,!e&&ke(Ct(t),"iterate",ii),Reflect.get(t,"size",t)}function Sf(t){t=Ct(t);const e=Ct(this);return po(e).has.call(e,t)||(e.add(t),yn(e,"add",t,t)),this}function Af(t,e){e=Ct(e);const n=Ct(this),{has:r,get:s}=po(n);let a=r.call(n,t);a||(t=Ct(t),a=r.call(n,t));const u=s.call(n,t);return n.set(t,e),a?zr(e,u)&&yn(n,"set",t,e):yn(n,"add",t,e),this}function Cf(t){const e=Ct(this),{has:n,get:r}=po(e);let s=n.call(e,t);s||(t=Ct(t),s=n.call(e,t)),r&&r.call(e,t);const a=e.delete(t);return s&&yn(e,"delete",t,void 0),a}function Lf(){const t=Ct(this),e=t.size!==0,n=t.clear();return e&&yn(t,"clear",void 0,void 0),n}function vo(t,e){return function(r,s){const a=this,u=a.__v_raw,h=Ct(u),f=e?Zl:t?jl:Vr;return!t&&ke(h,"iterate",ii),u.forEach((p,m)=>r.call(s,f(p),f(m),a))}}function yo(t,e,n){return function(...r){const s=this.__v_raw,a=Ct(s),u=Hi(a),h=t==="entries"||t===Symbol.iterator&&u,f=t==="keys"&&u,p=s[t](...r),m=n?Zl:e?jl:Vr;return!e&&ke(a,"iterate",f?Fl:ii),{next(){const{value:_,done:v}=p.next();return v?{value:_,done:v}:{value:h?[m(_[0]),m(_[1])]:m(_),done:v}},[Symbol.iterator](){return this}}}}function On(t){return function(...e){return t==="delete"?!1:this}}function by(){const t={get(a){return mo(this,a)},get size(){return _o(this)},has:go,add:Sf,set:Af,delete:Cf,clear:Lf,forEach:vo(!1,!1)},e={get(a){return mo(this,a,!1,!0)},get size(){return _o(this)},has:go,add:Sf,set:Af,delete:Cf,clear:Lf,forEach:vo(!1,!0)},n={get(a){return mo(this,a,!0)},get size(){return _o(this,!0)},has(a){return go.call(this,a,!0)},add:On("add"),set:On("set"),delete:On("delete"),clear:On("clear"),forEach:vo(!0,!1)},r={get(a){return mo(this,a,!0,!0)},get size(){return _o(this,!0)},has(a){return go.call(this,a,!0)},add:On("add"),set:On("set"),delete:On("delete"),clear:On("clear"),forEach:vo(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(a=>{t[a]=yo(a,!1,!1),n[a]=yo(a,!0,!1),e[a]=yo(a,!1,!0),r[a]=yo(a,!0,!0)}),[t,n,e,r]}const[Py,Sy,Ay,Cy]=by();function ql(t,e){const n=e?t?Cy:Ay:t?Sy:Py;return(r,s,a)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(Pt(n,s)&&s in r?n:r,s,a)}const Ly={get:ql(!1,!1)},Iy={get:ql(!1,!0)},Ny={get:ql(!0,!1)},If=new WeakMap,Nf=new WeakMap,Mf=new WeakMap,My=new WeakMap;function ky(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Ry(t){return t.__v_skip||!Object.isExtensible(t)?0:ky(ny(t))}function Ur(t){return t&&t.__v_isReadonly?t:Wl(t,!1,Pf,Ly,If)}function Oy(t){return Wl(t,!1,Ty,Iy,Nf)}function kf(t){return Wl(t,!0,Ey,Ny,Mf)}function Wl(t,e,n,r,s){if(!re(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const a=s.get(t);if(a)return a;const u=Ry(t);if(u===0)return t;const h=new Proxy(t,u===2?r:n);return s.set(t,h),h}function Wi(t){return Kl(t)?Wi(t.__v_raw):!!(t&&t.__v_isReactive)}function Kl(t){return!!(t&&t.__v_isReadonly)}function Rf(t){return Wi(t)||Kl(t)}function Ct(t){const e=t&&t.__v_raw;return e?Ct(e):t}function Of(t){return ho(t,"__v_skip",!0),t}const Vr=t=>re(t)?Ur(t):t,jl=t=>re(t)?kf(t):t;function Df(t){wf()&&(t=Ct(t),t.dep||(t.dep=Dl()),xf(t.dep))}function zf(t,e){t=Ct(t),t.dep&&Hl(t.dep)}function Ee(t){return Boolean(t&&t.__v_isRef===!0)}function Dy(t){return Bf(t,!1)}function zy(t){return Bf(t,!0)}function Bf(t,e){return Ee(t)?t:new By(t,e)}class By{constructor(e,n){this._shallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:Ct(e),this._value=n?e:Vr(e)}get value(){return Df(this),this._value}set value(e){e=this._shallow?e:Ct(e),zr(e,this._rawValue)&&(this._rawValue=e,this._value=this._shallow?e:Vr(e),zf(this))}}function Hr(t){return Ee(t)?t.value:t}const Fy={get:(t,e,n)=>Hr(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return Ee(s)&&!Ee(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function Ff(t){return Wi(t)?t:new Proxy(t,Fy)}class Uy{constructor(e,n,r){this._setter=n,this.dep=void 0,this._dirty=!0,this.__v_isRef=!0,this.effect=new Ul(e,()=>{this._dirty||(this._dirty=!0,zf(this))}),this.__v_isReadonly=r}get value(){const e=Ct(this);return Df(e),e._dirty&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function rn(t,e){let n,r;const s=ht(t);return s?(n=t,r=qe):(n=t.get,r=t.set),new Uy(n,r,s||!r)}Promise.resolve();function Vy(t,e,...n){const r=t.vnode.props||Vt;let s=n;const a=e.startsWith("update:"),u=a&&e.slice(7);if(u&&u in r){const m=`${u==="modelValue"?"model":u}Modifiers`,{number:_,trim:v}=r[m]||Vt;v?s=n.map(x=>x.trim()):_&&(s=n.map(sy))}let h,f=r[h=Rl(e)]||r[h=Rl(nn(e))];!f&&a&&(f=r[h=Rl($i(e))]),f&&Ve(f,t,6,s);const p=r[h+"Once"];if(p){if(!t.emitted)t.emitted={};else if(t.emitted[h])return;t.emitted[h]=!0,Ve(p,t,6,s)}}function Uf(t,e,n=!1){const r=e.emitsCache,s=r.get(t);if(s!==void 0)return s;const a=t.emits;let u={},h=!1;if(!ht(t)){const f=p=>{const m=Uf(p,e,!0);m&&(h=!0,_e(u,m))};!n&&e.mixins.length&&e.mixins.forEach(f),t.extends&&f(t.extends),t.mixins&&t.mixins.forEach(f)}return!a&&!h?(r.set(t,null),null):(at(a)?a.forEach(f=>u[f]=null):_e(u,a),r.set(t,u),u)}function Gl(t,e){return!t||!oo(e)?!1:(e=e.slice(2).replace(/Once$/,""),Pt(t,e[0].toLowerCase()+e.slice(1))||Pt(t,$i(e))||Pt(t,e))}let We=null,wo=null;function xo(t){const e=We;return We=t,wo=t&&t.type.__scopeId||null,e}function vC(t){wo=t}function yC(){wo=null}function Hy(t,e=We,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&dd(-1);const a=xo(e),u=t(...s);return xo(a),r._d&&dd(1),u};return r._n=!0,r._c=!0,r._d=!0,r}function Yl(t){const{type:e,vnode:n,proxy:r,withProxy:s,props:a,propsOptions:[u],slots:h,attrs:f,emit:p,render:m,renderCache:_,data:v,setupState:x,ctx:A,inheritAttrs:C}=t;let R,V;const Y=xo(t);try{if(n.shapeFlag&4){const ot=s||r;R=on(m.call(ot,ot,_,a,x,v,A)),V=f}else{const ot=e;R=on(ot.length>1?ot(a,{attrs:f,slots:h,emit:p}):ot(a,null)),V=e.props?f:$y(f)}}catch(ot){$r.length=0,Mo(ot,t,1),R=Re(zn)}let Q=R;if(V&&C!==!1){const ot=Object.keys(V),{shapeFlag:At}=Q;ot.length&&At&(1|6)&&(u&&ot.some(Il)&&(V=Zy(V,u)),Q=Ki(Q,V))}return n.dirs&&(Q.dirs=Q.dirs?Q.dirs.concat(n.dirs):n.dirs),n.transition&&(Q.transition=n.transition),R=Q,xo(Y),R}const $y=t=>{let e;for(const n in t)(n==="class"||n==="style"||oo(n))&&((e||(e={}))[n]=t[n]);return e},Zy=(t,e)=>{const n={};for(const r in t)(!Il(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function qy(t,e,n){const{props:r,children:s,component:a}=t,{props:u,children:h,patchFlag:f}=e,p=a.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&f>=0){if(f&1024)return!0;if(f&16)return r?Vf(r,u,p):!!u;if(f&8){const m=e.dynamicProps;for(let _=0;_<m.length;_++){const v=m[_];if(u[v]!==r[v]&&!Gl(p,v))return!0}}}else return(s||h)&&(!h||!h.$stable)?!0:r===u?!1:r?u?Vf(r,u,p):!0:!!u;return!1}function Vf(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const a=r[s];if(e[a]!==t[a]&&!Gl(n,a))return!0}return!1}function Wy({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const Ky=t=>t.__isSuspense;function jy(t,e){e&&e.pendingBranch?at(t)?e.effects.push(...t):e.effects.push(t):Ww(t)}function Eo(t,e){if(se){let n=se.provides;const r=se.parent&&se.parent.provides;r===n&&(n=se.provides=Object.create(r)),n[t]=e}}function Dn(t,e,n=!1){const r=se||We;if(r){const s=r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(s&&t in s)return s[t];if(arguments.length>1)return n&&ht(e)?e.call(r.proxy):e}}function Gy(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Kf(()=>{t.isMounted=!0}),jf(()=>{t.isUnmounting=!0}),t}const Ue=[Function,Array],Yy={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ue,onEnter:Ue,onAfterEnter:Ue,onEnterCancelled:Ue,onBeforeLeave:Ue,onLeave:Ue,onAfterLeave:Ue,onLeaveCancelled:Ue,onBeforeAppear:Ue,onAppear:Ue,onAfterAppear:Ue,onAppearCancelled:Ue},setup(t,{slots:e}){const n=Ow(),r=Gy();let s;return()=>{const a=e.default&&Zf(e.default(),!0);if(!a||!a.length)return;const u=Ct(t),{mode:h}=u,f=a[0];if(r.isLeaving)return Ql(f);const p=$f(f);if(!p)return Ql(f);const m=Xl(p,u,r,n);Jl(p,m);const _=n.subTree,v=_&&$f(_);let x=!1;const{getTransitionKey:A}=p.type;if(A){const C=A();s===void 0?s=C:C!==s&&(s=C,x=!0)}if(v&&v.type!==zn&&(!ui(p,v)||x)){const C=Xl(v,u,r,n);if(Jl(v,C),h==="out-in")return r.isLeaving=!0,C.afterLeave=()=>{r.isLeaving=!1,n.update()},Ql(f);h==="in-out"&&p.type!==zn&&(C.delayLeave=(R,V,Y)=>{const Q=Hf(r,v);Q[String(v.key)]=v,R._leaveCb=()=>{V(),R._leaveCb=void 0,delete m.delayedLeave},m.delayedLeave=Y})}return f}}},Xy=Yy;function Hf(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function Xl(t,e,n,r){const{appear:s,mode:a,persisted:u=!1,onBeforeEnter:h,onEnter:f,onAfterEnter:p,onEnterCancelled:m,onBeforeLeave:_,onLeave:v,onAfterLeave:x,onLeaveCancelled:A,onBeforeAppear:C,onAppear:R,onAfterAppear:V,onAppearCancelled:Y}=e,Q=String(t.key),ot=Hf(n,t),At=(mt,Kt)=>{mt&&Ve(mt,r,9,Kt)},Ht={mode:a,persisted:u,beforeEnter(mt){let Kt=h;if(!n.isMounted)if(s)Kt=C||h;else return;mt._leaveCb&&mt._leaveCb(!0);const Ft=ot[Q];Ft&&ui(t,Ft)&&Ft.el._leaveCb&&Ft.el._leaveCb(),At(Kt,[mt])},enter(mt){let Kt=f,Ft=p,le=m;if(!n.isMounted)if(s)Kt=R||f,Ft=V||p,le=Y||m;else return;let _t=!1;const Lt=mt._enterCb=Ye=>{_t||(_t=!0,Ye?At(le,[mt]):At(Ft,[mt]),Ht.delayedLeave&&Ht.delayedLeave(),mt._enterCb=void 0)};Kt?(Kt(mt,Lt),Kt.length<=1&&Lt()):Lt()},leave(mt,Kt){const Ft=String(t.key);if(mt._enterCb&&mt._enterCb(!0),n.isUnmounting)return Kt();At(_,[mt]);let le=!1;const _t=mt._leaveCb=Lt=>{le||(le=!0,Kt(),Lt?At(A,[mt]):At(x,[mt]),mt._leaveCb=void 0,ot[Ft]===t&&delete ot[Ft])};ot[Ft]=t,v?(v(mt,_t),v.length<=1&&_t()):_t()},clone(mt){return Xl(mt,e,n,r)}};return Ht}function Ql(t){if(To(t))return t=Ki(t),t.children=null,t}function $f(t){return To(t)?t.children?t.children[0]:void 0:t}function Jl(t,e){t.shapeFlag&6&&t.component?Jl(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Zf(t,e=!1){let n=[],r=0;for(let s=0;s<t.length;s++){const a=t[s];a.type===sn?(a.patchFlag&128&&r++,n=n.concat(Zf(a.children,e))):(e||a.type!==zn)&&n.push(a)}if(r>1)for(let s=0;s<n.length;s++)n[s].patchFlag=-2;return n}function qf(t){return ht(t)?{setup:t,name:t.name}:t}const tu=t=>!!t.type.__asyncLoader,To=t=>t.type.__isKeepAlive;function Qy(t,e){Wf(t,"a",e)}function Jy(t,e){Wf(t,"da",e)}function Wf(t,e,n=se){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(bo(e,r,n),n){let s=n.parent;for(;s&&s.parent;)To(s.parent.vnode)&&tw(r,e,n,s),s=s.parent}}function tw(t,e,n,r){const s=bo(e,t,r,!0);Gf(()=>{Nl(r[e],s)},n)}function bo(t,e,n=se,r=!1){if(n){const s=n[t]||(n[t]=[]),a=e.__weh||(e.__weh=(...u)=>{if(n.isUnmounted)return;qi(),ji(n);const h=Ve(e,n,t,u);return ci(),ri(),h});return r?s.unshift(a):s.push(a),a}}const wn=t=>(e,n=se)=>(!No||t==="sp")&&bo(t,e,n),ew=wn("bm"),Kf=wn("m"),nw=wn("bu"),iw=wn("u"),jf=wn("bum"),Gf=wn("um"),rw=wn("sp"),sw=wn("rtg"),ow=wn("rtc");function aw(t,e=se){bo("ec",t,e)}let eu=!0;function lw(t){const e=Qf(t),n=t.proxy,r=t.ctx;eu=!1,e.beforeCreate&&Yf(e.beforeCreate,t,"bc");const{data:s,computed:a,methods:u,watch:h,provide:f,inject:p,created:m,beforeMount:_,mounted:v,beforeUpdate:x,updated:A,activated:C,deactivated:R,beforeDestroy:V,beforeUnmount:Y,destroyed:Q,unmounted:ot,render:At,renderTracked:Ht,renderTriggered:mt,errorCaptured:Kt,serverPrefetch:Ft,expose:le,inheritAttrs:_t,components:Lt,directives:Ye,filters:ge}=e;if(p&&uw(p,r,null,t.appContext.config.unwrapInjectedRef),u)for(const xt in u){const H=u[xt];ht(H)&&(r[xt]=H.bind(n))}if(s){const xt=s.call(n,n);re(xt)&&(t.data=Ur(xt))}if(eu=!0,a)for(const xt in a){const H=a[xt],xe=ht(H)?H.bind(n,n):ht(H.get)?H.get.bind(n,n):qe,ct=!ht(H)&&ht(H.set)?H.set.bind(n):qe,yt=rn({get:xe,set:ct});Object.defineProperty(r,xt,{enumerable:!0,configurable:!0,get:()=>yt.value,set:jt=>yt.value=jt})}if(h)for(const xt in h)Xf(h[xt],r,n,xt);if(f){const xt=ht(f)?f.call(n):f;Reflect.ownKeys(xt).forEach(H=>{Eo(H,xt[H])})}m&&Yf(m,t,"c");function vt(xt,H){at(H)?H.forEach(xe=>xt(xe.bind(n))):H&&xt(H.bind(n))}if(vt(ew,_),vt(Kf,v),vt(nw,x),vt(iw,A),vt(Qy,C),vt(Jy,R),vt(aw,Kt),vt(ow,Ht),vt(sw,mt),vt(jf,Y),vt(Gf,ot),vt(rw,Ft),at(le))if(le.length){const xt=t.exposed||(t.exposed={});le.forEach(H=>{Object.defineProperty(xt,H,{get:()=>n[H],set:xe=>n[H]=xe})})}else t.exposed||(t.exposed={});At&&t.render===qe&&(t.render=At),_t!=null&&(t.inheritAttrs=_t),Lt&&(t.components=Lt),Ye&&(t.directives=Ye)}function uw(t,e,n=qe,r=!1){at(t)&&(t=nu(t));for(const s in t){const a=t[s];let u;re(a)?"default"in a?u=Dn(a.from||s,a.default,!0):u=Dn(a.from||s):u=Dn(a),Ee(u)&&r?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>u.value,set:h=>u.value=h}):e[s]=u}}function Yf(t,e,n){Ve(at(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function Xf(t,e,n,r){const s=r.includes(".")?Id(n,r):()=>n[r];if(ce(t)){const a=e[t];ht(a)&&Ro(s,a)}else if(ht(t))Ro(s,t.bind(n));else if(re(t))if(at(t))t.forEach(a=>Xf(a,e,n,r));else{const a=ht(t.handler)?t.handler.bind(n):e[t.handler];ht(a)&&Ro(s,a,t)}}function Qf(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:a,config:{optionMergeStrategies:u}}=t.appContext,h=a.get(e);let f;return h?f=h:!s.length&&!n&&!r?f=e:(f={},s.length&&s.forEach(p=>Po(f,p,u,!0)),Po(f,e,u)),a.set(e,f),f}function Po(t,e,n,r=!1){const{mixins:s,extends:a}=e;a&&Po(t,a,n,!0),s&&s.forEach(u=>Po(t,u,n,!0));for(const u in e)if(!(r&&u==="expose")){const h=cw[u]||n&&n[u];t[u]=h?h(t[u],e[u]):e[u]}return t}const cw={data:Jf,props:si,emits:si,methods:si,computed:si,beforeCreate:Te,created:Te,beforeMount:Te,mounted:Te,beforeUpdate:Te,updated:Te,beforeDestroy:Te,beforeUnmount:Te,destroyed:Te,unmounted:Te,activated:Te,deactivated:Te,errorCaptured:Te,serverPrefetch:Te,components:si,directives:si,watch:fw,provide:Jf,inject:hw};function Jf(t,e){return e?t?function(){return _e(ht(t)?t.call(this,this):t,ht(e)?e.call(this,this):e)}:e:t}function hw(t,e){return si(nu(t),nu(e))}function nu(t){if(at(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Te(t,e){return t?[...new Set([].concat(t,e))]:e}function si(t,e){return t?_e(_e(Object.create(null),t),e):e}function fw(t,e){if(!t)return e;if(!e)return t;const n=_e(Object.create(null),t);for(const r in e)n[r]=Te(t[r],e[r]);return n}function dw(t,e,n,r=!1){const s={},a={};ho(a,Co,1),t.propsDefaults=Object.create(null),td(t,e,s,a);for(const u in t.propsOptions[0])u in s||(s[u]=void 0);n?t.props=r?s:Oy(s):t.type.props?t.props=s:t.props=a,t.attrs=a}function pw(t,e,n,r){const{props:s,attrs:a,vnode:{patchFlag:u}}=t,h=Ct(s),[f]=t.propsOptions;let p=!1;if((r||u>0)&&!(u&16)){if(u&8){const m=t.vnode.dynamicProps;for(let _=0;_<m.length;_++){let v=m[_];const x=e[v];if(f)if(Pt(a,v))x!==a[v]&&(a[v]=x,p=!0);else{const A=nn(v);s[A]=iu(f,h,A,x,t,!1)}else x!==a[v]&&(a[v]=x,p=!0)}}}else{td(t,e,s,a)&&(p=!0);let m;for(const _ in h)(!e||!Pt(e,_)&&((m=$i(_))===_||!Pt(e,m)))&&(f?n&&(n[_]!==void 0||n[m]!==void 0)&&(s[_]=iu(f,h,_,void 0,t,!0)):delete s[_]);if(a!==h)for(const _ in a)(!e||!Pt(e,_))&&(delete a[_],p=!0)}p&&yn(t,"set","$attrs")}function td(t,e,n,r){const[s,a]=t.propsOptions;let u=!1,h;if(e)for(let f in e){if(lo(f))continue;const p=e[f];let m;s&&Pt(s,m=nn(f))?!a||!a.includes(m)?n[m]=p:(h||(h={}))[m]=p:Gl(t.emitsOptions,f)||(!(f in r)||p!==r[f])&&(r[f]=p,u=!0)}if(a){const f=Ct(n),p=h||Vt;for(let m=0;m<a.length;m++){const _=a[m];n[_]=iu(s,f,_,p[_],t,!Pt(p,_))}}return u}function iu(t,e,n,r,s,a){const u=t[n];if(u!=null){const h=Pt(u,"default");if(h&&r===void 0){const f=u.default;if(u.type!==Function&&ht(f)){const{propsDefaults:p}=s;n in p?r=p[n]:(ji(s),r=p[n]=f.call(null,e),ci())}else r=f}u[0]&&(a&&!h?r=!1:u[1]&&(r===""||r===$i(n))&&(r=!0))}return r}function ed(t,e,n=!1){const r=e.propsCache,s=r.get(t);if(s)return s;const a=t.props,u={},h=[];let f=!1;if(!ht(t)){const m=_=>{f=!0;const[v,x]=ed(_,e,!0);_e(u,v),x&&h.push(...x)};!n&&e.mixins.length&&e.mixins.forEach(m),t.extends&&m(t.extends),t.mixins&&t.mixins.forEach(m)}if(!a&&!f)return r.set(t,Vi),Vi;if(at(a))for(let m=0;m<a.length;m++){const _=nn(a[m]);nd(_)&&(u[_]=Vt)}else if(a)for(const m in a){const _=nn(m);if(nd(_)){const v=a[m],x=u[_]=at(v)||ht(v)?{type:v}:v;if(x){const A=sd(Boolean,x.type),C=sd(String,x.type);x[0]=A>-1,x[1]=C<0||A<C,(A>-1||Pt(x,"default"))&&h.push(_)}}}const p=[u,h];return r.set(t,p),p}function nd(t){return t[0]!=="$"}function id(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:t===null?"null":""}function rd(t,e){return id(t)===id(e)}function sd(t,e){return at(e)?e.findIndex(n=>rd(n,t)):ht(e)&&rd(e,t)?0:-1}const od=t=>t[0]==="_"||t==="$stable",ru=t=>at(t)?t.map(on):[on(t)],mw=(t,e,n)=>{const r=Hy((...s)=>ru(e(...s)),n);return r._c=!1,r},ad=(t,e,n)=>{const r=t._ctx;for(const s in t){if(od(s))continue;const a=t[s];if(ht(a))e[s]=mw(s,a,r);else if(a!=null){const u=ru(a);e[s]=()=>u}}},ld=(t,e)=>{const n=ru(e);t.slots.default=()=>n},gw=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=Ct(e),ho(e,"_",n)):ad(e,t.slots={})}else t.slots={},e&&ld(t,e);ho(t.slots,Co,1)},_w=(t,e,n)=>{const{vnode:r,slots:s}=t;let a=!0,u=Vt;if(r.shapeFlag&32){const h=e._;h?n&&h===1?a=!1:(_e(s,e),!n&&h===1&&delete s._):(a=!e.$stable,ad(e,s)),u=e}else e&&(ld(t,e),u={default:1});if(a)for(const h in s)!od(h)&&!(h in u)&&delete s[h]};function oi(t,e,n,r){const s=t.dirs,a=e&&e.dirs;for(let u=0;u<s.length;u++){const h=s[u];a&&(h.oldValue=a[u].value);let f=h.dir[r];f&&(qi(),Ve(f,n,8,[t.el,h,t,e]),ri())}}function ud(){return{app:null,config:{isNativeTag:Jv,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let vw=0;function yw(t,e){return function(r,s=null){s!=null&&!re(s)&&(s=null);const a=ud(),u=new Set;let h=!1;const f=a.app={_uid:vw++,_component:r,_props:s,_container:null,_context:a,_instance:null,version:jw,get config(){return a.config},set config(p){},use(p,...m){return u.has(p)||(p&&ht(p.install)?(u.add(p),p.install(f,...m)):ht(p)&&(u.add(p),p(f,...m))),f},mixin(p){return a.mixins.includes(p)||a.mixins.push(p),f},component(p,m){return m?(a.components[p]=m,f):a.components[p]},directive(p,m){return m?(a.directives[p]=m,f):a.directives[p]},mount(p,m,_){if(!h){const v=Re(r,s);return v.appContext=a,m&&e?e(v,p):t(v,p,_),h=!0,f._container=p,p.__vue_app__=f,cu(v.component)||v.component.proxy}},unmount(){h&&(t(null,f._container),delete f._container.__vue_app__)},provide(p,m){return a.provides[p]=m,f}};return f}}function su(t,e,n,r,s=!1){if(at(t)){t.forEach((v,x)=>su(v,e&&(at(e)?e[x]:e),n,r,s));return}if(tu(r)&&!s)return;const a=r.shapeFlag&4?cu(r.component)||r.component.proxy:r.el,u=s?null:a,{i:h,r:f}=t,p=e&&e.r,m=h.refs===Vt?h.refs={}:h.refs,_=h.setupState;if(p!=null&&p!==f&&(ce(p)?(m[p]=null,Pt(_,p)&&(_[p]=null)):Ee(p)&&(p.value=null)),ht(f))Fn(f,h,12,[u,m]);else{const v=ce(f),x=Ee(f);if(v||x){const A=()=>{if(t.f){const C=v?m[f]:f.value;s?at(C)&&Nl(C,a):at(C)?C.includes(a)||C.push(a):v?m[f]=[a]:(f.value=[a],t.k&&(m[t.k]=f.value))}else v?(m[f]=u,Pt(_,f)&&(_[f]=u)):Ee(f)&&(f.value=u,t.k&&(m[t.k]=u))};u?(A.id=-1,Le(A,n)):A()}}}const Le=jy;function ww(t){return xw(t)}function xw(t,e){const n=oy();n.__VUE__=!0;const{insert:r,remove:s,patchProp:a,createElement:u,createText:h,createComment:f,setText:p,setElementText:m,parentNode:_,nextSibling:v,setScopeId:x=qe,cloneNode:A,insertStaticContent:C}=t,R=(y,E,b,M=null,N=null,z=null,U=!1,O=null,B=!!E.dynamicChildren)=>{if(y===E)return;y&&!ui(y,E)&&(M=K(y),zt(y,N,z,!0),y=null),E.patchFlag===-2&&(B=!1,E.dynamicChildren=null);const{type:k,ref:G,shapeFlag:j}=E;switch(k){case ou:V(y,E,b,M);break;case zn:Y(y,E,b,M);break;case So:y==null&&Q(E,b,M,U);break;case sn:Ye(y,E,b,M,N,z,U,O,B);break;default:j&1?Ht(y,E,b,M,N,z,U,O,B):j&6?ge(y,E,b,M,N,z,U,O,B):(j&64||j&128)&&k.process(y,E,b,M,N,z,U,O,B,Nt)}G!=null&&N&&su(G,y&&y.ref,z,E||y,!E)},V=(y,E,b,M)=>{if(y==null)r(E.el=h(E.children),b,M);else{const N=E.el=y.el;E.children!==y.children&&p(N,E.children)}},Y=(y,E,b,M)=>{y==null?r(E.el=f(E.children||""),b,M):E.el=y.el},Q=(y,E,b,M)=>{[y.el,y.anchor]=C(y.children,E,b,M)},ot=({el:y,anchor:E},b,M)=>{let N;for(;y&&y!==E;)N=v(y),r(y,b,M),y=N;r(E,b,M)},At=({el:y,anchor:E})=>{let b;for(;y&&y!==E;)b=v(y),s(y),y=b;s(E)},Ht=(y,E,b,M,N,z,U,O,B)=>{U=U||E.type==="svg",y==null?mt(E,b,M,N,z,U,O,B):le(y,E,N,z,U,O,B)},mt=(y,E,b,M,N,z,U,O)=>{let B,k;const{type:G,props:j,shapeFlag:X,transition:et,patchFlag:ft,dirs:Rt}=y;if(y.el&&A!==void 0&&ft===-1)B=y.el=A(y.el);else{if(B=y.el=u(y.type,z,j&&j.is,j),X&8?m(B,y.children):X&16&&Ft(y.children,B,null,M,N,z&&G!=="foreignObject",U,O),Rt&&oi(y,null,M,"created"),j){for(const Ot in j)Ot!=="value"&&!lo(Ot)&&a(B,Ot,null,j[Ot],z,y.children,M,N,D);"value"in j&&a(B,"value",null,j.value),(k=j.onVnodeBeforeMount)&&an(k,M,y)}Kt(B,y,y.scopeId,U,M)}Rt&&oi(y,null,M,"beforeMount");const Et=(!N||N&&!N.pendingBranch)&&et&&!et.persisted;Et&&et.beforeEnter(B),r(B,E,b),((k=j&&j.onVnodeMounted)||Et||Rt)&&Le(()=>{k&&an(k,M,y),Et&&et.enter(B),Rt&&oi(y,null,M,"mounted")},N)},Kt=(y,E,b,M,N)=>{if(b&&x(y,b),M)for(let z=0;z<M.length;z++)x(y,M[z]);if(N){let z=N.subTree;if(E===z){const U=N.vnode;Kt(y,U,U.scopeId,U.slotScopeIds,N.parent)}}},Ft=(y,E,b,M,N,z,U,O,B=0)=>{for(let k=B;k<y.length;k++){const G=y[k]=O?Bn(y[k]):on(y[k]);R(null,G,E,b,M,N,z,U,O)}},le=(y,E,b,M,N,z,U)=>{const O=E.el=y.el;let{patchFlag:B,dynamicChildren:k,dirs:G}=E;B|=y.patchFlag&16;const j=y.props||Vt,X=E.props||Vt;let et;b&&ai(b,!1),(et=X.onVnodeBeforeUpdate)&&an(et,b,E,y),G&&oi(E,y,b,"beforeUpdate"),b&&ai(b,!0);const ft=N&&E.type!=="foreignObject";if(k?_t(y.dynamicChildren,k,O,b,M,ft,z):U||xe(y,E,O,null,b,M,ft,z,!1),B>0){if(B&16)Lt(O,E,j,X,b,M,N);else if(B&2&&j.class!==X.class&&a(O,"class",null,X.class,N),B&4&&a(O,"style",j.style,X.style,N),B&8){const Rt=E.dynamicProps;for(let Et=0;Et<Rt.length;Et++){const Ot=Rt[Et],Ce=j[Ot],hn=X[Ot];(hn!==Ce||Ot==="value")&&a(O,Ot,Ce,hn,N,y.children,b,M,D)}}B&1&&y.children!==E.children&&m(O,E.children)}else!U&&k==null&&Lt(O,E,j,X,b,M,N);((et=X.onVnodeUpdated)||G)&&Le(()=>{et&&an(et,b,E,y),G&&oi(E,y,b,"updated")},M)},_t=(y,E,b,M,N,z,U)=>{for(let O=0;O<E.length;O++){const B=y[O],k=E[O],G=B.el&&(B.type===sn||!ui(B,k)||B.shapeFlag&(6|64))?_(B.el):b;R(B,k,G,null,M,N,z,U,!0)}},Lt=(y,E,b,M,N,z,U)=>{if(b!==M){for(const O in M){if(lo(O))continue;const B=M[O],k=b[O];B!==k&&O!=="value"&&a(y,O,k,B,U,E.children,N,z,D)}if(b!==Vt)for(const O in b)!lo(O)&&!(O in M)&&a(y,O,b[O],null,U,E.children,N,z,D);"value"in M&&a(y,"value",b.value,M.value)}},Ye=(y,E,b,M,N,z,U,O,B)=>{const k=E.el=y?y.el:h(""),G=E.anchor=y?y.anchor:h("");let{patchFlag:j,dynamicChildren:X,slotScopeIds:et}=E;et&&(O=O?O.concat(et):et),y==null?(r(k,b,M),r(G,b,M),Ft(E.children,b,G,N,z,U,O,B)):j>0&&j&64&&X&&y.dynamicChildren?(_t(y.dynamicChildren,X,b,N,z,U,O),(E.key!=null||N&&E===N.subTree)&&cd(y,E,!0)):xe(y,E,b,G,N,z,U,O,B)},ge=(y,E,b,M,N,z,U,O,B)=>{E.slotScopeIds=O,y==null?E.shapeFlag&512?N.ctx.activate(E,b,M,U,B):Cn(E,b,M,N,z,U,B):vt(y,E,B)},Cn=(y,E,b,M,N,z,U)=>{const O=y.component=Rw(y,M,N);if(To(y)&&(O.ctx.renderer=Nt),Dw(O),O.asyncDep){if(N&&N.registerDep(O,xt),!y.el){const B=O.subTree=Re(zn);Y(null,B,E,b)}return}xt(O,y,E,b,N,z,U)},vt=(y,E,b)=>{const M=E.component=y.component;if(qy(y,E,b))if(M.asyncDep&&!M.asyncResolved){H(M,E,b);return}else M.next=E,Zw(M.update),M.update();else E.component=y.component,E.el=y.el,M.vnode=E},xt=(y,E,b,M,N,z,U)=>{const O=()=>{if(y.isMounted){let{next:G,bu:j,u:X,parent:et,vnode:ft}=y,Rt=G,Et;ai(y,!1),G?(G.el=ft.el,H(y,G,U)):G=ft,j&&Ol(j),(Et=G.props&&G.props.onVnodeBeforeUpdate)&&an(Et,et,G,ft),ai(y,!0);const Ot=Yl(y),Ce=y.subTree;y.subTree=Ot,R(Ce,Ot,_(Ce.el),K(Ce),y,N,z),G.el=Ot.el,Rt===null&&Wy(y,Ot.el),X&&Le(X,N),(Et=G.props&&G.props.onVnodeUpdated)&&Le(()=>an(Et,et,G,ft),N)}else{let G;const{el:j,props:X}=E,{bm:et,m:ft,parent:Rt}=y,Et=tu(E);if(ai(y,!1),et&&Ol(et),!Et&&(G=X&&X.onVnodeBeforeMount)&&an(G,Rt,E),ai(y,!0),j&&it){const Ot=()=>{y.subTree=Yl(y),it(j,y.subTree,y,N,null)};Et?E.type.__asyncLoader().then(()=>!y.isUnmounted&&Ot()):Ot()}else{const Ot=y.subTree=Yl(y);R(null,Ot,b,M,y,N,z),E.el=Ot.el}if(ft&&Le(ft,N),!Et&&(G=X&&X.onVnodeMounted)){const Ot=E;Le(()=>an(G,Rt,Ot),N)}E.shapeFlag&256&&y.a&&Le(y.a,N),y.isMounted=!0,E=b=M=null}},B=y.effect=new Ul(O,()=>Td(y.update),y.scope),k=y.update=B.run.bind(B);k.id=y.uid,ai(y,!0),k()},H=(y,E,b)=>{E.component=y;const M=y.vnode.props;y.vnode=E,y.next=null,pw(y,E.props,M,b),_w(y,E.children,b),qi(),pu(void 0,y.update),ri()},xe=(y,E,b,M,N,z,U,O,B=!1)=>{const k=y&&y.children,G=y?y.shapeFlag:0,j=E.children,{patchFlag:X,shapeFlag:et}=E;if(X>0){if(X&128){yt(k,j,b,M,N,z,U,O,B);return}else if(X&256){ct(k,j,b,M,N,z,U,O,B);return}}et&8?(G&16&&D(k,N,z),j!==k&&m(b,j)):G&16?et&16?yt(k,j,b,M,N,z,U,O,B):D(k,N,z,!0):(G&8&&m(b,""),et&16&&Ft(j,b,M,N,z,U,O,B))},ct=(y,E,b,M,N,z,U,O,B)=>{y=y||Vi,E=E||Vi;const k=y.length,G=E.length,j=Math.min(k,G);let X;for(X=0;X<j;X++){const et=E[X]=B?Bn(E[X]):on(E[X]);R(y[X],et,b,null,N,z,U,O,B)}k>G?D(y,N,z,!0,!1,j):Ft(E,b,M,N,z,U,O,B,j)},yt=(y,E,b,M,N,z,U,O,B)=>{let k=0;const G=E.length;let j=y.length-1,X=G-1;for(;k<=j&&k<=X;){const et=y[k],ft=E[k]=B?Bn(E[k]):on(E[k]);if(ui(et,ft))R(et,ft,b,null,N,z,U,O,B);else break;k++}for(;k<=j&&k<=X;){const et=y[j],ft=E[X]=B?Bn(E[X]):on(E[X]);if(ui(et,ft))R(et,ft,b,null,N,z,U,O,B);else break;j--,X--}if(k>j){if(k<=X){const et=X+1,ft=et<G?E[et].el:M;for(;k<=X;)R(null,E[k]=B?Bn(E[k]):on(E[k]),b,ft,N,z,U,O,B),k++}}else if(k>X)for(;k<=j;)zt(y[k],N,z,!0),k++;else{const et=k,ft=k,Rt=new Map;for(k=ft;k<=X;k++){const Ut=E[k]=B?Bn(E[k]):on(E[k]);Ut.key!=null&&Rt.set(Ut.key,k)}let Et,Ot=0;const Ce=X-ft+1;let hn=!1,Ai=0;const fn=new Array(Ce);for(k=0;k<Ce;k++)fn[k]=0;for(k=et;k<=j;k++){const Ut=y[k];if(Ot>=Ce){zt(Ut,N,z,!0);continue}let ue;if(Ut.key!=null)ue=Rt.get(Ut.key);else for(Et=ft;Et<=X;Et++)if(fn[Et-ft]===0&&ui(Ut,E[Et])){ue=Et;break}ue===void 0?zt(Ut,N,z,!0):(fn[ue-ft]=k+1,ue>=Ai?Ai=ue:hn=!0,R(Ut,E[ue],b,null,N,z,U,O,B),Ot++)}const br=hn?Ew(fn):Vi;for(Et=br.length-1,k=Ce-1;k>=0;k--){const Ut=ft+k,ue=E[Ut],Bs=Ut+1<G?E[Ut+1].el:M;fn[k]===0?R(null,ue,b,Bs,N,z,U,O,B):hn&&(Et<0||k!==br[Et]?jt(ue,b,Bs,2):Et--)}}},jt=(y,E,b,M,N=null)=>{const{el:z,type:U,transition:O,children:B,shapeFlag:k}=y;if(k&6){jt(y.component.subTree,E,b,M);return}if(k&128){y.suspense.move(E,b,M);return}if(k&64){U.move(y,E,b,Nt);return}if(U===sn){r(z,E,b);for(let j=0;j<B.length;j++)jt(B[j],E,b,M);r(y.anchor,E,b);return}if(U===So){ot(y,E,b);return}if(M!==2&&k&1&&O)if(M===0)O.beforeEnter(z),r(z,E,b),Le(()=>O.enter(z),N);else{const{leave:j,delayLeave:X,afterLeave:et}=O,ft=()=>r(z,E,b),Rt=()=>{j(z,()=>{ft(),et&&et()})};X?X(z,ft,Rt):Rt()}else r(z,E,b)},zt=(y,E,b,M=!1,N=!1)=>{const{type:z,props:U,ref:O,children:B,dynamicChildren:k,shapeFlag:G,patchFlag:j,dirs:X}=y;if(O!=null&&su(O,null,b,y,!0),G&256){E.ctx.deactivate(y);return}const et=G&1&&X,ft=!tu(y);let Rt;if(ft&&(Rt=U&&U.onVnodeBeforeUnmount)&&an(Rt,E,y),G&6)F(y.component,b,M);else{if(G&128){y.suspense.unmount(b,M);return}et&&oi(y,null,E,"beforeUnmount"),G&64?y.type.remove(y,E,b,N,Nt,M):k&&(z!==sn||j>0&&j&64)?D(k,E,b,!1,!0):(z===sn&&j&(128|256)||!N&&G&16)&&D(B,E,b),M&&Gt(y)}(ft&&(Rt=U&&U.onVnodeUnmounted)||et)&&Le(()=>{Rt&&an(Rt,E,y),et&&oi(y,null,E,"unmounted")},b)},Gt=y=>{const{type:E,el:b,anchor:M,transition:N}=y;if(E===sn){S(b,M);return}if(E===So){At(y);return}const z=()=>{s(b),N&&!N.persisted&&N.afterLeave&&N.afterLeave()};if(y.shapeFlag&1&&N&&!N.persisted){const{leave:U,delayLeave:O}=N,B=()=>U(b,z);O?O(y.el,z,B):B()}else z()},S=(y,E)=>{let b;for(;y!==E;)b=v(y),s(y),y=b;s(E)},F=(y,E,b)=>{const{bum:M,scope:N,update:z,subTree:U,um:O}=y;M&&Ol(M),N.stop(),z&&(z.active=!1,zt(U,y,E,b)),O&&Le(O,E),Le(()=>{y.isUnmounted=!0},E),E&&E.pendingBranch&&!E.isUnmounted&&y.asyncDep&&!y.asyncResolved&&y.suspenseId===E.pendingId&&(E.deps--,E.deps===0&&E.resolve())},D=(y,E,b,M=!1,N=!1,z=0)=>{for(let U=z;U<y.length;U++)zt(y[U],E,b,M,N)},K=y=>y.shapeFlag&6?K(y.component.subTree):y.shapeFlag&128?y.suspense.next():v(y.anchor||y.el),It=(y,E,b)=>{y==null?E._vnode&&zt(E._vnode,null,null,!0):R(E._vnode||null,y,E,null,null,null,b),Sd(),E._vnode=y},Nt={p:R,um:zt,m:jt,r:Gt,mt:Cn,mc:Ft,pc:xe,pbc:_t,n:K,o:t};let lt,it;return e&&([lt,it]=e(Nt)),{render:It,hydrate:lt,createApp:yw(It,lt)}}function ai({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function cd(t,e,n=!1){const r=t.children,s=e.children;if(at(r)&&at(s))for(let a=0;a<r.length;a++){const u=r[a];let h=s[a];h.shapeFlag&1&&!h.dynamicChildren&&((h.patchFlag<=0||h.patchFlag===32)&&(h=s[a]=Bn(s[a]),h.el=u.el),n||cd(u,h))}}function Ew(t){const e=t.slice(),n=[0];let r,s,a,u,h;const f=t.length;for(r=0;r<f;r++){const p=t[r];if(p!==0){if(s=n[n.length-1],t[s]<p){e[r]=s,n.push(r);continue}for(a=0,u=n.length-1;a<u;)h=a+u>>1,t[n[h]]<p?a=h+1:u=h;p<t[n[a]]&&(a>0&&(e[r]=n[a-1]),n[a]=r)}}for(a=n.length,u=n[a-1];a-- >0;)n[a]=u,u=e[u];return n}const Tw=t=>t.__isTeleport,hd="components";function wC(t,e){return Pw(hd,t,!0,e)||t}const bw=Symbol();function Pw(t,e,n=!0,r=!1){const s=We||se;if(s){const a=s.type;if(t===hd){const h=Uw(a);if(h&&(h===e||h===nn(e)||h===co(nn(e))))return a}const u=fd(s[t]||a[t],e)||fd(s.appContext[t],e);return!u&&r?a:u}}function fd(t,e){return t&&(t[e]||t[nn(e)]||t[co(nn(e))])}const sn=Symbol(void 0),ou=Symbol(void 0),zn=Symbol(void 0),So=Symbol(void 0),$r=[];let li=null;function xC(t=!1){$r.push(li=t?null:[])}function Sw(){$r.pop(),li=$r[$r.length-1]||null}let Ao=1;function dd(t){Ao+=t}function pd(t){return t.dynamicChildren=Ao>0?li||Vi:null,Sw(),Ao>0&&li&&li.push(t),t}function EC(t,e,n,r,s,a){return pd(gd(t,e,n,r,s,a,!0))}function TC(t,e,n,r,s){return pd(Re(t,e,n,r,s,!0))}function au(t){return t?t.__v_isVNode===!0:!1}function ui(t,e){return t.type===e.type&&t.key===e.key}const Co="__vInternal",md=({key:t})=>t!=null?t:null,Lo=({ref:t,ref_key:e,ref_for:n})=>t!=null?ce(t)||Ee(t)||ht(t)?{i:We,r:t,k:e,f:!!n}:t:null;function gd(t,e=null,n=null,r=0,s=null,a=t===sn?0:1,u=!1,h=!1){const f={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&md(e),ref:e&&Lo(e),scopeId:wo,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null};return h?(lu(f,n),a&128&&t.normalize(f)):n&&(f.shapeFlag|=ce(n)?8:16),Ao>0&&!u&&li&&(f.patchFlag>0||a&6)&&f.patchFlag!==32&&li.push(f),f}const Re=Aw;function Aw(t,e=null,n=null,r=0,s=null,a=!1){if((!t||t===bw)&&(t=zn),au(t)){const h=Ki(t,e,!0);return n&&lu(h,n),h}if(Vw(t)&&(t=t.__vccOpts),e){e=Cw(e);let{class:h,style:f}=e;h&&!ce(h)&&(e.class=Ll(h)),re(f)&&(Rf(f)&&!at(f)&&(f=_e({},f)),e.style=Cl(f))}const u=ce(t)?1:Ky(t)?128:Tw(t)?64:re(t)?4:ht(t)?2:0;return gd(t,e,n,r,s,u,a,!0)}function Cw(t){return t?Rf(t)||Co in t?_e({},t):t:null}function Ki(t,e,n=!1){const{props:r,ref:s,patchFlag:a,children:u}=t,h=e?Iw(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:h,key:h&&md(h),ref:e&&e.ref?n&&s?at(s)?s.concat(Lo(e)):[s,Lo(e)]:Lo(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:u,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==sn?a===-1?16:a|16:a,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Ki(t.ssContent),ssFallback:t.ssFallback&&Ki(t.ssFallback),el:t.el,anchor:t.anchor}}function Lw(t=" ",e=0){return Re(ou,null,t,e)}function bC(t,e){const n=Re(So,null,t);return n.staticCount=e,n}function on(t){return t==null||typeof t=="boolean"?Re(zn):at(t)?Re(sn,null,t.slice()):typeof t=="object"?Bn(t):Re(ou,null,String(t))}function Bn(t){return t.el===null||t.memo?t:Ki(t)}function lu(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(at(e))n=16;else if(typeof e=="object")if(r&(1|64)){const s=e.default;s&&(s._c&&(s._d=!1),lu(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!(Co in e)?e._ctx=We:s===3&&We&&(We.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else ht(e)?(e={default:e,_ctx:We},n=32):(e=String(e),r&64?(n=16,e=[Lw(e)]):n=8);t.children=e,t.shapeFlag|=n}function Iw(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=Ll([e.class,r.class]));else if(s==="style")e.style=Cl([e.style,r.style]);else if(oo(s)){const a=e[s],u=r[s];a!==u&&!(at(a)&&a.includes(u))&&(e[s]=a?[].concat(a,u):u)}else s!==""&&(e[s]=r[s])}return e}function an(t,e,n,r=null){Ve(t,e,7,[n,r])}function PC(t,e,n,r){let s;const a=n&&n[r];if(at(t)||ce(t)){s=new Array(t.length);for(let u=0,h=t.length;u<h;u++)s[u]=e(t[u],u,void 0,a&&a[u])}else if(typeof t=="number"){s=new Array(t);for(let u=0;u<t;u++)s[u]=e(u+1,u,void 0,a&&a[u])}else if(re(t))if(t[Symbol.iterator])s=Array.from(t,(u,h)=>e(u,h,void 0,a&&a[h]));else{const u=Object.keys(t);s=new Array(u.length);for(let h=0,f=u.length;h<f;h++){const p=u[h];s[h]=e(t[p],p,h,a&&a[h])}}else s=[];return n&&(n[r]=s),s}const uu=t=>t?_d(t)?cu(t)||t.proxy:uu(t.parent):null,Io=_e(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>uu(t.parent),$root:t=>uu(t.root),$emit:t=>t.emit,$options:t=>Qf(t),$forceUpdate:t=>()=>Td(t.update),$nextTick:t=>Ed.bind(t.proxy),$watch:t=>Kw.bind(t)}),Nw={get({_:t},e){const{ctx:n,setupState:r,data:s,props:a,accessCache:u,type:h,appContext:f}=t;let p;if(e[0]!=="$"){const x=u[e];if(x!==void 0)switch(x){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return a[e]}else{if(r!==Vt&&Pt(r,e))return u[e]=1,r[e];if(s!==Vt&&Pt(s,e))return u[e]=2,s[e];if((p=t.propsOptions[0])&&Pt(p,e))return u[e]=3,a[e];if(n!==Vt&&Pt(n,e))return u[e]=4,n[e];eu&&(u[e]=0)}}const m=Io[e];let _,v;if(m)return e==="$attrs"&&ke(t,"get",e),m(t);if((_=h.__cssModules)&&(_=_[e]))return _;if(n!==Vt&&Pt(n,e))return u[e]=4,n[e];if(v=f.config.globalProperties,Pt(v,e))return v[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:a}=t;if(s!==Vt&&Pt(s,e))s[e]=n;else if(r!==Vt&&Pt(r,e))r[e]=n;else if(Pt(t.props,e))return!1;return e[0]==="$"&&e.slice(1)in t?!1:(a[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:a}},u){let h;return!!n[u]||t!==Vt&&Pt(t,u)||e!==Vt&&Pt(e,u)||(h=a[0])&&Pt(h,u)||Pt(r,u)||Pt(Io,u)||Pt(s.config.globalProperties,u)}},Mw=ud();let kw=0;function Rw(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||Mw,a={uid:kw++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new ay(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ed(r,s),emitsOptions:Uf(r,s),emit:null,emitted:null,propsDefaults:Vt,inheritAttrs:r.inheritAttrs,ctx:Vt,data:Vt,props:Vt,attrs:Vt,slots:Vt,refs:Vt,setupState:Vt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=e?e.root:a,a.emit=Vy.bind(null,a),t.ce&&t.ce(a),a}let se=null;const Ow=()=>se||We,ji=t=>{se=t,t.scope.on()},ci=()=>{se&&se.scope.off(),se=null};function _d(t){return t.vnode.shapeFlag&4}let No=!1;function Dw(t,e=!1){No=e;const{props:n,children:r}=t.vnode,s=_d(t);dw(t,n,s,e),gw(t,r);const a=s?zw(t,e):void 0;return No=!1,a}function zw(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=Of(new Proxy(t.ctx,Nw));const{setup:r}=n;if(r){const s=t.setupContext=r.length>1?Fw(t):null;ji(t),qi();const a=Fn(r,t,0,[t.props,s]);if(ri(),ci(),df(a)){if(a.then(ci,ci),e)return a.then(u=>{vd(t,u,e)}).catch(u=>{Mo(u,t,0)});t.asyncDep=a}else vd(t,a,e)}else wd(t,e)}function vd(t,e,n){ht(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:re(e)&&(t.setupState=Ff(e)),wd(t,n)}let yd;function wd(t,e,n){const r=t.type;if(!t.render){if(!e&&yd&&!r.render){const s=r.template;if(s){const{isCustomElement:a,compilerOptions:u}=t.appContext.config,{delimiters:h,compilerOptions:f}=r,p=_e(_e({isCustomElement:a,delimiters:h},u),f);r.render=yd(s,p)}}t.render=r.render||qe}ji(t),qi(),lw(t),ri(),ci()}function Bw(t){return new Proxy(t.attrs,{get(e,n){return ke(t,"get","$attrs"),e[n]}})}function Fw(t){const e=r=>{t.exposed=r||{}};let n;return{get attrs(){return n||(n=Bw(t))},slots:t.slots,emit:t.emit,expose:e}}function cu(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(Ff(Of(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Io)return Io[n](t)}}))}function Uw(t){return ht(t)&&t.displayName||t.name}function Vw(t){return ht(t)&&"__vccOpts"in t}function Fn(t,e,n,r){let s;try{s=r?t(...r):t()}catch(a){Mo(a,e,n)}return s}function Ve(t,e,n,r){if(ht(t)){const a=Fn(t,e,n,r);return a&&df(a)&&a.catch(u=>{Mo(u,e,n)}),a}const s=[];for(let a=0;a<t.length;a++)s.push(Ve(t[a],e,n,r));return s}function Mo(t,e,n,r=!0){const s=e?e.vnode:null;if(e){let a=e.parent;const u=e.proxy,h=n;for(;a;){const p=a.ec;if(p){for(let m=0;m<p.length;m++)if(p[m](t,u,h)===!1)return}a=a.parent}const f=e.appContext.config.errorHandler;if(f){Fn(f,null,10,[t,u,h]);return}}Hw(t,n,s,r)}function Hw(t,e,n,r=!0){console.error(t)}let ko=!1,hu=!1;const Oe=[];let xn=0;const Zr=[];let qr=null,Gi=0;const Wr=[];let Un=null,Yi=0;const xd=Promise.resolve();let fu=null,du=null;function Ed(t){const e=fu||xd;return t?e.then(this?t.bind(this):t):e}function $w(t){let e=xn+1,n=Oe.length;for(;e<n;){const r=e+n>>>1;Kr(Oe[r])<t?e=r+1:n=r}return e}function Td(t){(!Oe.length||!Oe.includes(t,ko&&t.allowRecurse?xn+1:xn))&&t!==du&&(t.id==null?Oe.push(t):Oe.splice($w(t.id),0,t),bd())}function bd(){!ko&&!hu&&(hu=!0,fu=xd.then(Ad))}function Zw(t){const e=Oe.indexOf(t);e>xn&&Oe.splice(e,1)}function Pd(t,e,n,r){at(t)?n.push(...t):(!e||!e.includes(t,t.allowRecurse?r+1:r))&&n.push(t),bd()}function qw(t){Pd(t,qr,Zr,Gi)}function Ww(t){Pd(t,Un,Wr,Yi)}function pu(t,e=null){if(Zr.length){for(du=e,qr=[...new Set(Zr)],Zr.length=0,Gi=0;Gi<qr.length;Gi++)qr[Gi]();qr=null,Gi=0,du=null,pu(t,e)}}function Sd(t){if(Wr.length){const e=[...new Set(Wr)];if(Wr.length=0,Un){Un.push(...e);return}for(Un=e,Un.sort((n,r)=>Kr(n)-Kr(r)),Yi=0;Yi<Un.length;Yi++)Un[Yi]();Un=null,Yi=0}}const Kr=t=>t.id==null?1/0:t.id;function Ad(t){hu=!1,ko=!0,pu(t),Oe.sort((n,r)=>Kr(n)-Kr(r));const e=qe;try{for(xn=0;xn<Oe.length;xn++){const n=Oe[xn];n&&n.active!==!1&&Fn(n,null,14)}}finally{xn=0,Oe.length=0,Sd(),ko=!1,fu=null,(Oe.length||Zr.length||Wr.length)&&Ad(t)}}const Cd={};function Ro(t,e,n){return Ld(t,e,n)}function Ld(t,e,{immediate:n,deep:r,flush:s,onTrack:a,onTrigger:u}=Vt){const h=se;let f,p=!1,m=!1;if(Ee(t)?(f=()=>t.value,p=!!t._shallow):Wi(t)?(f=()=>t,r=!0):at(t)?(m=!0,p=t.some(Wi),f=()=>t.map(V=>{if(Ee(V))return V.value;if(Wi(V))return Xi(V);if(ht(V))return Fn(V,h,2)})):ht(t)?e?f=()=>Fn(t,h,2):f=()=>{if(!(h&&h.isUnmounted))return _&&_(),Ve(t,h,3,[v])}:f=qe,e&&r){const V=f;f=()=>Xi(V())}let _,v=V=>{_=R.onStop=()=>{Fn(V,h,4)}};if(No)return v=qe,e?n&&Ve(e,h,3,[f(),m?[]:void 0,v]):f(),qe;let x=m?[]:Cd;const A=()=>{if(!!R.active)if(e){const V=R.run();(r||p||(m?V.some((Y,Q)=>zr(Y,x[Q])):zr(V,x)))&&(_&&_(),Ve(e,h,3,[V,x===Cd?void 0:x,v]),x=V)}else R.run()};A.allowRecurse=!!e;let C;s==="sync"?C=A:s==="post"?C=()=>Le(A,h&&h.suspense):C=()=>{!h||h.isMounted?qw(A):A()};const R=new Ul(f,C);return e?n?A():x=R.run():s==="post"?Le(R.run.bind(R),h&&h.suspense):R.run(),()=>{R.stop(),h&&h.scope&&Nl(h.scope.effects,R)}}function Kw(t,e,n){const r=this.proxy,s=ce(t)?t.includes(".")?Id(r,t):()=>r[t]:t.bind(r,r);let a;ht(e)?a=e:(a=e.handler,n=e);const u=se;ji(this);const h=Ld(s,a.bind(r),n);return u?ji(u):ci(),h}function Id(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}function Xi(t,e){if(!re(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),Ee(t))Xi(t.value,e);else if(at(t))for(let n=0;n<t.length;n++)Xi(t[n],e);else if(ff(t)||Hi(t))t.forEach(n=>{Xi(n,e)});else if(mf(t))for(const n in t)Xi(t[n],e);return t}function Nd(t,e,n){const r=arguments.length;return r===2?re(e)&&!at(e)?au(e)?Re(t,null,[e]):Re(t,e):Re(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&au(n)&&(n=[n]),Re(t,e,n))}const jw="3.2.26",Gw="http://www.w3.org/2000/svg",Qi=typeof document!="undefined"?document:null,Md=new Map,Yw={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e?Qi.createElementNS(Gw,t):Qi.createElement(t,n?{is:n}:void 0);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>Qi.createTextNode(t),createComment:t=>Qi.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Qi.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},cloneNode(t){const e=t.cloneNode(!0);return"_value"in t&&(e._value=t._value),e},insertStaticContent(t,e,n,r){const s=n?n.previousSibling:e.lastChild;let a=Md.get(t);if(!a){const u=Qi.createElement("template");if(u.innerHTML=r?`<svg>${t}</svg>`:t,a=u.content,r){const h=a.firstChild;for(;h.firstChild;)a.appendChild(h.firstChild);a.removeChild(h)}Md.set(t,a)}return e.insertBefore(a.cloneNode(!0),n),[s?s.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function Xw(t,e,n){const r=t._vtc;r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function Qw(t,e,n){const r=t.style,s=ce(n);if(n&&!s){for(const a in n)mu(r,a,n[a]);if(e&&!ce(e))for(const a in e)n[a]==null&&mu(r,a,"")}else{const a=r.display;s?e!==n&&(r.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(r.display=a)}}const kd=/\s*!important$/;function mu(t,e,n){if(at(n))n.forEach(r=>mu(t,e,r));else if(e.startsWith("--"))t.setProperty(e,n);else{const r=Jw(t,e);kd.test(n)?t.setProperty($i(r),n.replace(kd,""),"important"):t[r]=n}}const Rd=["Webkit","Moz","ms"],gu={};function Jw(t,e){const n=gu[e];if(n)return n;let r=nn(e);if(r!=="filter"&&r in t)return gu[e]=r;r=co(r);for(let s=0;s<Rd.length;s++){const a=Rd[s]+r;if(a in t)return gu[e]=a}return e}const Od="http://www.w3.org/1999/xlink";function t0(t,e,n,r,s){if(r&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(Od,e.slice(6,e.length)):t.setAttributeNS(Od,e,n);else{const a=Gv(e);n==null||a&&!cf(n)?t.removeAttribute(e):t.setAttribute(e,a?"":n)}}function e0(t,e,n,r,s,a,u){if(e==="innerHTML"||e==="textContent"){r&&u(r,s,a),t[e]=n==null?"":n;return}if(e==="value"&&t.tagName!=="PROGRESS"&&!t.tagName.includes("-")){t._value=n;const h=n==null?"":n;(t.value!==h||t.tagName==="OPTION")&&(t.value=h),n==null&&t.removeAttribute(e);return}if(n===""||n==null){const h=typeof t[e];if(h==="boolean"){t[e]=cf(n);return}else if(n==null&&h==="string"){t[e]="",t.removeAttribute(e);return}else if(h==="number"){try{t[e]=0}catch{}t.removeAttribute(e);return}}try{t[e]=n}catch{}}let Oo=Date.now,Dd=!1;if(typeof window!="undefined"){Oo()>document.createEvent("Event").timeStamp&&(Oo=()=>performance.now());const t=navigator.userAgent.match(/firefox\/(\d+)/i);Dd=!!(t&&Number(t[1])<=53)}let _u=0;const n0=Promise.resolve(),i0=()=>{_u=0},r0=()=>_u||(n0.then(i0),_u=Oo());function s0(t,e,n,r){t.addEventListener(e,n,r)}function o0(t,e,n,r){t.removeEventListener(e,n,r)}function a0(t,e,n,r,s=null){const a=t._vei||(t._vei={}),u=a[e];if(r&&u)u.value=r;else{const[h,f]=l0(e);if(r){const p=a[e]=u0(r,s);s0(t,h,p,f)}else u&&(o0(t,h,u,f),a[e]=void 0)}}const zd=/(?:Once|Passive|Capture)$/;function l0(t){let e;if(zd.test(t)){e={};let n;for(;n=t.match(zd);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[$i(t.slice(2)),e]}function u0(t,e){const n=r=>{const s=r.timeStamp||Oo();(Dd||s>=n.attached-1)&&Ve(c0(r,n.value),e,5,[r])};return n.value=t,n.attached=r0(),n}function c0(t,e){if(at(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r(s))}else return e}const Bd=/^on[a-z]/,h0=(t,e,n,r,s=!1,a,u,h,f)=>{e==="class"?Xw(t,r,s):e==="style"?Qw(t,n,r):oo(e)?Il(e)||a0(t,e,n,r,u):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):f0(t,e,r,s))?e0(t,e,r,a,u,h,f):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),t0(t,e,r,s))};function f0(t,e,n,r){return r?!!(e==="innerHTML"||e==="textContent"||e in t&&Bd.test(e)&&ht(n)):e==="spellcheck"||e==="draggable"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||Bd.test(e)&&ce(n)?!1:e in t}const d0={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Xy.props;const p0=_e({patchProp:h0},Yw);let Fd;function m0(){return Fd||(Fd=ww(p0))}const SC=(...t)=>{const e=m0().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=g0(r);if(!s)return;const a=e._component;!ht(a)&&!a.render&&!a.template&&(a.template=s.innerHTML),s.innerHTML="";const u=n(s,!1,s instanceof SVGElement);return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),u},e};function g0(t){return ce(t)?document.querySelector(t):t}/*!
  * vue-router v4.0.12
  * (c) 2021 Eduardo San Martin Morote
  * @license MIT
  */const Ud=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",Ji=t=>Ud?Symbol(t):"_vr_"+t,_0=Ji("rvlm"),Vd=Ji("rvd"),vu=Ji("r"),Hd=Ji("rl"),yu=Ji("rvl"),tr=typeof window!="undefined";function v0(t){return t.__esModule||Ud&&t[Symbol.toStringTag]==="Module"}const Bt=Object.assign;function wu(t,e){const n={};for(const r in e){const s=e[r];n[r]=Array.isArray(s)?s.map(t):t(s)}return n}const jr=()=>{},y0=/\/$/,w0=t=>t.replace(y0,"");function xu(t,e,n="/"){let r,s={},a="",u="";const h=e.indexOf("?"),f=e.indexOf("#",h>-1?h:0);return h>-1&&(r=e.slice(0,h),a=e.slice(h+1,f>-1?f:e.length),s=t(a)),f>-1&&(r=r||e.slice(0,f),u=e.slice(f,e.length)),r=b0(r!=null?r:e,n),{fullPath:r+(a&&"?")+a+u,path:r,query:s,hash:u}}function x0(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function $d(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function E0(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&er(e.matched[r],n.matched[s])&&Zd(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function er(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Zd(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!T0(t[n],e[n]))return!1;return!0}function T0(t,e){return Array.isArray(t)?qd(t,e):Array.isArray(e)?qd(e,t):t===e}function qd(t,e){return Array.isArray(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function b0(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/");let s=n.length-1,a,u;for(a=0;a<r.length;a++)if(u=r[a],!(s===1||u==="."))if(u==="..")s--;else break;return n.slice(0,s).join("/")+"/"+r.slice(a-(a===r.length?1:0)).join("/")}var Gr;(function(t){t.pop="pop",t.push="push"})(Gr||(Gr={}));var Yr;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Yr||(Yr={}));function P0(t){if(!t)if(tr){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),w0(t)}const S0=/^[^#]+#/;function A0(t,e){return t.replace(S0,"#")+e}function C0(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const Do=()=>({left:window.pageXOffset,top:window.pageYOffset});function L0(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=C0(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function Wd(t,e){return(history.state?history.state.position-e:-1)+t}const Eu=new Map;function I0(t,e){Eu.set(t,e)}function N0(t){const e=Eu.get(t);return Eu.delete(t),e}let M0=()=>location.protocol+"//"+location.host;function Kd(t,e){const{pathname:n,search:r,hash:s}=e,a=t.indexOf("#");if(a>-1){let h=s.includes(t.slice(a))?t.slice(a).length:1,f=s.slice(h);return f[0]!=="/"&&(f="/"+f),$d(f,"")}return $d(n,t)+r+s}function k0(t,e,n,r){let s=[],a=[],u=null;const h=({state:v})=>{const x=Kd(t,location),A=n.value,C=e.value;let R=0;if(v){if(n.value=x,e.value=v,u&&u===A){u=null;return}R=C?v.position-C.position:0}else r(x);s.forEach(V=>{V(n.value,A,{delta:R,type:Gr.pop,direction:R?R>0?Yr.forward:Yr.back:Yr.unknown})})};function f(){u=n.value}function p(v){s.push(v);const x=()=>{const A=s.indexOf(v);A>-1&&s.splice(A,1)};return a.push(x),x}function m(){const{history:v}=window;!v.state||v.replaceState(Bt({},v.state,{scroll:Do()}),"")}function _(){for(const v of a)v();a=[],window.removeEventListener("popstate",h),window.removeEventListener("beforeunload",m)}return window.addEventListener("popstate",h),window.addEventListener("beforeunload",m),{pauseListeners:f,listen:p,destroy:_}}function jd(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?Do():null}}function R0(t){const{history:e,location:n}=window,r={value:Kd(t,n)},s={value:e.state};s.value||a(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function a(f,p,m){const _=t.indexOf("#"),v=_>-1?(n.host&&document.querySelector("base")?t:t.slice(_))+f:M0()+t+f;try{e[m?"replaceState":"pushState"](p,"",v),s.value=p}catch(x){console.error(x),n[m?"replace":"assign"](v)}}function u(f,p){const m=Bt({},e.state,jd(s.value.back,f,s.value.forward,!0),p,{position:s.value.position});a(f,m,!0),r.value=f}function h(f,p){const m=Bt({},s.value,e.state,{forward:f,scroll:Do()});a(m.current,m,!0);const _=Bt({},jd(r.value,f,null),{position:m.position+1},p);a(f,_,!1),r.value=f}return{location:r,state:s,push:h,replace:u}}function O0(t){t=P0(t);const e=R0(t),n=k0(t,e.state,e.location,e.replace);function r(a,u=!0){u||n.pauseListeners(),history.go(a)}const s=Bt({location:"",base:t,go:r,createHref:A0.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function AC(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),O0(t)}function D0(t){return typeof t=="string"||t&&typeof t=="object"}function Gd(t){return typeof t=="string"||typeof t=="symbol"}const Vn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Yd=Ji("nf");var Xd;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Xd||(Xd={}));function nr(t,e){return Bt(new Error,{type:t,[Yd]:!0},e)}function hi(t,e){return t instanceof Error&&Yd in t&&(e==null||!!(t.type&e))}const Qd="[^/]+?",z0={sensitive:!1,strict:!1,start:!0,end:!0},B0=/[.+*?^${}()[\]/\\]/g;function F0(t,e){const n=Bt({},z0,e),r=[];let s=n.start?"^":"";const a=[];for(const p of t){const m=p.length?[]:[90];n.strict&&!p.length&&(s+="/");for(let _=0;_<p.length;_++){const v=p[_];let x=40+(n.sensitive?.25:0);if(v.type===0)_||(s+="/"),s+=v.value.replace(B0,"\\$&"),x+=40;else if(v.type===1){const{value:A,repeatable:C,optional:R,regexp:V}=v;a.push({name:A,repeatable:C,optional:R});const Y=V||Qd;if(Y!==Qd){x+=10;try{new RegExp(`(${Y})`)}catch(ot){throw new Error(`Invalid custom RegExp for param "${A}" (${Y}): `+ot.message)}}let Q=C?`((?:${Y})(?:/(?:${Y}))*)`:`(${Y})`;_||(Q=R&&p.length<2?`(?:/${Q})`:"/"+Q),R&&(Q+="?"),s+=Q,x+=20,R&&(x+=-8),C&&(x+=-20),Y===".*"&&(x+=-50)}m.push(x)}r.push(m)}if(n.strict&&n.end){const p=r.length-1;r[p][r[p].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&(s+="(?:/|$)");const u=new RegExp(s,n.sensitive?"":"i");function h(p){const m=p.match(u),_={};if(!m)return null;for(let v=1;v<m.length;v++){const x=m[v]||"",A=a[v-1];_[A.name]=x&&A.repeatable?x.split("/"):x}return _}function f(p){let m="",_=!1;for(const v of t){(!_||!m.endsWith("/"))&&(m+="/"),_=!1;for(const x of v)if(x.type===0)m+=x.value;else if(x.type===1){const{value:A,repeatable:C,optional:R}=x,V=A in p?p[A]:"";if(Array.isArray(V)&&!C)throw new Error(`Provided param "${A}" is an array but it is not repeatable (* or + modifiers)`);const Y=Array.isArray(V)?V.join("/"):V;if(!Y)if(R)v.length<2&&(m.endsWith("/")?m=m.slice(0,-1):_=!0);else throw new Error(`Missing required param "${A}"`);m+=Y}}return m}return{re:u,score:r,keys:a,parse:h,stringify:f}}function U0(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===40+40?-1:1:t.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function V0(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const a=U0(r[n],s[n]);if(a)return a;n++}return s.length-r.length}const H0={type:0,value:""},$0=/[a-zA-Z0-9_]/;function Z0(t){if(!t)return[[]];if(t==="/")return[[H0]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(x){throw new Error(`ERR (${n})/"${p}": ${x}`)}let n=0,r=n;const s=[];let a;function u(){a&&s.push(a),a=[]}let h=0,f,p="",m="";function _(){!p||(n===0?a.push({type:0,value:p}):n===1||n===2||n===3?(a.length>1&&(f==="*"||f==="+")&&e(`A repeatable param (${p}) must be alone in its segment. eg: '/:ids+.`),a.push({type:1,value:p,regexp:m,repeatable:f==="*"||f==="+",optional:f==="*"||f==="?"})):e("Invalid state to consume buffer"),p="")}function v(){p+=f}for(;h<t.length;){if(f=t[h++],f==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:f==="/"?(p&&_(),u()):f===":"?(_(),n=1):v();break;case 4:v(),n=r;break;case 1:f==="("?n=2:$0.test(f)?v():(_(),n=0,f!=="*"&&f!=="?"&&f!=="+"&&h--);break;case 2:f===")"?m[m.length-1]=="\\"?m=m.slice(0,-1)+f:n=3:m+=f;break;case 3:_(),n=0,f!=="*"&&f!=="?"&&f!=="+"&&h--,m="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${p}"`),_(),u(),s}function q0(t,e,n){const r=F0(Z0(t.path),n),s=Bt(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function W0(t,e){const n=[],r=new Map;e=tp({strict:!1,end:!0,sensitive:!1},e);function s(m){return r.get(m)}function a(m,_,v){const x=!v,A=j0(m);A.aliasOf=v&&v.record;const C=tp(e,m),R=[A];if("alias"in m){const Q=typeof m.alias=="string"?[m.alias]:m.alias;for(const ot of Q)R.push(Bt({},A,{components:v?v.record.components:A.components,path:ot,aliasOf:v?v.record:A}))}let V,Y;for(const Q of R){const{path:ot}=Q;if(_&&ot[0]!=="/"){const At=_.record.path,Ht=At[At.length-1]==="/"?"":"/";Q.path=_.record.path+(ot&&Ht+ot)}if(V=q0(Q,_,C),v?v.alias.push(V):(Y=Y||V,Y!==V&&Y.alias.push(V),x&&m.name&&!Jd(V)&&u(m.name)),"children"in A){const At=A.children;for(let Ht=0;Ht<At.length;Ht++)a(At[Ht],V,v&&v.children[Ht])}v=v||V,f(V)}return Y?()=>{u(Y)}:jr}function u(m){if(Gd(m)){const _=r.get(m);_&&(r.delete(m),n.splice(n.indexOf(_),1),_.children.forEach(u),_.alias.forEach(u))}else{const _=n.indexOf(m);_>-1&&(n.splice(_,1),m.record.name&&r.delete(m.record.name),m.children.forEach(u),m.alias.forEach(u))}}function h(){return n}function f(m){let _=0;for(;_<n.length&&V0(m,n[_])>=0;)_++;n.splice(_,0,m),m.record.name&&!Jd(m)&&r.set(m.record.name,m)}function p(m,_){let v,x={},A,C;if("name"in m&&m.name){if(v=r.get(m.name),!v)throw nr(1,{location:m});C=v.record.name,x=Bt(K0(_.params,v.keys.filter(Y=>!Y.optional).map(Y=>Y.name)),m.params),A=v.stringify(x)}else if("path"in m)A=m.path,v=n.find(Y=>Y.re.test(A)),v&&(x=v.parse(A),C=v.record.name);else{if(v=_.name?r.get(_.name):n.find(Y=>Y.re.test(_.path)),!v)throw nr(1,{location:m,currentLocation:_});C=v.record.name,x=Bt({},_.params,m.params),A=v.stringify(x)}const R=[];let V=v;for(;V;)R.unshift(V.record),V=V.parent;return{name:C,path:A,params:x,matched:R,meta:Y0(R)}}return t.forEach(m=>a(m)),{addRoute:a,resolve:p,removeRoute:u,getRoutes:h,getRecordMatcher:s}}function K0(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function j0(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:G0(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||{}:{default:t.component}}}function G0(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="boolean"?n:n[r];return e}function Jd(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function Y0(t){return t.reduce((e,n)=>Bt(e,n.meta),{})}function tp(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}const ep=/#/g,X0=/&/g,Q0=/\//g,J0=/=/g,tx=/\?/g,np=/\+/g,ex=/%5B/g,nx=/%5D/g,ip=/%5E/g,ix=/%60/g,rp=/%7B/g,rx=/%7C/g,sp=/%7D/g,sx=/%20/g;function Tu(t){return encodeURI(""+t).replace(rx,"|").replace(ex,"[").replace(nx,"]")}function ox(t){return Tu(t).replace(rp,"{").replace(sp,"}").replace(ip,"^")}function bu(t){return Tu(t).replace(np,"%2B").replace(sx,"+").replace(ep,"%23").replace(X0,"%26").replace(ix,"`").replace(rp,"{").replace(sp,"}").replace(ip,"^")}function ax(t){return bu(t).replace(J0,"%3D")}function lx(t){return Tu(t).replace(ep,"%23").replace(tx,"%3F")}function ux(t){return t==null?"":lx(t).replace(Q0,"%2F")}function zo(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function cx(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<r.length;++s){const a=r[s].replace(np," "),u=a.indexOf("="),h=zo(u<0?a:a.slice(0,u)),f=u<0?null:zo(a.slice(u+1));if(h in e){let p=e[h];Array.isArray(p)||(p=e[h]=[p]),p.push(f)}else e[h]=f}return e}function op(t){let e="";for(let n in t){const r=t[n];if(n=ax(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(Array.isArray(r)?r.map(a=>a&&bu(a)):[r&&bu(r)]).forEach(a=>{a!==void 0&&(e+=(e.length?"&":"")+n,a!=null&&(e+="="+a))})}return e}function hx(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=Array.isArray(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}function Xr(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t,reset:n}}function Hn(t,e,n,r,s){const a=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((u,h)=>{const f=_=>{_===!1?h(nr(4,{from:n,to:e})):_ instanceof Error?h(_):D0(_)?h(nr(2,{from:e,to:_})):(a&&r.enterCallbacks[s]===a&&typeof _=="function"&&a.push(_),u())},p=t.call(r&&r.instances[s],e,n,f);let m=Promise.resolve(p);t.length<3&&(m=m.then(f)),m.catch(_=>h(_))})}function Pu(t,e,n,r){const s=[];for(const a of t)for(const u in a.components){let h=a.components[u];if(!(e!=="beforeRouteEnter"&&!a.instances[u]))if(fx(h)){const p=(h.__vccOpts||h)[e];p&&s.push(Hn(p,n,r,a,u))}else{let f=h();s.push(()=>f.then(p=>{if(!p)return Promise.reject(new Error(`Couldn't resolve component "${u}" at "${a.path}"`));const m=v0(p)?p.default:p;a.components[u]=m;const v=(m.__vccOpts||m)[e];return v&&Hn(v,n,r,a,u)()}))}}return s}function fx(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function ap(t){const e=Dn(vu),n=Dn(Hd),r=rn(()=>e.resolve(Hr(t.to))),s=rn(()=>{const{matched:f}=r.value,{length:p}=f,m=f[p-1],_=n.matched;if(!m||!_.length)return-1;const v=_.findIndex(er.bind(null,m));if(v>-1)return v;const x=lp(f[p-2]);return p>1&&lp(m)===x&&_[_.length-1].path!==x?_.findIndex(er.bind(null,f[p-2])):v}),a=rn(()=>s.value>-1&&gx(n.params,r.value.params)),u=rn(()=>s.value>-1&&s.value===n.matched.length-1&&Zd(n.params,r.value.params));function h(f={}){return mx(f)?e[Hr(t.replace)?"replace":"push"](Hr(t.to)).catch(jr):Promise.resolve()}return{route:r,href:rn(()=>r.value.href),isActive:a,isExactActive:u,navigate:h}}const dx=qf({name:"RouterLink",props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:ap,setup(t,{slots:e}){const n=Ur(ap(t)),{options:r}=Dn(vu),s=rn(()=>({[up(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[up(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const a=e.default&&e.default(n);return t.custom?a:Nd("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},a)}}}),px=dx;function mx(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function gx(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!Array.isArray(s)||s.length!==r.length||r.some((a,u)=>a!==s[u]))return!1}return!0}function lp(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const up=(t,e,n)=>t!=null?t:e!=null?e:n,_x=qf({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},setup(t,{attrs:e,slots:n}){const r=Dn(yu),s=rn(()=>t.route||r.value),a=Dn(Vd,0),u=rn(()=>s.value.matched[a]);Eo(Vd,a+1),Eo(_0,u),Eo(yu,s);const h=Dy();return Ro(()=>[h.value,u.value,t.name],([f,p,m],[_,v,x])=>{p&&(p.instances[m]=f,v&&v!==p&&f&&f===_&&(p.leaveGuards.size||(p.leaveGuards=v.leaveGuards),p.updateGuards.size||(p.updateGuards=v.updateGuards))),f&&p&&(!v||!er(p,v)||!_)&&(p.enterCallbacks[m]||[]).forEach(A=>A(f))},{flush:"post"}),()=>{const f=s.value,p=u.value,m=p&&p.components[t.name],_=t.name;if(!m)return cp(n.default,{Component:m,route:f});const v=p.props[t.name],x=v?v===!0?f.params:typeof v=="function"?v(f):v:null,C=Nd(m,Bt({},x,e,{onVnodeUnmounted:R=>{R.component.isUnmounted&&(p.instances[_]=null)},ref:h}));return cp(n.default,{Component:C,route:f})||C}}});function cp(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const vx=_x;function CC(t){const e=W0(t.routes,t),n=t.parseQuery||cx,r=t.stringifyQuery||op,s=t.history,a=Xr(),u=Xr(),h=Xr(),f=zy(Vn);let p=Vn;tr&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const m=wu.bind(null,S=>""+S),_=wu.bind(null,ux),v=wu.bind(null,zo);function x(S,F){let D,K;return Gd(S)?(D=e.getRecordMatcher(S),K=F):K=S,e.addRoute(K,D)}function A(S){const F=e.getRecordMatcher(S);F&&e.removeRoute(F)}function C(){return e.getRoutes().map(S=>S.record)}function R(S){return!!e.getRecordMatcher(S)}function V(S,F){if(F=Bt({},F||f.value),typeof S=="string"){const it=xu(n,S,F.path),y=e.resolve({path:it.path},F),E=s.createHref(it.fullPath);return Bt(it,y,{params:v(y.params),hash:zo(it.hash),redirectedFrom:void 0,href:E})}let D;if("path"in S)D=Bt({},S,{path:xu(n,S.path,F.path).path});else{const it=Bt({},S.params);for(const y in it)it[y]==null&&delete it[y];D=Bt({},S,{params:_(S.params)}),F.params=_(F.params)}const K=e.resolve(D,F),It=S.hash||"";K.params=m(v(K.params));const Nt=x0(r,Bt({},S,{hash:ox(It),path:K.path})),lt=s.createHref(Nt);return Bt({fullPath:Nt,hash:It,query:r===op?hx(S.query):S.query||{}},K,{redirectedFrom:void 0,href:lt})}function Y(S){return typeof S=="string"?xu(n,S,f.value.path):Bt({},S)}function Q(S,F){if(p!==S)return nr(8,{from:F,to:S})}function ot(S){return mt(S)}function At(S){return ot(Bt(Y(S),{replace:!0}))}function Ht(S){const F=S.matched[S.matched.length-1];if(F&&F.redirect){const{redirect:D}=F;let K=typeof D=="function"?D(S):D;return typeof K=="string"&&(K=K.includes("?")||K.includes("#")?K=Y(K):{path:K},K.params={}),Bt({query:S.query,hash:S.hash,params:S.params},K)}}function mt(S,F){const D=p=V(S),K=f.value,It=S.state,Nt=S.force,lt=S.replace===!0,it=Ht(D);if(it)return mt(Bt(Y(it),{state:It,force:Nt,replace:lt}),F||D);const y=D;y.redirectedFrom=F;let E;return!Nt&&E0(r,K,D)&&(E=nr(16,{to:y,from:K}),ct(K,K,!0,!1)),(E?Promise.resolve(E):Ft(y,K)).catch(b=>hi(b)?b:xt(b,y,K)).then(b=>{if(b){if(hi(b,2))return mt(Bt(Y(b.to),{state:It,force:Nt,replace:lt}),F||y)}else b=_t(y,K,!0,lt,It);return le(y,K,b),b})}function Kt(S,F){const D=Q(S,F);return D?Promise.reject(D):Promise.resolve()}function Ft(S,F){let D;const[K,It,Nt]=yx(S,F);D=Pu(K.reverse(),"beforeRouteLeave",S,F);for(const it of K)it.leaveGuards.forEach(y=>{D.push(Hn(y,S,F))});const lt=Kt.bind(null,S,F);return D.push(lt),ir(D).then(()=>{D=[];for(const it of a.list())D.push(Hn(it,S,F));return D.push(lt),ir(D)}).then(()=>{D=Pu(It,"beforeRouteUpdate",S,F);for(const it of It)it.updateGuards.forEach(y=>{D.push(Hn(y,S,F))});return D.push(lt),ir(D)}).then(()=>{D=[];for(const it of S.matched)if(it.beforeEnter&&!F.matched.includes(it))if(Array.isArray(it.beforeEnter))for(const y of it.beforeEnter)D.push(Hn(y,S,F));else D.push(Hn(it.beforeEnter,S,F));return D.push(lt),ir(D)}).then(()=>(S.matched.forEach(it=>it.enterCallbacks={}),D=Pu(Nt,"beforeRouteEnter",S,F),D.push(lt),ir(D))).then(()=>{D=[];for(const it of u.list())D.push(Hn(it,S,F));return D.push(lt),ir(D)}).catch(it=>hi(it,8)?it:Promise.reject(it))}function le(S,F,D){for(const K of h.list())K(S,F,D)}function _t(S,F,D,K,It){const Nt=Q(S,F);if(Nt)return Nt;const lt=F===Vn,it=tr?history.state:{};D&&(K||lt?s.replace(S.fullPath,Bt({scroll:lt&&it&&it.scroll},It)):s.push(S.fullPath,It)),f.value=S,ct(S,F,D,lt),xe()}let Lt;function Ye(){Lt=s.listen((S,F,D)=>{const K=V(S),It=Ht(K);if(It){mt(Bt(It,{replace:!0}),K).catch(jr);return}p=K;const Nt=f.value;tr&&I0(Wd(Nt.fullPath,D.delta),Do()),Ft(K,Nt).catch(lt=>hi(lt,4|8)?lt:hi(lt,2)?(mt(lt.to,K).then(it=>{hi(it,4|16)&&!D.delta&&D.type===Gr.pop&&s.go(-1,!1)}).catch(jr),Promise.reject()):(D.delta&&s.go(-D.delta,!1),xt(lt,K,Nt))).then(lt=>{lt=lt||_t(K,Nt,!1),lt&&(D.delta?s.go(-D.delta,!1):D.type===Gr.pop&&hi(lt,4|16)&&s.go(-1,!1)),le(K,Nt,lt)}).catch(jr)})}let ge=Xr(),Cn=Xr(),vt;function xt(S,F,D){xe(S);const K=Cn.list();return K.length?K.forEach(It=>It(S,F,D)):console.error(S),Promise.reject(S)}function H(){return vt&&f.value!==Vn?Promise.resolve():new Promise((S,F)=>{ge.add([S,F])})}function xe(S){vt||(vt=!0,Ye(),ge.list().forEach(([F,D])=>S?D(S):F()),ge.reset())}function ct(S,F,D,K){const{scrollBehavior:It}=t;if(!tr||!It)return Promise.resolve();const Nt=!D&&N0(Wd(S.fullPath,0))||(K||!D)&&history.state&&history.state.scroll||null;return Ed().then(()=>It(S,F,Nt)).then(lt=>lt&&L0(lt)).catch(lt=>xt(lt,S,F))}const yt=S=>s.go(S);let jt;const zt=new Set;return{currentRoute:f,addRoute:x,removeRoute:A,hasRoute:R,getRoutes:C,resolve:V,options:t,push:ot,replace:At,go:yt,back:()=>yt(-1),forward:()=>yt(1),beforeEach:a.add,beforeResolve:u.add,afterEach:h.add,onError:Cn.add,isReady:H,install(S){const F=this;S.component("RouterLink",px),S.component("RouterView",vx),S.config.globalProperties.$router=F,Object.defineProperty(S.config.globalProperties,"$route",{enumerable:!0,get:()=>Hr(f)}),tr&&!jt&&f.value===Vn&&(jt=!0,ot(s.location).catch(It=>{}));const D={};for(const It in Vn)D[It]=rn(()=>f.value[It]);S.provide(vu,F),S.provide(Hd,Ur(D)),S.provide(yu,f);const K=S.unmount;zt.add(S),S.unmount=function(){zt.delete(S),zt.size<1&&(p=Vn,Lt&&Lt(),f.value=Vn,jt=!1,vt=!1),K()}}}}function ir(t){return t.reduce((e,n)=>e.then(()=>n()),Promise.resolve())}function yx(t,e){const n=[],r=[],s=[],a=Math.max(e.matched.length,t.matched.length);for(let u=0;u<a;u++){const h=e.matched[u];h&&(t.matched.find(p=>er(p,h))?r.push(h):n.push(h));const f=t.matched[u];f&&(e.matched.find(p=>er(p,f))||s.push(f))}return[n,r,s]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bo(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function xx(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Bo())}function Ex(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Tx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function bx(){return Bo().indexOf("Electron/")>=0}function Px(){const t=Bo();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Sx(){return Bo().indexOf("MSAppHost/")>=0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax="FirebaseError";class Su extends Error{constructor(e,n,r){super(n);this.code=e,this.customData=r,this.name=Ax,Object.setPrototypeOf(this,Su.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,hp.prototype.create)}}class hp{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,a=this.errors[e],u=a?Cx(a,r):"Error",h=`${this.serviceName}: ${u} (${s}).`;return new Su(s,h,r)}}function Cx(t,e){return t.replace(Lx,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Lx=/\{\$([^}]+)}/g;function Au(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const a=t[s],u=e[s];if(fp(a)&&fp(u)){if(!Au(a,u))return!1}else if(a!==u)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function fp(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dp(t){return t&&t._delegate?t._delegate:t}class Fo{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new wx;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Mx(e))try{this.getOrInitializeService({instanceIdentifier:fi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=fi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=fi){return this.instances.has(e)}getOptions(e=fi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,u]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(a);r===h&&u.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),a=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(s,a);const u=this.instances.get(s);return u&&e(u,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(!!r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Nx(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=fi){return this.component?this.component.multipleInstances?e:fi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Nx(t){return t===fi?void 0:t}function Mx(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Ix(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Mt||(Mt={}));const Rx={debug:Mt.DEBUG,verbose:Mt.VERBOSE,info:Mt.INFO,warn:Mt.WARN,error:Mt.ERROR,silent:Mt.SILENT},Ox=Mt.INFO,Dx={[Mt.DEBUG]:"log",[Mt.VERBOSE]:"log",[Mt.INFO]:"info",[Mt.WARN]:"warn",[Mt.ERROR]:"error"},zx=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Dx[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class pp{constructor(e){this.name=e,this._logLevel=Ox,this._logHandler=zx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Mt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Rx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Mt.DEBUG,...e),this._logHandler(this,Mt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Mt.VERBOSE,...e),this._logHandler(this,Mt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Mt.INFO,...e),this._logHandler(this,Mt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Mt.WARN,...e),this._logHandler(this,Mt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Mt.ERROR,...e),this._logHandler(this,Mt.ERROR,...e)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Fx(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Fx(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Cu="@firebase/app",mp="0.7.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lu=new pp("@firebase/app"),Ux="@firebase/app-compat",Vx="@firebase/analytics-compat",Hx="@firebase/analytics",$x="@firebase/app-check-compat",Zx="@firebase/app-check",qx="@firebase/auth",Wx="@firebase/auth-compat",Kx="@firebase/database",jx="@firebase/database-compat",Gx="@firebase/functions",Yx="@firebase/functions-compat",Xx="@firebase/installations",Qx="@firebase/installations-compat",Jx="@firebase/messaging",tE="@firebase/messaging-compat",eE="@firebase/performance",nE="@firebase/performance-compat",iE="@firebase/remote-config",rE="@firebase/remote-config-compat",sE="@firebase/storage",oE="@firebase/storage-compat",aE="@firebase/firestore",lE="@firebase/firestore-compat",uE="firebase",cE="9.4.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gp="[DEFAULT]",hE={[Cu]:"fire-core",[Ux]:"fire-core-compat",[Hx]:"fire-analytics",[Vx]:"fire-analytics-compat",[Zx]:"fire-app-check",[$x]:"fire-app-check-compat",[qx]:"fire-auth",[Wx]:"fire-auth-compat",[Kx]:"fire-rtdb",[jx]:"fire-rtdb-compat",[Gx]:"fire-fn",[Yx]:"fire-fn-compat",[Xx]:"fire-iid",[Qx]:"fire-iid-compat",[Jx]:"fire-fcm",[tE]:"fire-fcm-compat",[eE]:"fire-perf",[nE]:"fire-perf-compat",[iE]:"fire-rc",[rE]:"fire-rc-compat",[sE]:"fire-gcs",[oE]:"fire-gcs-compat",[aE]:"fire-fst",[lE]:"fire-fst-compat","fire-js":"fire-js",[uE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uo=new Map,Iu=new Map;function fE(t,e){try{t.container.addComponent(e)}catch(n){Lu.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Nu(t){const e=t.name;if(Iu.has(e))return Lu.debug(`There were multiple attempts to register component ${e}.`),!1;Iu.set(e,t);for(const n of Uo.values())fE(n,t);return!0}function dE(t,e){return t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function."},Vo=new hp("app","Firebase",pE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Fo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Vo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gE=cE;function LC(t,e={}){typeof e!="object"&&(e={name:e});const n=Object.assign({name:gp,automaticDataCollectionEnabled:!1},e),r=n.name;if(typeof r!="string"||!r)throw Vo.create("bad-app-name",{appName:String(r)});const s=Uo.get(r);if(s){if(Au(t,s.options)&&Au(n,s.config))return s;throw Vo.create("duplicate-app",{appName:r})}const a=new kx(r);for(const h of Iu.values())a.addComponent(h);const u=new mE(t,n,a);return Uo.set(r,u),u}function _E(t=gp){const e=Uo.get(t);if(!e)throw Vo.create("no-app",{appName:t});return e}function rr(t,e,n){var r;let s=(r=hE[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const a=s.match(/\s|\//),u=e.match(/\s|\//);if(a||u){const h=[`Unable to register library "${s}" with version "${e}":`];a&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Lu.warn(h.join(" "));return}Nu(new Fo(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vE(t){Nu(new Fo("platform-logger",e=>new Bx(e),"PRIVATE")),rr(Cu,mp,t),rr(Cu,mp,"esm2017"),rr("fire-js","")}vE("");var yE="firebase",wE="9.4.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rr(yE,wE,"app");var xE=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},W,Mu=Mu||{},rt=xE||self;function Ho(){}function ku(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Qr(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function EE(t){return Object.prototype.hasOwnProperty.call(t,Ru)&&t[Ru]||(t[Ru]=++TE)}var Ru="closure_uid_"+(1e9*Math.random()>>>0),TE=0;function bE(t,e,n){return t.call.apply(t.bind,arguments)}function PE(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),t.apply(e,s)}}return function(){return t.apply(e,arguments)}}function he(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?he=bE:he=PE,he.apply(null,arguments)}function $o(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function fe(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(r,s,a){for(var u=Array(arguments.length-2),h=2;h<arguments.length;h++)u[h-2]=arguments[h];return e.prototype[s].apply(r,u)}}function $n(){this.s=this.s,this.o=this.o}var SE=0,AE={};$n.prototype.s=!1;$n.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),SE!=0)){var t=EE(this);delete AE[t]}};$n.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const _p=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},vp=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){const r=t.length,s=typeof t=="string"?t.split(""):t;for(let a=0;a<r;a++)a in s&&e.call(n,s[a],a,t)};function CE(t){t:{var e=yT;const n=t.length,r=typeof t=="string"?t.split(""):t;for(let s=0;s<n;s++)if(s in r&&e.call(void 0,r[s],s,t)){e=s;break t}e=-1}return 0>e?null:typeof t=="string"?t.charAt(e):t[e]}function yp(t){return Array.prototype.concat.apply([],arguments)}function Ou(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function Zo(t){return/^[\s\xa0]*$/.test(t)}var wp=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function be(t,e){return t.indexOf(e)!=-1}function Du(t,e){return t<e?-1:t>e?1:0}var Pe;t:{var xp=rt.navigator;if(xp){var Ep=xp.userAgent;if(Ep){Pe=Ep;break t}}Pe=""}function zu(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function Tp(t){const e={};for(const n in t)e[n]=t[n];return e}var bp="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Pp(t,e){let n,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(n in r)t[n]=r[n];for(let a=0;a<bp.length;a++)n=bp[a],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Bu(t){return Bu[" "](t),t}Bu[" "]=Ho;function LE(t){var e=ME;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}var IE=be(Pe,"Opera"),sr=be(Pe,"Trident")||be(Pe,"MSIE"),Sp=be(Pe,"Edge"),Fu=Sp||sr,Ap=be(Pe,"Gecko")&&!(be(Pe.toLowerCase(),"webkit")&&!be(Pe,"Edge"))&&!(be(Pe,"Trident")||be(Pe,"MSIE"))&&!be(Pe,"Edge"),NE=be(Pe.toLowerCase(),"webkit")&&!be(Pe,"Edge");function Cp(){var t=rt.document;return t?t.documentMode:void 0}var qo;t:{var Uu="",Vu=function(){var t=Pe;if(Ap)return/rv:([^\);]+)(\)|;)/.exec(t);if(Sp)return/Edge\/([\d\.]+)/.exec(t);if(sr)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(NE)return/WebKit\/(\S+)/.exec(t);if(IE)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Vu&&(Uu=Vu?Vu[1]:""),sr){var Hu=Cp();if(Hu!=null&&Hu>parseFloat(Uu)){qo=String(Hu);break t}}qo=Uu}var ME={};function kE(){return LE(function(){let t=0;const e=wp(String(qo)).split("."),n=wp("9").split("."),r=Math.max(e.length,n.length);for(let u=0;t==0&&u<r;u++){var s=e[u]||"",a=n[u]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s[0].length==0&&a[0].length==0)break;t=Du(s[1].length==0?0:parseInt(s[1],10),a[1].length==0?0:parseInt(a[1],10))||Du(s[2].length==0,a[2].length==0)||Du(s[2],a[2]),s=s[3],a=a[3]}while(t==0)}return 0<=t})}var $u;if(rt.document&&sr){var Lp=Cp();$u=Lp||parseInt(qo,10)||void 0}else $u=void 0;var RE=$u,OE=function(){if(!rt.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{rt.addEventListener("test",Ho,e),rt.removeEventListener("test",Ho,e)}catch{}return t}();function ve(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}ve.prototype.h=function(){this.defaultPrevented=!0};function Jr(t,e){if(ve.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Ap){t:{try{Bu(e.nodeName);var s=!0;break t}catch{}s=!1}s||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:DE[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Jr.Z.h.call(this)}}fe(Jr,ve);var DE={2:"touch",3:"pen",4:"mouse"};Jr.prototype.h=function(){Jr.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var ts="closure_listenable_"+(1e6*Math.random()|0),zE=0;function BE(t,e,n,r,s){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=s,this.key=++zE,this.ca=this.fa=!1}function Wo(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function Ko(t){this.src=t,this.g={},this.h=0}Ko.prototype.add=function(t,e,n,r,s){var a=t.toString();t=this.g[a],t||(t=this.g[a]=[],this.h++);var u=qu(t,e,r,s);return-1<u?(e=t[u],n||(e.fa=!1)):(e=new BE(e,this.src,a,!!r,s),e.fa=n,t.push(e)),e};function Zu(t,e){var n=e.type;if(n in t.g){var r=t.g[n],s=_p(r,e),a;(a=0<=s)&&Array.prototype.splice.call(r,s,1),a&&(Wo(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function qu(t,e,n,r){for(var s=0;s<t.length;++s){var a=t[s];if(!a.ca&&a.listener==e&&a.capture==!!n&&a.ia==r)return s}return-1}var Wu="closure_lm_"+(1e6*Math.random()|0),Ku={};function Ip(t,e,n,r,s){if(r&&r.once)return Mp(t,e,n,r,s);if(Array.isArray(e)){for(var a=0;a<e.length;a++)Ip(t,e[a],n,r,s);return null}return n=Xu(n),t&&t[ts]?t.N(e,n,Qr(r)?!!r.capture:!!r,s):Np(t,e,n,!1,r,s)}function Np(t,e,n,r,s,a){if(!e)throw Error("Invalid event type");var u=Qr(s)?!!s.capture:!!s,h=Gu(t);if(h||(t[Wu]=h=new Ko(t)),n=h.add(e,n,r,u,a),n.proxy)return n;if(r=FE(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)OE||(s=u),s===void 0&&(s=!1),t.addEventListener(e.toString(),r,s);else if(t.attachEvent)t.attachEvent(Rp(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function FE(){function t(n){return e.call(t.src,t.listener,n)}var e=UE;return t}function Mp(t,e,n,r,s){if(Array.isArray(e)){for(var a=0;a<e.length;a++)Mp(t,e[a],n,r,s);return null}return n=Xu(n),t&&t[ts]?t.O(e,n,Qr(r)?!!r.capture:!!r,s):Np(t,e,n,!0,r,s)}function kp(t,e,n,r,s){if(Array.isArray(e))for(var a=0;a<e.length;a++)kp(t,e[a],n,r,s);else r=Qr(r)?!!r.capture:!!r,n=Xu(n),t&&t[ts]?(t=t.i,e=String(e).toString(),e in t.g&&(a=t.g[e],n=qu(a,n,r,s),-1<n&&(Wo(a[n]),Array.prototype.splice.call(a,n,1),a.length==0&&(delete t.g[e],t.h--)))):t&&(t=Gu(t))&&(e=t.g[e.toString()],t=-1,e&&(t=qu(e,n,r,s)),(n=-1<t?e[t]:null)&&ju(n))}function ju(t){if(typeof t!="number"&&t&&!t.ca){var e=t.src;if(e&&e[ts])Zu(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Rp(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Gu(e))?(Zu(n,t),n.h==0&&(n.src=null,e[Wu]=null)):Wo(t)}}}function Rp(t){return t in Ku?Ku[t]:Ku[t]="on"+t}function UE(t,e){if(t.ca)t=!0;else{e=new Jr(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&ju(t),t=n.call(r,e)}return t}function Gu(t){return t=t[Wu],t instanceof Ko?t:null}var Yu="__closure_events_fn_"+(1e9*Math.random()>>>0);function Xu(t){return typeof t=="function"?t:(t[Yu]||(t[Yu]=function(e){return t.handleEvent(e)}),t[Yu])}function oe(){$n.call(this),this.i=new Ko(this),this.P=this,this.I=null}fe(oe,$n);oe.prototype[ts]=!0;oe.prototype.removeEventListener=function(t,e,n,r){kp(this,t,e,n,r)};function de(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,typeof e=="string")e=new ve(e,t);else if(e instanceof ve)e.target=e.target||t;else{var s=e;e=new ve(r,t),Pp(e,s)}if(s=!0,n)for(var a=n.length-1;0<=a;a--){var u=e.g=n[a];s=jo(u,r,!0,e)&&s}if(u=e.g=t,s=jo(u,r,!0,e)&&s,s=jo(u,r,!1,e)&&s,n)for(a=0;a<n.length;a++)u=e.g=n[a],s=jo(u,r,!1,e)&&s}oe.prototype.M=function(){if(oe.Z.M.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Wo(n[r]);delete t.g[e],t.h--}}this.I=null};oe.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};oe.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function jo(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,a=0;a<e.length;++a){var u=e[a];if(u&&!u.ca&&u.capture==n){var h=u.listener,f=u.ia||u.src;u.fa&&Zu(t.i,u),s=h.call(f,r)!==!1&&s}}return s&&!r.defaultPrevented}var Qu=rt.JSON.stringify;function VE(){var t=Dp;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class HE{constructor(){this.h=this.g=null}add(e,n){const r=Op.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var Op=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new $E,t=>t.reset());class $E{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function ZE(t){rt.setTimeout(()=>{throw t},0)}function Ju(t,e){tc||qE(),ec||(tc(),ec=!0),Dp.add(t,e)}var tc;function qE(){var t=rt.Promise.resolve(void 0);tc=function(){t.then(WE)}}var ec=!1,Dp=new HE;function WE(){for(var t;t=VE();){try{t.h.call(t.g)}catch(n){ZE(n)}var e=Op;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}ec=!1}function Go(t,e){oe.call(this),this.h=t||1,this.g=e||rt,this.j=he(this.kb,this),this.l=Date.now()}fe(Go,oe);W=Go.prototype;W.da=!1;W.S=null;W.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),de(this,"tick"),this.da&&(nc(this),this.start()))}};W.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function nc(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}W.M=function(){Go.Z.M.call(this),nc(this),delete this.g};function ic(t,e,n){if(typeof t=="function")n&&(t=he(t,n));else if(t&&typeof t.handleEvent=="function")t=he(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:rt.setTimeout(t,e||0)}function zp(t){t.g=ic(()=>{t.g=null,t.i&&(t.i=!1,zp(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class KE extends $n{constructor(e,n){super();this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:zp(this)}M(){super.M(),this.g&&(rt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function es(t){$n.call(this),this.h=t,this.g={}}fe(es,$n);var Bp=[];function Fp(t,e,n,r){Array.isArray(n)||(n&&(Bp[0]=n.toString()),n=Bp);for(var s=0;s<n.length;s++){var a=Ip(e,n[s],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}}function Up(t){zu(t.g,function(e,n){this.g.hasOwnProperty(n)&&ju(e)},t),t.g={}}es.prototype.M=function(){es.Z.M.call(this),Up(this)};es.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Yo(){this.g=!0}Yo.prototype.Aa=function(){this.g=!1};function jE(t,e,n,r,s,a){t.info(function(){if(t.g)if(a)for(var u="",h=a.split("&"),f=0;f<h.length;f++){var p=h[f].split("=");if(1<p.length){var m=p[0];p=p[1];var _=m.split("_");u=2<=_.length&&_[1]=="type"?u+(m+"="+p+"&"):u+(m+"=redacted&")}}else u=null;else u=a;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+`
`+n+`
`+u})}function GE(t,e,n,r,s,a,u){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+`
`+n+`
`+a+" "+u})}function or(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+XE(t,n)+(r?" "+r:"")})}function YE(t,e){t.info(function(){return"TIMEOUT: "+e})}Yo.prototype.info=function(){};function XE(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var a=s[0];if(a!="noop"&&a!="stop"&&a!="close")for(var u=1;u<s.length;u++)s[u]=""}}}}return Qu(n)}catch{return e}}var di={},Vp=null;function Xo(){return Vp=Vp||new oe}di.Ma="serverreachability";function Hp(t){ve.call(this,di.Ma,t)}fe(Hp,ve);function ns(t){const e=Xo();de(e,new Hp(e,t))}di.STAT_EVENT="statevent";function $p(t,e){ve.call(this,di.STAT_EVENT,t),this.stat=e}fe($p,ve);function Se(t){const e=Xo();de(e,new $p(e,t))}di.Na="timingevent";function Zp(t,e){ve.call(this,di.Na,t),this.size=e}fe(Zp,ve);function is(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return rt.setTimeout(function(){t()},e)}var Qo={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},qp={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function rc(){}rc.prototype.h=null;function Wp(t){return t.h||(t.h=t.i())}function Kp(){}var rs={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function sc(){ve.call(this,"d")}fe(sc,ve);function oc(){ve.call(this,"c")}fe(oc,ve);var ac;function Jo(){}fe(Jo,rc);Jo.prototype.g=function(){return new XMLHttpRequest};Jo.prototype.i=function(){return{}};ac=new Jo;function ss(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new es(this),this.P=QE,t=Fu?125:void 0,this.W=new Go(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new jp}function jp(){this.i=null,this.g="",this.h=!1}var QE=45e3,lc={},ta={};W=ss.prototype;W.setTimeout=function(t){this.P=t};function uc(t,e,n){t.K=1,t.v=sa(En(e)),t.s=n,t.U=!0,Gp(t,null)}function Gp(t,e){t.F=Date.now(),os(t),t.A=En(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),rm(n.h,"t",r),t.C=0,n=t.l.H,t.h=new jp,t.g=Am(t.l,n?e:null,!t.s),0<t.O&&(t.L=new KE(he(t.Ia,t,t.g),t.O)),Fp(t.V,t.g,"readystatechange",t.gb),e=t.H?Tp(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),ns(1),jE(t.j,t.u,t.A,t.m,t.X,t.s)}W.gb=function(t){t=t.target;const e=this.L;e&&Tn(t)==3?e.l():this.Ia(t)};W.Ia=function(t){try{if(t==this.g)t:{const m=Tn(this.g);var e=this.g.Da();const _=this.g.ba();if(!(3>m)&&(m!=3||Fu||this.g&&(this.h.h||this.g.ga()||gm(this.g)))){this.I||m!=4||e==7||(e==8||0>=_?ns(3):ns(2)),ea(this);var n=this.g.ba();this.N=n;e:if(Yp(this)){var r=gm(this.g);t="";var s=r.length,a=Tn(this.g)==4;if(!this.h.i){if(typeof TextDecoder=="undefined"){pi(this),as(this);var u="";break e}this.h.i=new rt.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:a&&e==s-1});r.splice(0,s),this.h.g+=t,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=n==200,GE(this.j,this.u,this.A,this.m,this.X,m,n),this.i){if(this.$&&!this.J){e:{if(this.g){var h,f=this.g;if((h=f.g?f.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Zo(h)){var p=h;break e}}p=null}if(n=p)or(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,cc(this,n);else{this.i=!1,this.o=3,Se(12),pi(this),as(this);break t}}this.U?(Xp(this,m,u),Fu&&this.i&&m==3&&(Fp(this.V,this.W,"tick",this.fb),this.W.start())):(or(this.j,this.m,u,null),cc(this,u)),m==4&&pi(this),this.i&&!this.I&&(m==4?Tm(this.l,this):(this.i=!1,os(this)))}else n==400&&0<u.indexOf("Unknown SID")?(this.o=3,Se(12)):(this.o=0,Se(13)),pi(this),as(this)}}}catch{}finally{}};function Yp(t){return t.g?t.u=="GET"&&t.K!=2&&t.l.Ba:!1}function Xp(t,e,n){let r=!0,s;for(;!t.I&&t.C<n.length;)if(s=JE(t,n),s==ta){e==4&&(t.o=4,Se(14),r=!1),or(t.j,t.m,null,"[Incomplete Response]");break}else if(s==lc){t.o=4,Se(15),or(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else or(t.j,t.m,s,null),cc(t,s);Yp(t)&&s!=ta&&s!=lc&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,Se(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.aa&&(t.aa=!0,e=t.l,e.g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),xc(e),e.L=!0,Se(11))):(or(t.j,t.m,n,"[Invalid Chunked Response]"),pi(t),as(t))}W.fb=function(){if(this.g){var t=Tn(this.g),e=this.g.ga();this.C<e.length&&(ea(this),Xp(this,t,e),this.i&&t!=4&&os(this))}};function JE(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?ta:(n=Number(e.substring(n,r)),isNaN(n)?lc:(r+=1,r+n>e.length?ta:(e=e.substr(r,n),t.C=r+n,e)))}W.cancel=function(){this.I=!0,pi(this)};function os(t){t.Y=Date.now()+t.P,Qp(t,t.P)}function Qp(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=is(he(t.eb,t),e)}function ea(t){t.B&&(rt.clearTimeout(t.B),t.B=null)}W.eb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(YE(this.j,this.A),this.K!=2&&(ns(3),Se(17)),pi(this),this.o=2,as(this)):Qp(this,this.Y-t)};function as(t){t.l.G==0||t.I||Tm(t.l,t)}function pi(t){ea(t);var e=t.L;e&&typeof e.na=="function"&&e.na(),t.L=null,nc(t.W),Up(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function cc(t,e){try{var n=t.l;if(n.G!=0&&(n.g==t||dc(n.i,t))){if(n.I=t.N,!t.J&&dc(n.i,t)&&n.G==3){try{var r=n.Ca.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0)t:if(!n.u){if(n.g)if(n.g.F+3e3<t.F)ha(n),ua(n);else break t;wc(n),Se(18)}else n.ta=s[1],0<n.ta-n.U&&37500>s[2]&&n.N&&n.A==0&&!n.v&&(n.v=is(he(n.ab,n),6e3));if(1>=am(n.i)&&n.ka){try{n.ka()}catch{}n.ka=void 0}}else _i(n,11)}else if((t.J||n.g==t)&&ha(n),!Zo(e))for(s=n.Ca.g.parse(e),e=0;e<s.length;e++){let p=s[e];if(n.U=p[0],p=p[1],n.G==2)if(p[0]=="c"){n.J=p[1],n.la=p[2];const m=p[3];m!=null&&(n.ma=m,n.h.info("VER="+n.ma));const _=p[4];_!=null&&(n.za=_,n.h.info("SVER="+n.za));const v=p[5];v!=null&&typeof v=="number"&&0<v&&(r=1.5*v,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;const x=t.g;if(x){const A=x.g?x.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(A){var a=r.i;!a.g&&(be(A,"spdy")||be(A,"quic")||be(A,"h2"))&&(a.j=a.l,a.g=new Set,a.h&&(pc(a,a.h),a.h=null))}if(r.D){const C=x.g?x.g.getResponseHeader("X-HTTP-Session-Id"):null;C&&(r.sa=C,$t(r.F,r.D,C))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms")),r=n;var u=t;if(r.oa=Sm(r,r.H?r.la:null,r.W),u.J){lm(r.i,u);var h=u,f=r.K;f&&h.setTimeout(f),h.B&&(ea(h),os(h)),r.g=u}else xm(r);0<n.l.length&&ca(n)}else p[0]!="stop"&&p[0]!="close"||_i(n,7);else n.G==3&&(p[0]=="stop"||p[0]=="close"?p[0]=="stop"?_i(n,7):vc(n):p[0]!="noop"&&n.j&&n.j.wa(p),n.A=0)}}ns(4)}catch{}}function tT(t){if(t.R&&typeof t.R=="function")return t.R();if(typeof t=="string")return t.split("");if(ku(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function hc(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(ku(t)||typeof t=="string")vp(t,e,void 0);else{if(t.T&&typeof t.T=="function")var n=t.T();else if(t.R&&typeof t.R=="function")n=void 0;else if(ku(t)||typeof t=="string"){n=[];for(var r=t.length,s=0;s<r;s++)n.push(s)}else for(s in n=[],r=0,t)n[r++]=s;r=tT(t),s=r.length;for(var a=0;a<s;a++)e.call(void 0,r[a],n&&n[a],t)}}function ar(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof ar)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}W=ar.prototype;W.R=function(){fc(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t};W.T=function(){return fc(this),this.g.concat()};function fc(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];mi(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var s={};for(n=e=0;e<t.g.length;)r=t.g[e],mi(s,r)||(t.g[n++]=r,s[r]=1),e++;t.g.length=n}}W.get=function(t,e){return mi(this.h,t)?this.h[t]:e};W.set=function(t,e){mi(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e};W.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var s=n[r],a=this.get(s);t.call(e,a,s,this)}};function mi(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var Jp=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function eT(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),s=null;if(0<=r){var a=t[n].substring(0,r);s=t[n].substring(r+1)}else a=t[n];e(a,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function gi(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof gi){this.g=e!==void 0?e:t.g,na(this,t.j),this.s=t.s,ia(this,t.i),ra(this,t.m),this.l=t.l,e=t.h;var n=new cs;n.i=e.i,e.g&&(n.g=new ar(e.g),n.h=e.h),tm(this,n),this.o=t.o}else t&&(n=String(t).match(Jp))?(this.g=!!e,na(this,n[1]||"",!0),this.s=ls(n[2]||""),ia(this,n[3]||"",!0),ra(this,n[4]),this.l=ls(n[5]||"",!0),tm(this,n[6]||"",!0),this.o=ls(n[7]||"")):(this.g=!!e,this.h=new cs(null,this.g))}gi.prototype.toString=function(){var t=[],e=this.j;e&&t.push(us(e,em,!0),":");var n=this.i;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(us(e,em,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.i&&n.charAt(0)!="/"&&t.push("/"),t.push(us(n,n.charAt(0)=="/"?oT:sT,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",us(n,lT)),t.join("")};function En(t){return new gi(t)}function na(t,e,n){t.j=n?ls(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function ia(t,e,n){t.i=n?ls(e,!0):e}function ra(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function tm(t,e,n){e instanceof cs?(t.h=e,uT(t.h,t.g)):(n||(e=us(e,aT)),t.h=new cs(e,t.g))}function $t(t,e,n){t.h.set(e,n)}function sa(t){return $t(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function nT(t){return t instanceof gi?En(t):new gi(t,void 0)}function iT(t,e,n,r){var s=new gi(null,void 0);return t&&na(s,t),e&&ia(s,e),n&&ra(s,n),r&&(s.l=r),s}function ls(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function us(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,rT),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function rT(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var em=/[#\/\?@]/g,sT=/[#\?:]/g,oT=/[#\?]/g,aT=/[#\?@]/g,lT=/#/g;function cs(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Zn(t){t.g||(t.g=new ar,t.h=0,t.i&&eT(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}W=cs.prototype;W.add=function(t,e){Zn(this),this.i=null,t=lr(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function nm(t,e){Zn(t),e=lr(t,e),mi(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,t=t.g,mi(t.h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&fc(t)))}function im(t,e){return Zn(t),e=lr(t,e),mi(t.g.h,e)}W.forEach=function(t,e){Zn(this),this.g.forEach(function(n,r){vp(n,function(s){t.call(e,s,r,this)},this)},this)};W.T=function(){Zn(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var s=t[r],a=0;a<s.length;a++)n.push(e[r]);return n};W.R=function(t){Zn(this);var e=[];if(typeof t=="string")im(this,t)&&(e=yp(e,this.g.get(lr(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=yp(e,t[n])}return e};W.set=function(t,e){return Zn(this),this.i=null,t=lr(this,t),im(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};W.get=function(t,e){return t?(t=this.R(t),0<t.length?String(t[0]):e):e};function rm(t,e,n){nm(t,e),0<n.length&&(t.i=null,t.g.set(lr(t,e),Ou(n)),t.h+=n.length)}W.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],s=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var u=s;r[a]!==""&&(u+="="+encodeURIComponent(String(r[a]))),t.push(u)}}return this.i=t.join("&")};function lr(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function uT(t,e){e&&!t.j&&(Zn(t),t.i=null,t.g.forEach(function(n,r){var s=r.toLowerCase();r!=s&&(nm(this,r),rm(this,s,n))},t)),t.j=e}var cT=class{constructor(t,e){this.h=t,this.g=e}};function sm(t){this.l=t||hT,rt.PerformanceNavigationTiming?(t=rt.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(rt.g&&rt.g.Ea&&rt.g.Ea()&&rt.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var hT=10;function om(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function am(t){return t.h?1:t.g?t.g.size:0}function dc(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function pc(t,e){t.g?t.g.add(e):t.h=e}function lm(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}sm.prototype.cancel=function(){if(this.i=um(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function um(t){if(t.h!=null)return t.i.concat(t.h.D);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return Ou(t.i)}function mc(){}mc.prototype.stringify=function(t){return rt.JSON.stringify(t,void 0)};mc.prototype.parse=function(t){return rt.JSON.parse(t,void 0)};function fT(){this.g=new mc}function dT(t,e,n){const r=n||"";try{hc(t,function(s,a){let u=s;Qr(s)&&(u=Qu(s)),e.push(r+a+"="+encodeURIComponent(u))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function pT(t,e){const n=new Yo;if(rt.Image){const r=new Image;r.onload=$o(oa,n,r,"TestLoadImage: loaded",!0,e),r.onerror=$o(oa,n,r,"TestLoadImage: error",!1,e),r.onabort=$o(oa,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=$o(oa,n,r,"TestLoadImage: timeout",!1,e),rt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function oa(t,e,n,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function hs(t){this.l=t.$b||null,this.j=t.ib||!1}fe(hs,rc);hs.prototype.g=function(){return new aa(this.l,this.j)};hs.prototype.i=function(t){return function(){return t}}({});function aa(t,e){oe.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=gc,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}fe(aa,oe);var gc=0;W=aa.prototype;W.open=function(t,e){if(this.readyState!=gc)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,ds(this)};W.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||rt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))};W.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,fs(this)),this.readyState=gc};W.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,ds(this)),this.g&&(this.readyState=3,ds(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof rt.ReadableStream!="undefined"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;cm(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))};function cm(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}W.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?fs(this):ds(this),this.readyState==3&&cm(this)}};W.Ua=function(t){this.g&&(this.response=this.responseText=t,fs(this))};W.Ta=function(t){this.g&&(this.response=t,fs(this))};W.ha=function(){this.g&&fs(this)};function fs(t){t.readyState=4,t.l=null,t.j=null,t.A=null,ds(t)}W.setRequestHeader=function(t,e){this.v.append(t,e)};W.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};W.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function ds(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(aa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var mT=rt.JSON.parse;function te(t){oe.call(this),this.headers=new ar,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=hm,this.K=this.L=!1}fe(te,oe);var hm="",gT=/^https?$/i,_T=["POST","PUT"];W=te.prototype;W.ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ac.g(),this.C=this.u?Wp(this.u):Wp(ac),this.g.onreadystatechange=he(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(a){fm(this,a);return}t=n||"";const s=new ar(this.headers);r&&hc(r,function(a,u){s.set(u,a)}),r=CE(s.T()),n=rt.FormData&&t instanceof rt.FormData,!(0<=_p(_T,e))||r||n||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach(function(a,u){this.g.setRequestHeader(u,a)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{mm(this),0<this.B&&((this.K=vT(this.g))?(this.g.timeout=this.B,this.g.ontimeout=he(this.pa,this)):this.A=ic(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(a){fm(this,a)}};function vT(t){return sr&&kE()&&typeof t.timeout=="number"&&t.ontimeout!==void 0}function yT(t){return t.toLowerCase()=="content-type"}W.pa=function(){typeof Mu!="undefined"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,de(this,"timeout"),this.abort(8))};function fm(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,dm(t),la(t)}function dm(t){t.D||(t.D=!0,de(t,"complete"),de(t,"error"))}W.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,de(this,"complete"),de(this,"abort"),la(this))};W.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),la(this,!0)),te.Z.M.call(this)};W.Fa=function(){this.s||(this.F||this.v||this.l?pm(this):this.cb())};W.cb=function(){pm(this)};function pm(t){if(t.h&&typeof Mu!="undefined"&&(!t.C[1]||Tn(t)!=4||t.ba()!=2)){if(t.v&&Tn(t)==4)ic(t.Fa,0,t);else if(de(t,"readystatechange"),Tn(t)==4){t.h=!1;try{const h=t.ba();t:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var n;if(!(n=e)){var r;if(r=h===0){var s=String(t.H).match(Jp)[1]||null;if(!s&&rt.self&&rt.self.location){var a=rt.self.location.protocol;s=a.substr(0,a.length-1)}r=!gT.test(s?s.toLowerCase():"")}n=r}if(n)de(t,"complete"),de(t,"success");else{t.m=6;try{var u=2<Tn(t)?t.g.statusText:""}catch{u=""}t.j=u+" ["+t.ba()+"]",dm(t)}}finally{la(t)}}}}function la(t,e){if(t.g){mm(t);const n=t.g,r=t.C[0]?Ho:null;t.g=null,t.C=null,e||de(t,"ready");try{n.onreadystatechange=r}catch{}}}function mm(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(rt.clearTimeout(t.A),t.A=null)}function Tn(t){return t.g?t.g.readyState:0}W.ba=function(){try{return 2<Tn(this)?this.g.status:-1}catch{return-1}};W.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}};W.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),mT(e)}};function gm(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case hm:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}W.Da=function(){return this.m};W.La=function(){return typeof this.j=="string"?this.j:String(this.j)};function wT(t){let e="";return zu(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function _c(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=wT(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):$t(t,e,n))}function ps(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function _m(t){this.za=0,this.l=[],this.h=new Yo,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=ps("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=ps("baseRetryDelayMs",5e3,t),this.$a=ps("retryDelaySeedMs",1e4,t),this.Ya=ps("forwardChannelMaxRetries",2,t),this.ra=ps("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new sm(t&&t.concurrentRequestLimit),this.Ca=new fT,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||t.Xb!==!1}W=_m.prototype;W.ma=8;W.G=1;function vc(t){if(vm(t),t.G==3){var e=t.V++,n=En(t.F);$t(n,"SID",t.J),$t(n,"RID",e),$t(n,"TYPE","terminate"),ms(t,n),e=new ss(t,t.h,e,void 0),e.K=2,e.v=sa(En(n)),n=!1,rt.navigator&&rt.navigator.sendBeacon&&(n=rt.navigator.sendBeacon(e.v.toString(),"")),!n&&rt.Image&&(new Image().src=e.v,n=!0),n||(e.g=Am(e.l,null),e.g.ea(e.v)),e.F=Date.now(),os(e)}Pm(t)}W.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch{}};function ua(t){t.g&&(xc(t),t.g.cancel(),t.g=null)}function vm(t){ua(t),t.u&&(rt.clearTimeout(t.u),t.u=null),ha(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&rt.clearTimeout(t.m),t.m=null)}function yc(t,e){t.l.push(new cT(t.Za++,e)),t.G==3&&ca(t)}function ca(t){om(t.i)||t.m||(t.m=!0,Ju(t.Ha,t),t.C=0)}function xT(t,e){return am(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.l=e.D.concat(t.l),!0):t.G==1||t.G==2||t.C>=(t.Xa?0:t.Ya)?!1:(t.m=is(he(t.Ha,t,e),bm(t,t.C)),t.C++,!0)}W.Ha=function(t){if(this.m)if(this.m=null,this.G==1){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;const s=new ss(this,this.h,t,void 0);let a=this.s;if(this.P&&(a?(a=Tp(a),Pp(a,this.P)):a=this.P),this.o===null&&(s.H=a),this.ja)t:{for(var e=0,n=0;n<this.l.length;n++){e:{var r=this.l[n];if("__data__"in r.g&&(r=r.g.__data__,typeof r=="string")){r=r.length;break e}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break t}if(e===4096||n===this.l.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=wm(this,s,e),n=En(this.F),$t(n,"RID",t),$t(n,"CVER",22),this.D&&$t(n,"X-HTTP-Session-Id",this.D),ms(this,n),this.o&&a&&_c(n,this.o,a),pc(this.i,s),this.Ra&&$t(n,"TYPE","init"),this.ja?($t(n,"$req",e),$t(n,"SID","null"),s.$=!0,uc(s,n,null)):uc(s,n,e),this.G=2}}else this.G==3&&(t?ym(this,t):this.l.length==0||om(this.i)||ym(this))};function ym(t,e){var n;e?n=e.m:n=t.V++;const r=En(t.F);$t(r,"SID",t.J),$t(r,"RID",n),$t(r,"AID",t.U),ms(t,r),t.o&&t.s&&_c(r,t.o,t.s),n=new ss(t,t.h,n,t.C+1),t.o===null&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=wm(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),pc(t.i,n),uc(n,r,e)}function ms(t,e){t.j&&hc({},function(n,r){$t(e,r,n)})}function wm(t,e,n){n=Math.min(t.l.length,n);var r=t.j?he(t.j.Oa,t.j,t):null;t:{var s=t.l;let a=-1;for(;;){const u=["count="+n];a==-1?0<n?(a=s[0].h,u.push("ofs="+a)):a=0:u.push("ofs="+a);let h=!0;for(let f=0;f<n;f++){let p=s[f].h;const m=s[f].g;if(p-=a,0>p)a=Math.max(0,s[f].h-100),h=!1;else try{dT(m,u,"req"+p+"_")}catch{r&&r(m)}}if(h){r=u.join("&");break t}}}return t=t.l.splice(0,n),e.D=t,r}function xm(t){t.g||t.u||(t.Y=1,Ju(t.Ga,t),t.A=0)}function wc(t){return t.g||t.u||3<=t.A?!1:(t.Y++,t.u=is(he(t.Ga,t),bm(t,t.A)),t.A++,!0)}W.Ga=function(){if(this.u=null,Em(this),this.$&&!(this.L||this.g==null||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=is(he(this.bb,this),t)}};W.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Se(10),ua(this),Em(this))};function xc(t){t.B!=null&&(rt.clearTimeout(t.B),t.B=null)}function Em(t){t.g=new ss(t,t.h,"rpc",t.Y),t.o===null&&(t.g.H=t.s),t.g.O=0;var e=En(t.oa);$t(e,"RID","rpc"),$t(e,"SID",t.J),$t(e,"CI",t.N?"0":"1"),$t(e,"AID",t.U),ms(t,e),$t(e,"TYPE","xmlhttp"),t.o&&t.s&&_c(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=sa(En(e)),n.s=null,n.U=!0,Gp(n,t)}W.ab=function(){this.v!=null&&(this.v=null,ua(this),wc(this),Se(19))};function ha(t){t.v!=null&&(rt.clearTimeout(t.v),t.v=null)}function Tm(t,e){var n=null;if(t.g==e){ha(t),xc(t),t.g=null;var r=2}else if(dc(t.i,e))n=e.D,lm(t.i,e),r=1;else return;if(t.I=e.N,t.G!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.F;var s=t.C;r=Xo(),de(r,new Zp(r,n,e,s)),ca(t)}else xm(t);else if(s=e.o,s==3||s==0&&0<t.I||!(r==1&&xT(t,e)||r==2&&wc(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),s){case 1:_i(t,5);break;case 4:_i(t,10);break;case 3:_i(t,6);break;default:_i(t,2)}}}function bm(t,e){let n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function _i(t,e){if(t.h.info("Error code "+e),e==2){var n=null;t.j&&(n=null);var r=he(t.jb,t);n||(n=new gi("//www.google.com/images/cleardot.gif"),rt.location&&rt.location.protocol=="http"||na(n,"https"),sa(n)),pT(n.toString(),r)}else Se(2);t.G=0,t.j&&t.j.va(e),Pm(t),vm(t)}W.jb=function(t){t?(this.h.info("Successfully pinged google.com"),Se(2)):(this.h.info("Failed to ping google.com"),Se(1))};function Pm(t){t.G=0,t.I=-1,t.j&&((um(t.i).length!=0||t.l.length!=0)&&(t.i.i.length=0,Ou(t.l),t.l.length=0),t.j.ua())}function Sm(t,e,n){let r=nT(n);if(r.i!="")e&&ia(r,e+"."+r.i),ra(r,r.m);else{const s=rt.location;r=iT(s.protocol,e?e+"."+s.hostname:s.hostname,+s.port,n)}return t.aa&&zu(t.aa,function(s,a){$t(r,a,s)}),e=t.D,n=t.sa,e&&n&&$t(r,e,n),$t(r,"VER",t.ma),ms(t,r),r}function Am(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ba&&!t.qa?new te(new hs({ib:!0})):new te(t.qa),e.L=t.H,e}function Cm(){}W=Cm.prototype;W.xa=function(){};W.wa=function(){};W.va=function(){};W.ua=function(){};W.Oa=function(){};function fa(){if(sr&&!(10<=Number(RE)))throw Error("Environmental error: no available transport.")}fa.prototype.g=function(t,e){return new De(t,e)};function De(t,e){oe.call(this),this.g=new _m(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!Zo(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Zo(e)&&(this.g.D=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new ur(this)}fe(De,oe);De.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),Ju(he(t.hb,t,e))),Se(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=Sm(t,null,t.W),ca(t)};De.prototype.close=function(){vc(this.g)};De.prototype.u=function(t){if(typeof t=="string"){var e={};e.__data__=t,yc(this.g,e)}else this.v?(e={},e.__data__=Qu(t),yc(this.g,e)):yc(this.g,t)};De.prototype.M=function(){this.g.j=null,delete this.j,vc(this.g),delete this.g,De.Z.M.call(this)};function Lm(t){sc.call(this);var e=t.__sm__;if(e){t:{for(const n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}fe(Lm,sc);function Im(){oc.call(this),this.status=1}fe(Im,oc);function ur(t){this.g=t}fe(ur,Cm);ur.prototype.xa=function(){de(this.g,"a")};ur.prototype.wa=function(t){de(this.g,new Lm(t))};ur.prototype.va=function(t){de(this.g,new Im(t))};ur.prototype.ua=function(){de(this.g,"b")};fa.prototype.createWebChannel=fa.prototype.g;De.prototype.send=De.prototype.u;De.prototype.open=De.prototype.m;De.prototype.close=De.prototype.close;Qo.NO_ERROR=0;Qo.TIMEOUT=8;Qo.HTTP_ERROR=6;qp.COMPLETE="complete";Kp.EventType=rs;rs.OPEN="a";rs.CLOSE="b";rs.ERROR="c";rs.MESSAGE="d";oe.prototype.listen=oe.prototype.N;te.prototype.listenOnce=te.prototype.O;te.prototype.getLastError=te.prototype.La;te.prototype.getLastErrorCode=te.prototype.Da;te.prototype.getStatus=te.prototype.ba;te.prototype.getResponseJson=te.prototype.Qa;te.prototype.getResponseText=te.prototype.ga;te.prototype.send=te.prototype.ea;var ET=function(){return new fa},TT=function(){return Xo()},Ec=Qo,bT=qp,PT=di,Nm={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},ST=hs,da=Kp,AT=te;const Mm="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ie.UNAUTHENTICATED=new Ie(null),Ie.GOOGLE_CREDENTIALS=new Ie("google-credentials-uid"),Ie.FIRST_PARTY=new Ie("first-party-uid"),Ie.MOCK_USER=new Ie("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cr="9.4.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vi=new pp("@firebase/firestore");function km(){return vi.logLevel}function tt(t,...e){if(vi.logLevel<=Mt.DEBUG){const n=e.map(Tc);vi.debug(`Firestore (${cr}): ${t}`,...n)}}function qn(t,...e){if(vi.logLevel<=Mt.ERROR){const n=e.map(Tc);vi.error(`Firestore (${cr}): ${t}`,...n)}}function Rm(t,...e){if(vi.logLevel<=Mt.WARN){const n=e.map(Tc);vi.warn(`Firestore (${cr}): ${t}`,...n)}}function Tc(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pt(t="Unexpected state"){const e=`FIRESTORE (${cr}) INTERNAL ASSERTION FAILED: `+t;throw qn(e),new Error(e)}function ee(t,e){t||pt()}function St(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class nt extends Error{constructor(e,n){super(n),this.code=e,this.message=n,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(e,n){this.user=n,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization=`Bearer ${e}`}}class LT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ie.UNAUTHENTICATED))}shutdown(){}}class IT{constructor(e){this.t=e,this.currentUser=Ie.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const s=f=>this.i!==r?(r=this.i,n(f)):Promise.resolve();let a=new yi;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new yi,e.enqueueRetryable(()=>s(this.currentUser))};const u=()=>{const f=a;e.enqueueRetryable(async()=>{await f.promise,await s(this.currentUser)})},h=f=>{tt("FirebaseCredentialsProvider","Auth detected"),this.auth=f,this.auth.addAuthTokenListener(this.o),u()};this.t.onInit(f=>h(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?h(f):(tt("FirebaseCredentialsProvider","Auth not yet detected"),a.resolve(),a=new yi)}},0),u()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(tt("FirebaseCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ee(typeof r.accessToken=="string"),new CT(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ee(e===null||typeof e=="string"),new Ie(e)}}class NT{constructor(e,n,r){this.h=e,this.l=n,this.m=r,this.type="FirstParty",this.user=Ie.FIRST_PARTY}get authHeaders(){const e={"X-Goog-AuthUser":this.l},n=this.h.auth.getAuthHeaderValueForFirstParty([]);return n&&(e.Authorization=n),this.m&&(e["X-Goog-Iam-Authorization-Token"]=this.m),e}}class MT{constructor(e,n,r){this.h=e,this.l=n,this.m=r}getToken(){return Promise.resolve(new NT(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n(Ie.FIRST_PARTY))}shutdown(){}invalidateToken(){}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.g(r),this.p=r=>n.writeSequenceNumber(r))}g(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.p&&this.p(e),e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kT(t){const e=typeof self!="undefined"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bc.T=-1;class Om{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=kT(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<n&&(r+=e.charAt(s[a]%e.length))}return r}}function Dt(t,e){return t<e?-1:t>e?1:0}function gs(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new nt($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new nt($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new nt($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new nt($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Wn.fromMillis(Date.now())}static fromDate(e){return Wn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Wn(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Dt(this.nanoseconds,e.nanoseconds):Dt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new kt(e)}static min(){return new kt(new Wn(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dm(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function pa(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function RT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e,n,r){n===void 0?n=0:n>e.length&&pt(),r===void 0?r=e.length-n:r>e.length-n&&pt(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return _s.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof _s?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const a=e.get(s),u=n.get(s);if(a<u)return-1;if(a>u)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Wt extends _s{construct(e,n,r){return new Wt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new nt($.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Wt(n)}static emptyPath(){return new Wt([])}}const OT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ke extends _s{construct(e,n,r){return new Ke(e,n,r)}static isValidIdentifier(e){return OT.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ke.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ke(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const a=()=>{if(r.length===0)throw new nt($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let u=!1;for(;s<e.length;){const h=e[s];if(h==="\\"){if(s+1===e.length)throw new nt($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[s+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new nt($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,s+=2}else h==="`"?(u=!u,s++):h!=="."||u?(r+=h,s++):(a(),s++)}if(a(),u)throw new nt($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ke(n)}static emptyPath(){return new Ke([])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.binaryString=e}static fromBase64String(e){const n=atob(e);return new ye(n)}static fromUint8Array(e){const n=function(r){let s="";for(let a=0;a<r.length;++a)s+=String.fromCharCode(r[a]);return s}(e);return new ye(n)}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Dt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ye.EMPTY_BYTE_STRING=new ye("");const DT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Kn(t){if(ee(!!t),typeof t=="string"){let e=0;const n=DT.exec(t);if(ee(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ne(t.seconds),nanos:ne(t.nanos)}}function ne(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function hr(t){return typeof t=="string"?ye.fromBase64String(t):ye.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Bm(t){const e=t.mapValue.fields.__previous_value__;return zm(e)?Bm(e):e}function vs(t){const e=Kn(t.mapValue.fields.__local_write_time__.timestampValue);return new Wn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fr(t){return t==null}function Pc(t){return t===0&&1/t==-1/0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e){this.path=e}static fromPath(e){return new st(Wt.fromString(e))}static fromName(e){return new st(Wt.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return e!==null&&Wt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Wt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new st(new Wt(e.slice()))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?zm(t)?4:10:pt()}function ln(t,e){const n=wi(t);if(n!==wi(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return vs(t).isEqual(vs(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const a=Kn(r.timestampValue),u=Kn(s.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return hr(r.bytesValue).isEqual(hr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return ne(r.geoPointValue.latitude)===ne(s.geoPointValue.latitude)&&ne(r.geoPointValue.longitude)===ne(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return ne(r.integerValue)===ne(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const a=ne(r.doubleValue),u=ne(s.doubleValue);return a===u?Pc(a)===Pc(u):isNaN(a)&&isNaN(u)}return!1}(t,e);case 9:return gs(t.arrayValue.values||[],e.arrayValue.values||[],ln);case 10:return function(r,s){const a=r.mapValue.fields||{},u=s.mapValue.fields||{};if(Dm(a)!==Dm(u))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(u[h]===void 0||!ln(a[h],u[h])))return!1;return!0}(t,e);default:return pt()}}function ys(t,e){return(t.values||[]).find(n=>ln(n,e))!==void 0}function dr(t,e){const n=wi(t),r=wi(e);if(n!==r)return Dt(n,r);switch(n){case 0:return 0;case 1:return Dt(t.booleanValue,e.booleanValue);case 2:return function(s,a){const u=ne(s.integerValue||s.doubleValue),h=ne(a.integerValue||a.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(t,e);case 3:return Fm(t.timestampValue,e.timestampValue);case 4:return Fm(vs(t),vs(e));case 5:return Dt(t.stringValue,e.stringValue);case 6:return function(s,a){const u=hr(s),h=hr(a);return u.compareTo(h)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const u=s.split("/"),h=a.split("/");for(let f=0;f<u.length&&f<h.length;f++){const p=Dt(u[f],h[f]);if(p!==0)return p}return Dt(u.length,h.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const u=Dt(ne(s.latitude),ne(a.latitude));return u!==0?u:Dt(ne(s.longitude),ne(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,a){const u=s.values||[],h=a.values||[];for(let f=0;f<u.length&&f<h.length;++f){const p=dr(u[f],h[f]);if(p)return p}return Dt(u.length,h.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,a){const u=s.fields||{},h=Object.keys(u),f=a.fields||{},p=Object.keys(f);h.sort(),p.sort();for(let m=0;m<h.length&&m<p.length;++m){const _=Dt(h[m],p[m]);if(_!==0)return _;const v=dr(u[h[m]],f[p[m]]);if(v!==0)return v}return Dt(h.length,p.length)}(t.mapValue,e.mapValue);default:throw pt()}}function Fm(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Dt(t,e);const n=Kn(t),r=Kn(e),s=Dt(n.seconds,r.seconds);return s!==0?s:Dt(n.nanos,r.nanos)}function Sc(t){return Ac(t)}function Ac(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const s=Kn(r);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?hr(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,st.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let s="[",a=!0;for(const u of r.values||[])a?a=!1:s+=",",s+=Ac(u);return s+"]"}(t.arrayValue):"mapValue"in t?function(r){const s=Object.keys(r.fields||{}).sort();let a="{",u=!0;for(const h of s)u?u=!1:a+=",",a+=`${h}:${Ac(r.fields[h])}`;return a+"}"}(t.mapValue):pt();var e,n}function Cc(t){return!!t&&"integerValue"in t}function Lc(t){return!!t&&"arrayValue"in t}function Um(t){return!!t&&"nullValue"in t}function Vm(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ic(t){return!!t&&"mapValue"in t}function ws(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return pa(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ws(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ws(t.arrayValue.values[n]);return e}return Object.assign({},t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.value=e}static empty(){return new bn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ic(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ws(n)}setAll(e){let n=Ke.emptyPath(),r={},s=[];e.forEach((u,h)=>{if(!n.isImmediateParentOf(h)){const f=this.getFieldsMap(n);this.applyChanges(f,r,s),r={},s=[],n=h.popLast()}u?r[h.lastSegment()]=ws(u):s.push(h.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,r,s)}delete(e){const n=this.field(e.popLast());Ic(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ln(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Ic(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){pa(n,(s,a)=>e[s]=a);for(const s of r)delete e[s]}clone(){return new bn(ws(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e,n,r,s,a){this.key=e,this.documentType=n,this.version=r,this.data=s,this.documentState=a}static newInvalidDocument(e){return new we(e,0,kt.min(),bn.empty(),0)}static newFoundDocument(e,n,r){return new we(e,1,n,r,0)}static newNoDocument(e,n){return new we(e,2,n,bn.empty(),0)}static newUnknownDocument(e,n){return new we(e,3,n,bn.empty(),2)}convertToFoundDocument(e,n){return this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof we&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}clone(){return new we(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(e,n=null,r=[],s=[],a=null,u=null,h=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=u,this.endAt=h,this.A=null}}function Hm(t,e=null,n=[],r=[],s=null,a=null,u=null){return new zT(t,e,n,r,s,a,u)}function Nc(t){const e=St(t);if(e.A===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>FT(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),fr(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=ma(e.startAt)),e.endAt&&(n+="|ub:",n+=ma(e.endAt)),e.A=n}return e.A}function BT(t){let e=t.path.canonicalString();return t.collectionGroup!==null&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map(n=>{return`${(r=n).field.canonicalString()} ${r.op} ${Sc(r.value)}`;var r}).join(", ")}]`),fr(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map(n=>function(r){return`${r.field.canonicalString()} (${r.dir})`}(n)).join(", ")}]`),t.startAt&&(e+=", startAt: "+ma(t.startAt)),t.endAt&&(e+=", endAt: "+ma(t.endAt)),`Target(${e})`}function Mc(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<t.orderBy.length;s++)if(!KT(t.orderBy[s],e.orderBy[s]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let s=0;s<t.filters.length;s++)if(n=t.filters[s],r=e.filters[s],n.op!==r.op||!n.field.isEqual(r.field)||!ln(n.value,r.value))return!1;var n,r;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!qm(t.startAt,e.startAt)&&qm(t.endAt,e.endAt)}function kc(t){return st.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class Ne extends class{}{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.R(e,n,r):new UT(e,n,r):n==="array-contains"?new $T(e,r):n==="in"?new ZT(e,r):n==="not-in"?new qT(e,r):n==="array-contains-any"?new WT(e,r):new Ne(e,n,r)}static R(e,n,r){return n==="in"?new VT(e,r):new HT(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.P(dr(n,this.value)):n!==null&&wi(this.value)===wi(n)&&this.P(dr(n,this.value))}P(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return pt()}}v(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}function FT(t){return t.field.canonicalString()+t.op.toString()+Sc(t.value)}class UT extends Ne{constructor(e,n,r){super(e,n,r),this.key=st.fromName(r.referenceValue)}matches(e){const n=st.comparator(e.key,this.key);return this.P(n)}}class VT extends Ne{constructor(e,n){super(e,"in",n),this.keys=$m("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class HT extends Ne{constructor(e,n){super(e,"not-in",n),this.keys=$m("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function $m(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>st.fromName(r.referenceValue))}class $T extends Ne{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Lc(n)&&ys(n.arrayValue,this.value)}}class ZT extends Ne{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ys(this.value.arrayValue,n)}}class qT extends Ne{constructor(e,n){super(e,"not-in",n)}matches(e){if(ys(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ys(this.value.arrayValue,n)}}class WT extends Ne{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Lc(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ys(this.value.arrayValue,r))}}class Rc{constructor(e,n){this.position=e,this.before=n}}function ma(t){return`${t.before?"b":"a"}:${t.position.map(e=>Sc(e)).join(",")}`}class xs{constructor(e,n="asc"){this.field=e,this.dir=n}}function KT(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Zm(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const a=e[s],u=t.position[s];if(a.field.isKeyField()?r=st.comparator(st.fromName(u.referenceValue),n.key):r=dr(u,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return t.before?r<=0:r<0}function qm(t,e){if(t===null)return e===null;if(e===null||t.before!==e.before||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ln(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e,n=null,r=[],s=[],a=null,u="F",h=null,f=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=u,this.startAt=h,this.endAt=f,this.V=null,this.S=null,this.startAt,this.endAt}}function jT(t,e,n,r,s,a,u,h){return new ga(t,e,n,r,s,a,u,h)}function Wm(t){return new ga(t)}function _a(t){return!fr(t.limit)&&t.limitType==="F"}function va(t){return!fr(t.limit)&&t.limitType==="L"}function GT(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function YT(t){for(const e of t.filters)if(e.v())return e.field;return null}function XT(t){return t.collectionGroup!==null}function Es(t){const e=St(t);if(e.V===null){e.V=[];const n=YT(e),r=GT(e);if(n!==null&&r===null)n.isKeyField()||e.V.push(new xs(n)),e.V.push(new xs(Ke.keyField(),"asc"));else{let s=!1;for(const a of e.explicitOrderBy)e.V.push(a),a.field.isKeyField()&&(s=!0);if(!s){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.V.push(new xs(Ke.keyField(),a))}}}return e.V}function xi(t){const e=St(t);if(!e.S)if(e.limitType==="F")e.S=Hm(e.path,e.collectionGroup,Es(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const a of Es(e)){const u=a.dir==="desc"?"asc":"desc";n.push(new xs(a.field,u))}const r=e.endAt?new Rc(e.endAt.position,!e.endAt.before):null,s=e.startAt?new Rc(e.startAt.position,!e.startAt.before):null;e.S=Hm(e.path,e.collectionGroup,n,e.filters,e.limit,r,s)}return e.S}function QT(t,e,n){return new ga(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ya(t,e){return Mc(xi(t),xi(e))&&t.limitType===e.limitType}function Km(t){return`${Nc(xi(t))}|lt:${t.limitType}`}function Oc(t){return`Query(target=${BT(xi(t))}; limitType=${t.limitType})`}function wa(t,e){return e.isFoundDocument()&&function(n,r){const s=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):st.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(t,e)&&function(n,r){for(const s of n.explicitOrderBy)if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(n,r){for(const s of n.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(n,r){return!(n.startAt&&!Zm(n.startAt,Es(n),r)||n.endAt&&Zm(n.endAt,Es(n),r))}(t,e)}function jm(t){return(e,n)=>{let r=!1;for(const s of Es(t)){const a=JT(s,e,n);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function JT(t,e,n){const r=t.field.isKeyField()?st.comparator(e.key,n.key):function(s,a,u){const h=a.data.field(s),f=u.data.field(s);return h!==null&&f!==null?dr(h,f):pt()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return pt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tb(t,e){if(t.D){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Pc(e)?"-0":e}}function eb(t){return{integerValue:""+t}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(){this._=void 0}}function nb(t,e,n){return t instanceof Dc?function(r,s){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&(a.fields.__previous_value__=s),{mapValue:a}}(n,e):t instanceof Ea?Gm(t,e):t instanceof Ta?Ym(t,e):function(r,s){const a=rb(r,s),u=Xm(a)+Xm(r.C);return Cc(a)&&Cc(r.C)?eb(u):tb(r.N,u)}(t,e)}function ib(t,e,n){return t instanceof Ea?Gm(t,e):t instanceof Ta?Ym(t,e):n}function rb(t,e){return t instanceof zc?Cc(n=e)||function(r){return!!r&&"doubleValue"in r}(n)?e:{integerValue:0}:null;var n}class Dc extends xa{}class Ea extends xa{constructor(e){super(),this.elements=e}}function Gm(t,e){const n=Qm(e);for(const r of t.elements)n.some(s=>ln(s,r))||n.push(r);return{arrayValue:{values:n}}}class Ta extends xa{constructor(e){super(),this.elements=e}}function Ym(t,e){let n=Qm(e);for(const r of t.elements)n=n.filter(s=>!ln(s,r));return{arrayValue:{values:n}}}class zc extends xa{constructor(e,n){super(),this.N=e,this.C=n}}function Xm(t){return ne(t.integerValue||t.doubleValue)}function Qm(t){return Lc(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function sb(t,e){return t.field.isEqual(e.field)&&function(n,r){return n instanceof Ea&&r instanceof Ea||n instanceof Ta&&r instanceof Ta?gs(n.elements,r.elements,ln):n instanceof zc&&r instanceof zc?ln(n.C,r.C):n instanceof Dc&&r instanceof Dc}(t.transform,e.transform)}function ba(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Jm{}function ob(t,e,n){t instanceof ng?function(r,s,a){const u=r.value.clone(),h=rg(r.fieldTransforms,s,a.transformResults);u.setAll(h),s.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):t instanceof Fc?function(r,s,a){if(!ba(r.precondition,s))return void s.convertToUnknownDocument(a.version);const u=rg(r.fieldTransforms,s,a.transformResults),h=s.data;h.setAll(ig(r)),h.setAll(u),s.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(t,e,n):function(r,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Bc(t,e,n){t instanceof ng?function(r,s,a){if(!ba(r.precondition,s))return;const u=r.value.clone(),h=sg(r.fieldTransforms,a,s);u.setAll(h),s.convertToFoundDocument(eg(s),u).setHasLocalMutations()}(t,e,n):t instanceof Fc?function(r,s,a){if(!ba(r.precondition,s))return;const u=sg(r.fieldTransforms,a,s),h=s.data;h.setAll(ig(r)),h.setAll(u),s.convertToFoundDocument(eg(s),h).setHasLocalMutations()}(t,e,n):function(r,s){ba(r.precondition,s)&&s.convertToNoDocument(kt.min())}(t,e)}function tg(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&gs(n,r,(s,a)=>sb(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function eg(t){return t.isFoundDocument()?t.version:kt.min()}class ng extends Jm{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}}class Fc extends Jm{constructor(e,n,r,s,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}}function ig(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function rg(t,e,n){const r=new Map;ee(t.length===n.length);for(let s=0;s<n.length;s++){const a=t[s],u=a.transform,h=e.data.field(a.field);r.set(a.field,ib(u,h,n[s]))}return r}function sg(t,e,n){const r=new Map;for(const s of t){const a=s.transform,u=n.data.field(s.field);r.set(s.field,nb(a,u,e))}return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(e){this.count=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ie,gt;function og(t){if(t===void 0)return qn("GRPC error has no .code"),$.UNKNOWN;switch(t){case ie.OK:return $.OK;case ie.CANCELLED:return $.CANCELLED;case ie.UNKNOWN:return $.UNKNOWN;case ie.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case ie.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case ie.INTERNAL:return $.INTERNAL;case ie.UNAVAILABLE:return $.UNAVAILABLE;case ie.UNAUTHENTICATED:return $.UNAUTHENTICATED;case ie.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case ie.NOT_FOUND:return $.NOT_FOUND;case ie.ALREADY_EXISTS:return $.ALREADY_EXISTS;case ie.PERMISSION_DENIED:return $.PERMISSION_DENIED;case ie.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case ie.ABORTED:return $.ABORTED;case ie.OUT_OF_RANGE:return $.OUT_OF_RANGE;case ie.UNIMPLEMENTED:return $.UNIMPLEMENTED;case ie.DATA_LOSS:return $.DATA_LOSS;default:return pt()}}(gt=ie||(ie={}))[gt.OK=0]="OK",gt[gt.CANCELLED=1]="CANCELLED",gt[gt.UNKNOWN=2]="UNKNOWN",gt[gt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",gt[gt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",gt[gt.NOT_FOUND=5]="NOT_FOUND",gt[gt.ALREADY_EXISTS=6]="ALREADY_EXISTS",gt[gt.PERMISSION_DENIED=7]="PERMISSION_DENIED",gt[gt.UNAUTHENTICATED=16]="UNAUTHENTICATED",gt[gt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",gt[gt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",gt[gt.ABORTED=10]="ABORTED",gt[gt.OUT_OF_RANGE=11]="OUT_OF_RANGE",gt[gt.UNIMPLEMENTED=12]="UNIMPLEMENTED",gt[gt.INTERNAL=13]="INTERNAL",gt[gt.UNAVAILABLE=14]="UNAVAILABLE",gt[gt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e,n){this.comparator=e,this.root=n||pe.EMPTY}insert(e,n){return new Ae(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,pe.BLACK,null,null))}remove(e){return new Ae(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pe.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Pa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Pa(this.root,e,this.comparator,!1)}getReverseIterator(){return new Pa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Pa(this.root,e,this.comparator,!0)}}class Pa{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pe{constructor(e,n,r,s,a){this.key=e,this.value=n,this.color=r!=null?r:pe.RED,this.left=s!=null?s:pe.EMPTY,this.right=a!=null?a:pe.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,a){return new pe(e!=null?e:this.key,n!=null?n:this.value,r!=null?r:this.color,s!=null?s:this.left,a!=null?a:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,n,r),null):a===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return pe.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return pe.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pe.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw pt();const e=this.left.check();if(e!==this.right.check())throw pt();return e+(this.isRed()?0:1)}}pe.EMPTY=null,pe.RED=!0,pe.BLACK=!1;pe.EMPTY=new class{constructor(){this.size=0}get key(){throw pt()}get value(){throw pt()}get color(){throw pt()}get left(){throw pt()}get right(){throw pt()}copy(t,e,n,r,s){return this}insert(t,e,n){return new pe(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.comparator=e,this.data=new Ae(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ag(this.data.getIterator())}getIteratorFrom(e){return new ag(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof me)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new me(this.comparator);return n.data=e,n}}class ag{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lb=new Ae(st.comparator);function Ei(){return lb}const ub=new Ae(st.comparator);function Uc(){return ub}new Ae(st.comparator);const cb=new me(st.comparator);function Zt(...t){let e=cb;for(const n of t)e=e.add(n);return e}const hb=new me(Dt);function lg(){return hb}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e,n,r,s,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n){const r=new Map;return r.set(e,Ts.createSynthesizedTargetChangeForCurrentChange(e,n)),new Sa(kt.min(),r,lg(),Ei(),Zt())}}class Ts{constructor(e,n,r,s,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n){return new Ts(ye.EMPTY_BYTE_STRING,n,Zt(),Zt(),Zt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e,n,r,s){this.k=e,this.removedTargetIds=n,this.key=r,this.$=s}}class ug{constructor(e,n){this.targetId=e,this.O=n}}class cg{constructor(e,n,r=ye.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class hg{constructor(){this.F=0,this.M=dg(),this.L=ye.EMPTY_BYTE_STRING,this.B=!1,this.U=!0}get current(){return this.B}get resumeToken(){return this.L}get q(){return this.F!==0}get K(){return this.U}j(e){e.approximateByteSize()>0&&(this.U=!0,this.L=e)}W(){let e=Zt(),n=Zt(),r=Zt();return this.M.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:pt()}}),new Ts(this.L,this.B,e,n,r)}G(){this.U=!1,this.M=dg()}H(e,n){this.U=!0,this.M=this.M.insert(e,n)}J(e){this.U=!0,this.M=this.M.remove(e)}Y(){this.F+=1}X(){this.F-=1}Z(){this.U=!0,this.B=!0}}class fb{constructor(e){this.tt=e,this.et=new Map,this.nt=Ei(),this.st=fg(),this.it=new me(Dt)}rt(e){for(const n of e.k)e.$&&e.$.isFoundDocument()?this.ot(n,e.$):this.ct(n,e.key,e.$);for(const n of e.removedTargetIds)this.ct(n,e.key,e.$)}at(e){this.forEachTarget(e,n=>{const r=this.ut(n);switch(e.state){case 0:this.ht(n)&&r.j(e.resumeToken);break;case 1:r.X(),r.q||r.G(),r.j(e.resumeToken);break;case 2:r.X(),r.q||this.removeTarget(n);break;case 3:this.ht(n)&&(r.Z(),r.j(e.resumeToken));break;case 4:this.ht(n)&&(this.lt(n),r.j(e.resumeToken));break;default:pt()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.et.forEach((r,s)=>{this.ht(s)&&n(s)})}ft(e){const n=e.targetId,r=e.O.count,s=this.dt(n);if(s){const a=s.target;if(kc(a))if(r===0){const u=new st(a.path);this.ct(n,u,we.newNoDocument(u,kt.min()))}else ee(r===1);else this.wt(n)!==r&&(this.lt(n),this.it=this.it.add(n))}}_t(e){const n=new Map;this.et.forEach((a,u)=>{const h=this.dt(u);if(h){if(a.current&&kc(h.target)){const f=new st(h.target.path);this.nt.get(f)!==null||this.gt(u,f)||this.ct(u,f,we.newNoDocument(f,e))}a.K&&(n.set(u,a.W()),a.G())}});let r=Zt();this.st.forEach((a,u)=>{let h=!0;u.forEachWhile(f=>{const p=this.dt(f);return!p||p.purpose===2||(h=!1,!1)}),h&&(r=r.add(a))});const s=new Sa(e,n,this.it,this.nt,r);return this.nt=Ei(),this.st=fg(),this.it=new me(Dt),s}ot(e,n){if(!this.ht(e))return;const r=this.gt(e,n.key)?2:0;this.ut(e).H(n.key,r),this.nt=this.nt.insert(n.key,n),this.st=this.st.insert(n.key,this.yt(n.key).add(e))}ct(e,n,r){if(!this.ht(e))return;const s=this.ut(e);this.gt(e,n)?s.H(n,1):s.J(n),this.st=this.st.insert(n,this.yt(n).delete(e)),r&&(this.nt=this.nt.insert(n,r))}removeTarget(e){this.et.delete(e)}wt(e){const n=this.ut(e).W();return this.tt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Y(e){this.ut(e).Y()}ut(e){let n=this.et.get(e);return n||(n=new hg,this.et.set(e,n)),n}yt(e){let n=this.st.get(e);return n||(n=new me(Dt),this.st=this.st.insert(e,n)),n}ht(e){const n=this.dt(e)!==null;return n||tt("WatchChangeAggregator","Detected inactive target",e),n}dt(e){const n=this.et.get(e);return n&&n.q?null:this.tt.Tt(e)}lt(e){this.et.set(e,new hg),this.tt.getRemoteKeysForTarget(e).forEach(n=>{this.ct(e,n,null)})}gt(e,n){return this.tt.getRemoteKeysForTarget(e).has(n)}}function fg(){return new Ae(st.comparator)}function dg(){return new Ae(st.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),pb=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))();class mb{constructor(e,n){this.databaseId=e,this.D=n}}function gb(t,e){return t.D?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function _b(t,e){return t.D?e.toBase64():e.toUint8Array()}function bs(t){return ee(!!t),kt.fromTimestamp(function(e){const n=Kn(e);return new Wn(n.seconds,n.nanos)}(t))}function vb(t,e){return function(n){return new Wt(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function pg(t){const e=Wt.fromString(t);return ee(wg(e)),e}function Vc(t,e){const n=pg(e);if(n.get(1)!==t.databaseId.projectId)throw new nt($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new nt($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new st(gg(n))}function Hc(t,e){return vb(t.databaseId,e)}function yb(t){const e=pg(t);return e.length===4?Wt.emptyPath():gg(e)}function mg(t){return new Wt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function gg(t){return ee(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function wb(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:pt()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(f,p){return f.D?(ee(p===void 0||typeof p=="string"),ye.fromBase64String(p||"")):(ee(p===void 0||p instanceof Uint8Array),ye.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&function(f){const p=f.code===void 0?$.UNKNOWN:og(f.code);return new nt(p,f.message||"")}(u);n=new cg(r,s,a,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Vc(t,r.document.name),a=bs(r.document.updateTime),u=new bn({mapValue:{fields:r.document.fields}}),h=we.newFoundDocument(s,a,u),f=r.targetIds||[],p=r.removedTargetIds||[];n=new Aa(f,p,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Vc(t,r.document),a=r.readTime?bs(r.readTime):kt.min(),u=we.newNoDocument(s,a),h=r.removedTargetIds||[];n=new Aa([],h,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Vc(t,r.document),a=r.removedTargetIds||[];n=new Aa([],a,s,null)}else{if(!("filter"in e))return pt();{e.filter;const r=e.filter;r.targetId;const s=r.count||0,a=new ab(s),u=r.targetId;n=new ug(u,a)}}return n}function xb(t,e){return{documents:[Hc(t,e.path)]}}function Eb(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=Hc(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Hc(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(h){if(h.length===0)return;const f=h.map(p=>function(m){if(m.op==="=="){if(Vm(m.value))return{unaryFilter:{field:pr(m.field),op:"IS_NAN"}};if(Um(m.value))return{unaryFilter:{field:pr(m.field),op:"IS_NULL"}}}else if(m.op==="!="){if(Vm(m.value))return{unaryFilter:{field:pr(m.field),op:"IS_NOT_NAN"}};if(Um(m.value))return{unaryFilter:{field:pr(m.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pr(m.field),op:Sb(m.op),value:m.value}}}(p));return f.length===1?f[0]:{compositeFilter:{op:"AND",filters:f}}}(e.filters);s&&(n.structuredQuery.where=s);const a=function(h){if(h.length!==0)return h.map(f=>function(p){return{field:pr(p.field),direction:Pb(p.dir)}}(f))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const u=function(h,f){return h.D||fr(f)?f:{value:f}}(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=vg(e.startAt)),e.endAt&&(n.structuredQuery.endAt=vg(e.endAt)),n}function Tb(t){let e=yb(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ee(r===1);const m=n.from[0];m.allDescendants?s=m.collectionId:e=e.child(m.collectionId)}let a=[];n.where&&(a=_g(n.where));let u=[];n.orderBy&&(u=n.orderBy.map(m=>function(_){return new xs(mr(_.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(m)));let h=null;n.limit&&(h=function(m){let _;return _=typeof m=="object"?m.value:m,fr(_)?null:_}(n.limit));let f=null;n.startAt&&(f=yg(n.startAt));let p=null;return n.endAt&&(p=yg(n.endAt)),jT(e,s,u,a,h,"F",f,p)}function bb(t,e){const n=function(r,s){switch(s){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return pt()}}(0,e.purpose);return n==null?null:{"goog-listen-tags":n}}function _g(t){return t?t.unaryFilter!==void 0?[Cb(t)]:t.fieldFilter!==void 0?[Ab(t)]:t.compositeFilter!==void 0?t.compositeFilter.filters.map(e=>_g(e)).reduce((e,n)=>e.concat(n)):pt():[]}function vg(t){return{before:t.before,values:t.position}}function yg(t){const e=!!t.before,n=t.values||[];return new Rc(n,e)}function Pb(t){return db[t]}function Sb(t){return pb[t]}function pr(t){return{fieldPath:t.canonicalString()}}function mr(t){return Ke.fromServerFormat(t.fieldPath)}function Ab(t){return Ne.create(mr(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return pt()}}(t.fieldFilter.op),t.fieldFilter.value)}function Cb(t){switch(t.unaryFilter.op){case"IS_NAN":const e=mr(t.unaryFilter.field);return Ne.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=mr(t.unaryFilter.field);return Ne.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=mr(t.unaryFilter.field);return Ne.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=mr(t.unaryFilter.field);return Ne.create(s,"!=",{nullValue:"NULL_VALUE"});default:return pt()}}function wg(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}const Lb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ib{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&pt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new q((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof q?n:q.resolve(n)}catch(n){return q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):q.reject(n)}static resolve(e){return new q((n,r)=>{n(e)})}static reject(e){return new q((n,r)=>{r(e)})}static waitFor(e){return new q((n,r)=>{let s=0,a=0,u=!1;e.forEach(h=>{++s,h.next(()=>{++a,u&&a===s&&n()},f=>r(f))}),u=!0,a===s&&n()})}static or(e){let n=q.resolve(!1);for(const r of e)n=n.next(s=>s?q.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,a)=>{r.push(n.call(this,s,a))}),this.waitFor(r)}}function Ps(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&ob(a,e,r[s])}}applyToLocalView(e){for(const n of this.baseMutations)n.key.isEqual(e.key)&&Bc(n,e,this.localWriteTime);for(const n of this.mutations)n.key.isEqual(e.key)&&Bc(n,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(n=>{const r=e.get(n.key),s=r;this.applyToLocalView(s),r.isValidDocument()||s.convertToNoDocument(kt.min())})}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Zt())}isEqual(e){return this.batchId===e.batchId&&gs(this.mutations,e.mutations,(n,r)=>tg(n,r))&&gs(this.baseMutations,e.baseMutations,(n,r)=>tg(n,r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e,n,r,s,a=kt.min(),u=kt.min(),h=ye.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h}withSequenceNumber(e){return new Ti(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new Ti(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Ti(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{constructor(e){this.Wt=e}}function kb(t){const e=Tb({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?QT(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(){this.Gt=new Ob}addToCollectionParentIndex(e,n){return this.Gt.add(n),q.resolve()}getCollectionParents(e,n){return q.resolve(this.Gt.getEntries(n))}}class Ob{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new me(Wt.comparator),a=!s.has(r);return this.index[n]=s.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new me(Wt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e){this.ne=e}next(){return this.ne+=2,this.ne}static se(){return new gr(0)}static ie(){return new gr(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $c(t){if(t.code!==$.FAILED_PRECONDITION||t.message!==Lb)throw t;tt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={}}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s!==void 0){for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,n]);s.push([e,n])}else this.inner[r]=[[e,n]]}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),!0;return!1}forEach(e){pa(this.inner,(n,r)=>{for(const[s,a]of r)e(s,a)})}isEmpty(){return RT(this.inner)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(){this.changes=new Ss(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}getReadTime(e){const n=this.changes.get(e);return n?n.readTime:kt.min()}addEntry(e,n){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:n})}removeEntry(e,n=null){this.assertNotApplied(),this.changes.set(e,{document:we.newInvalidDocument(e),readTime:n})}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?q.resolve(r.document):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(e,n,r){this.He=e,this.In=n,this.Ht=r}An(e,n){return this.In.getAllMutationBatchesAffectingDocumentKey(e,n).next(r=>this.Rn(e,n,r))}Rn(e,n,r){return this.He.getEntry(e,n).next(s=>{for(const a of r)a.applyToLocalView(s);return s})}bn(e,n){e.forEach((r,s)=>{for(const a of n)a.applyToLocalView(s)})}Pn(e,n){return this.He.getEntries(e,n).next(r=>this.vn(e,r).next(()=>r))}vn(e,n){return this.In.getAllMutationBatchesAffectingDocumentKeys(e,n).next(r=>this.bn(n,r))}getDocumentsMatchingQuery(e,n,r){return function(s){return st.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.Vn(e,n.path):XT(n)?this.Sn(e,n,r):this.Dn(e,n,r)}Vn(e,n){return this.An(e,new st(n)).next(r=>{let s=Uc();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}Sn(e,n,r){const s=n.collectionGroup;let a=Uc();return this.Ht.getCollectionParents(e,s).next(u=>q.forEach(u,h=>{const f=function(p,m){return new ga(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,h.child(s));return this.Dn(e,f,r).next(p=>{p.forEach((m,_)=>{a=a.insert(m,_)})})}).next(()=>a))}Dn(e,n,r){let s,a;return this.He.getDocumentsMatchingQuery(e,n,r).next(u=>(s=u,this.In.getAllMutationBatchesAffectingQuery(e,n))).next(u=>(a=u,this.Cn(e,a,s).next(h=>{s=h;for(const f of a)for(const p of f.mutations){const m=p.key;let _=s.get(m);_==null&&(_=we.newInvalidDocument(m),s=s.insert(m,_)),Bc(p,_,f.localWriteTime),_.isFoundDocument()||(s=s.remove(m))}}))).next(()=>(s.forEach((u,h)=>{wa(n,h)||(s=s.remove(u))}),s))}Cn(e,n,r){let s=Zt();for(const u of n)for(const h of u.mutations)h instanceof Fc&&r.get(h.key)===null&&(s=s.add(h.key));let a=r;return this.He.getEntries(e,s).next(u=>(u.forEach((h,f)=>{f.isFoundDocument()&&(a=a.insert(h,f))}),a))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Nn=r,this.xn=s}static kn(e,n){let r=Zt(),s=Zt();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new Zc(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{$n(e){this.On=e}getDocumentsMatchingQuery(e,n,r,s){return function(a){return a.filters.length===0&&a.limit===null&&a.startAt==null&&a.endAt==null&&(a.explicitOrderBy.length===0||a.explicitOrderBy.length===1&&a.explicitOrderBy[0].field.isKeyField())}(n)||r.isEqual(kt.min())?this.Fn(e,n):this.On.Pn(e,s).next(a=>{const u=this.Mn(n,a);return(_a(n)||va(n))&&this.Ln(n.limitType,u,s,r)?this.Fn(e,n):(km()<=Mt.DEBUG&&tt("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Oc(n)),this.On.getDocumentsMatchingQuery(e,n,r).next(h=>(u.forEach(f=>{h=h.insert(f.key,f)}),h)))})}Mn(e,n){let r=new me(jm(e));return n.forEach((s,a)=>{wa(e,a)&&(r=r.add(a))}),r}Ln(e,n,r,s){if(r.size!==n.size)return!0;const a=e==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Fn(e,n){return km()<=Mt.DEBUG&&tt("QueryEngine","Using full collection scan to execute query:",Oc(n)),this.On.getDocumentsMatchingQuery(e,n,kt.min())}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(e,n,r,s){this.persistence=e,this.Bn=n,this.N=s,this.Un=new Ae(Dt),this.qn=new Ss(a=>Nc(a),Mc),this.Kn=kt.min(),this.In=e.getMutationQueue(r),this.jn=e.getRemoteDocumentCache(),this.ze=e.getTargetCache(),this.Qn=new xg(this.jn,this.In,this.persistence.getIndexManager()),this.Je=e.getBundleCache(),this.Bn.$n(this.Qn)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Un))}}function Fb(t,e,n,r){return new Bb(t,e,n,r)}async function Eg(t,e){const n=St(t);let r=n.In,s=n.Qn;const a=await n.persistence.runTransaction("Handle user change","readonly",u=>{let h;return n.In.getAllMutationBatches(u).next(f=>(h=f,r=n.persistence.getMutationQueue(e),s=new xg(n.jn,r,n.persistence.getIndexManager()),r.getAllMutationBatches(u))).next(f=>{const p=[],m=[];let _=Zt();for(const v of h){p.push(v.batchId);for(const x of v.mutations)_=_.add(x.key)}for(const v of f){m.push(v.batchId);for(const x of v.mutations)_=_.add(x.key)}return s.Pn(u,_).next(v=>({Wn:v,removedBatchIds:p,addedBatchIds:m}))})});return n.In=r,n.Qn=s,n.Bn.$n(n.Qn),a}function Tg(t){const e=St(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.ze.getLastRemoteSnapshotVersion(n))}function Ub(t,e){const n=St(t),r=e.snapshotVersion;let s=n.Un;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const u=n.jn.newChangeBuffer({trackRemovals:!0});s=n.Un;const h=[];e.targetChanges.forEach((p,m)=>{const _=s.get(m);if(!_)return;h.push(n.ze.removeMatchingKeys(a,p.removedDocuments,m).next(()=>n.ze.addMatchingKeys(a,p.addedDocuments,m)));const v=p.resumeToken;if(v.approximateByteSize()>0){const x=_.withResumeToken(v,r).withSequenceNumber(a.currentSequenceNumber);s=s.insert(m,x),function(A,C,R){return ee(C.resumeToken.approximateByteSize()>0),A.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=3e8?!0:R.addedDocuments.size+R.modifiedDocuments.size+R.removedDocuments.size>0}(_,x,p)&&h.push(n.ze.updateTargetData(a,x))}});let f=Ei();if(e.documentUpdates.forEach((p,m)=>{e.resolvedLimboDocuments.has(p)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(a,p))}),h.push(Vb(a,u,e.documentUpdates,r,void 0).next(p=>{f=p})),!r.isEqual(kt.min())){const p=n.ze.getLastRemoteSnapshotVersion(a).next(m=>n.ze.setTargetsMetadata(a,a.currentSequenceNumber,r));h.push(p)}return q.waitFor(h).next(()=>u.apply(a)).next(()=>n.Qn.vn(a,f)).next(()=>f)}).then(a=>(n.Un=s,a))}function Vb(t,e,n,r,s){let a=Zt();return n.forEach(u=>a=a.add(u)),e.getEntries(t,a).next(u=>{let h=Ei();return n.forEach((f,p)=>{const m=u.get(f),_=(s==null?void 0:s.get(f))||r;p.isNoDocument()&&p.version.isEqual(kt.min())?(e.removeEntry(f,_),h=h.insert(f,p)):!m.isValidDocument()||p.version.compareTo(m.version)>0||p.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(p,_),h=h.insert(f,p)):tt("LocalStore","Ignoring outdated watch update for ",f,". Current version:",m.version," Watch version:",p.version)}),h})}function Hb(t,e){const n=St(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.ze.getTargetData(r,e).next(a=>a?(s=a,q.resolve(s)):n.ze.allocateTargetId(r).next(u=>(s=new Ti(e,u,0,r.currentSequenceNumber),n.ze.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Un.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Un=n.Un.insert(r.targetId,r),n.qn.set(e,r.targetId)),r})}async function qc(t,e,n){const r=St(t),s=r.Un.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,u=>r.persistence.referenceDelegate.removeTarget(u,s))}catch(u){if(!Ps(u))throw u;tt("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.Un=r.Un.remove(e),r.qn.delete(s.target)}function bg(t,e,n){const r=St(t);let s=kt.min(),a=Zt();return r.persistence.runTransaction("Execute query","readonly",u=>function(h,f,p){const m=St(h),_=m.qn.get(p);return _!==void 0?q.resolve(m.Un.get(_)):m.ze.getTargetData(f,p)}(r,u,xi(e)).next(h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,r.ze.getMatchingKeysForTargetId(u,h.targetId).next(f=>{a=f})}).next(()=>r.Bn.getDocumentsMatchingQuery(u,e,n?s:kt.min(),n?a:Zt())).next(h=>({documents:h,Gn:a})))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(e){this.N=e,this.Yn=new Map,this.Xn=new Map}getBundleMetadata(e,n){return q.resolve(this.Yn.get(n))}saveBundleMetadata(e,n){var r;return this.Yn.set(n.id,{id:(r=n).id,version:r.version,createTime:bs(r.createTime)}),q.resolve()}getNamedQuery(e,n){return q.resolve(this.Xn.get(n))}saveNamedQuery(e,n){return this.Xn.set(n.name,function(r){return{name:r.name,query:kb(r.bundledQuery),readTime:bs(r.readTime)}}(n)),q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(){this.Zn=new me(ae.ts),this.es=new me(ae.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,n){const r=new ae(e,n);this.Zn=this.Zn.add(r),this.es=this.es.add(r)}ss(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.rs(new ae(e,n))}os(e,n){e.forEach(r=>this.removeReference(r,n))}cs(e){const n=new st(new Wt([])),r=new ae(n,e),s=new ae(n,e+1),a=[];return this.es.forEachInRange([r,s],u=>{this.rs(u),a.push(u.key)}),a}us(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const n=new st(new Wt([])),r=new ae(n,e),s=new ae(n,e+1);let a=Zt();return this.es.forEachInRange([r,s],u=>{a=a.add(u.key)}),a}containsKey(e){const n=new ae(e,0),r=this.Zn.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ae{constructor(e,n){this.key=e,this.ls=n}static ts(e,n){return st.comparator(e.key,n.key)||Dt(e.ls,n.ls)}static ns(e,n){return Dt(e.ls,n.ls)||st.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{constructor(e,n){this.Ht=e,this.referenceDelegate=n,this.In=[],this.fs=1,this.ds=new me(ae.ts)}checkEmpty(e){return q.resolve(this.In.length===0)}addMutationBatch(e,n,r,s){const a=this.fs;this.fs++,this.In.length>0&&this.In[this.In.length-1];const u=new Nb(a,n,r,s);this.In.push(u);for(const h of s)this.ds=this.ds.add(new ae(h.key,a)),this.Ht.addToCollectionParentIndex(e,h.key.path.popLast());return q.resolve(u)}lookupMutationBatch(e,n){return q.resolve(this.ws(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this._s(r),a=s<0?0:s;return q.resolve(this.In.length>a?this.In[a]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.In.length===0?-1:this.fs-1)}getAllMutationBatches(e){return q.resolve(this.In.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ae(n,0),s=new ae(n,Number.POSITIVE_INFINITY),a=[];return this.ds.forEachInRange([r,s],u=>{const h=this.ws(u.ls);a.push(h)}),q.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new me(Dt);return n.forEach(s=>{const a=new ae(s,0),u=new ae(s,Number.POSITIVE_INFINITY);this.ds.forEachInRange([a,u],h=>{r=r.add(h.ls)})}),q.resolve(this.gs(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let a=r;st.isDocumentKey(a)||(a=a.child(""));const u=new ae(new st(a),0);let h=new me(Dt);return this.ds.forEachWhile(f=>{const p=f.key.path;return!!r.isPrefixOf(p)&&(p.length===s&&(h=h.add(f.ls)),!0)},u),q.resolve(this.gs(h))}gs(e){const n=[];return e.forEach(r=>{const s=this.ws(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ee(this.ys(n.batchId,"removed")===0),this.In.shift();let r=this.ds;return q.forEach(n.mutations,s=>{const a=new ae(s.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.ds=r})}te(e){}containsKey(e,n){const r=new ae(n,0),s=this.ds.firstAfterOrEqual(r);return q.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.In.length,q.resolve()}ys(e,n){return this._s(e)}_s(e){return this.In.length===0?0:e-this.In[0].batchId}ws(e){const n=this._s(e);return n<0||n>=this.In.length?null:this.In[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(e,n){this.Ht=e,this.ps=n,this.docs=new Ae(st.comparator),this.size=0}addEntry(e,n,r){const s=n.key,a=this.docs.get(s),u=a?a.size:0,h=this.ps(n);return this.docs=this.docs.insert(s,{document:n.clone(),size:h,readTime:r}),this.size+=h-u,this.Ht.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return q.resolve(r?r.document.clone():we.newInvalidDocument(n))}getEntries(e,n){let r=Ei();return n.forEach(s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.clone():we.newInvalidDocument(s))}),q.resolve(r)}getDocumentsMatchingQuery(e,n,r){let s=Ei();const a=new st(n.path.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:h,value:{document:f,readTime:p}}=u.getNext();if(!n.path.isPrefixOf(h.path))break;p.compareTo(r)<=0||wa(n,f)&&(s=s.insert(f.key,f.clone()))}return q.resolve(s)}Ts(e,n){return q.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Wb(this)}getSize(e){return q.resolve(this.size)}}class Wb extends Db{constructor(e){super(),this.Se=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.document.isValidDocument()?n.push(this.Se.addEntry(e,s.document,this.getReadTime(r))):this.Se.removeEntry(r)}),q.waitFor(n)}getFromCache(e,n){return this.Se.getEntry(e,n)}getAllFromCache(e,n){return this.Se.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(e){this.persistence=e,this.Es=new Ss(n=>Nc(n),Mc),this.lastRemoteSnapshotVersion=kt.min(),this.highestTargetId=0,this.Is=0,this.As=new Wc,this.targetCount=0,this.Rs=gr.se()}forEachTarget(e,n){return this.Es.forEach((r,s)=>n(s)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.Is)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Is&&(this.Is=n),q.resolve()}ce(e){this.Es.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Rs=new gr(n),this.highestTargetId=n),e.sequenceNumber>this.Is&&(this.Is=e.sequenceNumber)}addTargetData(e,n){return this.ce(n),this.targetCount+=1,q.resolve()}updateTargetData(e,n){return this.ce(n),q.resolve()}removeTargetData(e,n){return this.Es.delete(n.target),this.As.cs(n.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,n,r){let s=0;const a=[];return this.Es.forEach((u,h)=>{h.sequenceNumber<=n&&r.get(h.targetId)===null&&(this.Es.delete(u),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),s++)}),q.waitFor(a).next(()=>s)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,n){const r=this.Es.get(n)||null;return q.resolve(r)}addMatchingKeys(e,n,r){return this.As.ss(n,r),q.resolve()}removeMatchingKeys(e,n,r){this.As.os(n,r);const s=this.persistence.referenceDelegate,a=[];return s&&n.forEach(u=>{a.push(s.markPotentiallyOrphaned(e,u))}),q.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.As.cs(n),q.resolve()}getMatchingKeysForTargetId(e,n){const r=this.As.hs(n);return q.resolve(r)}containsKey(e,n){return q.resolve(this.As.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(e,n){this.bs={},this.Le=new bc(0),this.Be=!1,this.Be=!0,this.referenceDelegate=e(this),this.ze=new Kb(this),this.Ht=new Rb,this.He=function(r,s){return new qb(r,s)}(this.Ht,r=>this.referenceDelegate.Ps(r)),this.N=new Mb(n),this.Je=new $b(this.N)}start(){return Promise.resolve()}shutdown(){return this.Be=!1,Promise.resolve()}get started(){return this.Be}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Ht}getMutationQueue(e){let n=this.bs[e.toKey()];return n||(n=new Zb(this.Ht,this.referenceDelegate),this.bs[e.toKey()]=n),n}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getBundleCache(){return this.Je}runTransaction(e,n,r){tt("MemoryPersistence","Starting transaction:",e);const s=new Gb(this.Le.next());return this.referenceDelegate.vs(),r(s).next(a=>this.referenceDelegate.Vs(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Ss(e,n){return q.or(Object.values(this.bs).map(r=>()=>r.containsKey(e,n)))}}class Gb extends Ib{constructor(e){super(),this.currentSequenceNumber=e}}class Kc{constructor(e){this.persistence=e,this.Ds=new Wc,this.Cs=null}static Ns(e){return new Kc(e)}get xs(){if(this.Cs)return this.Cs;throw pt()}addReference(e,n,r){return this.Ds.addReference(r,n),this.xs.delete(r.toString()),q.resolve()}removeReference(e,n,r){return this.Ds.removeReference(r,n),this.xs.add(r.toString()),q.resolve()}markPotentiallyOrphaned(e,n){return this.xs.add(n.toString()),q.resolve()}removeTarget(e,n){this.Ds.cs(n.targetId).forEach(s=>this.xs.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(a=>this.xs.add(a.toString()))}).next(()=>r.removeTargetData(e,n))}vs(){this.Cs=new Set}Vs(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.xs,r=>{const s=st.fromPath(r);return this.ks(e,s).next(a=>{a||n.removeEntry(s)})}).next(()=>(this.Cs=null,n.apply(e)))}updateLimboDocument(e,n){return this.ks(e,n).next(r=>{r?this.xs.delete(n.toString()):this.xs.add(n.toString())})}Ps(e){return 0}ks(e,n){return q.or([()=>q.resolve(this.Ds.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ss(e,n)])}}class Pg{constructor(){this.activeTargetIds=lg()}Fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ms(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Os(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Yb{constructor(){this.yi=new Pg,this.pi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.yi.Fs(e),this.pi[e]||"not-current"}updateQueryState(e,n,r){this.pi[e]=n}removeLocalQueryTarget(e){this.yi.Ms(e)}isLocalQueryTarget(e){return this.yi.activeTargetIds.has(e)}clearQueryState(e){delete this.pi[e]}getAllActiveQueryTargets(){return this.yi.activeTargetIds}isActiveQueryTarget(e){return this.yi.activeTargetIds.has(e)}start(){return this.yi=new Pg,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{Ti(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(){this.Ei=()=>this.Ii(),this.Ai=()=>this.Ri(),this.bi=[],this.Pi()}Ti(e){this.bi.push(e)}shutdown(){window.removeEventListener("online",this.Ei),window.removeEventListener("offline",this.Ai)}Pi(){window.addEventListener("online",this.Ei),window.addEventListener("offline",this.Ai)}Ii(){tt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.bi)e(0)}Ri(){tt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.bi)e(1)}static bt(){return typeof window!="undefined"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(e){this.vi=e.vi,this.Vi=e.Vi}Si(e){this.Di=e}Ci(e){this.Ni=e}onMessage(e){this.xi=e}close(){this.Vi()}send(e){this.vi(e)}ki(){this.Di()}$i(e){this.Ni(e)}Oi(e){this.xi(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.Fi=n+"://"+e.host,this.Mi="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Li(e,n,r,s){const a=this.Bi(e,n);tt("RestConnection","Sending: ",a,r);const u={};return this.Ui(u,s),this.qi(e,a,u,r).then(h=>(tt("RestConnection","Received: ",h),h),h=>{throw Rm("RestConnection",`${e} failed with error: `,h,"url: ",a,"request:",r),h})}Ki(e,n,r,s){return this.Li(e,n,r,s)}Ui(e,n){if(e["X-Goog-Api-Client"]="gl-js/ fire/"+cr,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n)for(const r in n.authHeaders)n.authHeaders.hasOwnProperty(r)&&(e[r]=n.authHeaders[r])}Bi(e,n){const r=Qb[e];return`${this.Fi}/v1/${n}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}qi(e,n,r,s){return new Promise((a,u)=>{const h=new AT;h.listenOnce(bT.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Ec.NO_ERROR:const p=h.getResponseJson();tt("Connection","XHR received:",JSON.stringify(p)),a(p);break;case Ec.TIMEOUT:tt("Connection",'RPC "'+e+'" timed out'),u(new nt($.DEADLINE_EXCEEDED,"Request time out"));break;case Ec.HTTP_ERROR:const m=h.getStatus();if(tt("Connection",'RPC "'+e+'" failed with status:',m,"response text:",h.getResponseText()),m>0){const _=h.getResponseJson().error;if(_&&_.status&&_.message){const v=function(x){const A=x.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(A)>=0?A:$.UNKNOWN}(_.status);u(new nt(v,_.message))}else u(new nt($.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new nt($.UNAVAILABLE,"Connection failed."));break;default:pt()}}finally{tt("Connection",'RPC "'+e+'" completed.')}});const f=JSON.stringify(s);h.send(n,"POST",f,r,15)})}ji(e,n){const r=[this.Fi,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=ET(),a=TT(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(u.xmlHttpFactory=new ST({})),this.Ui(u.initMessageHeaders,n),xx()||Tx()||bx()||Px()||Sx()||Ex()||(u.httpHeadersOverwriteParam="$httpHeaders");const h=r.join("");tt("Connection","Creating WebChannel: "+h,u);const f=s.createWebChannel(h,u);let p=!1,m=!1;const _=new Jb({vi:x=>{m?tt("Connection","Not sending because WebChannel is closed:",x):(p||(tt("Connection","Opening WebChannel transport."),f.open(),p=!0),tt("Connection","WebChannel sending:",x),f.send(x))},Vi:()=>f.close()}),v=(x,A,C)=>{x.listen(A,R=>{try{C(R)}catch(V){setTimeout(()=>{throw V},0)}})};return v(f,da.EventType.OPEN,()=>{m||tt("Connection","WebChannel transport opened.")}),v(f,da.EventType.CLOSE,()=>{m||(m=!0,tt("Connection","WebChannel transport closed"),_.$i())}),v(f,da.EventType.ERROR,x=>{m||(m=!0,Rm("Connection","WebChannel transport errored:",x),_.$i(new nt($.UNAVAILABLE,"The operation could not be completed")))}),v(f,da.EventType.MESSAGE,x=>{var A;if(!m){const C=x.data[0];ee(!!C);const R=C,V=R.error||((A=R[0])===null||A===void 0?void 0:A.error);if(V){tt("Connection","WebChannel received error:",V);const Y=V.status;let Q=function(At){const Ht=ie[At];if(Ht!==void 0)return og(Ht)}(Y),ot=V.message;Q===void 0&&(Q=$.INTERNAL,ot="Unknown error status: "+Y+" with message "+V.message),m=!0,_.$i(new nt(Q,ot)),f.close()}else tt("Connection","WebChannel received:",C),_.Oi(C)}}),v(a,PT.STAT_EVENT,x=>{x.stat===Nm.PROXY?tt("Connection","Detected buffering proxy"):x.stat===Nm.NOPROXY&&tt("Connection","Detected no buffering proxy")}),setTimeout(()=>{_.ki()},0),_}}function jc(){return typeof document!="undefined"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ag(t){return new mb(t,!0)}class Cg{constructor(e,n,r=1e3,s=1.5,a=6e4){this.Oe=e,this.timerId=n,this.Qi=r,this.Wi=s,this.Gi=a,this.zi=0,this.Hi=null,this.Ji=Date.now(),this.reset()}reset(){this.zi=0}Yi(){this.zi=this.Gi}Xi(e){this.cancel();const n=Math.floor(this.zi+this.Zi()),r=Math.max(0,Date.now()-this.Ji),s=Math.max(0,n-r);s>0&&tt("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.zi} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Hi=this.Oe.enqueueAfterDelay(this.timerId,s,()=>(this.Ji=Date.now(),e())),this.zi*=this.Wi,this.zi<this.Qi&&(this.zi=this.Qi),this.zi>this.Gi&&(this.zi=this.Gi)}tr(){this.Hi!==null&&(this.Hi.skipDelay(),this.Hi=null)}cancel(){this.Hi!==null&&(this.Hi.cancel(),this.Hi=null)}Zi(){return(Math.random()-.5)*this.zi}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(e,n,r,s,a,u,h){this.Oe=e,this.er=r,this.nr=s,this.sr=a,this.credentialsProvider=u,this.listener=h,this.state=0,this.ir=0,this.rr=null,this.cr=null,this.stream=null,this.ar=new Cg(e,n)}ur(){return this.state===1||this.state===5||this.hr()}hr(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.lr()}async stop(){this.ur()&&await this.close(0)}dr(){this.state=0,this.ar.reset()}wr(){this.hr()&&this.rr===null&&(this.rr=this.Oe.enqueueAfterDelay(this.er,6e4,()=>this._r()))}mr(e){this.gr(),this.stream.send(e)}async _r(){if(this.hr())return this.close(0)}gr(){this.rr&&(this.rr.cancel(),this.rr=null)}yr(){this.cr&&(this.cr.cancel(),this.cr=null)}async close(e,n){this.gr(),this.yr(),this.ar.cancel(),this.ir++,e!==4?this.ar.reset():n&&n.code===$.RESOURCE_EXHAUSTED?(qn(n.toString()),qn("Using maximum backoff delay to prevent overloading the backend."),this.ar.Yi()):n&&n.code===$.UNAUTHENTICATED&&this.state!==3&&this.credentialsProvider.invalidateToken(),this.stream!==null&&(this.pr(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ci(n)}pr(){}auth(){this.state=1;const e=this.Tr(this.ir),n=this.ir;this.credentialsProvider.getToken().then(r=>{this.ir===n&&this.Er(r)},r=>{e(()=>{const s=new nt($.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Ir(s)})})}Er(e){const n=this.Tr(this.ir);this.stream=this.Ar(e),this.stream.Si(()=>{n(()=>(this.state=2,this.cr=this.Oe.enqueueAfterDelay(this.nr,1e4,()=>(this.hr()&&(this.state=3),Promise.resolve())),this.listener.Si()))}),this.stream.Ci(r=>{n(()=>this.Ir(r))}),this.stream.onMessage(r=>{n(()=>this.onMessage(r))})}lr(){this.state=5,this.ar.Xi(async()=>{this.state=0,this.start()})}Ir(e){return tt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Tr(e){return n=>{this.Oe.enqueueAndForget(()=>this.ir===e?n():(tt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class nP extends eP{constructor(e,n,r,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,a),this.N=s}Ar(e){return this.sr.ji("Listen",e)}onMessage(e){this.ar.reset();const n=wb(this.N,e),r=function(s){if(!("targetChange"in s))return kt.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?kt.min():a.readTime?bs(a.readTime):kt.min()}(e);return this.listener.Rr(n,r)}br(e){const n={};n.database=mg(this.N),n.addTarget=function(s,a){let u;const h=a.target;return u=kc(h)?{documents:xb(s,h)}:{query:Eb(s,h)},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?u.resumeToken=_b(s,a.resumeToken):a.snapshotVersion.compareTo(kt.min())>0&&(u.readTime=gb(s,a.snapshotVersion.toTimestamp())),u}(this.N,e);const r=bb(this.N,e);r&&(n.labels=r),this.mr(n)}Pr(e){const n={};n.database=mg(this.N),n.removeTarget=e,this.mr(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP extends class{}{constructor(e,n,r){super(),this.credentials=e,this.sr=n,this.N=r,this.kr=!1}$r(){if(this.kr)throw new nt($.FAILED_PRECONDITION,"The client has already been terminated.")}Li(e,n,r){return this.$r(),this.credentials.getToken().then(s=>this.sr.Li(e,n,r,s)).catch(s=>{throw s.name==="FirebaseError"?(s.code===$.UNAUTHENTICATED&&this.credentials.invalidateToken(),s):new nt($.UNKNOWN,s.toString())})}Ki(e,n,r){return this.$r(),this.credentials.getToken().then(s=>this.sr.Ki(e,n,r,s)).catch(s=>{throw s.name==="FirebaseError"?(s.code===$.UNAUTHENTICATED&&this.credentials.invalidateToken(),s):new nt($.UNKNOWN,s.toString())})}terminate(){this.kr=!0}}class rP{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.Or=0,this.Fr=null,this.Mr=!0}Lr(){this.Or===0&&(this.Br("Unknown"),this.Fr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.Fr=null,this.Ur("Backend didn't respond within 10 seconds."),this.Br("Offline"),Promise.resolve())))}qr(e){this.state==="Online"?this.Br("Unknown"):(this.Or++,this.Or>=1&&(this.Kr(),this.Ur(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.Br("Offline")))}set(e){this.Kr(),this.Or=0,e==="Online"&&(this.Mr=!1),this.Br(e)}Br(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}Ur(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Mr?(qn(n),this.Mr=!1):tt("OnlineStateTracker",n)}Kr(){this.Fr!==null&&(this.Fr.cancel(),this.Fr=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(e,n,r,s,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.jr=[],this.Qr=new Map,this.Wr=new Set,this.Gr=[],this.zr=a,this.zr.Ti(u=>{r.enqueueAndForget(async()=>{Cs(this)&&(tt("RemoteStore","Restarting streams for network reachability change."),await async function(h){const f=St(h);f.Wr.add(4),await As(f),f.Hr.set("Unknown"),f.Wr.delete(4),await Ca(f)}(this))})}),this.Hr=new rP(r,s)}}async function Ca(t){if(Cs(t))for(const e of t.Gr)await e(!0)}async function As(t){for(const e of t.Gr)await e(!1)}function Lg(t,e){const n=St(t);n.Qr.has(e.targetId)||(n.Qr.set(e.targetId,e),Xc(n)?Yc(n):_r(n).hr()&&Gc(n,e))}function Ig(t,e){const n=St(t),r=_r(n);n.Qr.delete(e),r.hr()&&Ng(n,e),n.Qr.size===0&&(r.hr()?r.wr():Cs(n)&&n.Hr.set("Unknown"))}function Gc(t,e){t.Jr.Y(e.targetId),_r(t).br(e)}function Ng(t,e){t.Jr.Y(e),_r(t).Pr(e)}function Yc(t){t.Jr=new fb({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Tt:e=>t.Qr.get(e)||null}),_r(t).start(),t.Hr.Lr()}function Xc(t){return Cs(t)&&!_r(t).ur()&&t.Qr.size>0}function Cs(t){return St(t).Wr.size===0}function Mg(t){t.Jr=void 0}async function oP(t){t.Qr.forEach((e,n)=>{Gc(t,e)})}async function aP(t,e){Mg(t),Xc(t)?(t.Hr.qr(e),Yc(t)):t.Hr.set("Unknown")}async function lP(t,e,n){if(t.Hr.set("Online"),e instanceof cg&&e.state===2&&e.cause)try{await async function(r,s){const a=s.cause;for(const u of s.targetIds)r.Qr.has(u)&&(await r.remoteSyncer.rejectListen(u,a),r.Qr.delete(u),r.Jr.removeTarget(u))}(t,e)}catch(r){tt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await kg(t,r)}else if(e instanceof Aa?t.Jr.rt(e):e instanceof ug?t.Jr.ft(e):t.Jr.at(e),!n.isEqual(kt.min()))try{const r=await Tg(t.localStore);n.compareTo(r)>=0&&await function(s,a){const u=s.Jr._t(a);return u.targetChanges.forEach((h,f)=>{if(h.resumeToken.approximateByteSize()>0){const p=s.Qr.get(f);p&&s.Qr.set(f,p.withResumeToken(h.resumeToken,a))}}),u.targetMismatches.forEach(h=>{const f=s.Qr.get(h);if(!f)return;s.Qr.set(h,f.withResumeToken(ye.EMPTY_BYTE_STRING,f.snapshotVersion)),Ng(s,h);const p=new Ti(f.target,h,1,f.sequenceNumber);Gc(s,p)}),s.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(r){tt("RemoteStore","Failed to raise snapshot:",r),await kg(t,r)}}async function kg(t,e,n){if(!Ps(e))throw e;t.Wr.add(1),await As(t),t.Hr.set("Offline"),n||(n=()=>Tg(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{tt("RemoteStore","Retrying IndexedDB access"),await n(),t.Wr.delete(1),await Ca(t)})}async function uP(t,e){const n=St(t);e?(n.Wr.delete(2),await Ca(n)):e||(n.Wr.add(2),await As(n),n.Hr.set("Unknown"))}function _r(t){return t.Yr||(t.Yr=function(e,n,r){const s=St(e);return s.$r(),new nP(n,s.sr,s.credentials,s.N,r)}(t.datastore,t.asyncQueue,{Si:oP.bind(null,t),Ci:aP.bind(null,t),Rr:lP.bind(null,t)}),t.Gr.push(async e=>{e?(t.Yr.dr(),Xc(t)?Yc(t):t.Hr.set("Unknown")):(await t.Yr.stop(),Mg(t))})),t.Yr}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e,n,r,s,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new yi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(e,n,r,s,a){const u=Date.now()+r,h=new Qc(e,n,u,s,a);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new nt($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Rg(t,e){if(qn("AsyncQueue",`${e}: ${t}`),Ps(t))return new nt($.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e){this.comparator=e?(n,r)=>e(n,r)||st.comparator(n.key,r.key):(n,r)=>st.comparator(n.key,r.key),this.keyedMap=Uc(),this.sortedSet=new Ae(this.comparator)}static emptySet(e){return new vr(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof vr)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new vr;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(){this.Zr=new Ae(st.comparator)}track(e){const n=e.doc.key,r=this.Zr.get(n);r?e.type!==0&&r.type===3?this.Zr=this.Zr.insert(n,e):e.type===3&&r.type!==1?this.Zr=this.Zr.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Zr=this.Zr.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Zr=this.Zr.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Zr=this.Zr.remove(n):e.type===1&&r.type===2?this.Zr=this.Zr.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Zr=this.Zr.insert(n,{type:2,doc:e.doc}):pt():this.Zr=this.Zr.insert(n,e)}eo(){const e=[];return this.Zr.inorderTraversal((n,r)=>{e.push(r)}),e}}class yr{constructor(e,n,r,s,a,u,h,f){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=f}static fromInitialDocuments(e,n,r,s){const a=[];return n.forEach(u=>{a.push({type:0,doc:u})}),new yr(e,n,vr.emptySet(n),a,r,s,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ya(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(){this.no=void 0,this.listeners=[]}}class hP{constructor(){this.queries=new Ss(e=>Km(e),ya),this.onlineState="Unknown",this.so=new Set}}async function fP(t,e){const n=St(t),r=e.query;let s=!1,a=n.queries.get(r);if(a||(s=!0,a=new cP),s)try{a.no=await n.onListen(r)}catch(u){const h=Rg(u,`Initialization of query '${Oc(e.query)}' failed`);return void e.onError(h)}n.queries.set(r,a),a.listeners.push(e),e.io(n.onlineState),a.no&&e.ro(a.no)&&Jc(n)}async function dP(t,e){const n=St(t),r=e.query;let s=!1;const a=n.queries.get(r);if(a){const u=a.listeners.indexOf(e);u>=0&&(a.listeners.splice(u,1),s=a.listeners.length===0)}if(s)return n.queries.delete(r),n.onUnlisten(r)}function pP(t,e){const n=St(t);let r=!1;for(const s of e){const a=s.query,u=n.queries.get(a);if(u){for(const h of u.listeners)h.ro(s)&&(r=!0);u.no=s}}r&&Jc(n)}function mP(t,e,n){const r=St(t),s=r.queries.get(e);if(s)for(const a of s.listeners)a.onError(n);r.queries.delete(e)}function Jc(t){t.so.forEach(e=>{e.next()})}class gP{constructor(e,n,r){this.query=e,this.oo=n,this.co=!1,this.ao=null,this.onlineState="Unknown",this.options=r||{}}ro(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new yr(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let n=!1;return this.co?this.uo(e)&&(this.oo.next(e),n=!0):this.ho(e,this.onlineState)&&(this.lo(e),n=!0),this.ao=e,n}onError(e){this.oo.error(e)}io(e){this.onlineState=e;let n=!1;return this.ao&&!this.co&&this.ho(this.ao,e)&&(this.lo(this.ao),n=!0),n}ho(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.fo||!r)&&(!e.docs.isEmpty()||n==="Offline")}uo(e){if(e.docChanges.length>0)return!0;const n=this.ao&&this.ao.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}lo(e){e=yr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.co=!0,this.oo.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(e){this.key=e}}class zg{constructor(e){this.key=e}}class _P{constructor(e,n){this.query=e,this.po=n,this.To=null,this.current=!1,this.Eo=Zt(),this.mutatedKeys=Zt(),this.Io=jm(e),this.Ao=new vr(this.Io)}get Ro(){return this.po}bo(e,n){const r=n?n.Po:new Og,s=n?n.Ao:this.Ao;let a=n?n.mutatedKeys:this.mutatedKeys,u=s,h=!1;const f=_a(this.query)&&s.size===this.query.limit?s.last():null,p=va(this.query)&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((m,_)=>{const v=s.get(m),x=wa(this.query,_)?_:null,A=!!v&&this.mutatedKeys.has(v.key),C=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let R=!1;v&&x?v.data.isEqual(x.data)?A!==C&&(r.track({type:3,doc:x}),R=!0):this.vo(v,x)||(r.track({type:2,doc:x}),R=!0,(f&&this.Io(x,f)>0||p&&this.Io(x,p)<0)&&(h=!0)):!v&&x?(r.track({type:0,doc:x}),R=!0):v&&!x&&(r.track({type:1,doc:v}),R=!0,(f||p)&&(h=!0)),R&&(x?(u=u.add(x),a=C?a.add(m):a.delete(m)):(u=u.delete(m),a=a.delete(m)))}),_a(this.query)||va(this.query))for(;u.size>this.query.limit;){const m=_a(this.query)?u.last():u.first();u=u.delete(m.key),a=a.delete(m.key),r.track({type:1,doc:m})}return{Ao:u,Po:r,Ln:h,mutatedKeys:a}}vo(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const s=this.Ao;this.Ao=e.Ao,this.mutatedKeys=e.mutatedKeys;const a=e.Po.eo();a.sort((p,m)=>function(_,v){const x=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pt()}};return x(_)-x(v)}(p.type,m.type)||this.Io(p.doc,m.doc)),this.Vo(r);const u=n?this.So():[],h=this.Eo.size===0&&this.current?1:0,f=h!==this.To;return this.To=h,a.length!==0||f?{snapshot:new yr(this.query,e.Ao,s,a,e.mutatedKeys,h===0,f,!1),Do:u}:{Do:u}}io(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ao:this.Ao,Po:new Og,mutatedKeys:this.mutatedKeys,Ln:!1},!1)):{Do:[]}}Co(e){return!this.po.has(e)&&!!this.Ao.has(e)&&!this.Ao.get(e).hasLocalMutations}Vo(e){e&&(e.addedDocuments.forEach(n=>this.po=this.po.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.po=this.po.delete(n)),this.current=e.current)}So(){if(!this.current)return[];const e=this.Eo;this.Eo=Zt(),this.Ao.forEach(r=>{this.Co(r.key)&&(this.Eo=this.Eo.add(r.key))});const n=[];return e.forEach(r=>{this.Eo.has(r)||n.push(new zg(r))}),this.Eo.forEach(r=>{e.has(r)||n.push(new Dg(r))}),n}No(e){this.po=e.Gn,this.Eo=Zt();const n=this.bo(e.documents);return this.applyChanges(n,!0)}xo(){return yr.fromInitialDocuments(this.query,this.Ao,this.mutatedKeys,this.To===0)}}class vP{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class yP{constructor(e){this.key=e,this.ko=!1}}class wP{constructor(e,n,r,s,a,u){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.$o={},this.Oo=new Ss(h=>Km(h),ya),this.Fo=new Map,this.Mo=new Set,this.Lo=new Ae(st.comparator),this.Bo=new Map,this.Uo=new Wc,this.qo={},this.Ko=new Map,this.jo=gr.ie(),this.onlineState="Unknown",this.Qo=void 0}get isPrimaryClient(){return this.Qo===!0}}async function xP(t,e){const n=CP(t);let r,s;const a=n.Oo.get(e);if(a)r=a.targetId,n.sharedClientState.addLocalQueryTarget(r),s=a.view.xo();else{const u=await Hb(n.localStore,xi(e)),h=n.sharedClientState.addLocalQueryTarget(u.targetId);r=u.targetId,s=await EP(n,e,r,h==="current"),n.isPrimaryClient&&Lg(n.remoteStore,u)}return s}async function EP(t,e,n,r){t.Wo=(m,_,v)=>async function(x,A,C,R){let V=A.view.bo(C);V.Ln&&(V=await bg(x.localStore,A.query,!1).then(({documents:ot})=>A.view.bo(ot,V)));const Y=R&&R.targetChanges.get(A.targetId),Q=A.view.applyChanges(V,x.isPrimaryClient,Y);return Vg(x,A.targetId,Q.Do),Q.snapshot}(t,m,_,v);const s=await bg(t.localStore,e,!0),a=new _P(e,s.Gn),u=a.bo(s.documents),h=Ts.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline"),f=a.applyChanges(u,t.isPrimaryClient,h);Vg(t,n,f.Do);const p=new vP(e,n,a);return t.Oo.set(e,p),t.Fo.has(n)?t.Fo.get(n).push(e):t.Fo.set(n,[e]),f.snapshot}async function TP(t,e){const n=St(t),r=n.Oo.get(e),s=n.Fo.get(r.targetId);if(s.length>1)return n.Fo.set(r.targetId,s.filter(a=>!ya(a,e))),void n.Oo.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await qc(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Ig(n.remoteStore,r.targetId),th(n,r.targetId)}).catch($c)):(th(n,r.targetId),await qc(n.localStore,r.targetId,!0))}async function Bg(t,e){const n=St(t);try{const r=await Ub(n.localStore,e);e.targetChanges.forEach((s,a)=>{const u=n.Bo.get(a);u&&(ee(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?u.ko=!0:s.modifiedDocuments.size>0?ee(u.ko):s.removedDocuments.size>0&&(ee(u.ko),u.ko=!1))}),await Hg(n,r,e)}catch(r){await $c(r)}}function Fg(t,e,n){const r=St(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Oo.forEach((a,u)=>{const h=u.view.io(e);h.snapshot&&s.push(h.snapshot)}),function(a,u){const h=St(a);h.onlineState=u;let f=!1;h.queries.forEach((p,m)=>{for(const _ of m.listeners)_.io(u)&&(f=!0)}),f&&Jc(h)}(r.eventManager,e),s.length&&r.$o.Rr(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function bP(t,e,n){const r=St(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Bo.get(e),a=s&&s.key;if(a){let u=new Ae(st.comparator);u=u.insert(a,we.newNoDocument(a,kt.min()));const h=Zt().add(a),f=new Sa(kt.min(),new Map,new me(Dt),u,h);await Bg(r,f),r.Lo=r.Lo.remove(a),r.Bo.delete(e),eh(r)}else await qc(r.localStore,e,!1).then(()=>th(r,e,n)).catch($c)}function th(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Fo.get(e))t.Oo.delete(r),n&&t.$o.Go(r,n);t.Fo.delete(e),t.isPrimaryClient&&t.Uo.cs(e).forEach(r=>{t.Uo.containsKey(r)||Ug(t,r)})}function Ug(t,e){t.Mo.delete(e.path.canonicalString());const n=t.Lo.get(e);n!==null&&(Ig(t.remoteStore,n),t.Lo=t.Lo.remove(e),t.Bo.delete(n),eh(t))}function Vg(t,e,n){for(const r of n)r instanceof Dg?(t.Uo.addReference(r.key,e),PP(t,r)):r instanceof zg?(tt("SyncEngine","Document no longer in limbo: "+r.key),t.Uo.removeReference(r.key,e),t.Uo.containsKey(r.key)||Ug(t,r.key)):pt()}function PP(t,e){const n=e.key,r=n.path.canonicalString();t.Lo.get(n)||t.Mo.has(r)||(tt("SyncEngine","New document in limbo: "+n),t.Mo.add(r),eh(t))}function eh(t){for(;t.Mo.size>0&&t.Lo.size<t.maxConcurrentLimboResolutions;){const e=t.Mo.values().next().value;t.Mo.delete(e);const n=new st(Wt.fromString(e)),r=t.jo.next();t.Bo.set(r,new yP(n)),t.Lo=t.Lo.insert(n,r),Lg(t.remoteStore,new Ti(xi(Wm(n.path)),r,2,bc.T))}}async function Hg(t,e,n){const r=St(t),s=[],a=[],u=[];r.Oo.isEmpty()||(r.Oo.forEach((h,f)=>{u.push(r.Wo(f,e,n).then(p=>{if(p){r.isPrimaryClient&&r.sharedClientState.updateQueryState(f.targetId,p.fromCache?"not-current":"current"),s.push(p);const m=Zc.kn(f.targetId,p);a.push(m)}}))}),await Promise.all(u),r.$o.Rr(s),await async function(h,f){const p=St(h);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>q.forEach(f,_=>q.forEach(_.Nn,v=>p.persistence.referenceDelegate.addReference(m,_.targetId,v)).next(()=>q.forEach(_.xn,v=>p.persistence.referenceDelegate.removeReference(m,_.targetId,v)))))}catch(m){if(!Ps(m))throw m;tt("LocalStore","Failed to update sequence numbers: "+m)}for(const m of f){const _=m.targetId;if(!m.fromCache){const v=p.Un.get(_),x=v.snapshotVersion,A=v.withLastLimboFreeSnapshotVersion(x);p.Un=p.Un.insert(_,A)}}}(r.localStore,a))}async function SP(t,e){const n=St(t);if(!n.currentUser.isEqual(e)){tt("SyncEngine","User change. New user:",e.toKey());const r=await Eg(n.localStore,e);n.currentUser=e,function(s,a){s.Ko.forEach(u=>{u.forEach(h=>{h.reject(new nt($.CANCELLED,a))})}),s.Ko.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Hg(n,r.Wn)}}function AP(t,e){const n=St(t),r=n.Bo.get(e);if(r&&r.ko)return Zt().add(r.key);{let s=Zt();const a=n.Fo.get(e);if(!a)return s;for(const u of a){const h=n.Oo.get(u);s=s.unionWith(h.view.Ro)}return s}}function CP(t){const e=St(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Bg.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=AP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=bP.bind(null,e),e.$o.Rr=pP.bind(null,e.eventManager),e.$o.Go=mP.bind(null,e.eventManager),e}class LP{constructor(){this.synchronizeTabs=!1}async initialize(e){this.N=Ag(e.databaseInfo.databaseId),this.sharedClientState=this.Ho(e),this.persistence=this.Jo(e),await this.persistence.start(),this.gcScheduler=this.Yo(e),this.localStore=this.Xo(e)}Yo(e){return null}Xo(e){return Fb(this.persistence,new zb,e.initialUser,this.N)}Jo(e){return new jb(Kc.Ns,this.N)}Ho(e){return new Yb}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class IP{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Fg(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=SP.bind(null,this.syncEngine),await uP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new hP}createDatastore(e){const n=Ag(e.databaseInfo.databaseId),r=(s=e.databaseInfo,new tP(s));var s;return function(a,u,h){return new iP(a,u,h)}(e.credentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,s=e.asyncQueue,a=h=>Fg(this.syncEngine,h,0),u=Sg.bt()?new Sg:new Xb,new sP(n,r,s,a,u);var n,r,s,a,u}createSyncEngine(e,n){return function(r,s,a,u,h,f,p){const m=new wP(r,s,a,u,h,f);return p&&(m.Qo=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=St(e);tt("RemoteStore","RemoteStore shutting down."),n.Wr.add(5),await As(n),n.zr.shutdown(),n.Hr.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.tc(this.observer.next,e)}error(e){this.observer.error?this.tc(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}ec(){this.muted=!0}tc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(e,n,r){this.credentials=e,this.asyncQueue=n,this.databaseInfo=r,this.user=Ie.UNAUTHENTICATED,this.clientId=Om.I(),this.credentialListener=()=>Promise.resolve(),this.credentials.start(n,async s=>{tt("FirestoreClient","Received user=",s.uid),await this.credentialListener(s),this.user=s})}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.credentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new nt($.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new yi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.credentials.shutdown(),e.resolve()}catch(n){const r=Rg(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function kP(t,e){t.asyncQueue.verifyOperationInProgress(),tt("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Eg(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e}async function RP(t,e){t.asyncQueue.verifyOperationInProgress();const n=await OP(t);tt("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(s=>async function(a,u){const h=St(a);h.asyncQueue.verifyOperationInProgress(),tt("RemoteStore","RemoteStore received new credentials");const f=Cs(h);h.Wr.add(3),await As(h),f&&h.Hr.set("Unknown"),await h.remoteSyncer.handleCredentialChange(u),h.Wr.delete(3),await Ca(h)}(e.remoteStore,s)),t.onlineComponents=e}async function OP(t){return t.offlineComponents||(tt("FirestoreClient","Using default OfflineComponentProvider"),await kP(t,new LP)),t.offlineComponents}async function DP(t){return t.onlineComponents||(tt("FirestoreClient","Using default OnlineComponentProvider"),await RP(t,new IP)),t.onlineComponents}async function zP(t){const e=await DP(t),n=e.eventManager;return n.onListen=xP.bind(null,e.syncEngine),n.onUnlisten=TP.bind(null,e.syncEngine),n}function BP(t,e,n={}){const r=new yi;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,u,h,f){const p=new NP({next:_=>{a.enqueueAndForget(()=>dP(s,m)),_.fromCache&&h.source==="server"?f.reject(new nt($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(_)},error:_=>f.reject(_)}),m=new gP(u,p,{includeMetadataChanges:!0,fo:!0});return fP(s,m)}(await zP(t),t.asyncQueue,e,n,r)),r.promise}class FP{constructor(e,n,r,s,a,u,h,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.useFetchStreams=f}}class Ls{constructor(e,n){this.projectId=e,this.database=n||"(default)"}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ls&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $g=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zg(t,e,n){if(!n)throw new nt($.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function UP(t,e,n,r){if(e===!0&&r===!0)throw new nt($.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function qg(t){if(!st.isDocumentKey(t))throw new nt($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Wg(t){if(st.isDocumentKey(t))throw new nt($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function VP(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":pt()}function Kg(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new nt($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=VP(t);throw new nt($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{constructor(e){var n;if(e.host===void 0){if(e.ssl!==void 0)throw new nt($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new nt($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,UP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(e,n){this._credentials=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new jg({}),this._settingsFrozen=!1,e instanceof Ls?this._databaseId=e:(this._app=e,this._databaseId=function(r){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new nt($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ls(r.options.projectId)}(e))}get app(){if(!this._app)throw new nt($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new nt($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new jg(e),e.credentials!==void 0&&(this._credentials=function(n){if(!n)return new LT;switch(n.type){case"gapi":const r=n.client;return ee(!(typeof r!="object"||r===null||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new MT(r,n.sessionIndex||"0",n.iamToken||null);case"provider":return n.client;default:throw new nt($.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=$g.get(e);n&&(tt("ComponentProvider","Removing Datastore"),$g.delete(e),n.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new jn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Pn(this.firestore,e,this._key)}}class La{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new La(this.firestore,e,this._query)}}class jn extends La{constructor(e,n,r){super(e,n,Wm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Pn(this.firestore,null,new st(e))}withConverter(e){return new jn(this.firestore,e,this._path)}}function IC(t,e,...n){if(t=dp(t),Zg("collection","path",e),t instanceof nh){const r=Wt.fromString(e,...n);return Wg(r),new jn(t,null,r)}{if(!(t instanceof Pn||t instanceof jn))throw new nt($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Wt.fromString(e,...n));return Wg(r),new jn(t.firestore,null,r)}}function NC(t,e,...n){if(t=dp(t),arguments.length===1&&(e=Om.I()),Zg("doc","path",e),t instanceof nh){const r=Wt.fromString(e,...n);return qg(r),new Pn(t,null,new st(r))}{if(!(t instanceof Pn||t instanceof jn))throw new nt($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Wt.fromString(e,...n));return qg(r),new Pn(t.firestore,t instanceof jn?t.converter:null,new st(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(){this._c=Promise.resolve(),this.mc=[],this.gc=!1,this.yc=[],this.Tc=null,this.Ec=!1,this.Ic=!1,this.Ac=[],this.ar=new Cg(this,"async_queue_retry"),this.Rc=()=>{const n=jc();n&&tt("AsyncQueue","Visibility state changed to "+n.visibilityState),this.ar.tr()};const e=jc();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Rc)}get isShuttingDown(){return this.gc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.bc(),this.Pc(e)}enterRestrictedMode(e){if(!this.gc){this.gc=!0,this.Ic=e||!1;const n=jc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Rc)}}enqueue(e){if(this.bc(),this.gc)return new Promise(()=>{});const n=new yi;return this.Pc(()=>this.gc&&this.Ic?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.mc.push(e),this.vc()))}async vc(){if(this.mc.length!==0){try{await this.mc[0](),this.mc.shift(),this.ar.reset()}catch(e){if(!Ps(e))throw e;tt("AsyncQueue","Operation failed with retryable error: "+e)}this.mc.length>0&&this.ar.Xi(()=>this.vc())}}Pc(e){const n=this._c.then(()=>(this.Ec=!0,e().catch(r=>{this.Tc=r,this.Ec=!1;const s=function(a){let u=a.message||"";return a.stack&&(u=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),u}(r);throw qn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.Ec=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.bc(),this.Ac.indexOf(e)>-1&&(n=0);const s=Qc.createAndSchedule(this,e,n,r,a=>this.Vc(a));return this.yc.push(s),s}bc(){this.Tc&&pt()}verifyOperationInProgress(){}async Sc(){let e;do e=this._c,await e;while(e!==this._c)}Dc(e){for(const n of this.yc)if(n.timerId===e)return!0;return!1}Cc(e){return this.Sc().then(()=>{this.yc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.yc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Sc()})}Nc(e){this.Ac.push(e)}Vc(e){const n=this.yc.indexOf(e);this.yc.splice(n,1)}}class Gg extends nh{constructor(e,n){super(e,n),this.type="firestore",this._queue=new HP,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Yg(this),this._firestoreClient.terminate()}}function MC(t=_E()){return dE(t,"firestore").getImmediate()}function $P(t){return t._firestoreClient||Yg(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Yg(t){var e;const n=t._freezeSettings(),r=function(s,a,u,h){return new FP(s,a,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new MP(t._credentials,t._queue,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new nt($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ke(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ia(ye.fromBase64String(e))}catch(n){throw new nt($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ia(ye.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new nt($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new nt($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Dt(this._lat,e._lat)||Dt(this._long,e._long)}}const qP=new RegExp("[~\\*/\\[\\]]");function WP(t,e,n){if(e.search(qP)>=0)throw Qg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Xg(...e.split("."))._internalPath}catch{throw Qg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Qg(t,e,n,r,s){const a=r&&!r.isEmpty(),u=s!==void 0;let h=`Function ${e}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let f="";return(a||u)&&(f+=" (found",a&&(f+=` in field ${r}`),u&&(f+=` in document ${s}`),f+=")"),new nt($.INVALID_ARGUMENT,h+t+f)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(e,n,r,s,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Pn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new KP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(t_("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class KP extends Jg{data(){return super.data()}}function t_(t,e){return typeof e=="string"?WP(t,e):e instanceof Xg?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class jP extends Jg{constructor(e,n,r,s,a,u){super(e,n,r,s,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ma(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(t_("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Ma extends jP{data(e={}){return super.data(e)}}class GP{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Na(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ma(this._firestore,this._userDataWriter,r.key,r,new Na(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new nt($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(u=>({type:"added",doc:new Ma(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Na(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>s||u.type!==3).map(u=>{const h=new Ma(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Na(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,p=-1;return u.type!==0&&(f=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),p=a.indexOf(u.doc.key)),{type:YP(u.type),doc:h,oldIndex:f,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function YP(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XP(t){if(va(t)&&t.explicitOrderBy.length===0)throw new nt($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{convertValue(e,n="none"){switch(wi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ne(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(hr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw pt()}}convertObject(e,n){const r={};return pa(e.fields,(s,a)=>{r[s]=this.convertValue(a,n)}),r}convertGeoPoint(e){return new ZP(ne(e.latitude),ne(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Bm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(vs(e));default:return null}}convertTimestamp(e){const n=Kn(e);return new Wn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Wt.fromString(e);ee(wg(r));const s=new Ls(r.get(1),r.get(3)),a=new st(r.popFirst(5));return s.isEqual(n)||qn(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}class JP extends QP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ia(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Pn(this.firestore,null,n)}}function kC(t){t=Kg(t,La);const e=Kg(t.firestore,Gg),n=$P(e),r=new JP(e);return XP(t._query),BP(n,t._query).then(s=>new GP(e,r,t,s))}(function(t,e=!0){(function(n){cr=n})(gE),Nu(new Fo("firestore",(n,{options:r})=>{const s=n.getProvider("app").getImmediate(),a=new Gg(s,new IT(n.getProvider("auth-internal")));return r=Object.assign({useFetchStreams:e},r),a._setSettings(r),a},"PUBLIC")),rr(Mm,"3.3.0",t),rr(Mm,"3.3.0","esm2017")})();var t1=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},ih={exports:{}};/* @preserve
 * Leaflet 1.7.1, a JS library for interactive maps. http://leafletjs.com
 * (c) 2010-2019 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,r){r(e)})(t1,function(n){var r="1.7.1";function s(i){var o,l,c,d;for(l=1,c=arguments.length;l<c;l++){d=arguments[l];for(o in d)i[o]=d[o]}return i}var a=Object.create||function(){function i(){}return function(o){return i.prototype=o,new i}}();function u(i,o){var l=Array.prototype.slice;if(i.bind)return i.bind.apply(i,l.call(arguments,1));var c=l.call(arguments,2);return function(){return i.apply(o,c.length?c.concat(l.call(arguments)):arguments)}}var h=0;function f(i){return i._leaflet_id=i._leaflet_id||++h,i._leaflet_id}function p(i,o,l){var c,d,g,w;return w=function(){c=!1,d&&(g.apply(l,d),d=!1)},g=function(){c?d=arguments:(i.apply(l,arguments),setTimeout(w,o),c=!0)},g}function m(i,o,l){var c=o[1],d=o[0],g=c-d;return i===c&&l?i:((i-d)%g+g)%g+d}function _(){return!1}function v(i,o){var l=Math.pow(10,o===void 0?6:o);return Math.round(i*l)/l}function x(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}function A(i){return x(i).split(/\s+/)}function C(i,o){Object.prototype.hasOwnProperty.call(i,"options")||(i.options=i.options?a(i.options):{});for(var l in o)i.options[l]=o[l];return i.options}function R(i,o,l){var c=[];for(var d in i)c.push(encodeURIComponent(l?d.toUpperCase():d)+"="+encodeURIComponent(i[d]));return(!o||o.indexOf("?")===-1?"?":"&")+c.join("&")}var V=/\{ *([\w_-]+) *\}/g;function Y(i,o){return i.replace(V,function(l,c){var d=o[c];if(d===void 0)throw new Error("No value provided for variable "+l);return typeof d=="function"&&(d=d(o)),d})}var Q=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"};function ot(i,o){for(var l=0;l<i.length;l++)if(i[l]===o)return l;return-1}var At="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Ht(i){return window["webkit"+i]||window["moz"+i]||window["ms"+i]}var mt=0;function Kt(i){var o=+new Date,l=Math.max(0,16-(o-mt));return mt=o+l,window.setTimeout(i,l)}var Ft=window.requestAnimationFrame||Ht("RequestAnimationFrame")||Kt,le=window.cancelAnimationFrame||Ht("CancelAnimationFrame")||Ht("CancelRequestAnimationFrame")||function(i){window.clearTimeout(i)};function _t(i,o,l){if(l&&Ft===Kt)i.call(o);else return Ft.call(window,u(i,o))}function Lt(i){i&&le.call(window,i)}var Ye={extend:s,create:a,bind:u,lastId:h,stamp:f,throttle:p,wrapNum:m,falseFn:_,formatNum:v,trim:x,splitWords:A,setOptions:C,getParamString:R,template:Y,isArray:Q,indexOf:ot,emptyImageUrl:At,requestFn:Ft,cancelFn:le,requestAnimFrame:_t,cancelAnimFrame:Lt};function ge(){}ge.extend=function(i){var o=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},l=o.__super__=this.prototype,c=a(l);c.constructor=o,o.prototype=c;for(var d in this)Object.prototype.hasOwnProperty.call(this,d)&&d!=="prototype"&&d!=="__super__"&&(o[d]=this[d]);return i.statics&&(s(o,i.statics),delete i.statics),i.includes&&(Cn(i.includes),s.apply(null,[c].concat(i.includes)),delete i.includes),c.options&&(i.options=s(a(c.options),i.options)),s(c,i),c._initHooks=[],c.callInitHooks=function(){if(!this._initHooksCalled){l.callInitHooks&&l.callInitHooks.call(this),this._initHooksCalled=!0;for(var g=0,w=c._initHooks.length;g<w;g++)c._initHooks[g].call(this)}},o},ge.include=function(i){return s(this.prototype,i),this},ge.mergeOptions=function(i){return s(this.prototype.options,i),this},ge.addInitHook=function(i){var o=Array.prototype.slice.call(arguments,1),l=typeof i=="function"?i:function(){this[i].apply(this,o)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(l),this};function Cn(i){if(!(typeof L=="undefined"||!L||!L.Mixin)){i=Q(i)?i:[i];for(var o=0;o<i.length;o++)i[o]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var vt={on:function(i,o,l){if(typeof i=="object")for(var c in i)this._on(c,i[c],o);else{i=A(i);for(var d=0,g=i.length;d<g;d++)this._on(i[d],o,l)}return this},off:function(i,o,l){if(!i)delete this._events;else if(typeof i=="object")for(var c in i)this._off(c,i[c],o);else{i=A(i);for(var d=0,g=i.length;d<g;d++)this._off(i[d],o,l)}return this},_on:function(i,o,l){this._events=this._events||{};var c=this._events[i];c||(c=[],this._events[i]=c),l===this&&(l=void 0);for(var d={fn:o,ctx:l},g=c,w=0,T=g.length;w<T;w++)if(g[w].fn===o&&g[w].ctx===l)return;g.push(d)},_off:function(i,o,l){var c,d,g;if(!!this._events&&(c=this._events[i],!!c)){if(!o){for(d=0,g=c.length;d<g;d++)c[d].fn=_;delete this._events[i];return}if(l===this&&(l=void 0),c)for(d=0,g=c.length;d<g;d++){var w=c[d];if(w.ctx===l&&w.fn===o){w.fn=_,this._firingCount&&(this._events[i]=c=c.slice()),c.splice(d,1);return}}}},fire:function(i,o,l){if(!this.listens(i,l))return this;var c=s({},o,{type:i,target:this,sourceTarget:o&&o.sourceTarget||this});if(this._events){var d=this._events[i];if(d){this._firingCount=this._firingCount+1||1;for(var g=0,w=d.length;g<w;g++){var T=d[g];T.fn.call(T.ctx||this,c)}this._firingCount--}}return l&&this._propagateEvent(c),this},listens:function(i,o){var l=this._events&&this._events[i];if(l&&l.length)return!0;if(o){for(var c in this._eventParents)if(this._eventParents[c].listens(i,o))return!0}return!1},once:function(i,o,l){if(typeof i=="object"){for(var c in i)this.once(c,i[c],o);return this}var d=u(function(){this.off(i,o,l).off(i,d,l)},this);return this.on(i,o,l).on(i,d,l)},addEventParent:function(i){return this._eventParents=this._eventParents||{},this._eventParents[f(i)]=i,this},removeEventParent:function(i){return this._eventParents&&delete this._eventParents[f(i)],this},_propagateEvent:function(i){for(var o in this._eventParents)this._eventParents[o].fire(i.type,s({layer:i.target,propagatedFrom:i.target},i),!0)}};vt.addEventListener=vt.on,vt.removeEventListener=vt.clearAllEventListeners=vt.off,vt.addOneTimeEventListener=vt.once,vt.fireEvent=vt.fire,vt.hasEventListeners=vt.listens;var xt=ge.extend(vt);function H(i,o,l){this.x=l?Math.round(i):i,this.y=l?Math.round(o):o}var xe=Math.trunc||function(i){return i>0?Math.floor(i):Math.ceil(i)};H.prototype={clone:function(){return new H(this.x,this.y)},add:function(i){return this.clone()._add(ct(i))},_add:function(i){return this.x+=i.x,this.y+=i.y,this},subtract:function(i){return this.clone()._subtract(ct(i))},_subtract:function(i){return this.x-=i.x,this.y-=i.y,this},divideBy:function(i){return this.clone()._divideBy(i)},_divideBy:function(i){return this.x/=i,this.y/=i,this},multiplyBy:function(i){return this.clone()._multiplyBy(i)},_multiplyBy:function(i){return this.x*=i,this.y*=i,this},scaleBy:function(i){return new H(this.x*i.x,this.y*i.y)},unscaleBy:function(i){return new H(this.x/i.x,this.y/i.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=xe(this.x),this.y=xe(this.y),this},distanceTo:function(i){i=ct(i);var o=i.x-this.x,l=i.y-this.y;return Math.sqrt(o*o+l*l)},equals:function(i){return i=ct(i),i.x===this.x&&i.y===this.y},contains:function(i){return i=ct(i),Math.abs(i.x)<=Math.abs(this.x)&&Math.abs(i.y)<=Math.abs(this.y)},toString:function(){return"Point("+v(this.x)+", "+v(this.y)+")"}};function ct(i,o,l){return i instanceof H?i:Q(i)?new H(i[0],i[1]):i==null?i:typeof i=="object"&&"x"in i&&"y"in i?new H(i.x,i.y):new H(i,o,l)}function yt(i,o){if(!!i)for(var l=o?[i,o]:i,c=0,d=l.length;c<d;c++)this.extend(l[c])}yt.prototype={extend:function(i){return i=ct(i),!this.min&&!this.max?(this.min=i.clone(),this.max=i.clone()):(this.min.x=Math.min(i.x,this.min.x),this.max.x=Math.max(i.x,this.max.x),this.min.y=Math.min(i.y,this.min.y),this.max.y=Math.max(i.y,this.max.y)),this},getCenter:function(i){return new H((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,i)},getBottomLeft:function(){return new H(this.min.x,this.max.y)},getTopRight:function(){return new H(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(i){var o,l;return typeof i[0]=="number"||i instanceof H?i=ct(i):i=jt(i),i instanceof yt?(o=i.min,l=i.max):o=l=i,o.x>=this.min.x&&l.x<=this.max.x&&o.y>=this.min.y&&l.y<=this.max.y},intersects:function(i){i=jt(i);var o=this.min,l=this.max,c=i.min,d=i.max,g=d.x>=o.x&&c.x<=l.x,w=d.y>=o.y&&c.y<=l.y;return g&&w},overlaps:function(i){i=jt(i);var o=this.min,l=this.max,c=i.min,d=i.max,g=d.x>o.x&&c.x<l.x,w=d.y>o.y&&c.y<l.y;return g&&w},isValid:function(){return!!(this.min&&this.max)}};function jt(i,o){return!i||i instanceof yt?i:new yt(i,o)}function zt(i,o){if(!!i)for(var l=o?[i,o]:i,c=0,d=l.length;c<d;c++)this.extend(l[c])}zt.prototype={extend:function(i){var o=this._southWest,l=this._northEast,c,d;if(i instanceof S)c=i,d=i;else if(i instanceof zt){if(c=i._southWest,d=i._northEast,!c||!d)return this}else return i?this.extend(F(i)||Gt(i)):this;return!o&&!l?(this._southWest=new S(c.lat,c.lng),this._northEast=new S(d.lat,d.lng)):(o.lat=Math.min(c.lat,o.lat),o.lng=Math.min(c.lng,o.lng),l.lat=Math.max(d.lat,l.lat),l.lng=Math.max(d.lng,l.lng)),this},pad:function(i){var o=this._southWest,l=this._northEast,c=Math.abs(o.lat-l.lat)*i,d=Math.abs(o.lng-l.lng)*i;return new zt(new S(o.lat-c,o.lng-d),new S(l.lat+c,l.lng+d))},getCenter:function(){return new S((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new S(this.getNorth(),this.getWest())},getSouthEast:function(){return new S(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(i){typeof i[0]=="number"||i instanceof S||"lat"in i?i=F(i):i=Gt(i);var o=this._southWest,l=this._northEast,c,d;return i instanceof zt?(c=i.getSouthWest(),d=i.getNorthEast()):c=d=i,c.lat>=o.lat&&d.lat<=l.lat&&c.lng>=o.lng&&d.lng<=l.lng},intersects:function(i){i=Gt(i);var o=this._southWest,l=this._northEast,c=i.getSouthWest(),d=i.getNorthEast(),g=d.lat>=o.lat&&c.lat<=l.lat,w=d.lng>=o.lng&&c.lng<=l.lng;return g&&w},overlaps:function(i){i=Gt(i);var o=this._southWest,l=this._northEast,c=i.getSouthWest(),d=i.getNorthEast(),g=d.lat>o.lat&&c.lat<l.lat,w=d.lng>o.lng&&c.lng<l.lng;return g&&w},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(i,o){return i?(i=Gt(i),this._southWest.equals(i.getSouthWest(),o)&&this._northEast.equals(i.getNorthEast(),o)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Gt(i,o){return i instanceof zt?i:new zt(i,o)}function S(i,o,l){if(isNaN(i)||isNaN(o))throw new Error("Invalid LatLng object: ("+i+", "+o+")");this.lat=+i,this.lng=+o,l!==void 0&&(this.alt=+l)}S.prototype={equals:function(i,o){if(!i)return!1;i=F(i);var l=Math.max(Math.abs(this.lat-i.lat),Math.abs(this.lng-i.lng));return l<=(o===void 0?1e-9:o)},toString:function(i){return"LatLng("+v(this.lat,i)+", "+v(this.lng,i)+")"},distanceTo:function(i){return K.distance(this,F(i))},wrap:function(){return K.wrapLatLng(this)},toBounds:function(i){var o=180*i/40075017,l=o/Math.cos(Math.PI/180*this.lat);return Gt([this.lat-o,this.lng-l],[this.lat+o,this.lng+l])},clone:function(){return new S(this.lat,this.lng,this.alt)}};function F(i,o,l){return i instanceof S?i:Q(i)&&typeof i[0]!="object"?i.length===3?new S(i[0],i[1],i[2]):i.length===2?new S(i[0],i[1]):null:i==null?i:typeof i=="object"&&"lat"in i?new S(i.lat,"lng"in i?i.lng:i.lon,i.alt):o===void 0?null:new S(i,o,l)}var D={latLngToPoint:function(i,o){var l=this.projection.project(i),c=this.scale(o);return this.transformation._transform(l,c)},pointToLatLng:function(i,o){var l=this.scale(o),c=this.transformation.untransform(i,l);return this.projection.unproject(c)},project:function(i){return this.projection.project(i)},unproject:function(i){return this.projection.unproject(i)},scale:function(i){return 256*Math.pow(2,i)},zoom:function(i){return Math.log(i/256)/Math.LN2},getProjectedBounds:function(i){if(this.infinite)return null;var o=this.projection.bounds,l=this.scale(i),c=this.transformation.transform(o.min,l),d=this.transformation.transform(o.max,l);return new yt(c,d)},infinite:!1,wrapLatLng:function(i){var o=this.wrapLng?m(i.lng,this.wrapLng,!0):i.lng,l=this.wrapLat?m(i.lat,this.wrapLat,!0):i.lat,c=i.alt;return new S(l,o,c)},wrapLatLngBounds:function(i){var o=i.getCenter(),l=this.wrapLatLng(o),c=o.lat-l.lat,d=o.lng-l.lng;if(c===0&&d===0)return i;var g=i.getSouthWest(),w=i.getNorthEast(),T=new S(g.lat-c,g.lng-d),P=new S(w.lat-c,w.lng-d);return new zt(T,P)}},K=s({},D,{wrapLng:[-180,180],R:6371e3,distance:function(i,o){var l=Math.PI/180,c=i.lat*l,d=o.lat*l,g=Math.sin((o.lat-i.lat)*l/2),w=Math.sin((o.lng-i.lng)*l/2),T=g*g+Math.cos(c)*Math.cos(d)*w*w,P=2*Math.atan2(Math.sqrt(T),Math.sqrt(1-T));return this.R*P}}),It=6378137,Nt={R:It,MAX_LATITUDE:85.0511287798,project:function(i){var o=Math.PI/180,l=this.MAX_LATITUDE,c=Math.max(Math.min(l,i.lat),-l),d=Math.sin(c*o);return new H(this.R*i.lng*o,this.R*Math.log((1+d)/(1-d))/2)},unproject:function(i){var o=180/Math.PI;return new S((2*Math.atan(Math.exp(i.y/this.R))-Math.PI/2)*o,i.x*o/this.R)},bounds:function(){var i=It*Math.PI;return new yt([-i,-i],[i,i])}()};function lt(i,o,l,c){if(Q(i)){this._a=i[0],this._b=i[1],this._c=i[2],this._d=i[3];return}this._a=i,this._b=o,this._c=l,this._d=c}lt.prototype={transform:function(i,o){return this._transform(i.clone(),o)},_transform:function(i,o){return o=o||1,i.x=o*(this._a*i.x+this._b),i.y=o*(this._c*i.y+this._d),i},untransform:function(i,o){return o=o||1,new H((i.x/o-this._b)/this._a,(i.y/o-this._d)/this._c)}};function it(i,o,l,c){return new lt(i,o,l,c)}var y=s({},K,{code:"EPSG:3857",projection:Nt,transformation:function(){var i=.5/(Math.PI*Nt.R);return it(i,.5,-i,.5)}()}),E=s({},y,{code:"EPSG:900913"});function b(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function M(i,o){var l="",c,d,g,w,T,P;for(c=0,g=i.length;c<g;c++){for(T=i[c],d=0,w=T.length;d<w;d++)P=T[d],l+=(d?"L":"M")+P.x+" "+P.y;l+=o?Fs?"z":"x":""}return l||"M0 0"}var N=document.documentElement.style,z="ActiveXObject"in window,U=z&&!document.addEventListener,O="msLaunchUri"in navigator&&!("documentMode"in document),B=Je("webkit"),k=Je("android"),G=Je("android 2")||Je("android 3"),j=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),X=k&&Je("Google")&&j<537&&!("AudioNode"in window),et=!!window.opera,ft=!O&&Je("chrome"),Rt=Je("gecko")&&!B&&!et&&!z,Et=!ft&&Je("safari"),Ot=Je("phantom"),Ce="OTransition"in N,hn=navigator.platform.indexOf("Win")===0,Ai=z&&"transition"in N,fn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!G,br="MozPerspective"in N,Ut=!window.L_DISABLE_3D&&(Ai||fn||br)&&!Ce&&!Ot,ue=typeof orientation!="undefined"||Je("mobile"),Bs=ue&&B,$_=ue&&fn,Ln=!window.PointerEvent&&window.MSPointerEvent,Xe=!!(window.PointerEvent||Ln),Qe=!window.L_NO_TOUCH&&(Xe||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),yh=ue&&et,Z_=ue&&Rt,In=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ci=function(){var i=!1;try{var o=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("testPassiveEventSupport",_,o),window.removeEventListener("testPassiveEventSupport",_,o)}catch{}return i}(),wh=function(){return!!document.createElement("canvas").getContext}(),Fs=!!(document.createElementNS&&b("svg").createSVGRect),Us=!Fs&&function(){try{var i=document.createElement("div");i.innerHTML='<v:shape adj="1"/>';var o=i.firstChild;return o.style.behavior="url(#default#VML)",o&&typeof o.adj=="object"}catch{return!1}}();function Je(i){return navigator.userAgent.toLowerCase().indexOf(i)>=0}var q_={ie:z,ielt9:U,edge:O,webkit:B,android:k,android23:G,androidStock:X,opera:et,chrome:ft,gecko:Rt,safari:Et,phantom:Ot,opera12:Ce,win:hn,ie3d:Ai,webkit3d:fn,gecko3d:br,any3d:Ut,mobile:ue,mobileWebkit:Bs,mobileWebkit3d:$_,msPointer:Ln,pointer:Xe,touch:Qe,mobileOpera:yh,mobileGecko:Z_,retina:In,passiveEvents:Ci,canvas:wh,svg:Fs,vml:Us},ja=Ln?"MSPointerDown":"pointerdown",Ga=Ln?"MSPointerMove":"pointermove",Ya=Ln?"MSPointerUp":"pointerup",Xa=Ln?"MSPointerCancel":"pointercancel",Li={},xh=!1;function W_(i,o,l,c){return o==="touchstart"?j_(i,l,c):o==="touchmove"?X_(i,l,c):o==="touchend"&&Q_(i,l,c),this}function K_(i,o,l){var c=i["_leaflet_"+o+l];return o==="touchstart"?i.removeEventListener(ja,c,!1):o==="touchmove"?i.removeEventListener(Ga,c,!1):o==="touchend"&&(i.removeEventListener(Ya,c,!1),i.removeEventListener(Xa,c,!1)),this}function j_(i,o,l){var c=u(function(d){d.MSPOINTER_TYPE_TOUCH&&d.pointerType===d.MSPOINTER_TYPE_TOUCH&&Fe(d),Qa(d,o)});i["_leaflet_touchstart"+l]=c,i.addEventListener(ja,c,!1),xh||(document.addEventListener(ja,G_,!0),document.addEventListener(Ga,Y_,!0),document.addEventListener(Ya,Eh,!0),document.addEventListener(Xa,Eh,!0),xh=!0)}function G_(i){Li[i.pointerId]=i}function Y_(i){Li[i.pointerId]&&(Li[i.pointerId]=i)}function Eh(i){delete Li[i.pointerId]}function Qa(i,o){i.touches=[];for(var l in Li)i.touches.push(Li[l]);i.changedTouches=[i],o(i)}function X_(i,o,l){var c=function(d){d.pointerType===(d.MSPOINTER_TYPE_MOUSE||"mouse")&&d.buttons===0||Qa(d,o)};i["_leaflet_touchmove"+l]=c,i.addEventListener(Ga,c,!1)}function Q_(i,o,l){var c=function(d){Qa(d,o)};i["_leaflet_touchend"+l]=c,i.addEventListener(Ya,c,!1),i.addEventListener(Xa,c,!1)}var Vs=Ln?"MSPointerDown":Xe?"pointerdown":"touchstart",Hs=Ln?"MSPointerUp":Xe?"pointerup":"touchend",Ii="_leaflet_";function J_(i,o,l){var c,d,g=!1,w=250;function T(I){if(Xe){if(!I.isPrimary||I.pointerType==="mouse")return}else if(I.touches.length>1)return;var Z=Date.now(),J=Z-(c||Z);d=I.touches?I.touches[0]:I,g=J>0&&J<=w,c=Z}function P(I){if(g&&!d.cancelBubble){if(Xe){if(I.pointerType==="mouse")return;var Z={},J,bt;for(bt in d)J=d[bt],Z[bt]=J&&J.bind?J.bind(d):J;d=Z}d.type="dblclick",d.button=0,o(d),c=null}}return i[Ii+Vs+l]=T,i[Ii+Hs+l]=P,i[Ii+"dblclick"+l]=o,i.addEventListener(Vs,T,Ci?{passive:!1}:!1),i.addEventListener(Hs,P,Ci?{passive:!1}:!1),i.addEventListener("dblclick",o,!1),this}function tv(i,o){var l=i[Ii+Vs+o],c=i[Ii+Hs+o],d=i[Ii+"dblclick"+o];return i.removeEventListener(Vs,l,Ci?{passive:!1}:!1),i.removeEventListener(Hs,c,Ci?{passive:!1}:!1),i.removeEventListener("dblclick",d,!1),this}var Ja=qs(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Pr=qs(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Th=Pr==="webkitTransition"||Pr==="OTransition"?Pr+"End":"transitionend";function bh(i){return typeof i=="string"?document.getElementById(i):i}function Sr(i,o){var l=i.style[o]||i.currentStyle&&i.currentStyle[o];if((!l||l==="auto")&&document.defaultView){var c=document.defaultView.getComputedStyle(i,null);l=c?c[o]:null}return l==="auto"?null:l}function Tt(i,o,l){var c=document.createElement(i);return c.className=o||"",l&&l.appendChild(c),c}function qt(i){var o=i.parentNode;o&&o.removeChild(i)}function $s(i){for(;i.firstChild;)i.removeChild(i.firstChild)}function Ni(i){var o=i.parentNode;o&&o.lastChild!==i&&o.appendChild(i)}function Mi(i){var o=i.parentNode;o&&o.firstChild!==i&&o.insertBefore(i,o.firstChild)}function tl(i,o){if(i.classList!==void 0)return i.classList.contains(o);var l=Zs(i);return l.length>0&&new RegExp("(^|\\s)"+o+"(\\s|$)").test(l)}function ut(i,o){if(i.classList!==void 0)for(var l=A(o),c=0,d=l.length;c<d;c++)i.classList.add(l[c]);else if(!tl(i,o)){var g=Zs(i);el(i,(g?g+" ":"")+o)}}function Yt(i,o){i.classList!==void 0?i.classList.remove(o):el(i,x((" "+Zs(i)+" ").replace(" "+o+" "," ")))}function el(i,o){i.className.baseVal===void 0?i.className=o:i.className.baseVal=o}function Zs(i){return i.correspondingElement&&(i=i.correspondingElement),i.className.baseVal===void 0?i.className:i.className.baseVal}function Be(i,o){"opacity"in i.style?i.style.opacity=o:"filter"in i.style&&ev(i,o)}function ev(i,o){var l=!1,c="DXImageTransform.Microsoft.Alpha";try{l=i.filters.item(c)}catch{if(o===1)return}o=Math.round(o*100),l?(l.Enabled=o!==100,l.Opacity=o):i.style.filter+=" progid:"+c+"(opacity="+o+")"}function qs(i){for(var o=document.documentElement.style,l=0;l<i.length;l++)if(i[l]in o)return i[l];return!1}function Yn(i,o,l){var c=o||new H(0,0);i.style[Ja]=(Ai?"translate("+c.x+"px,"+c.y+"px)":"translate3d("+c.x+"px,"+c.y+"px,0)")+(l?" scale("+l+")":"")}function Qt(i,o){i._leaflet_pos=o,Ut?Yn(i,o):(i.style.left=o.x+"px",i.style.top=o.y+"px")}function Nn(i){return i._leaflet_pos||new H(0,0)}var Ar,Cr,nl;if("onselectstart"in document)Ar=function(){dt(window,"selectstart",Fe)},Cr=function(){Xt(window,"selectstart",Fe)};else{var Lr=qs(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ar=function(){if(Lr){var i=document.documentElement.style;nl=i[Lr],i[Lr]="none"}},Cr=function(){Lr&&(document.documentElement.style[Lr]=nl,nl=void 0)}}function il(){dt(window,"dragstart",Fe)}function rl(){Xt(window,"dragstart",Fe)}var Ws,sl;function ol(i){for(;i.tabIndex===-1;)i=i.parentNode;!i.style||(Ks(),Ws=i,sl=i.style.outline,i.style.outline="none",dt(window,"keydown",Ks))}function Ks(){!Ws||(Ws.style.outline=sl,Ws=void 0,sl=void 0,Xt(window,"keydown",Ks))}function Ph(i){do i=i.parentNode;while((!i.offsetWidth||!i.offsetHeight)&&i!==document.body);return i}function al(i){var o=i.getBoundingClientRect();return{x:o.width/i.offsetWidth||1,y:o.height/i.offsetHeight||1,boundingClientRect:o}}var nv={TRANSFORM:Ja,TRANSITION:Pr,TRANSITION_END:Th,get:bh,getStyle:Sr,create:Tt,remove:qt,empty:$s,toFront:Ni,toBack:Mi,hasClass:tl,addClass:ut,removeClass:Yt,setClass:el,getClass:Zs,setOpacity:Be,testProp:qs,setTransform:Yn,setPosition:Qt,getPosition:Nn,disableTextSelection:Ar,enableTextSelection:Cr,disableImageDrag:il,enableImageDrag:rl,preventOutline:ol,restoreOutline:Ks,getSizedParentNode:Ph,getScale:al};function dt(i,o,l,c){if(typeof o=="object")for(var d in o)js(i,d,o[d],l);else{o=A(o);for(var g=0,w=o.length;g<w;g++)js(i,o[g],l,c)}return this}var He="_leaflet_events";function Xt(i,o,l,c){if(typeof o=="object")for(var d in o)ul(i,d,o[d],l);else if(o){o=A(o);for(var g=0,w=o.length;g<w;g++)ul(i,o[g],l,c)}else{for(var T in i[He])ul(i,T,i[He][T]);delete i[He]}return this}function Sh(){if(Xe)return!(O||Et)}var ll={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function js(i,o,l,c){var d=o+f(l)+(c?"_"+f(c):"");if(i[He]&&i[He][d])return this;var g=function(T){return l.call(c||i,T||window.event)},w=g;Xe&&o.indexOf("touch")===0?W_(i,o,g,d):Qe&&o==="dblclick"&&!Sh()?J_(i,g,d):"addEventListener"in i?o==="touchstart"||o==="touchmove"||o==="wheel"||o==="mousewheel"?i.addEventListener(ll[o]||o,g,Ci?{passive:!1}:!1):o==="mouseenter"||o==="mouseleave"?(g=function(T){T=T||window.event,Gs(i,T)&&w(T)},i.addEventListener(ll[o],g,!1)):i.addEventListener(o,w,!1):"attachEvent"in i&&i.attachEvent("on"+o,g),i[He]=i[He]||{},i[He][d]=g}function ul(i,o,l,c){var d=o+f(l)+(c?"_"+f(c):""),g=i[He]&&i[He][d];if(!g)return this;Xe&&o.indexOf("touch")===0?K_(i,o,d):Qe&&o==="dblclick"&&!Sh()?tv(i,d):"removeEventListener"in i?i.removeEventListener(ll[o]||o,g,!1):"detachEvent"in i&&i.detachEvent("on"+o,g),i[He][d]=null}function Xn(i){return i.stopPropagation?i.stopPropagation():i.originalEvent?i.originalEvent._stopped=!0:i.cancelBubble=!0,dl(i),this}function cl(i){return js(i,"wheel",Xn),this}function Ir(i){return dt(i,"mousedown touchstart dblclick",Xn),js(i,"click",fl),this}function Fe(i){return i.preventDefault?i.preventDefault():i.returnValue=!1,this}function dn(i){return Fe(i),Xn(i),this}function Ah(i,o){if(!o)return new H(i.clientX,i.clientY);var l=al(o),c=l.boundingClientRect;return new H((i.clientX-c.left)/l.x-o.clientLeft,(i.clientY-c.top)/l.y-o.clientTop)}var iv=hn&&ft?2*window.devicePixelRatio:Rt?window.devicePixelRatio:1;function Ch(i){return O?i.wheelDeltaY/2:i.deltaY&&i.deltaMode===0?-i.deltaY/iv:i.deltaY&&i.deltaMode===1?-i.deltaY*20:i.deltaY&&i.deltaMode===2?-i.deltaY*60:i.deltaX||i.deltaZ?0:i.wheelDelta?(i.wheelDeltaY||i.wheelDelta)/2:i.detail&&Math.abs(i.detail)<32765?-i.detail*20:i.detail?i.detail/-32765*60:0}var hl={};function fl(i){hl[i.type]=!0}function dl(i){var o=hl[i.type];return hl[i.type]=!1,o}function Gs(i,o){var l=o.relatedTarget;if(!l)return!0;try{for(;l&&l!==i;)l=l.parentNode}catch{return!1}return l!==i}var rv={on:dt,off:Xt,stopPropagation:Xn,disableScrollPropagation:cl,disableClickPropagation:Ir,preventDefault:Fe,stop:dn,getMousePosition:Ah,getWheelDelta:Ch,fakeStop:fl,skipped:dl,isExternalTarget:Gs,addListener:dt,removeListener:Xt},Lh=xt.extend({run:function(i,o,l,c){this.stop(),this._el=i,this._inProgress=!0,this._duration=l||.25,this._easeOutPower=1/Math.max(c||.5,.2),this._startPos=Nn(i),this._offset=o.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){!this._inProgress||(this._step(!0),this._complete())},_animate:function(){this._animId=_t(this._animate,this),this._step()},_step:function(i){var o=+new Date-this._startTime,l=this._duration*1e3;o<l?this._runFrame(this._easeOut(o/l),i):(this._runFrame(1),this._complete())},_runFrame:function(i,o){var l=this._startPos.add(this._offset.multiplyBy(i));o&&l._round(),Qt(this._el,l),this.fire("step")},_complete:function(){Lt(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(i){return 1-Math.pow(1-i,this._easeOutPower)}}),wt=xt.extend({options:{crs:y,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(i,o){o=C(this,o),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(i),this._initLayout(),this._onResize=u(this._onResize,this),this._initEvents(),o.maxBounds&&this.setMaxBounds(o.maxBounds),o.zoom!==void 0&&(this._zoom=this._limitZoom(o.zoom)),o.center&&o.zoom!==void 0&&this.setView(F(o.center),o.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Pr&&Ut&&!yh&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),dt(this._proxy,Th,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(i,o,l){if(o=o===void 0?this._zoom:this._limitZoom(o),i=this._limitCenter(F(i),o,this.options.maxBounds),l=l||{},this._stop(),this._loaded&&!l.reset&&l!==!0){l.animate!==void 0&&(l.zoom=s({animate:l.animate},l.zoom),l.pan=s({animate:l.animate,duration:l.duration},l.pan));var c=this._zoom!==o?this._tryAnimatedZoom&&this._tryAnimatedZoom(i,o,l.zoom):this._tryAnimatedPan(i,l.pan);if(c)return clearTimeout(this._sizeTimer),this}return this._resetView(i,o),this},setZoom:function(i,o){return this._loaded?this.setView(this.getCenter(),i,{zoom:o}):(this._zoom=i,this)},zoomIn:function(i,o){return i=i||(Ut?this.options.zoomDelta:1),this.setZoom(this._zoom+i,o)},zoomOut:function(i,o){return i=i||(Ut?this.options.zoomDelta:1),this.setZoom(this._zoom-i,o)},setZoomAround:function(i,o,l){var c=this.getZoomScale(o),d=this.getSize().divideBy(2),g=i instanceof H?i:this.latLngToContainerPoint(i),w=g.subtract(d).multiplyBy(1-1/c),T=this.containerPointToLatLng(d.add(w));return this.setView(T,o,{zoom:l})},_getBoundsCenterZoom:function(i,o){o=o||{},i=i.getBounds?i.getBounds():Gt(i);var l=ct(o.paddingTopLeft||o.padding||[0,0]),c=ct(o.paddingBottomRight||o.padding||[0,0]),d=this.getBoundsZoom(i,!1,l.add(c));if(d=typeof o.maxZoom=="number"?Math.min(o.maxZoom,d):d,d===1/0)return{center:i.getCenter(),zoom:d};var g=c.subtract(l).divideBy(2),w=this.project(i.getSouthWest(),d),T=this.project(i.getNorthEast(),d),P=this.unproject(w.add(T).divideBy(2).add(g),d);return{center:P,zoom:d}},fitBounds:function(i,o){if(i=Gt(i),!i.isValid())throw new Error("Bounds are not valid.");var l=this._getBoundsCenterZoom(i,o);return this.setView(l.center,l.zoom,o)},fitWorld:function(i){return this.fitBounds([[-90,-180],[90,180]],i)},panTo:function(i,o){return this.setView(i,this._zoom,{pan:o})},panBy:function(i,o){if(i=ct(i).round(),o=o||{},!i.x&&!i.y)return this.fire("moveend");if(o.animate!==!0&&!this.getSize().contains(i))return this._resetView(this.unproject(this.project(this.getCenter()).add(i)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Lh,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),o.noMoveStart||this.fire("movestart"),o.animate!==!1){ut(this._mapPane,"leaflet-pan-anim");var l=this._getMapPanePos().subtract(i).round();this._panAnim.run(this._mapPane,l,o.duration||.25,o.easeLinearity)}else this._rawPanBy(i),this.fire("move").fire("moveend");return this},flyTo:function(i,o,l){if(l=l||{},l.animate===!1||!Ut)return this.setView(i,o,l);this._stop();var c=this.project(this.getCenter()),d=this.project(i),g=this.getSize(),w=this._zoom;i=F(i),o=o===void 0?w:o;var T=Math.max(g.x,g.y),P=T*this.getZoomScale(w,o),I=d.distanceTo(c)||1,Z=1.42,J=Z*Z;function bt(Jt){var so=Jt?-1:1,Zv=Jt?P:T,qv=P*P-T*T+so*J*J*I*I,Wv=2*Zv*J*I,Sl=qv/Wv,uf=Math.sqrt(Sl*Sl+1)-Sl,Kv=uf<1e-9?-18:Math.log(uf);return Kv}function vn(Jt){return(Math.exp(Jt)-Math.exp(-Jt))/2}function ti(Jt){return(Math.exp(Jt)+Math.exp(-Jt))/2}function ro(Jt){return vn(Jt)/ti(Jt)}var kn=bt(0);function Pl(Jt){return T*(ti(kn)/ti(kn+Z*Jt))}function Uv(Jt){return T*(ti(kn)*ro(kn+Z*Jt)-vn(kn))/J}function Vv(Jt){return 1-Math.pow(1-Jt,1.5)}var Hv=Date.now(),af=(bt(1)-kn)/Z,$v=l.duration?1e3*l.duration:1e3*af*.8;function lf(){var Jt=(Date.now()-Hv)/$v,so=Vv(Jt)*af;Jt<=1?(this._flyToFrame=_t(lf,this),this._move(this.unproject(c.add(d.subtract(c).multiplyBy(Uv(so)/I)),w),this.getScaleZoom(T/Pl(so),w),{flyTo:!0})):this._move(i,o)._moveEnd(!0)}return this._moveStart(!0,l.noMoveStart),lf.call(this),this},flyToBounds:function(i,o){var l=this._getBoundsCenterZoom(i,o);return this.flyTo(l.center,l.zoom,o)},setMaxBounds:function(i){if(i=Gt(i),i.isValid())this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds);else return this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds);return this.options.maxBounds=i,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)},setMinZoom:function(i){var o=this.options.minZoom;return this.options.minZoom=i,this._loaded&&o!==i&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(i):this},setMaxZoom:function(i){var o=this.options.maxZoom;return this.options.maxZoom=i,this._loaded&&o!==i&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(i):this},panInsideBounds:function(i,o){this._enforcingBounds=!0;var l=this.getCenter(),c=this._limitCenter(l,this._zoom,Gt(i));return l.equals(c)||this.panTo(c,o),this._enforcingBounds=!1,this},panInside:function(i,o){o=o||{};var l=ct(o.paddingTopLeft||o.padding||[0,0]),c=ct(o.paddingBottomRight||o.padding||[0,0]),d=this.getCenter(),g=this.project(d),w=this.project(i),T=this.getPixelBounds(),P=T.getSize().divideBy(2),I=jt([T.min.add(l),T.max.subtract(c)]);if(!I.contains(w)){this._enforcingBounds=!0;var Z=g.subtract(w),J=ct(w.x+Z.x,w.y+Z.y);(w.x<I.min.x||w.x>I.max.x)&&(J.x=g.x-Z.x,Z.x>0?J.x+=P.x-l.x:J.x-=P.x-c.x),(w.y<I.min.y||w.y>I.max.y)&&(J.y=g.y-Z.y,Z.y>0?J.y+=P.y-l.y:J.y-=P.y-c.y),this.panTo(this.unproject(J),o),this._enforcingBounds=!1}return this},invalidateSize:function(i){if(!this._loaded)return this;i=s({animate:!1,pan:!0},i===!0?{animate:!0}:i);var o=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var l=this.getSize(),c=o.divideBy(2).round(),d=l.divideBy(2).round(),g=c.subtract(d);return!g.x&&!g.y?this:(i.animate&&i.pan?this.panBy(g):(i.pan&&this._rawPanBy(g),this.fire("move"),i.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(u(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:o,newSize:l}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(i){if(i=this._locateOptions=s({timeout:1e4,watch:!1},i),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var o=u(this._handleGeolocationResponse,this),l=u(this._handleGeolocationError,this);return i.watch?this._locationWatchId=navigator.geolocation.watchPosition(o,l,i):navigator.geolocation.getCurrentPosition(o,l,i),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(i){var o=i.code,l=i.message||(o===1?"permission denied":o===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:o,message:"Geolocation error: "+l+"."})},_handleGeolocationResponse:function(i){var o=i.coords.latitude,l=i.coords.longitude,c=new S(o,l),d=c.toBounds(i.coords.accuracy*2),g=this._locateOptions;if(g.setView){var w=this.getBoundsZoom(d);this.setView(c,g.maxZoom?Math.min(w,g.maxZoom):w)}var T={latlng:c,bounds:d,timestamp:i.timestamp};for(var P in i.coords)typeof i.coords[P]=="number"&&(T[P]=i.coords[P]);this.fire("locationfound",T)},addHandler:function(i,o){if(!o)return this;var l=this[i]=new o(this);return this._handlers.push(l),this.options[i]&&l.enable(),this},remove:function(){if(this._initEvents(!0),this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),qt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Lt(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var i;for(i in this._layers)this._layers[i].remove();for(i in this._panes)qt(this._panes[i]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(i,o){var l="leaflet-pane"+(i?" leaflet-"+i.replace("Pane","")+"-pane":""),c=Tt("div",l,o||this._mapPane);return i&&(this._panes[i]=c),c},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var i=this.getPixelBounds(),o=this.unproject(i.getBottomLeft()),l=this.unproject(i.getTopRight());return new zt(o,l)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(i,o,l){i=Gt(i),l=ct(l||[0,0]);var c=this.getZoom()||0,d=this.getMinZoom(),g=this.getMaxZoom(),w=i.getNorthWest(),T=i.getSouthEast(),P=this.getSize().subtract(l),I=jt(this.project(T,c),this.project(w,c)).getSize(),Z=Ut?this.options.zoomSnap:1,J=P.x/I.x,bt=P.y/I.y,vn=o?Math.max(J,bt):Math.min(J,bt);return c=this.getScaleZoom(vn,c),Z&&(c=Math.round(c/(Z/100))*(Z/100),c=o?Math.ceil(c/Z)*Z:Math.floor(c/Z)*Z),Math.max(d,Math.min(g,c))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new H(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(i,o){var l=this._getTopLeftPoint(i,o);return new yt(l,l.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(i){return this.options.crs.getProjectedBounds(i===void 0?this.getZoom():i)},getPane:function(i){return typeof i=="string"?this._panes[i]:i},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(i,o){var l=this.options.crs;return o=o===void 0?this._zoom:o,l.scale(i)/l.scale(o)},getScaleZoom:function(i,o){var l=this.options.crs;o=o===void 0?this._zoom:o;var c=l.zoom(i*l.scale(o));return isNaN(c)?1/0:c},project:function(i,o){return o=o===void 0?this._zoom:o,this.options.crs.latLngToPoint(F(i),o)},unproject:function(i,o){return o=o===void 0?this._zoom:o,this.options.crs.pointToLatLng(ct(i),o)},layerPointToLatLng:function(i){var o=ct(i).add(this.getPixelOrigin());return this.unproject(o)},latLngToLayerPoint:function(i){var o=this.project(F(i))._round();return o._subtract(this.getPixelOrigin())},wrapLatLng:function(i){return this.options.crs.wrapLatLng(F(i))},wrapLatLngBounds:function(i){return this.options.crs.wrapLatLngBounds(Gt(i))},distance:function(i,o){return this.options.crs.distance(F(i),F(o))},containerPointToLayerPoint:function(i){return ct(i).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(i){return ct(i).add(this._getMapPanePos())},containerPointToLatLng:function(i){var o=this.containerPointToLayerPoint(ct(i));return this.layerPointToLatLng(o)},latLngToContainerPoint:function(i){return this.layerPointToContainerPoint(this.latLngToLayerPoint(F(i)))},mouseEventToContainerPoint:function(i){return Ah(i,this._container)},mouseEventToLayerPoint:function(i){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(i))},mouseEventToLatLng:function(i){return this.layerPointToLatLng(this.mouseEventToLayerPoint(i))},_initContainer:function(i){var o=this._container=bh(i);if(o){if(o._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");dt(o,"scroll",this._onScroll,this),this._containerId=f(o)},_initLayout:function(){var i=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ut,ut(i,"leaflet-container"+(Qe?" leaflet-touch":"")+(In?" leaflet-retina":"")+(U?" leaflet-oldie":"")+(Et?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var o=Sr(i,"position");o!=="absolute"&&o!=="relative"&&o!=="fixed"&&(i.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var i=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Qt(this._mapPane,new H(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ut(i.markerPane,"leaflet-zoom-hide"),ut(i.shadowPane,"leaflet-zoom-hide"))},_resetView:function(i,o){Qt(this._mapPane,new H(0,0));var l=!this._loaded;this._loaded=!0,o=this._limitZoom(o),this.fire("viewprereset");var c=this._zoom!==o;this._moveStart(c,!1)._move(i,o)._moveEnd(c),this.fire("viewreset"),l&&this.fire("load")},_moveStart:function(i,o){return i&&this.fire("zoomstart"),o||this.fire("movestart"),this},_move:function(i,o,l){o===void 0&&(o=this._zoom);var c=this._zoom!==o;return this._zoom=o,this._lastCenter=i,this._pixelOrigin=this._getNewPixelOrigin(i),(c||l&&l.pinch)&&this.fire("zoom",l),this.fire("move",l)},_moveEnd:function(i){return i&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Lt(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(i){Qt(this._mapPane,this._getMapPanePos().subtract(i))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(i){this._targets={},this._targets[f(this._container)]=this;var o=i?Xt:dt;o(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&o(window,"resize",this._onResize,this),Ut&&this.options.transform3DLimit&&(i?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Lt(this._resizeRequest),this._resizeRequest=_t(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var i=this._getMapPanePos();Math.max(Math.abs(i.x),Math.abs(i.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(i,o){for(var l=[],c,d=o==="mouseout"||o==="mouseover",g=i.target||i.srcElement,w=!1;g;){if(c=this._targets[f(g)],c&&(o==="click"||o==="preclick")&&!i._simulated&&this._draggableMoved(c)){w=!0;break}if(c&&c.listens(o,!0)&&(d&&!Gs(g,i)||(l.push(c),d))||g===this._container)break;g=g.parentNode}return!l.length&&!w&&!d&&Gs(g,i)&&(l=[this]),l},_handleDOMEvent:function(i){if(!(!this._loaded||dl(i))){var o=i.type;(o==="mousedown"||o==="keypress"||o==="keyup"||o==="keydown")&&ol(i.target||i.srcElement),this._fireDOMEvent(i,o)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(i,o,l){if(i.type==="click"){var c=s({},i);c.type="preclick",this._fireDOMEvent(c,c.type,l)}if(!i._stopped&&(l=(l||[]).concat(this._findEventTargets(i,o)),!!l.length)){var d=l[0];o==="contextmenu"&&d.listens(o,!0)&&Fe(i);var g={originalEvent:i};if(i.type!=="keypress"&&i.type!=="keydown"&&i.type!=="keyup"){var w=d.getLatLng&&(!d._radius||d._radius<=10);g.containerPoint=w?this.latLngToContainerPoint(d.getLatLng()):this.mouseEventToContainerPoint(i),g.layerPoint=this.containerPointToLayerPoint(g.containerPoint),g.latlng=w?d.getLatLng():this.layerPointToLatLng(g.layerPoint)}for(var T=0;T<l.length;T++)if(l[T].fire(o,g,!0),g.originalEvent._stopped||l[T].options.bubblingMouseEvents===!1&&ot(this._mouseEvents,o)!==-1)return}},_draggableMoved:function(i){return i=i.dragging&&i.dragging.enabled()?i:this,i.dragging&&i.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var i=0,o=this._handlers.length;i<o;i++)this._handlers[i].disable()},whenReady:function(i,o){return this._loaded?i.call(o||this,{target:this}):this.on("load",i,o),this},_getMapPanePos:function(){return Nn(this._mapPane)||new H(0,0)},_moved:function(){var i=this._getMapPanePos();return i&&!i.equals([0,0])},_getTopLeftPoint:function(i,o){var l=i&&o!==void 0?this._getNewPixelOrigin(i,o):this.getPixelOrigin();return l.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(i,o){var l=this.getSize()._divideBy(2);return this.project(i,o)._subtract(l)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(i,o,l){var c=this._getNewPixelOrigin(l,o);return this.project(i,o)._subtract(c)},_latLngBoundsToNewLayerBounds:function(i,o,l){var c=this._getNewPixelOrigin(l,o);return jt([this.project(i.getSouthWest(),o)._subtract(c),this.project(i.getNorthWest(),o)._subtract(c),this.project(i.getSouthEast(),o)._subtract(c),this.project(i.getNorthEast(),o)._subtract(c)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(i){return this.latLngToLayerPoint(i).subtract(this._getCenterLayerPoint())},_limitCenter:function(i,o,l){if(!l)return i;var c=this.project(i,o),d=this.getSize().divideBy(2),g=new yt(c.subtract(d),c.add(d)),w=this._getBoundsOffset(g,l,o);return w.round().equals([0,0])?i:this.unproject(c.add(w),o)},_limitOffset:function(i,o){if(!o)return i;var l=this.getPixelBounds(),c=new yt(l.min.add(i),l.max.add(i));return i.add(this._getBoundsOffset(c,o))},_getBoundsOffset:function(i,o,l){var c=jt(this.project(o.getNorthEast(),l),this.project(o.getSouthWest(),l)),d=c.min.subtract(i.min),g=c.max.subtract(i.max),w=this._rebound(d.x,-g.x),T=this._rebound(d.y,-g.y);return new H(w,T)},_rebound:function(i,o){return i+o>0?Math.round(i-o)/2:Math.max(0,Math.ceil(i))-Math.max(0,Math.floor(o))},_limitZoom:function(i){var o=this.getMinZoom(),l=this.getMaxZoom(),c=Ut?this.options.zoomSnap:1;return c&&(i=Math.round(i/c)*c),Math.max(o,Math.min(l,i))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Yt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(i,o){var l=this._getCenterOffset(i)._trunc();return(o&&o.animate)!==!0&&!this.getSize().contains(l)?!1:(this.panBy(l,o),!0)},_createAnimProxy:function(){var i=this._proxy=Tt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(i),this.on("zoomanim",function(o){var l=Ja,c=this._proxy.style[l];Yn(this._proxy,this.project(o.center,o.zoom),this.getZoomScale(o.zoom,1)),c===this._proxy.style[l]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){qt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var i=this.getCenter(),o=this.getZoom();Yn(this._proxy,this.project(i,o),this.getZoomScale(o,1))},_catchTransitionEnd:function(i){this._animatingZoom&&i.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(i,o,l){if(this._animatingZoom)return!0;if(l=l||{},!this._zoomAnimated||l.animate===!1||this._nothingToAnimate()||Math.abs(o-this._zoom)>this.options.zoomAnimationThreshold)return!1;var c=this.getZoomScale(o),d=this._getCenterOffset(i)._divideBy(1-1/c);return l.animate!==!0&&!this.getSize().contains(d)?!1:(_t(function(){this._moveStart(!0,!1)._animateZoom(i,o,!0)},this),!0)},_animateZoom:function(i,o,l,c){!this._mapPane||(l&&(this._animatingZoom=!0,this._animateToCenter=i,this._animateToZoom=o,ut(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:i,zoom:o,noUpdate:c}),setTimeout(u(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){!this._animatingZoom||(this._mapPane&&Yt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),_t(function(){this._moveEnd(!0)},this))}});function sv(i,o){return new wt(i,o)}var $e=ge.extend({options:{position:"topright"},initialize:function(i){C(this,i)},getPosition:function(){return this.options.position},setPosition:function(i){var o=this._map;return o&&o.removeControl(this),this.options.position=i,o&&o.addControl(this),this},getContainer:function(){return this._container},addTo:function(i){this.remove(),this._map=i;var o=this._container=this.onAdd(i),l=this.getPosition(),c=i._controlCorners[l];return ut(o,"leaflet-control"),l.indexOf("bottom")!==-1?c.insertBefore(o,c.firstChild):c.appendChild(o),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(qt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(i){this._map&&i&&i.screenX>0&&i.screenY>0&&this._map.getContainer().focus()}}),Nr=function(i){return new $e(i)};wt.include({addControl:function(i){return i.addTo(this),this},removeControl:function(i){return i.remove(),this},_initControlPos:function(){var i=this._controlCorners={},o="leaflet-",l=this._controlContainer=Tt("div",o+"control-container",this._container);function c(d,g){var w=o+d+" "+o+g;i[d+g]=Tt("div",w,l)}c("top","left"),c("top","right"),c("bottom","left"),c("bottom","right")},_clearControlPos:function(){for(var i in this._controlCorners)qt(this._controlCorners[i]);qt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ih=$e.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(i,o,l,c){return l<c?-1:c<l?1:0}},initialize:function(i,o,l){C(this,l),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1;for(var c in i)this._addLayer(i[c],c);for(c in o)this._addLayer(o[c],c,!0)},onAdd:function(i){this._initLayout(),this._update(),this._map=i,i.on("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(i){return $e.prototype.addTo.call(this,i),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(i,o){return this._addLayer(i,o),this._map?this._update():this},addOverlay:function(i,o){return this._addLayer(i,o,!0),this._map?this._update():this},removeLayer:function(i){i.off("add remove",this._onLayerChange,this);var o=this._getLayer(f(i));return o&&this._layers.splice(this._layers.indexOf(o),1),this._map?this._update():this},expand:function(){ut(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var i=this._map.getSize().y-(this._container.offsetTop+50);return i<this._section.clientHeight?(ut(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=i+"px"):Yt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Yt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var i="leaflet-control-layers",o=this._container=Tt("div",i),l=this.options.collapsed;o.setAttribute("aria-haspopup",!0),Ir(o),cl(o);var c=this._section=Tt("section",i+"-list");l&&(this._map.on("click",this.collapse,this),k||dt(o,{mouseenter:this.expand,mouseleave:this.collapse},this));var d=this._layersLink=Tt("a",i+"-toggle",o);d.href="#",d.title="Layers",Qe?(dt(d,"click",dn),dt(d,"click",this.expand,this)):dt(d,"focus",this.expand,this),l||this.expand(),this._baseLayersList=Tt("div",i+"-base",c),this._separator=Tt("div",i+"-separator",c),this._overlaysList=Tt("div",i+"-overlays",c),o.appendChild(c)},_getLayer:function(i){for(var o=0;o<this._layers.length;o++)if(this._layers[o]&&f(this._layers[o].layer)===i)return this._layers[o]},_addLayer:function(i,o,l){this._map&&i.on("add remove",this._onLayerChange,this),this._layers.push({layer:i,name:o,overlay:l}),this.options.sortLayers&&this._layers.sort(u(function(c,d){return this.options.sortFunction(c.layer,d.layer,c.name,d.name)},this)),this.options.autoZIndex&&i.setZIndex&&(this._lastZIndex++,i.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;$s(this._baseLayersList),$s(this._overlaysList),this._layerControlInputs=[];var i,o,l,c,d=0;for(l=0;l<this._layers.length;l++)c=this._layers[l],this._addItem(c),o=o||c.overlay,i=i||!c.overlay,d+=c.overlay?0:1;return this.options.hideSingleBase&&(i=i&&d>1,this._baseLayersList.style.display=i?"":"none"),this._separator.style.display=o&&i?"":"none",this},_onLayerChange:function(i){this._handlingClick||this._update();var o=this._getLayer(f(i.target)),l=o.overlay?i.type==="add"?"overlayadd":"overlayremove":i.type==="add"?"baselayerchange":null;l&&this._map.fire(l,o)},_createRadioElement:function(i,o){var l='<input type="radio" class="leaflet-control-layers-selector" name="'+i+'"'+(o?' checked="checked"':"")+"/>",c=document.createElement("div");return c.innerHTML=l,c.firstChild},_addItem:function(i){var o=document.createElement("label"),l=this._map.hasLayer(i.layer),c;i.overlay?(c=document.createElement("input"),c.type="checkbox",c.className="leaflet-control-layers-selector",c.defaultChecked=l):c=this._createRadioElement("leaflet-base-layers_"+f(this),l),this._layerControlInputs.push(c),c.layerId=f(i.layer),dt(c,"click",this._onInputClick,this);var d=document.createElement("span");d.innerHTML=" "+i.name;var g=document.createElement("div");o.appendChild(g),g.appendChild(c),g.appendChild(d);var w=i.overlay?this._overlaysList:this._baseLayersList;return w.appendChild(o),this._checkDisabledLayers(),o},_onInputClick:function(){var i=this._layerControlInputs,o,l,c=[],d=[];this._handlingClick=!0;for(var g=i.length-1;g>=0;g--)o=i[g],l=this._getLayer(o.layerId).layer,o.checked?c.push(l):o.checked||d.push(l);for(g=0;g<d.length;g++)this._map.hasLayer(d[g])&&this._map.removeLayer(d[g]);for(g=0;g<c.length;g++)this._map.hasLayer(c[g])||this._map.addLayer(c[g]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var i=this._layerControlInputs,o,l,c=this._map.getZoom(),d=i.length-1;d>=0;d--)o=i[d],l=this._getLayer(o.layerId).layer,o.disabled=l.options.minZoom!==void 0&&c<l.options.minZoom||l.options.maxZoom!==void 0&&c>l.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),ov=function(i,o,l){return new Ih(i,o,l)},pl=$e.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(i){var o="leaflet-control-zoom",l=Tt("div",o+" leaflet-bar"),c=this.options;return this._zoomInButton=this._createButton(c.zoomInText,c.zoomInTitle,o+"-in",l,this._zoomIn),this._zoomOutButton=this._createButton(c.zoomOutText,c.zoomOutTitle,o+"-out",l,this._zoomOut),this._updateDisabled(),i.on("zoomend zoomlevelschange",this._updateDisabled,this),l},onRemove:function(i){i.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(i){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(i.shiftKey?3:1))},_zoomOut:function(i){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(i.shiftKey?3:1))},_createButton:function(i,o,l,c,d){var g=Tt("a",l,c);return g.innerHTML=i,g.href="#",g.title=o,g.setAttribute("role","button"),g.setAttribute("aria-label",o),Ir(g),dt(g,"click",dn),dt(g,"click",d,this),dt(g,"click",this._refocusOnMap,this),g},_updateDisabled:function(){var i=this._map,o="leaflet-disabled";Yt(this._zoomInButton,o),Yt(this._zoomOutButton,o),(this._disabled||i._zoom===i.getMinZoom())&&ut(this._zoomOutButton,o),(this._disabled||i._zoom===i.getMaxZoom())&&ut(this._zoomInButton,o)}});wt.mergeOptions({zoomControl:!0}),wt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new pl,this.addControl(this.zoomControl))});var av=function(i){return new pl(i)},Nh=$e.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(i){var o="leaflet-control-scale",l=Tt("div",o),c=this.options;return this._addScales(c,o+"-line",l),i.on(c.updateWhenIdle?"moveend":"move",this._update,this),i.whenReady(this._update,this),l},onRemove:function(i){i.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(i,o,l){i.metric&&(this._mScale=Tt("div",o,l)),i.imperial&&(this._iScale=Tt("div",o,l))},_update:function(){var i=this._map,o=i.getSize().y/2,l=i.distance(i.containerPointToLatLng([0,o]),i.containerPointToLatLng([this.options.maxWidth,o]));this._updateScales(l)},_updateScales:function(i){this.options.metric&&i&&this._updateMetric(i),this.options.imperial&&i&&this._updateImperial(i)},_updateMetric:function(i){var o=this._getRoundNum(i),l=o<1e3?o+" m":o/1e3+" km";this._updateScale(this._mScale,l,o/i)},_updateImperial:function(i){var o=i*3.2808399,l,c,d;o>5280?(l=o/5280,c=this._getRoundNum(l),this._updateScale(this._iScale,c+" mi",c/l)):(d=this._getRoundNum(o),this._updateScale(this._iScale,d+" ft",d/o))},_updateScale:function(i,o,l){i.style.width=Math.round(this.options.maxWidth*l)+"px",i.innerHTML=o},_getRoundNum:function(i){var o=Math.pow(10,(Math.floor(i)+"").length-1),l=i/o;return l=l>=10?10:l>=5?5:l>=3?3:l>=2?2:1,o*l}}),lv=function(i){return new Nh(i)},ml=$e.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(i){C(this,i),this._attributions={}},onAdd:function(i){i.attributionControl=this,this._container=Tt("div","leaflet-control-attribution"),Ir(this._container);for(var o in i._layers)i._layers[o].getAttribution&&this.addAttribution(i._layers[o].getAttribution());return this._update(),this._container},setPrefix:function(i){return this.options.prefix=i,this._update(),this},addAttribution:function(i){return i?(this._attributions[i]||(this._attributions[i]=0),this._attributions[i]++,this._update(),this):this},removeAttribution:function(i){return i?(this._attributions[i]&&(this._attributions[i]--,this._update()),this):this},_update:function(){if(!!this._map){var i=[];for(var o in this._attributions)this._attributions[o]&&i.push(o);var l=[];this.options.prefix&&l.push(this.options.prefix),i.length&&l.push(i.join(", ")),this._container.innerHTML=l.join(" | ")}}});wt.mergeOptions({attributionControl:!0}),wt.addInitHook(function(){this.options.attributionControl&&new ml().addTo(this)});var uv=function(i){return new ml(i)};$e.Layers=Ih,$e.Zoom=pl,$e.Scale=Nh,$e.Attribution=ml,Nr.layers=ov,Nr.zoom=av,Nr.scale=lv,Nr.attribution=uv;var tn=ge.extend({initialize:function(i){this._map=i},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});tn.addTo=function(i,o){return i.addHandler(o,this),this};var cv={Events:vt},Mh=Qe?"touchstart mousedown":"mousedown",kh={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},gl={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},Qn=xt.extend({options:{clickTolerance:3},initialize:function(i,o,l,c){C(this,c),this._element=i,this._dragStartTarget=o||i,this._preventOutline=l},enable:function(){this._enabled||(dt(this._dragStartTarget,Mh,this._onDown,this),this._enabled=!0)},disable:function(){!this._enabled||(Qn._dragging===this&&this.finishDrag(),Xt(this._dragStartTarget,Mh,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(i){if(!(i._simulated||!this._enabled)&&(this._moved=!1,!tl(this._element,"leaflet-zoom-anim")&&!(Qn._dragging||i.shiftKey||i.which!==1&&i.button!==1&&!i.touches)&&(Qn._dragging=this,this._preventOutline&&ol(this._element),il(),Ar(),!this._moving))){this.fire("down");var o=i.touches?i.touches[0]:i,l=Ph(this._element);this._startPoint=new H(o.clientX,o.clientY),this._parentScale=al(l),dt(document,gl[i.type],this._onMove,this),dt(document,kh[i.type],this._onUp,this)}},_onMove:function(i){if(!(i._simulated||!this._enabled)){if(i.touches&&i.touches.length>1){this._moved=!0;return}var o=i.touches&&i.touches.length===1?i.touches[0]:i,l=new H(o.clientX,o.clientY)._subtract(this._startPoint);!l.x&&!l.y||Math.abs(l.x)+Math.abs(l.y)<this.options.clickTolerance||(l.x/=this._parentScale.x,l.y/=this._parentScale.y,Fe(i),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=Nn(this._element).subtract(l),ut(document.body,"leaflet-dragging"),this._lastTarget=i.target||i.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ut(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(l),this._moving=!0,Lt(this._animRequest),this._lastEvent=i,this._animRequest=_t(this._updatePosition,this,!0))}},_updatePosition:function(){var i={originalEvent:this._lastEvent};this.fire("predrag",i),Qt(this._element,this._newPos),this.fire("drag",i)},_onUp:function(i){i._simulated||!this._enabled||this.finishDrag()},finishDrag:function(){Yt(document.body,"leaflet-dragging"),this._lastTarget&&(Yt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var i in gl)Xt(document,gl[i],this._onMove,this),Xt(document,kh[i],this._onUp,this);rl(),Cr(),this._moved&&this._moving&&(Lt(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,Qn._dragging=!1}});function Rh(i,o){if(!o||!i.length)return i.slice();var l=o*o;return i=dv(i,l),i=fv(i,l),i}function Oh(i,o,l){return Math.sqrt(Mr(i,o,l,!0))}function hv(i,o,l){return Mr(i,o,l)}function fv(i,o){var l=i.length,c=typeof Uint8Array!=void 0+""?Uint8Array:Array,d=new c(l);d[0]=d[l-1]=1,_l(i,d,o,0,l-1);var g,w=[];for(g=0;g<l;g++)d[g]&&w.push(i[g]);return w}function _l(i,o,l,c,d){var g=0,w,T,P;for(T=c+1;T<=d-1;T++)P=Mr(i[T],i[c],i[d],!0),P>g&&(w=T,g=P);g>l&&(o[w]=1,_l(i,o,l,c,w),_l(i,o,l,w,d))}function dv(i,o){for(var l=[i[0]],c=1,d=0,g=i.length;c<g;c++)pv(i[c],i[d])>o&&(l.push(i[c]),d=c);return d<g-1&&l.push(i[g-1]),l}var Dh;function zh(i,o,l,c,d){var g=c?Dh:Jn(i,l),w=Jn(o,l),T,P,I;for(Dh=w;;){if(!(g|w))return[i,o];if(g&w)return!1;T=g||w,P=Ys(i,o,T,l,d),I=Jn(P,l),T===g?(i=P,g=I):(o=P,w=I)}}function Ys(i,o,l,c,d){var g=o.x-i.x,w=o.y-i.y,T=c.min,P=c.max,I,Z;return l&8?(I=i.x+g*(P.y-i.y)/w,Z=P.y):l&4?(I=i.x+g*(T.y-i.y)/w,Z=T.y):l&2?(I=P.x,Z=i.y+w*(P.x-i.x)/g):l&1&&(I=T.x,Z=i.y+w*(T.x-i.x)/g),new H(I,Z,d)}function Jn(i,o){var l=0;return i.x<o.min.x?l|=1:i.x>o.max.x&&(l|=2),i.y<o.min.y?l|=4:i.y>o.max.y&&(l|=8),l}function pv(i,o){var l=o.x-i.x,c=o.y-i.y;return l*l+c*c}function Mr(i,o,l,c){var d=o.x,g=o.y,w=l.x-d,T=l.y-g,P=w*w+T*T,I;return P>0&&(I=((i.x-d)*w+(i.y-g)*T)/P,I>1?(d=l.x,g=l.y):I>0&&(d+=w*I,g+=T*I)),w=i.x-d,T=i.y-g,c?w*w+T*T:new H(d,g)}function pn(i){return!Q(i[0])||typeof i[0][0]!="object"&&typeof i[0][0]!="undefined"}function Bh(i){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),pn(i)}var mv={simplify:Rh,pointToSegmentDistance:Oh,closestPointOnSegment:hv,clipSegment:zh,_getEdgeIntersection:Ys,_getBitCode:Jn,_sqClosestPointOnSegment:Mr,isFlat:pn,_flat:Bh};function Fh(i,o,l){var c,d=[1,4,2,8],g,w,T,P,I,Z,J,bt;for(g=0,Z=i.length;g<Z;g++)i[g]._code=Jn(i[g],o);for(T=0;T<4;T++){for(J=d[T],c=[],g=0,Z=i.length,w=Z-1;g<Z;w=g++)P=i[g],I=i[w],P._code&J?I._code&J||(bt=Ys(I,P,J,o,l),bt._code=Jn(bt,o),c.push(bt)):(I._code&J&&(bt=Ys(I,P,J,o,l),bt._code=Jn(bt,o),c.push(bt)),c.push(P));i=c}return i}var gv={clipPolygon:Fh},vl={project:function(i){return new H(i.lng,i.lat)},unproject:function(i){return new S(i.y,i.x)},bounds:new yt([-180,-90],[180,90])},yl={R:6378137,R_MINOR:6356752314245179e-9,bounds:new yt([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(i){var o=Math.PI/180,l=this.R,c=i.lat*o,d=this.R_MINOR/l,g=Math.sqrt(1-d*d),w=g*Math.sin(c),T=Math.tan(Math.PI/4-c/2)/Math.pow((1-w)/(1+w),g/2);return c=-l*Math.log(Math.max(T,1e-10)),new H(i.lng*o*l,c)},unproject:function(i){for(var o=180/Math.PI,l=this.R,c=this.R_MINOR/l,d=Math.sqrt(1-c*c),g=Math.exp(-i.y/l),w=Math.PI/2-2*Math.atan(g),T=0,P=.1,I;T<15&&Math.abs(P)>1e-7;T++)I=d*Math.sin(w),I=Math.pow((1-I)/(1+I),d/2),P=Math.PI/2-2*Math.atan(g*I)-w,w+=P;return new S(w*o,i.x*o/l)}},_v={LonLat:vl,Mercator:yl,SphericalMercator:Nt},vv=s({},K,{code:"EPSG:3395",projection:yl,transformation:function(){var i=.5/(Math.PI*yl.R);return it(i,.5,-i,.5)}()}),Uh=s({},K,{code:"EPSG:4326",projection:vl,transformation:it(1/180,1,-1/180,.5)}),yv=s({},D,{projection:vl,transformation:it(1,0,-1,0),scale:function(i){return Math.pow(2,i)},zoom:function(i){return Math.log(i)/Math.LN2},distance:function(i,o){var l=o.lng-i.lng,c=o.lat-i.lat;return Math.sqrt(l*l+c*c)},infinite:!0});D.Earth=K,D.EPSG3395=vv,D.EPSG3857=y,D.EPSG900913=E,D.EPSG4326=Uh,D.Simple=yv;var Ze=xt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(i){return i.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(i){return i&&i.removeLayer(this),this},getPane:function(i){return this._map.getPane(i?this.options[i]||i:this.options.pane)},addInteractiveTarget:function(i){return this._map._targets[f(i)]=this,this},removeInteractiveTarget:function(i){return delete this._map._targets[f(i)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(i){var o=i.target;if(!!o.hasLayer(this)){if(this._map=o,this._zoomAnimated=o._zoomAnimated,this.getEvents){var l=this.getEvents();o.on(l,this),this.once("remove",function(){o.off(l,this)},this)}this.onAdd(o),this.getAttribution&&o.attributionControl&&o.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),o.fire("layeradd",{layer:this})}}});wt.include({addLayer:function(i){if(!i._layerAdd)throw new Error("The provided object is not a Layer.");var o=f(i);return this._layers[o]?this:(this._layers[o]=i,i._mapToAdd=this,i.beforeAdd&&i.beforeAdd(this),this.whenReady(i._layerAdd,i),this)},removeLayer:function(i){var o=f(i);return this._layers[o]?(this._loaded&&i.onRemove(this),i.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(i.getAttribution()),delete this._layers[o],this._loaded&&(this.fire("layerremove",{layer:i}),i.fire("remove")),i._map=i._mapToAdd=null,this):this},hasLayer:function(i){return!!i&&f(i)in this._layers},eachLayer:function(i,o){for(var l in this._layers)i.call(o,this._layers[l]);return this},_addLayers:function(i){i=i?Q(i)?i:[i]:[];for(var o=0,l=i.length;o<l;o++)this.addLayer(i[o])},_addZoomLimit:function(i){(isNaN(i.options.maxZoom)||!isNaN(i.options.minZoom))&&(this._zoomBoundLayers[f(i)]=i,this._updateZoomLevels())},_removeZoomLimit:function(i){var o=f(i);this._zoomBoundLayers[o]&&(delete this._zoomBoundLayers[o],this._updateZoomLevels())},_updateZoomLevels:function(){var i=1/0,o=-1/0,l=this._getZoomSpan();for(var c in this._zoomBoundLayers){var d=this._zoomBoundLayers[c].options;i=d.minZoom===void 0?i:Math.min(i,d.minZoom),o=d.maxZoom===void 0?o:Math.max(o,d.maxZoom)}this._layersMaxZoom=o===-1/0?void 0:o,this._layersMinZoom=i===1/0?void 0:i,l!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ki=Ze.extend({initialize:function(i,o){C(this,o),this._layers={};var l,c;if(i)for(l=0,c=i.length;l<c;l++)this.addLayer(i[l])},addLayer:function(i){var o=this.getLayerId(i);return this._layers[o]=i,this._map&&this._map.addLayer(i),this},removeLayer:function(i){var o=i in this._layers?i:this.getLayerId(i);return this._map&&this._layers[o]&&this._map.removeLayer(this._layers[o]),delete this._layers[o],this},hasLayer:function(i){if(!i)return!1;var o=typeof i=="number"?i:this.getLayerId(i);return o in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(i){var o=Array.prototype.slice.call(arguments,1),l,c;for(l in this._layers)c=this._layers[l],c[i]&&c[i].apply(c,o);return this},onAdd:function(i){this.eachLayer(i.addLayer,i)},onRemove:function(i){this.eachLayer(i.removeLayer,i)},eachLayer:function(i,o){for(var l in this._layers)i.call(o,this._layers[l]);return this},getLayer:function(i){return this._layers[i]},getLayers:function(){var i=[];return this.eachLayer(i.push,i),i},setZIndex:function(i){return this.invoke("setZIndex",i)},getLayerId:function(i){return f(i)}}),wv=function(i,o){return new ki(i,o)},Ri=ki.extend({addLayer:function(i){return this.hasLayer(i)?this:(i.addEventParent(this),ki.prototype.addLayer.call(this,i),this.fire("layeradd",{layer:i}))},removeLayer:function(i){return this.hasLayer(i)?(i in this._layers&&(i=this._layers[i]),i.removeEventParent(this),ki.prototype.removeLayer.call(this,i),this.fire("layerremove",{layer:i})):this},setStyle:function(i){return this.invoke("setStyle",i)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var i=new zt;for(var o in this._layers){var l=this._layers[o];i.extend(l.getBounds?l.getBounds():l.getLatLng())}return i}}),xv=function(i,o){return new Ri(i,o)},Oi=ge.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(i){C(this,i)},createIcon:function(i){return this._createIcon("icon",i)},createShadow:function(i){return this._createIcon("shadow",i)},_createIcon:function(i,o){var l=this._getIconUrl(i);if(!l){if(i==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var c=this._createImg(l,o&&o.tagName==="IMG"?o:null);return this._setIconStyles(c,i),c},_setIconStyles:function(i,o){var l=this.options,c=l[o+"Size"];typeof c=="number"&&(c=[c,c]);var d=ct(c),g=ct(o==="shadow"&&l.shadowAnchor||l.iconAnchor||d&&d.divideBy(2,!0));i.className="leaflet-marker-"+o+" "+(l.className||""),g&&(i.style.marginLeft=-g.x+"px",i.style.marginTop=-g.y+"px"),d&&(i.style.width=d.x+"px",i.style.height=d.y+"px")},_createImg:function(i,o){return o=o||document.createElement("img"),o.src=i,o},_getIconUrl:function(i){return In&&this.options[i+"RetinaUrl"]||this.options[i+"Url"]}});function Ev(i){return new Oi(i)}var kr=Oi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(i){return kr.imagePath||(kr.imagePath=this._detectIconPath()),(this.options.imagePath||kr.imagePath)+Oi.prototype._getIconUrl.call(this,i)},_detectIconPath:function(){var i=Tt("div","leaflet-default-icon-path",document.body),o=Sr(i,"background-image")||Sr(i,"backgroundImage");return document.body.removeChild(i),o===null||o.indexOf("url")!==0?o="":o=o.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,""),o}}),Vh=tn.extend({initialize:function(i){this._marker=i},addHooks:function(){var i=this._marker._icon;this._draggable||(this._draggable=new Qn(i,i,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ut(i,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Yt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(i){var o=this._marker,l=o._map,c=this._marker.options.autoPanSpeed,d=this._marker.options.autoPanPadding,g=Nn(o._icon),w=l.getPixelBounds(),T=l.getPixelOrigin(),P=jt(w.min._subtract(T).add(d),w.max._subtract(T).subtract(d));if(!P.contains(g)){var I=ct((Math.max(P.max.x,g.x)-P.max.x)/(w.max.x-P.max.x)-(Math.min(P.min.x,g.x)-P.min.x)/(w.min.x-P.min.x),(Math.max(P.max.y,g.y)-P.max.y)/(w.max.y-P.max.y)-(Math.min(P.min.y,g.y)-P.min.y)/(w.min.y-P.min.y)).multiplyBy(c);l.panBy(I,{animate:!1}),this._draggable._newPos._add(I),this._draggable._startPos._add(I),Qt(o._icon,this._draggable._newPos),this._onDrag(i),this._panRequest=_t(this._adjustPan.bind(this,i))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(i){this._marker.options.autoPan&&(Lt(this._panRequest),this._panRequest=_t(this._adjustPan.bind(this,i)))},_onDrag:function(i){var o=this._marker,l=o._shadow,c=Nn(o._icon),d=o._map.layerPointToLatLng(c);l&&Qt(l,c),o._latlng=d,i.latlng=d,i.oldLatLng=this._oldLatLng,o.fire("move",i).fire("drag",i)},_onDragEnd:function(i){Lt(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",i)}}),Xs=Ze.extend({options:{icon:new kr,interactive:!0,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(i,o){C(this,o),this._latlng=F(i)},onAdd:function(i){this._zoomAnimated=this._zoomAnimated&&i.options.markerZoomAnimation,this._zoomAnimated&&i.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(i){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&i.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(i){var o=this._latlng;return this._latlng=F(i),this.update(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},setZIndexOffset:function(i){return this.options.zIndexOffset=i,this.update()},getIcon:function(){return this.options.icon},setIcon:function(i){return this.options.icon=i,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var i=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(i)}return this},_initIcon:function(){var i=this.options,o="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),l=i.icon.createIcon(this._icon),c=!1;l!==this._icon&&(this._icon&&this._removeIcon(),c=!0,i.title&&(l.title=i.title),l.tagName==="IMG"&&(l.alt=i.alt||"")),ut(l,o),i.keyboard&&(l.tabIndex="0"),this._icon=l,i.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var d=i.icon.createShadow(this._shadow),g=!1;d!==this._shadow&&(this._removeShadow(),g=!0),d&&(ut(d,o),d.alt=""),this._shadow=d,i.opacity<1&&this._updateOpacity(),c&&this.getPane().appendChild(this._icon),this._initInteraction(),d&&g&&this.getPane(i.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),qt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&qt(this._shadow),this._shadow=null},_setPos:function(i){this._icon&&Qt(this._icon,i),this._shadow&&Qt(this._shadow,i),this._zIndex=i.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(i){this._icon&&(this._icon.style.zIndex=this._zIndex+i)},_animateZoom:function(i){var o=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center).round();this._setPos(o)},_initInteraction:function(){if(!!this.options.interactive&&(ut(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Vh)){var i=this.options.draggable;this.dragging&&(i=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Vh(this),i&&this.dragging.enable()}},setOpacity:function(i){return this.options.opacity=i,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var i=this.options.opacity;this._icon&&Be(this._icon,i),this._shadow&&Be(this._shadow,i)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Tv(i,o){return new Xs(i,o)}var Mn=Ze.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(i){this._renderer=i.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(i){return C(this,i),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&i&&Object.prototype.hasOwnProperty.call(i,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),Qs=Mn.extend({options:{fill:!0,radius:10},initialize:function(i,o){C(this,o),this._latlng=F(i),this._radius=this.options.radius},setLatLng:function(i){var o=this._latlng;return this._latlng=F(i),this.redraw(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(i){return this.options.radius=this._radius=i,this.redraw()},getRadius:function(){return this._radius},setStyle:function(i){var o=i&&i.radius||this._radius;return Mn.prototype.setStyle.call(this,i),this.setRadius(o),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var i=this._radius,o=this._radiusY||i,l=this._clickTolerance(),c=[i+l,o+l];this._pxBounds=new yt(this._point.subtract(c),this._point.add(c))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(i){return i.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function bv(i,o){return new Qs(i,o)}var wl=Qs.extend({initialize:function(i,o,l){if(typeof o=="number"&&(o=s({},l,{radius:o})),C(this,o),this._latlng=F(i),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(i){return this._mRadius=i,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var i=[this._radius,this._radiusY||this._radius];return new zt(this._map.layerPointToLatLng(this._point.subtract(i)),this._map.layerPointToLatLng(this._point.add(i)))},setStyle:Mn.prototype.setStyle,_project:function(){var i=this._latlng.lng,o=this._latlng.lat,l=this._map,c=l.options.crs;if(c.distance===K.distance){var d=Math.PI/180,g=this._mRadius/K.R/d,w=l.project([o+g,i]),T=l.project([o-g,i]),P=w.add(T).divideBy(2),I=l.unproject(P).lat,Z=Math.acos((Math.cos(g*d)-Math.sin(o*d)*Math.sin(I*d))/(Math.cos(o*d)*Math.cos(I*d)))/d;(isNaN(Z)||Z===0)&&(Z=g/Math.cos(Math.PI/180*o)),this._point=P.subtract(l.getPixelOrigin()),this._radius=isNaN(Z)?0:P.x-l.project([I,i-Z]).x,this._radiusY=P.y-w.y}else{var J=c.unproject(c.project(this._latlng).subtract([this._mRadius,0]));this._point=l.latLngToLayerPoint(this._latlng),this._radius=this._point.x-l.latLngToLayerPoint(J).x}this._updateBounds()}});function Pv(i,o,l){return new wl(i,o,l)}var mn=Mn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(i,o){C(this,o),this._setLatLngs(i)},getLatLngs:function(){return this._latlngs},setLatLngs:function(i){return this._setLatLngs(i),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(i){for(var o=1/0,l=null,c=Mr,d,g,w=0,T=this._parts.length;w<T;w++)for(var P=this._parts[w],I=1,Z=P.length;I<Z;I++){d=P[I-1],g=P[I];var J=c(i,d,g,!0);J<o&&(o=J,l=c(i,d,g))}return l&&(l.distance=Math.sqrt(o)),l},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var i,o,l,c,d,g,w,T=this._rings[0],P=T.length;if(!P)return null;for(i=0,o=0;i<P-1;i++)o+=T[i].distanceTo(T[i+1])/2;if(o===0)return this._map.layerPointToLatLng(T[0]);for(i=0,c=0;i<P-1;i++)if(d=T[i],g=T[i+1],l=d.distanceTo(g),c+=l,c>o)return w=(c-o)/l,this._map.layerPointToLatLng([g.x-w*(g.x-d.x),g.y-w*(g.y-d.y)])},getBounds:function(){return this._bounds},addLatLng:function(i,o){return o=o||this._defaultShape(),i=F(i),o.push(i),this._bounds.extend(i),this.redraw()},_setLatLngs:function(i){this._bounds=new zt,this._latlngs=this._convertLatLngs(i)},_defaultShape:function(){return pn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(i){for(var o=[],l=pn(i),c=0,d=i.length;c<d;c++)l?(o[c]=F(i[c]),this._bounds.extend(o[c])):o[c]=this._convertLatLngs(i[c]);return o},_project:function(){var i=new yt;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,i),this._bounds.isValid()&&i.isValid()&&(this._rawPxBounds=i,this._updateBounds())},_updateBounds:function(){var i=this._clickTolerance(),o=new H(i,i);this._pxBounds=new yt([this._rawPxBounds.min.subtract(o),this._rawPxBounds.max.add(o)])},_projectLatlngs:function(i,o,l){var c=i[0]instanceof S,d=i.length,g,w;if(c){for(w=[],g=0;g<d;g++)w[g]=this._map.latLngToLayerPoint(i[g]),l.extend(w[g]);o.push(w)}else for(g=0;g<d;g++)this._projectLatlngs(i[g],o,l)},_clipPoints:function(){var i=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}var o=this._parts,l,c,d,g,w,T,P;for(l=0,d=0,g=this._rings.length;l<g;l++)for(P=this._rings[l],c=0,w=P.length;c<w-1;c++)T=zh(P[c],P[c+1],i,c,!0),!!T&&(o[d]=o[d]||[],o[d].push(T[0]),(T[1]!==P[c+1]||c===w-2)&&(o[d].push(T[1]),d++))}},_simplifyPoints:function(){for(var i=this._parts,o=this.options.smoothFactor,l=0,c=i.length;l<c;l++)i[l]=Rh(i[l],o)},_update:function(){!this._map||(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(i,o){var l,c,d,g,w,T,P=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(l=0,g=this._parts.length;l<g;l++)for(T=this._parts[l],c=0,w=T.length,d=w-1;c<w;d=c++)if(!(!o&&c===0)&&Oh(i,T[d],T[c])<=P)return!0;return!1}});function Sv(i,o){return new mn(i,o)}mn._flat=Bh;var Di=mn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var i,o,l,c,d,g,w,T,P,I=this._rings[0],Z=I.length;if(!Z)return null;for(g=w=T=0,i=0,o=Z-1;i<Z;o=i++)l=I[i],c=I[o],d=l.y*c.x-c.y*l.x,w+=(l.x+c.x)*d,T+=(l.y+c.y)*d,g+=d*3;return g===0?P=I[0]:P=[w/g,T/g],this._map.layerPointToLatLng(P)},_convertLatLngs:function(i){var o=mn.prototype._convertLatLngs.call(this,i),l=o.length;return l>=2&&o[0]instanceof S&&o[0].equals(o[l-1])&&o.pop(),o},_setLatLngs:function(i){mn.prototype._setLatLngs.call(this,i),pn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return pn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var i=this._renderer._bounds,o=this.options.weight,l=new H(o,o);if(i=new yt(i.min.subtract(l),i.max.add(l)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}for(var c=0,d=this._rings.length,g;c<d;c++)g=Fh(this._rings[c],i,!0),g.length&&this._parts.push(g)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(i){var o=!1,l,c,d,g,w,T,P,I;if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(g=0,P=this._parts.length;g<P;g++)for(l=this._parts[g],w=0,I=l.length,T=I-1;w<I;T=w++)c=l[w],d=l[T],c.y>i.y!=d.y>i.y&&i.x<(d.x-c.x)*(i.y-c.y)/(d.y-c.y)+c.x&&(o=!o);return o||mn.prototype._containsPoint.call(this,i,!0)}});function Av(i,o){return new Di(i,o)}var gn=Ri.extend({initialize:function(i,o){C(this,o),this._layers={},i&&this.addData(i)},addData:function(i){var o=Q(i)?i:i.features,l,c,d;if(o){for(l=0,c=o.length;l<c;l++)d=o[l],(d.geometries||d.geometry||d.features||d.coordinates)&&this.addData(d);return this}var g=this.options;if(g.filter&&!g.filter(i))return this;var w=xl(i,g);return w?(w.feature=eo(i),w.defaultOptions=w.options,this.resetStyle(w),g.onEachFeature&&g.onEachFeature(i,w),this.addLayer(w)):this},resetStyle:function(i){return i===void 0?this.eachLayer(this.resetStyle,this):(i.options=s({},i.defaultOptions),this._setLayerStyle(i,this.options.style),this)},setStyle:function(i){return this.eachLayer(function(o){this._setLayerStyle(o,i)},this)},_setLayerStyle:function(i,o){i.setStyle&&(typeof o=="function"&&(o=o(i.feature)),i.setStyle(o))}});function xl(i,o){var l=i.type==="Feature"?i.geometry:i,c=l?l.coordinates:null,d=[],g=o&&o.pointToLayer,w=o&&o.coordsToLatLng||El,T,P,I,Z;if(!c&&!l)return null;switch(l.type){case"Point":return T=w(c),Hh(g,i,T,o);case"MultiPoint":for(I=0,Z=c.length;I<Z;I++)T=w(c[I]),d.push(Hh(g,i,T,o));return new Ri(d);case"LineString":case"MultiLineString":return P=Js(c,l.type==="LineString"?0:1,w),new mn(P,o);case"Polygon":case"MultiPolygon":return P=Js(c,l.type==="Polygon"?1:2,w),new Di(P,o);case"GeometryCollection":for(I=0,Z=l.geometries.length;I<Z;I++){var J=xl({geometry:l.geometries[I],type:"Feature",properties:i.properties},o);J&&d.push(J)}return new Ri(d);default:throw new Error("Invalid GeoJSON object.")}}function Hh(i,o,l,c){return i?i(o,l):new Xs(l,c&&c.markersInheritOptions&&c)}function El(i){return new S(i[1],i[0],i[2])}function Js(i,o,l){for(var c=[],d=0,g=i.length,w;d<g;d++)w=o?Js(i[d],o-1,l):(l||El)(i[d]),c.push(w);return c}function Tl(i,o){return o=typeof o=="number"?o:6,i.alt!==void 0?[v(i.lng,o),v(i.lat,o),v(i.alt,o)]:[v(i.lng,o),v(i.lat,o)]}function to(i,o,l,c){for(var d=[],g=0,w=i.length;g<w;g++)d.push(o?to(i[g],o-1,l,c):Tl(i[g],c));return!o&&l&&d.push(d[0]),d}function zi(i,o){return i.feature?s({},i.feature,{geometry:o}):eo(o)}function eo(i){return i.type==="Feature"||i.type==="FeatureCollection"?i:{type:"Feature",properties:{},geometry:i}}var bl={toGeoJSON:function(i){return zi(this,{type:"Point",coordinates:Tl(this.getLatLng(),i)})}};Xs.include(bl),wl.include(bl),Qs.include(bl),mn.include({toGeoJSON:function(i){var o=!pn(this._latlngs),l=to(this._latlngs,o?1:0,!1,i);return zi(this,{type:(o?"Multi":"")+"LineString",coordinates:l})}}),Di.include({toGeoJSON:function(i){var o=!pn(this._latlngs),l=o&&!pn(this._latlngs[0]),c=to(this._latlngs,l?2:o?1:0,!0,i);return o||(c=[c]),zi(this,{type:(l?"Multi":"")+"Polygon",coordinates:c})}}),ki.include({toMultiPoint:function(i){var o=[];return this.eachLayer(function(l){o.push(l.toGeoJSON(i).geometry.coordinates)}),zi(this,{type:"MultiPoint",coordinates:o})},toGeoJSON:function(i){var o=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(o==="MultiPoint")return this.toMultiPoint(i);var l=o==="GeometryCollection",c=[];return this.eachLayer(function(d){if(d.toGeoJSON){var g=d.toGeoJSON(i);if(l)c.push(g.geometry);else{var w=eo(g);w.type==="FeatureCollection"?c.push.apply(c,w.features):c.push(w)}}}),l?zi(this,{geometries:c,type:"GeometryCollection"}):{type:"FeatureCollection",features:c}}});function $h(i,o){return new gn(i,o)}var Cv=$h,no=Ze.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(i,o,l){this._url=i,this._bounds=Gt(o),C(this,l)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ut(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){qt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(i){return this.options.opacity=i,this._image&&this._updateOpacity(),this},setStyle:function(i){return i.opacity&&this.setOpacity(i.opacity),this},bringToFront:function(){return this._map&&Ni(this._image),this},bringToBack:function(){return this._map&&Mi(this._image),this},setUrl:function(i){return this._url=i,this._image&&(this._image.src=i),this},setBounds:function(i){return this._bounds=Gt(i),this._map&&this._reset(),this},getEvents:function(){var i={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var i=this._url.tagName==="IMG",o=this._image=i?this._url:Tt("img");if(ut(o,"leaflet-image-layer"),this._zoomAnimated&&ut(o,"leaflet-zoom-animated"),this.options.className&&ut(o,this.options.className),o.onselectstart=_,o.onmousemove=_,o.onload=u(this.fire,this,"load"),o.onerror=u(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),i){this._url=o.src;return}o.src=this._url,o.alt=this.options.alt},_animateZoom:function(i){var o=this._map.getZoomScale(i.zoom),l=this._map._latLngBoundsToNewLayerBounds(this._bounds,i.zoom,i.center).min;Yn(this._image,l,o)},_reset:function(){var i=this._image,o=new yt(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),l=o.getSize();Qt(i,o.min),i.style.width=l.x+"px",i.style.height=l.y+"px"},_updateOpacity:function(){Be(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var i=this.options.errorOverlayUrl;i&&this._url!==i&&(this._url=i,this._image.src=i)}}),Lv=function(i,o,l){return new no(i,o,l)},Zh=no.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1},_initImage:function(){var i=this._url.tagName==="VIDEO",o=this._image=i?this._url:Tt("video");if(ut(o,"leaflet-image-layer"),this._zoomAnimated&&ut(o,"leaflet-zoom-animated"),this.options.className&&ut(o,this.options.className),o.onselectstart=_,o.onmousemove=_,o.onloadeddata=u(this.fire,this,"load"),i){for(var l=o.getElementsByTagName("source"),c=[],d=0;d<l.length;d++)c.push(l[d].src);this._url=l.length>0?c:[o.src];return}Q(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(o.style,"objectFit")&&(o.style.objectFit="fill"),o.autoplay=!!this.options.autoplay,o.loop=!!this.options.loop,o.muted=!!this.options.muted;for(var g=0;g<this._url.length;g++){var w=Tt("source");w.src=this._url[g],o.appendChild(w)}}});function Iv(i,o,l){return new Zh(i,o,l)}var qh=no.extend({_initImage:function(){var i=this._image=this._url;ut(i,"leaflet-image-layer"),this._zoomAnimated&&ut(i,"leaflet-zoom-animated"),this.options.className&&ut(i,this.options.className),i.onselectstart=_,i.onmousemove=_}});function Nv(i,o,l){return new qh(i,o,l)}var _n=Ze.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(i,o){C(this,i),this._source=o},onAdd:function(i){this._zoomAnimated=i._zoomAnimated,this._container||this._initLayout(),i._fadeAnimated&&Be(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),i._fadeAnimated&&Be(this._container,1),this.bringToFront()},onRemove:function(i){i._fadeAnimated?(Be(this._container,0),this._removeTimeout=setTimeout(u(qt,void 0,this._container),200)):qt(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(i){return this._latlng=F(i),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(i){return this._content=i,this.update(),this},getElement:function(){return this._container},update:function(){!this._map||(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var i={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ni(this._container),this},bringToBack:function(){return this._map&&Mi(this._container),this},_prepareOpen:function(i,o,l){if(o instanceof Ze||(l=o,o=i),o instanceof Ri)for(var c in i._layers){o=i._layers[c];break}if(!l)if(o.getCenter)l=o.getCenter();else if(o.getLatLng)l=o.getLatLng();else throw new Error("Unable to get source layer LatLng.");return this._source=o,this.update(),l},_updateContent:function(){if(!!this._content){var i=this._contentNode,o=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof o=="string")i.innerHTML=o;else{for(;i.hasChildNodes();)i.removeChild(i.firstChild);i.appendChild(o)}this.fire("contentupdate")}},_updatePosition:function(){if(!!this._map){var i=this._map.latLngToLayerPoint(this._latlng),o=ct(this.options.offset),l=this._getAnchor();this._zoomAnimated?Qt(this._container,i.add(l)):o=o.add(i).add(l);var c=this._containerBottom=-o.y,d=this._containerLeft=-Math.round(this._containerWidth/2)+o.x;this._container.style.bottom=c+"px",this._container.style.left=d+"px"}},_getAnchor:function(){return[0,0]}}),Bi=_n.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(i){return i.openPopup(this),this},onAdd:function(i){_n.prototype.onAdd.call(this,i),i.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Mn||this._source.on("preclick",Xn))},onRemove:function(i){_n.prototype.onRemove.call(this,i),i.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Mn||this._source.off("preclick",Xn))},getEvents:function(){var i=_n.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(i.preclick=this._close),this.options.keepInView&&(i.moveend=this._adjustPan),i},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var i="leaflet-popup",o=this._container=Tt("div",i+" "+(this.options.className||"")+" leaflet-zoom-animated"),l=this._wrapper=Tt("div",i+"-content-wrapper",o);if(this._contentNode=Tt("div",i+"-content",l),Ir(o),cl(this._contentNode),dt(o,"contextmenu",Xn),this._tipContainer=Tt("div",i+"-tip-container",o),this._tip=Tt("div",i+"-tip",this._tipContainer),this.options.closeButton){var c=this._closeButton=Tt("a",i+"-close-button",o);c.href="#close",c.innerHTML="&#215;",dt(c,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var i=this._contentNode,o=i.style;o.width="",o.whiteSpace="nowrap";var l=i.offsetWidth;l=Math.min(l,this.options.maxWidth),l=Math.max(l,this.options.minWidth),o.width=l+1+"px",o.whiteSpace="",o.height="";var c=i.offsetHeight,d=this.options.maxHeight,g="leaflet-popup-scrolled";d&&c>d?(o.height=d+"px",ut(i,g)):Yt(i,g),this._containerWidth=this._container.offsetWidth},_animateZoom:function(i){var o=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center),l=this._getAnchor();Qt(this._container,o.add(l))},_adjustPan:function(){if(!!this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var i=this._map,o=parseInt(Sr(this._container,"marginBottom"),10)||0,l=this._container.offsetHeight+o,c=this._containerWidth,d=new H(this._containerLeft,-l-this._containerBottom);d._add(Nn(this._container));var g=i.layerPointToContainerPoint(d),w=ct(this.options.autoPanPadding),T=ct(this.options.autoPanPaddingTopLeft||w),P=ct(this.options.autoPanPaddingBottomRight||w),I=i.getSize(),Z=0,J=0;g.x+c+P.x>I.x&&(Z=g.x+c-I.x+P.x),g.x-Z-T.x<0&&(Z=g.x-T.x),g.y+l+P.y>I.y&&(J=g.y+l-I.y+P.y),g.y-J-T.y<0&&(J=g.y-T.y),(Z||J)&&i.fire("autopanstart").panBy([Z,J])}},_onCloseButtonClick:function(i){this._close(),dn(i)},_getAnchor:function(){return ct(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Mv=function(i,o){return new Bi(i,o)};wt.mergeOptions({closePopupOnClick:!0}),wt.include({openPopup:function(i,o,l){return i instanceof Bi||(i=new Bi(l).setContent(i)),o&&i.setLatLng(o),this.hasLayer(i)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=i,this.addLayer(i))},closePopup:function(i){return(!i||i===this._popup)&&(i=this._popup,this._popup=null),i&&this.removeLayer(i),this}}),Ze.include({bindPopup:function(i,o){return i instanceof Bi?(C(i,o),this._popup=i,i._source=this):((!this._popup||o)&&(this._popup=new Bi(o,this)),this._popup.setContent(i)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(i,o){return this._popup&&this._map&&(o=this._popup._prepareOpen(this,i,o),this._map.openPopup(this._popup,o)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(i){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(i)),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(i){return this._popup&&this._popup.setContent(i),this},getPopup:function(){return this._popup},_openPopup:function(i){var o=i.layer||i.target;if(!!this._popup&&!!this._map){if(dn(i),o instanceof Mn){this.openPopup(i.layer||i.target,i.latlng);return}this._map.hasLayer(this._popup)&&this._popup._source===o?this.closePopup():this.openPopup(o,i.latlng)}},_movePopup:function(i){this._popup.setLatLng(i.latlng)},_onKeyPress:function(i){i.originalEvent.keyCode===13&&this._openPopup(i)}});var Fi=_n.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(i){_n.prototype.onAdd.call(this,i),this.setOpacity(this.options.opacity),i.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(i){_n.prototype.onRemove.call(this,i),i.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var i=_n.prototype.getEvents.call(this);return Qe&&!this.options.permanent&&(i.preclick=this._close),i},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var i="leaflet-tooltip",o=i+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Tt("div",o)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(i){var o,l,c=this._map,d=this._container,g=c.latLngToContainerPoint(c.getCenter()),w=c.layerPointToContainerPoint(i),T=this.options.direction,P=d.offsetWidth,I=d.offsetHeight,Z=ct(this.options.offset),J=this._getAnchor();T==="top"?(o=P/2,l=I):T==="bottom"?(o=P/2,l=0):T==="center"?(o=P/2,l=I/2):T==="right"?(o=0,l=I/2):T==="left"?(o=P,l=I/2):w.x<g.x?(T="right",o=0,l=I/2):(T="left",o=P+(Z.x+J.x)*2,l=I/2),i=i.subtract(ct(o,l,!0)).add(Z).add(J),Yt(d,"leaflet-tooltip-right"),Yt(d,"leaflet-tooltip-left"),Yt(d,"leaflet-tooltip-top"),Yt(d,"leaflet-tooltip-bottom"),ut(d,"leaflet-tooltip-"+T),Qt(d,i)},_updatePosition:function(){var i=this._map.latLngToLayerPoint(this._latlng);this._setPosition(i)},setOpacity:function(i){this.options.opacity=i,this._container&&Be(this._container,i)},_animateZoom:function(i){var o=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center);this._setPosition(o)},_getAnchor:function(){return ct(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),kv=function(i,o){return new Fi(i,o)};wt.include({openTooltip:function(i,o,l){return i instanceof Fi||(i=new Fi(l).setContent(i)),o&&i.setLatLng(o),this.hasLayer(i)?this:this.addLayer(i)},closeTooltip:function(i){return i&&this.removeLayer(i),this}}),Ze.include({bindTooltip:function(i,o){return i instanceof Fi?(C(i,o),this._tooltip=i,i._source=this):((!this._tooltip||o)&&(this._tooltip=new Fi(o,this)),this._tooltip.setContent(i)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(i){if(!(!i&&this._tooltipHandlersAdded)){var o=i?"off":"on",l={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?l.add=this._openTooltip:(l.mouseover=this._openTooltip,l.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(l.mousemove=this._moveTooltip),Qe&&(l.click=this._openTooltip)),this[o](l),this._tooltipHandlersAdded=!i}},openTooltip:function(i,o){return this._tooltip&&this._map&&(o=this._tooltip._prepareOpen(this,i,o),this._map.openTooltip(this._tooltip,o),this._tooltip.options.interactive&&this._tooltip._container&&(ut(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(Yt(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(i){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(i)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(i){return this._tooltip&&this._tooltip.setContent(i),this},getTooltip:function(){return this._tooltip},_openTooltip:function(i){var o=i.layer||i.target;!this._tooltip||!this._map||this.openTooltip(o,this._tooltip.options.sticky?i.latlng:void 0)},_moveTooltip:function(i){var o=i.latlng,l,c;this._tooltip.options.sticky&&i.originalEvent&&(l=this._map.mouseEventToContainerPoint(i.originalEvent),c=this._map.containerPointToLayerPoint(l),o=this._map.layerPointToLatLng(c)),this._tooltip.setLatLng(o)}});var Wh=Oi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(i){var o=i&&i.tagName==="DIV"?i:document.createElement("div"),l=this.options;if(l.html instanceof Element?($s(o),o.appendChild(l.html)):o.innerHTML=l.html!==!1?l.html:"",l.bgPos){var c=ct(l.bgPos);o.style.backgroundPosition=-c.x+"px "+-c.y+"px"}return this._setIconStyles(o,"icon"),o},createShadow:function(){return null}});function Rv(i){return new Wh(i)}Oi.Default=kr;var Rr=Ze.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ue,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(i){C(this,i)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(i){i._addZoomLimit(this)},onRemove:function(i){this._removeAllTiles(),qt(this._container),i._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ni(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Mi(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(i){return this.options.opacity=i,this._updateOpacity(),this},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var i={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=p(this._onMoveEnd,this.options.updateInterval,this)),i.move=this._onMove),this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},createTile:function(){return document.createElement("div")},getTileSize:function(){var i=this.options.tileSize;return i instanceof H?i:new H(i,i)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(i){for(var o=this.getPane().children,l=-i(-1/0,1/0),c=0,d=o.length,g;c<d;c++)g=o[c].style.zIndex,o[c]!==this._container&&g&&(l=i(l,+g));isFinite(l)&&(this.options.zIndex=l+i(-1,1),this._updateZIndex())},_updateOpacity:function(){if(!!this._map&&!U){Be(this._container,this.options.opacity);var i=+new Date,o=!1,l=!1;for(var c in this._tiles){var d=this._tiles[c];if(!(!d.current||!d.loaded)){var g=Math.min(1,(i-d.loaded)/200);Be(d.el,g),g<1?o=!0:(d.active?l=!0:this._onOpaqueTile(d),d.active=!0)}}l&&!this._noPrune&&this._pruneTiles(),o&&(Lt(this._fadeFrame),this._fadeFrame=_t(this._updateOpacity,this))}},_onOpaqueTile:_,_initContainer:function(){this._container||(this._container=Tt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var i=this._tileZoom,o=this.options.maxZoom;if(i!==void 0){for(var l in this._levels)l=Number(l),this._levels[l].el.children.length||l===i?(this._levels[l].el.style.zIndex=o-Math.abs(i-l),this._onUpdateLevel(l)):(qt(this._levels[l].el),this._removeTilesAtZoom(l),this._onRemoveLevel(l),delete this._levels[l]);var c=this._levels[i],d=this._map;return c||(c=this._levels[i]={},c.el=Tt("div","leaflet-tile-container leaflet-zoom-animated",this._container),c.el.style.zIndex=o,c.origin=d.project(d.unproject(d.getPixelOrigin()),i).round(),c.zoom=i,this._setZoomTransform(c,d.getCenter(),d.getZoom()),_(c.el.offsetWidth),this._onCreateLevel(c)),this._level=c,c}},_onUpdateLevel:_,_onRemoveLevel:_,_onCreateLevel:_,_pruneTiles:function(){if(!!this._map){var i,o,l=this._map.getZoom();if(l>this.options.maxZoom||l<this.options.minZoom){this._removeAllTiles();return}for(i in this._tiles)o=this._tiles[i],o.retain=o.current;for(i in this._tiles)if(o=this._tiles[i],o.current&&!o.active){var c=o.coords;this._retainParent(c.x,c.y,c.z,c.z-5)||this._retainChildren(c.x,c.y,c.z,c.z+2)}for(i in this._tiles)this._tiles[i].retain||this._removeTile(i)}},_removeTilesAtZoom:function(i){for(var o in this._tiles)this._tiles[o].coords.z===i&&this._removeTile(o)},_removeAllTiles:function(){for(var i in this._tiles)this._removeTile(i)},_invalidateAll:function(){for(var i in this._levels)qt(this._levels[i].el),this._onRemoveLevel(Number(i)),delete this._levels[i];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(i,o,l,c){var d=Math.floor(i/2),g=Math.floor(o/2),w=l-1,T=new H(+d,+g);T.z=+w;var P=this._tileCoordsToKey(T),I=this._tiles[P];return I&&I.active?(I.retain=!0,!0):(I&&I.loaded&&(I.retain=!0),w>c?this._retainParent(d,g,w,c):!1)},_retainChildren:function(i,o,l,c){for(var d=2*i;d<2*i+2;d++)for(var g=2*o;g<2*o+2;g++){var w=new H(d,g);w.z=l+1;var T=this._tileCoordsToKey(w),P=this._tiles[T];if(P&&P.active){P.retain=!0;continue}else P&&P.loaded&&(P.retain=!0);l+1<c&&this._retainChildren(d,g,l+1,c)}},_resetView:function(i){var o=i&&(i.pinch||i.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),o,o)},_animateZoom:function(i){this._setView(i.center,i.zoom,!0,i.noUpdate)},_clampZoom:function(i){var o=this.options;return o.minNativeZoom!==void 0&&i<o.minNativeZoom?o.minNativeZoom:o.maxNativeZoom!==void 0&&o.maxNativeZoom<i?o.maxNativeZoom:i},_setView:function(i,o,l,c){var d=Math.round(o);this.options.maxZoom!==void 0&&d>this.options.maxZoom||this.options.minZoom!==void 0&&d<this.options.minZoom?d=void 0:d=this._clampZoom(d);var g=this.options.updateWhenZooming&&d!==this._tileZoom;(!c||g)&&(this._tileZoom=d,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),d!==void 0&&this._update(i),l||this._pruneTiles(),this._noPrune=!!l),this._setZoomTransforms(i,o)},_setZoomTransforms:function(i,o){for(var l in this._levels)this._setZoomTransform(this._levels[l],i,o)},_setZoomTransform:function(i,o,l){var c=this._map.getZoomScale(l,i.zoom),d=i.origin.multiplyBy(c).subtract(this._map._getNewPixelOrigin(o,l)).round();Ut?Yn(i.el,d,c):Qt(i.el,d)},_resetGrid:function(){var i=this._map,o=i.options.crs,l=this._tileSize=this.getTileSize(),c=this._tileZoom,d=this._map.getPixelWorldBounds(this._tileZoom);d&&(this._globalTileRange=this._pxBoundsToTileRange(d)),this._wrapX=o.wrapLng&&!this.options.noWrap&&[Math.floor(i.project([0,o.wrapLng[0]],c).x/l.x),Math.ceil(i.project([0,o.wrapLng[1]],c).x/l.y)],this._wrapY=o.wrapLat&&!this.options.noWrap&&[Math.floor(i.project([o.wrapLat[0],0],c).y/l.x),Math.ceil(i.project([o.wrapLat[1],0],c).y/l.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(i){var o=this._map,l=o._animatingZoom?Math.max(o._animateToZoom,o.getZoom()):o.getZoom(),c=o.getZoomScale(l,this._tileZoom),d=o.project(i,this._tileZoom).floor(),g=o.getSize().divideBy(c*2);return new yt(d.subtract(g),d.add(g))},_update:function(i){var o=this._map;if(!!o){var l=this._clampZoom(o.getZoom());if(i===void 0&&(i=o.getCenter()),this._tileZoom!==void 0){var c=this._getTiledPixelBounds(i),d=this._pxBoundsToTileRange(c),g=d.getCenter(),w=[],T=this.options.keepBuffer,P=new yt(d.getBottomLeft().subtract([T,-T]),d.getTopRight().add([T,-T]));if(!(isFinite(d.min.x)&&isFinite(d.min.y)&&isFinite(d.max.x)&&isFinite(d.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var I in this._tiles){var Z=this._tiles[I].coords;(Z.z!==this._tileZoom||!P.contains(new H(Z.x,Z.y)))&&(this._tiles[I].current=!1)}if(Math.abs(l-this._tileZoom)>1){this._setView(i,l);return}for(var J=d.min.y;J<=d.max.y;J++)for(var bt=d.min.x;bt<=d.max.x;bt++){var vn=new H(bt,J);if(vn.z=this._tileZoom,!!this._isValidTile(vn)){var ti=this._tiles[this._tileCoordsToKey(vn)];ti?ti.current=!0:w.push(vn)}}if(w.sort(function(kn,Pl){return kn.distanceTo(g)-Pl.distanceTo(g)}),w.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var ro=document.createDocumentFragment();for(bt=0;bt<w.length;bt++)this._addTile(w[bt],ro);this._level.el.appendChild(ro)}}}},_isValidTile:function(i){var o=this._map.options.crs;if(!o.infinite){var l=this._globalTileRange;if(!o.wrapLng&&(i.x<l.min.x||i.x>l.max.x)||!o.wrapLat&&(i.y<l.min.y||i.y>l.max.y))return!1}if(!this.options.bounds)return!0;var c=this._tileCoordsToBounds(i);return Gt(this.options.bounds).overlaps(c)},_keyToBounds:function(i){return this._tileCoordsToBounds(this._keyToTileCoords(i))},_tileCoordsToNwSe:function(i){var o=this._map,l=this.getTileSize(),c=i.scaleBy(l),d=c.add(l),g=o.unproject(c,i.z),w=o.unproject(d,i.z);return[g,w]},_tileCoordsToBounds:function(i){var o=this._tileCoordsToNwSe(i),l=new zt(o[0],o[1]);return this.options.noWrap||(l=this._map.wrapLatLngBounds(l)),l},_tileCoordsToKey:function(i){return i.x+":"+i.y+":"+i.z},_keyToTileCoords:function(i){var o=i.split(":"),l=new H(+o[0],+o[1]);return l.z=+o[2],l},_removeTile:function(i){var o=this._tiles[i];!o||(qt(o.el),delete this._tiles[i],this.fire("tileunload",{tile:o.el,coords:this._keyToTileCoords(i)}))},_initTile:function(i){ut(i,"leaflet-tile");var o=this.getTileSize();i.style.width=o.x+"px",i.style.height=o.y+"px",i.onselectstart=_,i.onmousemove=_,U&&this.options.opacity<1&&Be(i,this.options.opacity),k&&!G&&(i.style.WebkitBackfaceVisibility="hidden")},_addTile:function(i,o){var l=this._getTilePos(i),c=this._tileCoordsToKey(i),d=this.createTile(this._wrapCoords(i),u(this._tileReady,this,i));this._initTile(d),this.createTile.length<2&&_t(u(this._tileReady,this,i,null,d)),Qt(d,l),this._tiles[c]={el:d,coords:i,current:!0},o.appendChild(d),this.fire("tileloadstart",{tile:d,coords:i})},_tileReady:function(i,o,l){o&&this.fire("tileerror",{error:o,tile:l,coords:i});var c=this._tileCoordsToKey(i);l=this._tiles[c],!!l&&(l.loaded=+new Date,this._map._fadeAnimated?(Be(l.el,0),Lt(this._fadeFrame),this._fadeFrame=_t(this._updateOpacity,this)):(l.active=!0,this._pruneTiles()),o||(ut(l.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:l.el,coords:i})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),U||!this._map._fadeAnimated?_t(this._pruneTiles,this):setTimeout(u(this._pruneTiles,this),250)))},_getTilePos:function(i){return i.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(i){var o=new H(this._wrapX?m(i.x,this._wrapX):i.x,this._wrapY?m(i.y,this._wrapY):i.y);return o.z=i.z,o},_pxBoundsToTileRange:function(i){var o=this.getTileSize();return new yt(i.min.unscaleBy(o).floor(),i.max.unscaleBy(o).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var i in this._tiles)if(!this._tiles[i].loaded)return!1;return!0}});function Ov(i){return new Rr(i)}var Ui=Rr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(i,o){this._url=i,o=C(this,o),o.detectRetina&&In&&o.maxZoom>0&&(o.tileSize=Math.floor(o.tileSize/2),o.zoomReverse?(o.zoomOffset--,o.minZoom++):(o.zoomOffset++,o.maxZoom--),o.minZoom=Math.max(0,o.minZoom)),typeof o.subdomains=="string"&&(o.subdomains=o.subdomains.split("")),k||this.on("tileunload",this._onTileRemove)},setUrl:function(i,o){return this._url===i&&o===void 0&&(o=!0),this._url=i,o||this.redraw(),this},createTile:function(i,o){var l=document.createElement("img");return dt(l,"load",u(this._tileOnLoad,this,o,l)),dt(l,"error",u(this._tileOnError,this,o,l)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),l.alt="",l.setAttribute("role","presentation"),l.src=this.getTileUrl(i),l},getTileUrl:function(i){var o={r:In?"@2x":"",s:this._getSubdomain(i),x:i.x,y:i.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var l=this._globalTileRange.max.y-i.y;this.options.tms&&(o.y=l),o["-y"]=l}return Y(this._url,s(o,this.options))},_tileOnLoad:function(i,o){U?setTimeout(u(i,this,null,o),0):i(null,o)},_tileOnError:function(i,o,l){var c=this.options.errorTileUrl;c&&o.getAttribute("src")!==c&&(o.src=c),i(l,o)},_onTileRemove:function(i){i.tile.onload=null},_getZoomForUrl:function(){var i=this._tileZoom,o=this.options.maxZoom,l=this.options.zoomReverse,c=this.options.zoomOffset;return l&&(i=o-i),i+c},_getSubdomain:function(i){var o=Math.abs(i.x+i.y)%this.options.subdomains.length;return this.options.subdomains[o]},_abortLoading:function(){var i,o;for(i in this._tiles)this._tiles[i].coords.z!==this._tileZoom&&(o=this._tiles[i].el,o.onload=_,o.onerror=_,o.complete||(o.src=At,qt(o),delete this._tiles[i]))},_removeTile:function(i){var o=this._tiles[i];if(!!o)return X||o.el.setAttribute("src",At),Rr.prototype._removeTile.call(this,i)},_tileReady:function(i,o,l){if(!(!this._map||l&&l.getAttribute("src")===At))return Rr.prototype._tileReady.call(this,i,o,l)}});function Kh(i,o){return new Ui(i,o)}var jh=Ui.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(i,o){this._url=i;var l=s({},this.defaultWmsParams);for(var c in o)c in this.options||(l[c]=o[c]);o=C(this,o);var d=o.detectRetina&&In?2:1,g=this.getTileSize();l.width=g.x*d,l.height=g.y*d,this.wmsParams=l},onAdd:function(i){this._crs=this.options.crs||i.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var o=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[o]=this._crs.code,Ui.prototype.onAdd.call(this,i)},getTileUrl:function(i){var o=this._tileCoordsToNwSe(i),l=this._crs,c=jt(l.project(o[0]),l.project(o[1])),d=c.min,g=c.max,w=(this._wmsVersion>=1.3&&this._crs===Uh?[d.y,d.x,g.y,g.x]:[d.x,d.y,g.x,g.y]).join(","),T=Ui.prototype.getTileUrl.call(this,i);return T+R(this.wmsParams,T,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+w},setParams:function(i,o){return s(this.wmsParams,i),o||this.redraw(),this}});function Dv(i,o){return new jh(i,o)}Ui.WMS=jh,Kh.wms=Dv;var en=Ze.extend({options:{padding:.1,tolerance:0},initialize:function(i){C(this,i),f(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&ut(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var i={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(i.zoomanim=this._onAnimZoom),i},_onAnimZoom:function(i){this._updateTransform(i.center,i.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(i,o){var l=this._map.getZoomScale(o,this._zoom),c=Nn(this._container),d=this._map.getSize().multiplyBy(.5+this.options.padding),g=this._map.project(this._center,o),w=this._map.project(i,o),T=w.subtract(g),P=d.multiplyBy(-l).add(c).add(d).subtract(T);Ut?Yn(this._container,P,l):Qt(this._container,P)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var i in this._layers)this._layers[i]._reset()},_onZoomEnd:function(){for(var i in this._layers)this._layers[i]._project()},_updatePaths:function(){for(var i in this._layers)this._layers[i]._update()},_update:function(){var i=this.options.padding,o=this._map.getSize(),l=this._map.containerPointToLayerPoint(o.multiplyBy(-i)).round();this._bounds=new yt(l,l.add(o.multiplyBy(1+i*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Gh=en.extend({getEvents:function(){var i=en.prototype.getEvents.call(this);return i.viewprereset=this._onViewPreReset,i},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){en.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var i=this._container=document.createElement("canvas");dt(i,"mousemove",this._onMouseMove,this),dt(i,"click dblclick mousedown mouseup contextmenu",this._onClick,this),dt(i,"mouseout",this._handleMouseOut,this),this._ctx=i.getContext("2d")},_destroyContainer:function(){Lt(this._redrawRequest),delete this._ctx,qt(this._container),Xt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var i;this._redrawBounds=null;for(var o in this._layers)i=this._layers[o],i._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){en.prototype._update.call(this);var i=this._bounds,o=this._container,l=i.getSize(),c=In?2:1;Qt(o,i.min),o.width=c*l.x,o.height=c*l.y,o.style.width=l.x+"px",o.style.height=l.y+"px",In&&this._ctx.scale(2,2),this._ctx.translate(-i.min.x,-i.min.y),this.fire("update")}},_reset:function(){en.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(i){this._updateDashArray(i),this._layers[f(i)]=i;var o=i._order={layer:i,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=o),this._drawLast=o,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(i){this._requestRedraw(i)},_removePath:function(i){var o=i._order,l=o.next,c=o.prev;l?l.prev=c:this._drawLast=c,c?c.next=l:this._drawFirst=l,delete i._order,delete this._layers[f(i)],this._requestRedraw(i)},_updatePath:function(i){this._extendRedrawBounds(i),i._project(),i._update(),this._requestRedraw(i)},_updateStyle:function(i){this._updateDashArray(i),this._requestRedraw(i)},_updateDashArray:function(i){if(typeof i.options.dashArray=="string"){var o=i.options.dashArray.split(/[, ]+/),l=[],c,d;for(d=0;d<o.length;d++){if(c=Number(o[d]),isNaN(c))return;l.push(c)}i.options._dashArray=l}else i.options._dashArray=i.options.dashArray},_requestRedraw:function(i){!this._map||(this._extendRedrawBounds(i),this._redrawRequest=this._redrawRequest||_t(this._redraw,this))},_extendRedrawBounds:function(i){if(i._pxBounds){var o=(i.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new yt,this._redrawBounds.extend(i._pxBounds.min.subtract([o,o])),this._redrawBounds.extend(i._pxBounds.max.add([o,o]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var i=this._redrawBounds;if(i){var o=i.getSize();this._ctx.clearRect(i.min.x,i.min.y,o.x,o.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var i,o=this._redrawBounds;if(this._ctx.save(),o){var l=o.getSize();this._ctx.beginPath(),this._ctx.rect(o.min.x,o.min.y,l.x,l.y),this._ctx.clip()}this._drawing=!0;for(var c=this._drawFirst;c;c=c.next)i=c.layer,(!o||i._pxBounds&&i._pxBounds.intersects(o))&&i._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(i,o){if(!!this._drawing){var l,c,d,g,w=i._parts,T=w.length,P=this._ctx;if(!!T){for(P.beginPath(),l=0;l<T;l++){for(c=0,d=w[l].length;c<d;c++)g=w[l][c],P[c?"lineTo":"moveTo"](g.x,g.y);o&&P.closePath()}this._fillStroke(P,i)}}},_updateCircle:function(i){if(!(!this._drawing||i._empty())){var o=i._point,l=this._ctx,c=Math.max(Math.round(i._radius),1),d=(Math.max(Math.round(i._radiusY),1)||c)/c;d!==1&&(l.save(),l.scale(1,d)),l.beginPath(),l.arc(o.x,o.y/d,c,0,Math.PI*2,!1),d!==1&&l.restore(),this._fillStroke(l,i)}},_fillStroke:function(i,o){var l=o.options;l.fill&&(i.globalAlpha=l.fillOpacity,i.fillStyle=l.fillColor||l.color,i.fill(l.fillRule||"evenodd")),l.stroke&&l.weight!==0&&(i.setLineDash&&i.setLineDash(o.options&&o.options._dashArray||[]),i.globalAlpha=l.opacity,i.lineWidth=l.weight,i.strokeStyle=l.color,i.lineCap=l.lineCap,i.lineJoin=l.lineJoin,i.stroke())},_onClick:function(i){for(var o=this._map.mouseEventToLayerPoint(i),l,c,d=this._drawFirst;d;d=d.next)l=d.layer,l.options.interactive&&l._containsPoint(o)&&(!(i.type==="click"||i.type!=="preclick")||!this._map._draggableMoved(l))&&(c=l);c&&(fl(i),this._fireEvent([c],i))},_onMouseMove:function(i){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var o=this._map.mouseEventToLayerPoint(i);this._handleMouseHover(i,o)}},_handleMouseOut:function(i){var o=this._hoveredLayer;o&&(Yt(this._container,"leaflet-interactive"),this._fireEvent([o],i,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(i,o){if(!this._mouseHoverThrottled){for(var l,c,d=this._drawFirst;d;d=d.next)l=d.layer,l.options.interactive&&l._containsPoint(o)&&(c=l);c!==this._hoveredLayer&&(this._handleMouseOut(i),c&&(ut(this._container,"leaflet-interactive"),this._fireEvent([c],i,"mouseover"),this._hoveredLayer=c)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],i),this._mouseHoverThrottled=!0,setTimeout(u(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(i,o,l){this._map._fireDOMEvent(o,l||o.type,i)},_bringToFront:function(i){var o=i._order;if(!!o){var l=o.next,c=o.prev;if(l)l.prev=c;else return;c?c.next=l:l&&(this._drawFirst=l),o.prev=this._drawLast,this._drawLast.next=o,o.next=null,this._drawLast=o,this._requestRedraw(i)}},_bringToBack:function(i){var o=i._order;if(!!o){var l=o.next,c=o.prev;if(c)c.next=l;else return;l?l.prev=c:c&&(this._drawLast=c),o.prev=null,o.next=this._drawFirst,this._drawFirst.prev=o,this._drawFirst=o,this._requestRedraw(i)}}});function Yh(i){return wh?new Gh(i):null}var Or=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(i){return document.createElement("<lvml:"+i+' class="lvml">')}}catch{return function(o){return document.createElement("<"+o+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),zv={_initContainer:function(){this._container=Tt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(en.prototype._update.call(this),this.fire("update"))},_initPath:function(i){var o=i._container=Or("shape");ut(o,"leaflet-vml-shape "+(this.options.className||"")),o.coordsize="1 1",i._path=Or("path"),o.appendChild(i._path),this._updateStyle(i),this._layers[f(i)]=i},_addPath:function(i){var o=i._container;this._container.appendChild(o),i.options.interactive&&i.addInteractiveTarget(o)},_removePath:function(i){var o=i._container;qt(o),i.removeInteractiveTarget(o),delete this._layers[f(i)]},_updateStyle:function(i){var o=i._stroke,l=i._fill,c=i.options,d=i._container;d.stroked=!!c.stroke,d.filled=!!c.fill,c.stroke?(o||(o=i._stroke=Or("stroke")),d.appendChild(o),o.weight=c.weight+"px",o.color=c.color,o.opacity=c.opacity,c.dashArray?o.dashStyle=Q(c.dashArray)?c.dashArray.join(" "):c.dashArray.replace(/( *, *)/g," "):o.dashStyle="",o.endcap=c.lineCap.replace("butt","flat"),o.joinstyle=c.lineJoin):o&&(d.removeChild(o),i._stroke=null),c.fill?(l||(l=i._fill=Or("fill")),d.appendChild(l),l.color=c.fillColor||c.color,l.opacity=c.fillOpacity):l&&(d.removeChild(l),i._fill=null)},_updateCircle:function(i){var o=i._point.round(),l=Math.round(i._radius),c=Math.round(i._radiusY||l);this._setPath(i,i._empty()?"M0 0":"AL "+o.x+","+o.y+" "+l+","+c+" 0,"+65535*360)},_setPath:function(i,o){i._path.v=o},_bringToFront:function(i){Ni(i._container)},_bringToBack:function(i){Mi(i._container)}},io=Us?Or:b,Dr=en.extend({getEvents:function(){var i=en.prototype.getEvents.call(this);return i.zoomstart=this._onZoomStart,i},_initContainer:function(){this._container=io("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=io("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){qt(this._container),Xt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){en.prototype._update.call(this);var i=this._bounds,o=i.getSize(),l=this._container;(!this._svgSize||!this._svgSize.equals(o))&&(this._svgSize=o,l.setAttribute("width",o.x),l.setAttribute("height",o.y)),Qt(l,i.min),l.setAttribute("viewBox",[i.min.x,i.min.y,o.x,o.y].join(" ")),this.fire("update")}},_initPath:function(i){var o=i._path=io("path");i.options.className&&ut(o,i.options.className),i.options.interactive&&ut(o,"leaflet-interactive"),this._updateStyle(i),this._layers[f(i)]=i},_addPath:function(i){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(i._path),i.addInteractiveTarget(i._path)},_removePath:function(i){qt(i._path),i.removeInteractiveTarget(i._path),delete this._layers[f(i)]},_updatePath:function(i){i._project(),i._update()},_updateStyle:function(i){var o=i._path,l=i.options;!o||(l.stroke?(o.setAttribute("stroke",l.color),o.setAttribute("stroke-opacity",l.opacity),o.setAttribute("stroke-width",l.weight),o.setAttribute("stroke-linecap",l.lineCap),o.setAttribute("stroke-linejoin",l.lineJoin),l.dashArray?o.setAttribute("stroke-dasharray",l.dashArray):o.removeAttribute("stroke-dasharray"),l.dashOffset?o.setAttribute("stroke-dashoffset",l.dashOffset):o.removeAttribute("stroke-dashoffset")):o.setAttribute("stroke","none"),l.fill?(o.setAttribute("fill",l.fillColor||l.color),o.setAttribute("fill-opacity",l.fillOpacity),o.setAttribute("fill-rule",l.fillRule||"evenodd")):o.setAttribute("fill","none"))},_updatePoly:function(i,o){this._setPath(i,M(i._parts,o))},_updateCircle:function(i){var o=i._point,l=Math.max(Math.round(i._radius),1),c=Math.max(Math.round(i._radiusY),1)||l,d="a"+l+","+c+" 0 1,0 ",g=i._empty()?"M0 0":"M"+(o.x-l)+","+o.y+d+l*2+",0 "+d+-l*2+",0 ";this._setPath(i,g)},_setPath:function(i,o){i._path.setAttribute("d",o)},_bringToFront:function(i){Ni(i._path)},_bringToBack:function(i){Mi(i._path)}});Us&&Dr.include(zv);function Xh(i){return Fs||Us?new Dr(i):null}wt.include({getRenderer:function(i){var o=i.options.renderer||this._getPaneRenderer(i.options.pane)||this.options.renderer||this._renderer;return o||(o=this._renderer=this._createRenderer()),this.hasLayer(o)||this.addLayer(o),o},_getPaneRenderer:function(i){if(i==="overlayPane"||i===void 0)return!1;var o=this._paneRenderers[i];return o===void 0&&(o=this._createRenderer({pane:i}),this._paneRenderers[i]=o),o},_createRenderer:function(i){return this.options.preferCanvas&&Yh(i)||Xh(i)}});var Qh=Di.extend({initialize:function(i,o){Di.prototype.initialize.call(this,this._boundsToLatLngs(i),o)},setBounds:function(i){return this.setLatLngs(this._boundsToLatLngs(i))},_boundsToLatLngs:function(i){return i=Gt(i),[i.getSouthWest(),i.getNorthWest(),i.getNorthEast(),i.getSouthEast()]}});function Bv(i,o){return new Qh(i,o)}Dr.create=io,Dr.pointsToPath=M,gn.geometryToLayer=xl,gn.coordsToLatLng=El,gn.coordsToLatLngs=Js,gn.latLngToCoords=Tl,gn.latLngsToCoords=to,gn.getFeature=zi,gn.asFeature=eo,wt.mergeOptions({boxZoom:!0});var Jh=tn.extend({initialize:function(i){this._map=i,this._container=i._container,this._pane=i._panes.overlayPane,this._resetStateTimeout=0,i.on("unload",this._destroy,this)},addHooks:function(){dt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Xt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){qt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(i){if(!i.shiftKey||i.which!==1&&i.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ar(),il(),this._startPoint=this._map.mouseEventToContainerPoint(i),dt(document,{contextmenu:dn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(i){this._moved||(this._moved=!0,this._box=Tt("div","leaflet-zoom-box",this._container),ut(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(i);var o=new yt(this._point,this._startPoint),l=o.getSize();Qt(this._box,o.min),this._box.style.width=l.x+"px",this._box.style.height=l.y+"px"},_finish:function(){this._moved&&(qt(this._box),Yt(this._container,"leaflet-crosshair")),Cr(),rl(),Xt(document,{contextmenu:dn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(i){if(!(i.which!==1&&i.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(u(this._resetState,this),0);var o=new zt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(o).fire("boxzoomend",{boxZoomBounds:o})}},_onKeyDown:function(i){i.keyCode===27&&this._finish()}});wt.addInitHook("addHandler","boxZoom",Jh),wt.mergeOptions({doubleClickZoom:!0});var tf=tn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(i){var o=this._map,l=o.getZoom(),c=o.options.zoomDelta,d=i.originalEvent.shiftKey?l-c:l+c;o.options.doubleClickZoom==="center"?o.setZoom(d):o.setZoomAround(i.containerPoint,d)}});wt.addInitHook("addHandler","doubleClickZoom",tf),wt.mergeOptions({dragging:!0,inertia:!G,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var ef=tn.extend({addHooks:function(){if(!this._draggable){var i=this._map;this._draggable=new Qn(i._mapPane,i._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),i.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),i.on("zoomend",this._onZoomEnd,this),i.whenReady(this._onZoomEnd,this))}ut(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Yt(this._map._container,"leaflet-grab"),Yt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var i=this._map;if(i._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var o=Gt(this._map.options.maxBounds);this._offsetLimit=jt(this._map.latLngToContainerPoint(o.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(o.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;i.fire("movestart").fire("dragstart"),i.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(i){if(this._map.options.inertia){var o=this._lastTime=+new Date,l=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(l),this._times.push(o),this._prunePositions(o)}this._map.fire("move",i).fire("drag",i)},_prunePositions:function(i){for(;this._positions.length>1&&i-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var i=this._map.getSize().divideBy(2),o=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=o.subtract(i).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(i,o){return i-(i-o)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var i=this._draggable._newPos.subtract(this._draggable._startPos),o=this._offsetLimit;i.x<o.min.x&&(i.x=this._viscousLimit(i.x,o.min.x)),i.y<o.min.y&&(i.y=this._viscousLimit(i.y,o.min.y)),i.x>o.max.x&&(i.x=this._viscousLimit(i.x,o.max.x)),i.y>o.max.y&&(i.y=this._viscousLimit(i.y,o.max.y)),this._draggable._newPos=this._draggable._startPos.add(i)}},_onPreDragWrap:function(){var i=this._worldWidth,o=Math.round(i/2),l=this._initialWorldOffset,c=this._draggable._newPos.x,d=(c-o+l)%i+o-l,g=(c+o+l)%i-o-l,w=Math.abs(d+l)<Math.abs(g+l)?d:g;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=w},_onDragEnd:function(i){var o=this._map,l=o.options,c=!l.inertia||this._times.length<2;if(o.fire("dragend",i),c)o.fire("moveend");else{this._prunePositions(+new Date);var d=this._lastPos.subtract(this._positions[0]),g=(this._lastTime-this._times[0])/1e3,w=l.easeLinearity,T=d.multiplyBy(w/g),P=T.distanceTo([0,0]),I=Math.min(l.inertiaMaxSpeed,P),Z=T.multiplyBy(I/P),J=I/(l.inertiaDeceleration*w),bt=Z.multiplyBy(-J/2).round();!bt.x&&!bt.y?o.fire("moveend"):(bt=o._limitOffset(bt,o.options.maxBounds),_t(function(){o.panBy(bt,{duration:J,easeLinearity:w,noMoveStart:!0,animate:!0})}))}}});wt.addInitHook("addHandler","dragging",ef),wt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var nf=tn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(i){this._map=i,this._setPanDelta(i.options.keyboardPanDelta),this._setZoomDelta(i.options.zoomDelta)},addHooks:function(){var i=this._map._container;i.tabIndex<=0&&(i.tabIndex="0"),dt(i,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Xt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var i=document.body,o=document.documentElement,l=i.scrollTop||o.scrollTop,c=i.scrollLeft||o.scrollLeft;this._map._container.focus(),window.scrollTo(c,l)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(i){var o=this._panKeys={},l=this.keyCodes,c,d;for(c=0,d=l.left.length;c<d;c++)o[l.left[c]]=[-1*i,0];for(c=0,d=l.right.length;c<d;c++)o[l.right[c]]=[i,0];for(c=0,d=l.down.length;c<d;c++)o[l.down[c]]=[0,i];for(c=0,d=l.up.length;c<d;c++)o[l.up[c]]=[0,-1*i]},_setZoomDelta:function(i){var o=this._zoomKeys={},l=this.keyCodes,c,d;for(c=0,d=l.zoomIn.length;c<d;c++)o[l.zoomIn[c]]=i;for(c=0,d=l.zoomOut.length;c<d;c++)o[l.zoomOut[c]]=-i},_addHooks:function(){dt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Xt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(i){if(!(i.altKey||i.ctrlKey||i.metaKey)){var o=i.keyCode,l=this._map,c;if(o in this._panKeys)(!l._panAnim||!l._panAnim._inProgress)&&(c=this._panKeys[o],i.shiftKey&&(c=ct(c).multiplyBy(3)),l.panBy(c),l.options.maxBounds&&l.panInsideBounds(l.options.maxBounds));else if(o in this._zoomKeys)l.setZoom(l.getZoom()+(i.shiftKey?3:1)*this._zoomKeys[o]);else if(o===27&&l._popup&&l._popup.options.closeOnEscapeKey)l.closePopup();else return;dn(i)}}});wt.addInitHook("addHandler","keyboard",nf),wt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var rf=tn.extend({addHooks:function(){dt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Xt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(i){var o=Ch(i),l=this._map.options.wheelDebounceTime;this._delta+=o,this._lastMousePos=this._map.mouseEventToContainerPoint(i),this._startTime||(this._startTime=+new Date);var c=Math.max(l-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(u(this._performZoom,this),c),dn(i)},_performZoom:function(){var i=this._map,o=i.getZoom(),l=this._map.options.zoomSnap||0;i._stop();var c=this._delta/(this._map.options.wheelPxPerZoomLevel*4),d=4*Math.log(2/(1+Math.exp(-Math.abs(c))))/Math.LN2,g=l?Math.ceil(d/l)*l:d,w=i._limitZoom(o+(this._delta>0?g:-g))-o;this._delta=0,this._startTime=null,!!w&&(i.options.scrollWheelZoom==="center"?i.setZoom(o+w):i.setZoomAround(this._lastMousePos,o+w))}});wt.addInitHook("addHandler","scrollWheelZoom",rf),wt.mergeOptions({tap:!0,tapTolerance:15});var sf=tn.extend({addHooks:function(){dt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Xt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(i){if(!!i.touches){if(Fe(i),this._fireClick=!0,i.touches.length>1){this._fireClick=!1,clearTimeout(this._holdTimeout);return}var o=i.touches[0],l=o.target;this._startPos=this._newPos=new H(o.clientX,o.clientY),l.tagName&&l.tagName.toLowerCase()==="a"&&ut(l,"leaflet-active"),this._holdTimeout=setTimeout(u(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",o))},this),1e3),this._simulateEvent("mousedown",o),dt(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(i){if(clearTimeout(this._holdTimeout),Xt(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&i&&i.changedTouches){var o=i.changedTouches[0],l=o.target;l&&l.tagName&&l.tagName.toLowerCase()==="a"&&Yt(l,"leaflet-active"),this._simulateEvent("mouseup",o),this._isTapValid()&&this._simulateEvent("click",o)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(i){var o=i.touches[0];this._newPos=new H(o.clientX,o.clientY),this._simulateEvent("mousemove",o)},_simulateEvent:function(i,o){var l=document.createEvent("MouseEvents");l._simulated=!0,o.target._simulatedClick=!0,l.initMouseEvent(i,!0,!0,window,1,o.screenX,o.screenY,o.clientX,o.clientY,!1,!1,!1,!1,0,null),o.target.dispatchEvent(l)}});Qe&&(!Xe||Et)&&wt.addInitHook("addHandler","tap",sf),wt.mergeOptions({touchZoom:Qe&&!G,bounceAtZoomLimits:!0});var of=tn.extend({addHooks:function(){ut(this._map._container,"leaflet-touch-zoom"),dt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Yt(this._map._container,"leaflet-touch-zoom"),Xt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(i){var o=this._map;if(!(!i.touches||i.touches.length!==2||o._animatingZoom||this._zooming)){var l=o.mouseEventToContainerPoint(i.touches[0]),c=o.mouseEventToContainerPoint(i.touches[1]);this._centerPoint=o.getSize()._divideBy(2),this._startLatLng=o.containerPointToLatLng(this._centerPoint),o.options.touchZoom!=="center"&&(this._pinchStartLatLng=o.containerPointToLatLng(l.add(c)._divideBy(2))),this._startDist=l.distanceTo(c),this._startZoom=o.getZoom(),this._moved=!1,this._zooming=!0,o._stop(),dt(document,"touchmove",this._onTouchMove,this),dt(document,"touchend",this._onTouchEnd,this),Fe(i)}},_onTouchMove:function(i){if(!(!i.touches||i.touches.length!==2||!this._zooming)){var o=this._map,l=o.mouseEventToContainerPoint(i.touches[0]),c=o.mouseEventToContainerPoint(i.touches[1]),d=l.distanceTo(c)/this._startDist;if(this._zoom=o.getScaleZoom(d,this._startZoom),!o.options.bounceAtZoomLimits&&(this._zoom<o.getMinZoom()&&d<1||this._zoom>o.getMaxZoom()&&d>1)&&(this._zoom=o._limitZoom(this._zoom)),o.options.touchZoom==="center"){if(this._center=this._startLatLng,d===1)return}else{var g=l._add(c)._divideBy(2)._subtract(this._centerPoint);if(d===1&&g.x===0&&g.y===0)return;this._center=o.unproject(o.project(this._pinchStartLatLng,this._zoom).subtract(g),this._zoom)}this._moved||(o._moveStart(!0,!1),this._moved=!0),Lt(this._animRequest);var w=u(o._move,o,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=_t(w,this,!0),Fe(i)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Lt(this._animRequest),Xt(document,"touchmove",this._onTouchMove,this),Xt(document,"touchend",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});wt.addInitHook("addHandler","touchZoom",of),wt.BoxZoom=Jh,wt.DoubleClickZoom=tf,wt.Drag=ef,wt.Keyboard=nf,wt.ScrollWheelZoom=rf,wt.Tap=sf,wt.TouchZoom=of,n.version=r,n.Control=$e,n.control=Nr,n.Browser=q_,n.Evented=xt,n.Mixin=cv,n.Util=Ye,n.Class=ge,n.Handler=tn,n.extend=s,n.bind=u,n.stamp=f,n.setOptions=C,n.DomEvent=rv,n.DomUtil=nv,n.PosAnimation=Lh,n.Draggable=Qn,n.LineUtil=mv,n.PolyUtil=gv,n.Point=H,n.point=ct,n.Bounds=yt,n.bounds=jt,n.Transformation=lt,n.transformation=it,n.Projection=_v,n.LatLng=S,n.latLng=F,n.LatLngBounds=zt,n.latLngBounds=Gt,n.CRS=D,n.GeoJSON=gn,n.geoJSON=$h,n.geoJson=Cv,n.Layer=Ze,n.LayerGroup=ki,n.layerGroup=wv,n.FeatureGroup=Ri,n.featureGroup=xv,n.ImageOverlay=no,n.imageOverlay=Lv,n.VideoOverlay=Zh,n.videoOverlay=Iv,n.SVGOverlay=qh,n.svgOverlay=Nv,n.DivOverlay=_n,n.Popup=Bi,n.popup=Mv,n.Tooltip=Fi,n.tooltip=kv,n.Icon=Oi,n.icon=Ev,n.DivIcon=Wh,n.divIcon=Rv,n.Marker=Xs,n.marker=Tv,n.TileLayer=Ui,n.tileLayer=Kh,n.GridLayer=Rr,n.gridLayer=Ov,n.SVG=Dr,n.svg=Xh,n.Renderer=en,n.Canvas=Gh,n.canvas=Yh,n.Path=Mn,n.CircleMarker=Qs,n.circleMarker=bv,n.Circle=wl,n.circle=Pv,n.Polyline=mn,n.polyline=Sv,n.Polygon=Di,n.polygon=Av,n.Rectangle=Qh,n.rectangle=Bv,n.Map=wt,n.map=sv;var Fv=window.L;n.noConflict=function(){return window.L=Fv,this},window.L=n})})(ih,ih.exports);var RC=ih.exports,OC="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",e1={value:()=>{}};function e_(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new ka(n)}function ka(t){this._=t}function n1(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",s=n.indexOf(".");if(s>=0&&(r=n.slice(s+1),n=n.slice(0,s)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}ka.prototype=e_.prototype={constructor:ka,on:function(t,e){var n=this._,r=n1(t+"",n),s,a=-1,u=r.length;if(arguments.length<2){for(;++a<u;)if((s=(t=r[a]).type)&&(s=i1(n[s],t.name)))return s;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<u;)if(s=(t=r[a]).type)n[s]=n_(n[s],t.name,e);else if(e==null)for(s in n)n[s]=n_(n[s],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new ka(t)},call:function(t,e){if((s=arguments.length-2)>0)for(var n=new Array(s),r=0,s,a;r<s;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,s=a.length;r<s;++r)a[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],s=0,a=r.length;s<a;++s)r[s].value.apply(e,n)}};function i1(t,e){for(var n=0,r=t.length,s;n<r;++n)if((s=t[n]).name===e)return s.value}function n_(t,e,n){for(var r=0,s=t.length;r<s;++r)if(t[r].name===e){t[r]=e1,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var rh="http://www.w3.org/1999/xhtml",i_={svg:"http://www.w3.org/2000/svg",xhtml:rh,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ra(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),i_.hasOwnProperty(e)?{space:i_[e],local:t}:t}function r1(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===rh&&e.documentElement.namespaceURI===rh?e.createElement(t):e.createElementNS(n,t)}}function s1(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function r_(t){var e=Ra(t);return(e.local?s1:r1)(e)}function o1(){}function sh(t){return t==null?o1:function(){return this.querySelector(t)}}function a1(t){typeof t!="function"&&(t=sh(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var a=e[s],u=a.length,h=r[s]=new Array(u),f,p,m=0;m<u;++m)(f=a[m])&&(p=t.call(f,f.__data__,m,a))&&("__data__"in f&&(p.__data__=f.__data__),h[m]=p);return new ze(r,this._parents)}function l1(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function u1(){return[]}function s_(t){return t==null?u1:function(){return this.querySelectorAll(t)}}function c1(t){return function(){return l1(t.apply(this,arguments))}}function h1(t){typeof t=="function"?t=c1(t):t=s_(t);for(var e=this._groups,n=e.length,r=[],s=[],a=0;a<n;++a)for(var u=e[a],h=u.length,f,p=0;p<h;++p)(f=u[p])&&(r.push(t.call(f,f.__data__,p,u)),s.push(f));return new ze(r,s)}function o_(t){return function(){return this.matches(t)}}function a_(t){return function(e){return e.matches(t)}}var f1=Array.prototype.find;function d1(t){return function(){return f1.call(this.children,t)}}function p1(){return this.firstElementChild}function m1(t){return this.select(t==null?p1:d1(typeof t=="function"?t:a_(t)))}var g1=Array.prototype.filter;function _1(){return Array.from(this.children)}function v1(t){return function(){return g1.call(this.children,t)}}function y1(t){return this.selectAll(t==null?_1:v1(typeof t=="function"?t:a_(t)))}function w1(t){typeof t!="function"&&(t=o_(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var a=e[s],u=a.length,h=r[s]=[],f,p=0;p<u;++p)(f=a[p])&&t.call(f,f.__data__,p,a)&&h.push(f);return new ze(r,this._parents)}function l_(t){return new Array(t.length)}function x1(){return new ze(this._enter||this._groups.map(l_),this._parents)}function Oa(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Oa.prototype={constructor:Oa,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function E1(t){return function(){return t}}function T1(t,e,n,r,s,a){for(var u=0,h,f=e.length,p=a.length;u<p;++u)(h=e[u])?(h.__data__=a[u],r[u]=h):n[u]=new Oa(t,a[u]);for(;u<f;++u)(h=e[u])&&(s[u]=h)}function b1(t,e,n,r,s,a,u){var h,f,p=new Map,m=e.length,_=a.length,v=new Array(m),x;for(h=0;h<m;++h)(f=e[h])&&(v[h]=x=u.call(f,f.__data__,h,e)+"",p.has(x)?s[h]=f:p.set(x,f));for(h=0;h<_;++h)x=u.call(t,a[h],h,a)+"",(f=p.get(x))?(r[h]=f,f.__data__=a[h],p.delete(x)):n[h]=new Oa(t,a[h]);for(h=0;h<m;++h)(f=e[h])&&p.get(v[h])===f&&(s[h]=f)}function P1(t){return t.__data__}function S1(t,e){if(!arguments.length)return Array.from(this,P1);var n=e?b1:T1,r=this._parents,s=this._groups;typeof t!="function"&&(t=E1(t));for(var a=s.length,u=new Array(a),h=new Array(a),f=new Array(a),p=0;p<a;++p){var m=r[p],_=s[p],v=_.length,x=A1(t.call(m,m&&m.__data__,p,r)),A=x.length,C=h[p]=new Array(A),R=u[p]=new Array(A),V=f[p]=new Array(v);n(m,_,C,R,V,x,e);for(var Y=0,Q=0,ot,At;Y<A;++Y)if(ot=C[Y]){for(Y>=Q&&(Q=Y+1);!(At=R[Q])&&++Q<A;);ot._next=At||null}}return u=new ze(u,r),u._enter=h,u._exit=f,u}function A1(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function C1(){return new ze(this._exit||this._groups.map(l_),this._parents)}function L1(t,e,n){var r=this.enter(),s=this,a=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(s=e(s),s&&(s=s.selection())),n==null?a.remove():n(a),r&&s?r.merge(s).order():s}function I1(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,s=n.length,a=r.length,u=Math.min(s,a),h=new Array(s),f=0;f<u;++f)for(var p=n[f],m=r[f],_=p.length,v=h[f]=new Array(_),x,A=0;A<_;++A)(x=p[A]||m[A])&&(v[A]=x);for(;f<s;++f)h[f]=n[f];return new ze(h,this._parents)}function N1(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],s=r.length-1,a=r[s],u;--s>=0;)(u=r[s])&&(a&&u.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(u,a),a=u);return this}function M1(t){t||(t=k1);function e(_,v){return _&&v?t(_.__data__,v.__data__):!_-!v}for(var n=this._groups,r=n.length,s=new Array(r),a=0;a<r;++a){for(var u=n[a],h=u.length,f=s[a]=new Array(h),p,m=0;m<h;++m)(p=u[m])&&(f[m]=p);f.sort(e)}return new ze(s,this._parents).order()}function k1(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function R1(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function O1(){return Array.from(this)}function D1(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],s=0,a=r.length;s<a;++s){var u=r[s];if(u)return u}return null}function z1(){let t=0;for(const e of this)++t;return t}function B1(){return!this.node()}function F1(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var s=e[n],a=0,u=s.length,h;a<u;++a)(h=s[a])&&t.call(h,h.__data__,a,s);return this}function U1(t){return function(){this.removeAttribute(t)}}function V1(t){return function(){this.removeAttributeNS(t.space,t.local)}}function H1(t,e){return function(){this.setAttribute(t,e)}}function $1(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Z1(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function q1(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function W1(t,e){var n=Ra(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?V1:U1:typeof e=="function"?n.local?q1:Z1:n.local?$1:H1)(n,e))}function u_(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function K1(t){return function(){this.style.removeProperty(t)}}function j1(t,e,n){return function(){this.style.setProperty(t,e,n)}}function G1(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Y1(t,e,n){return arguments.length>1?this.each((e==null?K1:typeof e=="function"?G1:j1)(t,e,n==null?"":n)):wr(this.node(),t)}function wr(t,e){return t.style.getPropertyValue(e)||u_(t).getComputedStyle(t,null).getPropertyValue(e)}function X1(t){return function(){delete this[t]}}function Q1(t,e){return function(){this[t]=e}}function J1(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function tS(t,e){return arguments.length>1?this.each((e==null?X1:typeof e=="function"?J1:Q1)(t,e)):this.node()[t]}function c_(t){return t.trim().split(/^|\s+/)}function oh(t){return t.classList||new h_(t)}function h_(t){this._node=t,this._names=c_(t.getAttribute("class")||"")}h_.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function f_(t,e){for(var n=oh(t),r=-1,s=e.length;++r<s;)n.add(e[r])}function d_(t,e){for(var n=oh(t),r=-1,s=e.length;++r<s;)n.remove(e[r])}function eS(t){return function(){f_(this,t)}}function nS(t){return function(){d_(this,t)}}function iS(t,e){return function(){(e.apply(this,arguments)?f_:d_)(this,t)}}function rS(t,e){var n=c_(t+"");if(arguments.length<2){for(var r=oh(this.node()),s=-1,a=n.length;++s<a;)if(!r.contains(n[s]))return!1;return!0}return this.each((typeof e=="function"?iS:e?eS:nS)(n,e))}function sS(){this.textContent=""}function oS(t){return function(){this.textContent=t}}function aS(t){return function(){var e=t.apply(this,arguments);this.textContent=e==null?"":e}}function lS(t){return arguments.length?this.each(t==null?sS:(typeof t=="function"?aS:oS)(t)):this.node().textContent}function uS(){this.innerHTML=""}function cS(t){return function(){this.innerHTML=t}}function hS(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e==null?"":e}}function fS(t){return arguments.length?this.each(t==null?uS:(typeof t=="function"?hS:cS)(t)):this.node().innerHTML}function dS(){this.nextSibling&&this.parentNode.appendChild(this)}function pS(){return this.each(dS)}function mS(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function gS(){return this.each(mS)}function _S(t){var e=typeof t=="function"?t:r_(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function vS(){return null}function yS(t,e){var n=typeof t=="function"?t:r_(t),r=e==null?vS:typeof e=="function"?e:sh(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function wS(){var t=this.parentNode;t&&t.removeChild(this)}function xS(){return this.each(wS)}function ES(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function TS(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function bS(t){return this.select(t?TS:ES)}function PS(t){return arguments.length?this.property("__data__",t):this.node().__data__}function SS(t){return function(e){t.call(this,e,this.__data__)}}function AS(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function CS(t){return function(){var e=this.__on;if(!!e){for(var n=0,r=-1,s=e.length,a;n<s;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):e[++r]=a;++r?e.length=r:delete this.__on}}}function LS(t,e,n){return function(){var r=this.__on,s,a=SS(e);if(r){for(var u=0,h=r.length;u<h;++u)if((s=r[u]).type===t.type&&s.name===t.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=a,s.options=n),s.value=e;return}}this.addEventListener(t.type,a,n),s={type:t.type,name:t.name,value:e,listener:a,options:n},r?r.push(s):this.__on=[s]}}function IS(t,e,n){var r=AS(t+""),s,a=r.length,u;if(arguments.length<2){var h=this.node().__on;if(h){for(var f=0,p=h.length,m;f<p;++f)for(s=0,m=h[f];s<a;++s)if((u=r[s]).type===m.type&&u.name===m.name)return m.value}return}for(h=e?LS:CS,s=0;s<a;++s)this.each(h(r[s],e,n));return this}function p_(t,e,n){var r=u_(t),s=r.CustomEvent;typeof s=="function"?s=new s(e,n):(s=r.document.createEvent("Event"),n?(s.initEvent(e,n.bubbles,n.cancelable),s.detail=n.detail):s.initEvent(e,!1,!1)),t.dispatchEvent(s)}function NS(t,e){return function(){return p_(this,t,e)}}function MS(t,e){return function(){return p_(this,t,e.apply(this,arguments))}}function kS(t,e){return this.each((typeof e=="function"?MS:NS)(t,e))}function*RS(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],s=0,a=r.length,u;s<a;++s)(u=r[s])&&(yield u)}var m_=[null];function ze(t,e){this._groups=t,this._parents=e}function xr(){return new ze([[document.documentElement]],m_)}function OS(){return this}ze.prototype=xr.prototype={constructor:ze,select:a1,selectAll:h1,selectChild:m1,selectChildren:y1,filter:w1,data:S1,enter:x1,exit:C1,join:L1,merge:I1,selection:OS,order:N1,sort:M1,call:R1,nodes:O1,node:D1,size:z1,empty:B1,each:F1,attr:W1,style:Y1,property:tS,classed:rS,text:lS,html:fS,raise:pS,lower:gS,append:_S,insert:yS,remove:xS,clone:bS,datum:PS,on:IS,dispatch:kS,[Symbol.iterator]:RS};function DC(t){return typeof t=="string"?new ze([[document.querySelector(t)]],[document.documentElement]):new ze([[t]],m_)}function ah(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function g_(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Is(){}var Ns=.7,Da=1/Ns,Er="\\s*([+-]?\\d+)\\s*",Ms="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",un="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",DS=/^#([0-9a-f]{3,8})$/,zS=new RegExp(`^rgb\\(${Er},${Er},${Er}\\)$`),BS=new RegExp(`^rgb\\(${un},${un},${un}\\)$`),FS=new RegExp(`^rgba\\(${Er},${Er},${Er},${Ms}\\)$`),US=new RegExp(`^rgba\\(${un},${un},${un},${Ms}\\)$`),VS=new RegExp(`^hsl\\(${Ms},${un},${un}\\)$`),HS=new RegExp(`^hsla\\(${Ms},${un},${un},${Ms}\\)$`),__={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ah(Is,ks,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:v_,formatHex:v_,formatHex8:$S,formatHsl:ZS,formatRgb:y_,toString:y_});function v_(){return this.rgb().formatHex()}function $S(){return this.rgb().formatHex8()}function ZS(){return b_(this).formatHsl()}function y_(){return this.rgb().formatRgb()}function ks(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=DS.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?w_(e):n===3?new Me(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?za(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?za(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=zS.exec(t))?new Me(e[1],e[2],e[3],1):(e=BS.exec(t))?new Me(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=FS.exec(t))?za(e[1],e[2],e[3],e[4]):(e=US.exec(t))?za(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=VS.exec(t))?T_(e[1],e[2]/100,e[3]/100,1):(e=HS.exec(t))?T_(e[1],e[2]/100,e[3]/100,e[4]):__.hasOwnProperty(t)?w_(__[t]):t==="transparent"?new Me(NaN,NaN,NaN,0):null}function w_(t){return new Me(t>>16&255,t>>8&255,t&255,1)}function za(t,e,n,r){return r<=0&&(t=e=n=NaN),new Me(t,e,n,r)}function qS(t){return t instanceof Is||(t=ks(t)),t?(t=t.rgb(),new Me(t.r,t.g,t.b,t.opacity)):new Me}function lh(t,e,n,r){return arguments.length===1?qS(t):new Me(t,e,n,r==null?1:r)}function Me(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}ah(Me,lh,g_(Is,{brighter(t){return t=t==null?Da:Math.pow(Da,t),new Me(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Ns:Math.pow(Ns,t),new Me(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Me(bi(this.r),bi(this.g),bi(this.b),Ba(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:x_,formatHex:x_,formatHex8:WS,formatRgb:E_,toString:E_}));function x_(){return`#${Pi(this.r)}${Pi(this.g)}${Pi(this.b)}`}function WS(){return`#${Pi(this.r)}${Pi(this.g)}${Pi(this.b)}${Pi((isNaN(this.opacity)?1:this.opacity)*255)}`}function E_(){const t=Ba(this.opacity);return`${t===1?"rgb(":"rgba("}${bi(this.r)}, ${bi(this.g)}, ${bi(this.b)}${t===1?")":`, ${t})`}`}function Ba(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function bi(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Pi(t){return t=bi(t),(t<16?"0":"")+t.toString(16)}function T_(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new je(t,e,n,r)}function b_(t){if(t instanceof je)return new je(t.h,t.s,t.l,t.opacity);if(t instanceof Is||(t=ks(t)),!t)return new je;if(t instanceof je)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,s=Math.min(e,n,r),a=Math.max(e,n,r),u=NaN,h=a-s,f=(a+s)/2;return h?(e===a?u=(n-r)/h+(n<r)*6:n===a?u=(r-e)/h+2:u=(e-n)/h+4,h/=f<.5?a+s:2-a-s,u*=60):h=f>0&&f<1?0:u,new je(u,h,f,t.opacity)}function KS(t,e,n,r){return arguments.length===1?b_(t):new je(t,e,n,r==null?1:r)}function je(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}ah(je,KS,g_(Is,{brighter(t){return t=t==null?Da:Math.pow(Da,t),new je(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Ns:Math.pow(Ns,t),new je(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,s=2*n-r;return new Me(uh(t>=240?t-240:t+120,s,r),uh(t,s,r),uh(t<120?t+240:t-120,s,r),this.opacity)},clamp(){return new je(P_(this.h),Fa(this.s),Fa(this.l),Ba(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ba(this.opacity);return`${t===1?"hsl(":"hsla("}${P_(this.h)}, ${Fa(this.s)*100}%, ${Fa(this.l)*100}%${t===1?")":`, ${t})`}`}}));function P_(t){return t=(t||0)%360,t<0?t+360:t}function Fa(t){return Math.max(0,Math.min(1,t||0))}function uh(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}var S_=t=>()=>t;function jS(t,e){return function(n){return t+n*e}}function GS(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function YS(t){return(t=+t)==1?A_:function(e,n){return n-e?GS(e,n,t):S_(isNaN(e)?n:e)}}function A_(t,e){var n=e-t;return n?jS(t,n):S_(isNaN(t)?e:t)}var C_=function t(e){var n=YS(e);function r(s,a){var u=n((s=lh(s)).r,(a=lh(a)).r),h=n(s.g,a.g),f=n(s.b,a.b),p=A_(s.opacity,a.opacity);return function(m){return s.r=u(m),s.g=h(m),s.b=f(m),s.opacity=p(m),s+""}}return r.gamma=t,r}(1);function Gn(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var ch=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,hh=new RegExp(ch.source,"g");function XS(t){return function(){return t}}function QS(t){return function(e){return t(e)+""}}function JS(t,e){var n=ch.lastIndex=hh.lastIndex=0,r,s,a,u=-1,h=[],f=[];for(t=t+"",e=e+"";(r=ch.exec(t))&&(s=hh.exec(e));)(a=s.index)>n&&(a=e.slice(n,a),h[u]?h[u]+=a:h[++u]=a),(r=r[0])===(s=s[0])?h[u]?h[u]+=s:h[++u]=s:(h[++u]=null,f.push({i:u,x:Gn(r,s)})),n=hh.lastIndex;return n<e.length&&(a=e.slice(n),h[u]?h[u]+=a:h[++u]=a),h.length<2?f[0]?QS(f[0].x):XS(e):(e=f.length,function(p){for(var m=0,_;m<e;++m)h[(_=f[m]).i]=_.x(p);return h.join("")})}var L_=180/Math.PI,fh={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function I_(t,e,n,r,s,a){var u,h,f;return(u=Math.sqrt(t*t+e*e))&&(t/=u,e/=u),(f=t*n+e*r)&&(n-=t*f,r-=e*f),(h=Math.sqrt(n*n+r*r))&&(n/=h,r/=h,f/=h),t*r<e*n&&(t=-t,e=-e,f=-f,u=-u),{translateX:s,translateY:a,rotate:Math.atan2(e,t)*L_,skewX:Math.atan(f)*L_,scaleX:u,scaleY:h}}var Ua;function tA(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?fh:I_(e.a,e.b,e.c,e.d,e.e,e.f)}function eA(t){return t==null||(Ua||(Ua=document.createElementNS("http://www.w3.org/2000/svg","g")),Ua.setAttribute("transform",t),!(t=Ua.transform.baseVal.consolidate()))?fh:(t=t.matrix,I_(t.a,t.b,t.c,t.d,t.e,t.f))}function N_(t,e,n,r){function s(p){return p.length?p.pop()+" ":""}function a(p,m,_,v,x,A){if(p!==_||m!==v){var C=x.push("translate(",null,e,null,n);A.push({i:C-4,x:Gn(p,_)},{i:C-2,x:Gn(m,v)})}else(_||v)&&x.push("translate("+_+e+v+n)}function u(p,m,_,v){p!==m?(p-m>180?m+=360:m-p>180&&(p+=360),v.push({i:_.push(s(_)+"rotate(",null,r)-2,x:Gn(p,m)})):m&&_.push(s(_)+"rotate("+m+r)}function h(p,m,_,v){p!==m?v.push({i:_.push(s(_)+"skewX(",null,r)-2,x:Gn(p,m)}):m&&_.push(s(_)+"skewX("+m+r)}function f(p,m,_,v,x,A){if(p!==_||m!==v){var C=x.push(s(x)+"scale(",null,",",null,")");A.push({i:C-4,x:Gn(p,_)},{i:C-2,x:Gn(m,v)})}else(_!==1||v!==1)&&x.push(s(x)+"scale("+_+","+v+")")}return function(p,m){var _=[],v=[];return p=t(p),m=t(m),a(p.translateX,p.translateY,m.translateX,m.translateY,_,v),u(p.rotate,m.rotate,_,v),h(p.skewX,m.skewX,_,v),f(p.scaleX,p.scaleY,m.scaleX,m.scaleY,_,v),p=m=null,function(x){for(var A=-1,C=v.length,R;++A<C;)_[(R=v[A]).i]=R.x(x);return _.join("")}}}var nA=N_(tA,"px, ","px)","deg)"),iA=N_(eA,", ",")",")"),Tr=0,Rs=0,Os=0,M_=1e3,Va,Ds,Ha=0,Si=0,$a=0,zs=typeof performance=="object"&&performance.now?performance:Date,k_=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function dh(){return Si||(k_(rA),Si=zs.now()+$a)}function rA(){Si=0}function Za(){this._call=this._time=this._next=null}Za.prototype=R_.prototype={constructor:Za,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?dh():+n)+(e==null?0:+e),!this._next&&Ds!==this&&(Ds?Ds._next=this:Va=this,Ds=this),this._call=t,this._time=n,ph()},stop:function(){this._call&&(this._call=null,this._time=1/0,ph())}};function R_(t,e,n){var r=new Za;return r.restart(t,e,n),r}function sA(){dh(),++Tr;for(var t=Va,e;t;)(e=Si-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Tr}function O_(){Si=(Ha=zs.now())+$a,Tr=Rs=0;try{sA()}finally{Tr=0,aA(),Si=0}}function oA(){var t=zs.now(),e=t-Ha;e>M_&&($a-=e,Ha=t)}function aA(){for(var t,e=Va,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Va=n);Ds=t,ph(r)}function ph(t){if(!Tr){Rs&&(Rs=clearTimeout(Rs));var e=t-Si;e>24?(t<1/0&&(Rs=setTimeout(O_,t-zs.now()-$a)),Os&&(Os=clearInterval(Os))):(Os||(Ha=zs.now(),Os=setInterval(oA,M_)),Tr=1,k_(O_))}}function D_(t,e,n){var r=new Za;return e=e==null?0:+e,r.restart(s=>{r.stop(),t(s+e)},e,n),r}var lA=e_("start","end","cancel","interrupt"),uA=[],z_=0,B_=1,mh=2,qa=3,F_=4,gh=5,Wa=6;function Ka(t,e,n,r,s,a){var u=t.__transition;if(!u)t.__transition={};else if(n in u)return;cA(t,n,{name:e,index:r,group:s,on:lA,tween:uA,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:z_})}function _h(t,e){var n=Ge(t,e);if(n.state>z_)throw new Error("too late; already scheduled");return n}function cn(t,e){var n=Ge(t,e);if(n.state>qa)throw new Error("too late; already running");return n}function Ge(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function cA(t,e,n){var r=t.__transition,s;r[e]=n,n.timer=R_(a,0,n.time);function a(p){n.state=B_,n.timer.restart(u,n.delay,n.time),n.delay<=p&&u(p-n.delay)}function u(p){var m,_,v,x;if(n.state!==B_)return f();for(m in r)if(x=r[m],x.name===n.name){if(x.state===qa)return D_(u);x.state===F_?(x.state=Wa,x.timer.stop(),x.on.call("interrupt",t,t.__data__,x.index,x.group),delete r[m]):+m<e&&(x.state=Wa,x.timer.stop(),x.on.call("cancel",t,t.__data__,x.index,x.group),delete r[m])}if(D_(function(){n.state===qa&&(n.state=F_,n.timer.restart(h,n.delay,n.time),h(p))}),n.state=mh,n.on.call("start",t,t.__data__,n.index,n.group),n.state===mh){for(n.state=qa,s=new Array(v=n.tween.length),m=0,_=-1;m<v;++m)(x=n.tween[m].value.call(t,t.__data__,n.index,n.group))&&(s[++_]=x);s.length=_+1}}function h(p){for(var m=p<n.duration?n.ease.call(null,p/n.duration):(n.timer.restart(f),n.state=gh,1),_=-1,v=s.length;++_<v;)s[_].call(t,m);n.state===gh&&(n.on.call("end",t,t.__data__,n.index,n.group),f())}function f(){n.state=Wa,n.timer.stop(),delete r[e];for(var p in r)return;delete t.__transition}}function hA(t,e){var n=t.__transition,r,s,a=!0,u;if(!!n){e=e==null?null:e+"";for(u in n){if((r=n[u]).name!==e){a=!1;continue}s=r.state>mh&&r.state<gh,r.state=Wa,r.timer.stop(),r.on.call(s?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[u]}a&&delete t.__transition}}function fA(t){return this.each(function(){hA(this,t)})}function dA(t,e){var n,r;return function(){var s=cn(this,t),a=s.tween;if(a!==n){r=n=a;for(var u=0,h=r.length;u<h;++u)if(r[u].name===e){r=r.slice(),r.splice(u,1);break}}s.tween=r}}function pA(t,e,n){var r,s;if(typeof n!="function")throw new Error;return function(){var a=cn(this,t),u=a.tween;if(u!==r){s=(r=u).slice();for(var h={name:e,value:n},f=0,p=s.length;f<p;++f)if(s[f].name===e){s[f]=h;break}f===p&&s.push(h)}a.tween=s}}function mA(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=Ge(this.node(),n).tween,s=0,a=r.length,u;s<a;++s)if((u=r[s]).name===t)return u.value;return null}return this.each((e==null?dA:pA)(n,t,e))}function vh(t,e,n){var r=t._id;return t.each(function(){var s=cn(this,r);(s.value||(s.value={}))[e]=n.apply(this,arguments)}),function(s){return Ge(s,r).value[e]}}function U_(t,e){var n;return(typeof e=="number"?Gn:e instanceof ks?C_:(n=ks(e))?(e=n,C_):JS)(t,e)}function gA(t){return function(){this.removeAttribute(t)}}function _A(t){return function(){this.removeAttributeNS(t.space,t.local)}}function vA(t,e,n){var r,s=n+"",a;return function(){var u=this.getAttribute(t);return u===s?null:u===r?a:a=e(r=u,n)}}function yA(t,e,n){var r,s=n+"",a;return function(){var u=this.getAttributeNS(t.space,t.local);return u===s?null:u===r?a:a=e(r=u,n)}}function wA(t,e,n){var r,s,a;return function(){var u,h=n(this),f;return h==null?void this.removeAttribute(t):(u=this.getAttribute(t),f=h+"",u===f?null:u===r&&f===s?a:(s=f,a=e(r=u,h)))}}function xA(t,e,n){var r,s,a;return function(){var u,h=n(this),f;return h==null?void this.removeAttributeNS(t.space,t.local):(u=this.getAttributeNS(t.space,t.local),f=h+"",u===f?null:u===r&&f===s?a:(s=f,a=e(r=u,h)))}}function EA(t,e){var n=Ra(t),r=n==="transform"?iA:U_;return this.attrTween(t,typeof e=="function"?(n.local?xA:wA)(n,r,vh(this,"attr."+t,e)):e==null?(n.local?_A:gA)(n):(n.local?yA:vA)(n,r,e))}function TA(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function bA(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function PA(t,e){var n,r;function s(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&bA(t,a)),n}return s._value=e,s}function SA(t,e){var n,r;function s(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&TA(t,a)),n}return s._value=e,s}function AA(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Ra(t);return this.tween(n,(r.local?PA:SA)(r,e))}function CA(t,e){return function(){_h(this,t).delay=+e.apply(this,arguments)}}function LA(t,e){return e=+e,function(){_h(this,t).delay=e}}function IA(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?CA:LA)(e,t)):Ge(this.node(),e).delay}function NA(t,e){return function(){cn(this,t).duration=+e.apply(this,arguments)}}function MA(t,e){return e=+e,function(){cn(this,t).duration=e}}function kA(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?NA:MA)(e,t)):Ge(this.node(),e).duration}function RA(t,e){if(typeof e!="function")throw new Error;return function(){cn(this,t).ease=e}}function OA(t){var e=this._id;return arguments.length?this.each(RA(e,t)):Ge(this.node(),e).ease}function DA(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;cn(this,t).ease=n}}function zA(t){if(typeof t!="function")throw new Error;return this.each(DA(this._id,t))}function BA(t){typeof t!="function"&&(t=o_(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var a=e[s],u=a.length,h=r[s]=[],f,p=0;p<u;++p)(f=a[p])&&t.call(f,f.__data__,p,a)&&h.push(f);return new Sn(r,this._parents,this._name,this._id)}function FA(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,s=n.length,a=Math.min(r,s),u=new Array(r),h=0;h<a;++h)for(var f=e[h],p=n[h],m=f.length,_=u[h]=new Array(m),v,x=0;x<m;++x)(v=f[x]||p[x])&&(_[x]=v);for(;h<r;++h)u[h]=e[h];return new Sn(u,this._parents,this._name,this._id)}function UA(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function VA(t,e,n){var r,s,a=UA(e)?_h:cn;return function(){var u=a(this,t),h=u.on;h!==r&&(s=(r=h).copy()).on(e,n),u.on=s}}function HA(t,e){var n=this._id;return arguments.length<2?Ge(this.node(),n).on.on(t):this.each(VA(n,t,e))}function $A(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function ZA(){return this.on("end.remove",$A(this._id))}function qA(t){var e=this._name,n=this._id;typeof t!="function"&&(t=sh(t));for(var r=this._groups,s=r.length,a=new Array(s),u=0;u<s;++u)for(var h=r[u],f=h.length,p=a[u]=new Array(f),m,_,v=0;v<f;++v)(m=h[v])&&(_=t.call(m,m.__data__,v,h))&&("__data__"in m&&(_.__data__=m.__data__),p[v]=_,Ka(p[v],e,n,v,p,Ge(m,n)));return new Sn(a,this._parents,e,n)}function WA(t){var e=this._name,n=this._id;typeof t!="function"&&(t=s_(t));for(var r=this._groups,s=r.length,a=[],u=[],h=0;h<s;++h)for(var f=r[h],p=f.length,m,_=0;_<p;++_)if(m=f[_]){for(var v=t.call(m,m.__data__,_,f),x,A=Ge(m,n),C=0,R=v.length;C<R;++C)(x=v[C])&&Ka(x,e,n,C,v,A);a.push(v),u.push(m)}return new Sn(a,u,e,n)}var KA=xr.prototype.constructor;function jA(){return new KA(this._groups,this._parents)}function GA(t,e){var n,r,s;return function(){var a=wr(this,t),u=(this.style.removeProperty(t),wr(this,t));return a===u?null:a===n&&u===r?s:s=e(n=a,r=u)}}function V_(t){return function(){this.style.removeProperty(t)}}function YA(t,e,n){var r,s=n+"",a;return function(){var u=wr(this,t);return u===s?null:u===r?a:a=e(r=u,n)}}function XA(t,e,n){var r,s,a;return function(){var u=wr(this,t),h=n(this),f=h+"";return h==null&&(f=h=(this.style.removeProperty(t),wr(this,t))),u===f?null:u===r&&f===s?a:(s=f,a=e(r=u,h))}}function QA(t,e){var n,r,s,a="style."+e,u="end."+a,h;return function(){var f=cn(this,t),p=f.on,m=f.value[a]==null?h||(h=V_(e)):void 0;(p!==n||s!==m)&&(r=(n=p).copy()).on(u,s=m),f.on=r}}function JA(t,e,n){var r=(t+="")==="transform"?nA:U_;return e==null?this.styleTween(t,GA(t,r)).on("end.style."+t,V_(t)):typeof e=="function"?this.styleTween(t,XA(t,r,vh(this,"style."+t,e))).each(QA(this._id,t)):this.styleTween(t,YA(t,r,e),n).on("end.style."+t,null)}function tC(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function eC(t,e,n){var r,s;function a(){var u=e.apply(this,arguments);return u!==s&&(r=(s=u)&&tC(t,u,n)),r}return a._value=e,a}function nC(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,eC(t,e,n==null?"":n))}function iC(t){return function(){this.textContent=t}}function rC(t){return function(){var e=t(this);this.textContent=e==null?"":e}}function sC(t){return this.tween("text",typeof t=="function"?rC(vh(this,"text",t)):iC(t==null?"":t+""))}function oC(t){return function(e){this.textContent=t.call(this,e)}}function aC(t){var e,n;function r(){var s=t.apply(this,arguments);return s!==n&&(e=(n=s)&&oC(s)),e}return r._value=t,r}function lC(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,aC(t))}function uC(){for(var t=this._name,e=this._id,n=H_(),r=this._groups,s=r.length,a=0;a<s;++a)for(var u=r[a],h=u.length,f,p=0;p<h;++p)if(f=u[p]){var m=Ge(f,e);Ka(f,t,n,p,u,{time:m.time+m.delay+m.duration,delay:0,duration:m.duration,ease:m.ease})}return new Sn(r,this._parents,t,n)}function cC(){var t,e,n=this,r=n._id,s=n.size();return new Promise(function(a,u){var h={value:u},f={value:function(){--s==0&&a()}};n.each(function(){var p=cn(this,r),m=p.on;m!==t&&(e=(t=m).copy(),e._.cancel.push(h),e._.interrupt.push(h),e._.end.push(f)),p.on=e}),s===0&&a()})}var hC=0;function Sn(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function fC(t){return xr().transition(t)}function H_(){return++hC}var An=xr.prototype;Sn.prototype=fC.prototype={constructor:Sn,select:qA,selectAll:WA,selectChild:An.selectChild,selectChildren:An.selectChildren,filter:BA,merge:FA,selection:jA,transition:uC,call:An.call,nodes:An.nodes,node:An.node,size:An.size,empty:An.empty,each:An.each,on:HA,attr:EA,attrTween:AA,style:JA,styleTween:nC,text:sC,textTween:lC,remove:ZA,tween:mA,delay:IA,duration:kA,ease:OA,easeVarying:zA,end:cC,[Symbol.iterator]:An[Symbol.iterator]};const zC=t=>+t;function dC(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var pC={time:null,delay:0,duration:250,ease:dC};function mC(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function gC(t){var e,n;t instanceof Sn?(e=t._id,t=t._name):(e=H_(),(n=pC).time=dh(),t=t==null?null:t+"");for(var r=this._groups,s=r.length,a=0;a<s;++a)for(var u=r[a],h=u.length,f,p=0;p<h;++p)(f=u[p])&&Ka(f,t,e,p,u,n||mC(f,e));return new Sn(r,this._parents,t,e)}xr.prototype.interrupt=fA;xr.prototype.transition=gC;export{SC as A,sn as F,RC as L,MC as O,bC as a,gd as b,EC as c,Re as d,Lw as e,PC as f,yC as g,Dy as h,LC as i,TC as j,IC as k,kC as l,Kf as m,OC as n,xC as o,vC as p,R_ as q,wC as r,DC as s,_C as t,fC as u,NC as v,Hy as w,zC as x,CC as y,AC as z};
