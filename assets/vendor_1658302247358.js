function Nu(t,e){const n=Object.create(null),r=t.split(",");for(let s=0;s<r.length;s++)n[r[s]]=!0;return e?s=>!!n[s.toLowerCase()]:s=>!!n[s]}const dy="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",py=Nu(dy);function wf(t){return!!t||t===""}function Mu(t){if(at(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=ce(r)?_y(r):Mu(r);if(s)for(const a in s)e[a]=s[a]}return e}else{if(ce(t))return t;if(re(t))return t}}const my=/;(?![^(]*\))/g,gy=/:(.+)/;function _y(t){const e={};return t.split(my).forEach(n=>{if(n){const r=n.split(gy);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function ku(t){let e="";if(ce(t))e=t;else if(at(t))for(let n=0;n<t.length;n++){const r=ku(t[n]);r&&(e+=r+" ")}else if(re(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const zS=t=>t==null?"":at(t)||re(t)&&(t.toString===bf||!ht(t.toString))?JSON.stringify(t,xf,2):String(t),xf=(t,e)=>e&&e.__v_isRef?xf(t,e.value):Hi(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s])=>(n[`${r} =>`]=s,n),{})}:Ef(e)?{[`Set(${e.size})`]:[...e.values()]}:re(e)&&!at(e)&&!Pf(e)?String(e):e,Vt={},Vi=[],je=()=>{},vy=()=>!1,yy=/^on[^a-z]/,ho=t=>yy.test(t),Ru=t=>t.startsWith("onUpdate:"),_e=Object.assign,Ou=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},wy=Object.prototype.hasOwnProperty,Pt=(t,e)=>wy.call(t,e),at=Array.isArray,Hi=t=>fo(t)==="[object Map]",Ef=t=>fo(t)==="[object Set]",ht=t=>typeof t=="function",ce=t=>typeof t=="string",Du=t=>typeof t=="symbol",re=t=>t!==null&&typeof t=="object",Tf=t=>re(t)&&ht(t.then)&&ht(t.catch),bf=Object.prototype.toString,fo=t=>bf.call(t),xy=t=>fo(t).slice(8,-1),Pf=t=>fo(t)==="[object Object]",Bu=t=>ce(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,po=Nu(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),mo=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},Ey=/-(\w)/g,sn=mo(t=>t.replace(Ey,(e,n)=>n?n.toUpperCase():"")),Ty=/\B([A-Z])/g,$i=mo(t=>t.replace(Ty,"-$1").toLowerCase()),go=mo(t=>t.charAt(0).toUpperCase()+t.slice(1)),zu=mo(t=>t?`on${go(t)}`:""),zr=(t,e)=>!Object.is(t,e),Fu=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},_o=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},by=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Af;const Py=()=>Af||(Af=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let ei;const vo=[];class Ay{constructor(e=!1){this.active=!0,this.effects=[],this.cleanups=[],!e&&ei&&(this.parent=ei,this.index=(ei.scopes||(ei.scopes=[])).push(this)-1)}run(e){if(this.active)try{return this.on(),e()}finally{this.off()}}on(){this.active&&(vo.push(this),ei=this)}off(){this.active&&(vo.pop(),ei=vo[vo.length-1])}stop(e){if(this.active){if(this.effects.forEach(n=>n.stop()),this.cleanups.forEach(n=>n()),this.scopes&&this.scopes.forEach(n=>n.stop(!0)),this.parent&&!e){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.active=!1}}}function Iy(t,e){e=e||ei,e&&e.active&&e.effects.push(t)}const Uu=t=>{const e=new Set(t);return e.w=0,e.n=0,e},If=t=>(t.w&Dn)>0,Sf=t=>(t.n&Dn)>0,Sy=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=Dn},Cy=t=>{const{deps:e}=t;if(e.length){let n=0;for(let r=0;r<e.length;r++){const s=e[r];If(s)&&!Sf(s)?s.delete(t):e[n++]=s,s.w&=~Dn,s.n&=~Dn}e.length=n}},Vu=new WeakMap;let Fr=0,Dn=1;const Hu=30,Ur=[];let ni;const ii=Symbol(""),$u=Symbol("");class Zu{constructor(e,n=null,r){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],Iy(this,r)}run(){if(!this.active)return this.fn();if(!Ur.includes(this))try{return Ur.push(ni=this),Ly(),Dn=1<<++Fr,Fr<=Hu?Sy(this):Cf(this),this.fn()}finally{Fr<=Hu&&Cy(this),Dn=1<<--Fr,ri(),Ur.pop();const e=Ur.length;ni=e>0?Ur[e-1]:void 0}}stop(){this.active&&(Cf(this),this.onStop&&this.onStop(),this.active=!1)}}function Cf(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let Zi=!0;const qu=[];function qi(){qu.push(Zi),Zi=!1}function Ly(){qu.push(Zi),Zi=!0}function ri(){const t=qu.pop();Zi=t===void 0?!0:t}function ke(t,e,n){if(!Lf())return;let r=Vu.get(t);r||Vu.set(t,r=new Map);let s=r.get(n);s||r.set(n,s=Uu()),Nf(s)}function Lf(){return Zi&&ni!==void 0}function Nf(t,e){let n=!1;Fr<=Hu?Sf(t)||(t.n|=Dn,n=!If(t)):n=!t.has(ni),n&&(t.add(ni),ni.deps.push(t))}function xn(t,e,n,r,s,a){const l=Vu.get(t);if(!l)return;let c=[];if(e==="clear")c=[...l.values()];else if(n==="length"&&at(t))l.forEach((f,p)=>{(p==="length"||p>=r)&&c.push(f)});else switch(n!==void 0&&c.push(l.get(n)),e){case"add":at(t)?Bu(n)&&c.push(l.get("length")):(c.push(l.get(ii)),Hi(t)&&c.push(l.get($u)));break;case"delete":at(t)||(c.push(l.get(ii)),Hi(t)&&c.push(l.get($u)));break;case"set":Hi(t)&&c.push(l.get(ii));break}if(c.length===1)c[0]&&Wu(c[0]);else{const f=[];for(const p of c)p&&f.push(...p);Wu(Uu(f))}}function Wu(t,e){for(const n of at(t)?t:[...t])(n!==ni||n.allowRecurse)&&(n.scheduler?n.scheduler():n.run())}const Ny=Nu("__proto__,__v_isRef,__isVue"),Mf=new Set(Object.getOwnPropertyNames(Symbol).map(t=>Symbol[t]).filter(Du)),My=Ku(),ky=Ku(!1,!0),Ry=Ku(!0),kf=Oy();function Oy(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const r=St(this);for(let a=0,l=this.length;a<l;a++)ke(r,"get",a+"");const s=r[e](...n);return s===-1||s===!1?r[e](...n.map(St)):s}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){qi();const r=St(this)[e].apply(this,n);return ri(),r}}),t}function Ku(t=!1,e=!1){return function(r,s,a){if(s==="__v_isReactive")return!t;if(s==="__v_isReadonly")return t;if(s==="__v_raw"&&a===(t?e?Xy:Hf:e?Vf:Uf).get(r))return r;const l=at(r);if(!t&&l&&Pt(kf,s))return Reflect.get(kf,s,a);const c=Reflect.get(r,s,a);return(Du(s)?Mf.has(s):Ny(s))||(t||ke(r,"get",s),e)?c:ve(c)?!l||!Bu(s)?c.value:c:re(c)?t?$f(c):Vr(c):c}}const Dy=Rf(),By=Rf(!0);function Rf(t=!1){return function(n,r,s,a){let l=n[r];if(!t&&!Xu(s)&&(s=St(s),l=St(l),!at(n)&&ve(l)&&!ve(s)))return l.value=s,!0;const c=at(n)&&Bu(r)?Number(r)<n.length:Pt(n,r),f=Reflect.set(n,r,s,a);return n===St(a)&&(c?zr(s,l)&&xn(n,"set",r,s):xn(n,"add",r,s)),f}}function zy(t,e){const n=Pt(t,e);t[e];const r=Reflect.deleteProperty(t,e);return r&&n&&xn(t,"delete",e,void 0),r}function Fy(t,e){const n=Reflect.has(t,e);return(!Du(e)||!Mf.has(e))&&ke(t,"has",e),n}function Uy(t){return ke(t,"iterate",at(t)?"length":ii),Reflect.ownKeys(t)}const Of={get:My,set:Dy,deleteProperty:zy,has:Fy,ownKeys:Uy},Vy={get:Ry,set(t,e){return!0},deleteProperty(t,e){return!0}},Hy=_e({},Of,{get:ky,set:By}),ju=t=>t,yo=t=>Reflect.getPrototypeOf(t);function wo(t,e,n=!1,r=!1){t=t.__v_raw;const s=St(t),a=St(e);e!==a&&!n&&ke(s,"get",e),!n&&ke(s,"get",a);const{has:l}=yo(s),c=r?ju:n?Qu:Hr;if(l.call(s,e))return c(t.get(e));if(l.call(s,a))return c(t.get(a));t!==s&&t.get(e)}function xo(t,e=!1){const n=this.__v_raw,r=St(n),s=St(t);return t!==s&&!e&&ke(r,"has",t),!e&&ke(r,"has",s),t===s?n.has(t):n.has(t)||n.has(s)}function Eo(t,e=!1){return t=t.__v_raw,!e&&ke(St(t),"iterate",ii),Reflect.get(t,"size",t)}function Df(t){t=St(t);const e=St(this);return yo(e).has.call(e,t)||(e.add(t),xn(e,"add",t,t)),this}function Bf(t,e){e=St(e);const n=St(this),{has:r,get:s}=yo(n);let a=r.call(n,t);a||(t=St(t),a=r.call(n,t));const l=s.call(n,t);return n.set(t,e),a?zr(e,l)&&xn(n,"set",t,e):xn(n,"add",t,e),this}function zf(t){const e=St(this),{has:n,get:r}=yo(e);let s=n.call(e,t);s||(t=St(t),s=n.call(e,t)),r&&r.call(e,t);const a=e.delete(t);return s&&xn(e,"delete",t,void 0),a}function Ff(){const t=St(this),e=t.size!==0,n=t.clear();return e&&xn(t,"clear",void 0,void 0),n}function To(t,e){return function(r,s){const a=this,l=a.__v_raw,c=St(l),f=e?ju:t?Qu:Hr;return!t&&ke(c,"iterate",ii),l.forEach((p,m)=>r.call(s,f(p),f(m),a))}}function bo(t,e,n){return function(...r){const s=this.__v_raw,a=St(s),l=Hi(a),c=t==="entries"||t===Symbol.iterator&&l,f=t==="keys"&&l,p=s[t](...r),m=n?ju:e?Qu:Hr;return!e&&ke(a,"iterate",f?$u:ii),{next(){const{value:_,done:v}=p.next();return v?{value:_,done:v}:{value:c?[m(_[0]),m(_[1])]:m(_),done:v}},[Symbol.iterator](){return this}}}}function Bn(t){return function(...e){return t==="delete"?!1:this}}function $y(){const t={get(a){return wo(this,a)},get size(){return Eo(this)},has:xo,add:Df,set:Bf,delete:zf,clear:Ff,forEach:To(!1,!1)},e={get(a){return wo(this,a,!1,!0)},get size(){return Eo(this)},has:xo,add:Df,set:Bf,delete:zf,clear:Ff,forEach:To(!1,!0)},n={get(a){return wo(this,a,!0)},get size(){return Eo(this,!0)},has(a){return xo.call(this,a,!0)},add:Bn("add"),set:Bn("set"),delete:Bn("delete"),clear:Bn("clear"),forEach:To(!0,!1)},r={get(a){return wo(this,a,!0,!0)},get size(){return Eo(this,!0)},has(a){return xo.call(this,a,!0)},add:Bn("add"),set:Bn("set"),delete:Bn("delete"),clear:Bn("clear"),forEach:To(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(a=>{t[a]=bo(a,!1,!1),n[a]=bo(a,!0,!1),e[a]=bo(a,!1,!0),r[a]=bo(a,!0,!0)}),[t,n,e,r]}const[Zy,qy,Wy,Ky]=$y();function Gu(t,e){const n=e?t?Ky:Wy:t?qy:Zy;return(r,s,a)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(Pt(n,s)&&s in r?n:r,s,a)}const jy={get:Gu(!1,!1)},Gy={get:Gu(!1,!0)},Yy={get:Gu(!0,!1)},Uf=new WeakMap,Vf=new WeakMap,Hf=new WeakMap,Xy=new WeakMap;function Qy(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Jy(t){return t.__v_skip||!Object.isExtensible(t)?0:Qy(xy(t))}function Vr(t){return t&&t.__v_isReadonly?t:Yu(t,!1,Of,jy,Uf)}function tw(t){return Yu(t,!1,Hy,Gy,Vf)}function $f(t){return Yu(t,!0,Vy,Yy,Hf)}function Yu(t,e,n,r,s){if(!re(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const a=s.get(t);if(a)return a;const l=Jy(t);if(l===0)return t;const c=new Proxy(t,l===2?r:n);return s.set(t,c),c}function Wi(t){return Xu(t)?Wi(t.__v_raw):!!(t&&t.__v_isReactive)}function Xu(t){return!!(t&&t.__v_isReadonly)}function Zf(t){return Wi(t)||Xu(t)}function St(t){const e=t&&t.__v_raw;return e?St(e):t}function qf(t){return _o(t,"__v_skip",!0),t}const Hr=t=>re(t)?Vr(t):t,Qu=t=>re(t)?$f(t):t;function Wf(t){Lf()&&(t=St(t),t.dep||(t.dep=Uu()),Nf(t.dep))}function Kf(t,e){t=St(t),t.dep&&Wu(t.dep)}function ve(t){return Boolean(t&&t.__v_isRef===!0)}function ew(t){return jf(t,!1)}function nw(t){return jf(t,!0)}function jf(t,e){return ve(t)?t:new iw(t,e)}class iw{constructor(e,n){this._shallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:St(e),this._value=n?e:Hr(e)}get value(){return Wf(this),this._value}set value(e){e=this._shallow?e:St(e),zr(e,this._rawValue)&&(this._rawValue=e,this._value=this._shallow?e:Hr(e),Kf(this))}}function $r(t){return ve(t)?t.value:t}const rw={get:(t,e,n)=>$r(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return ve(s)&&!ve(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function Gf(t){return Wi(t)?t:new Proxy(t,rw)}function FS(t){const e=at(t)?new Array(t.length):{};for(const n in t)e[n]=ow(t,n);return e}class sw{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}}function ow(t,e,n){const r=t[e];return ve(r)?r:new sw(t,e,n)}class aw{constructor(e,n,r){this._setter=n,this.dep=void 0,this._dirty=!0,this.__v_isRef=!0,this.effect=new Zu(e,()=>{this._dirty||(this._dirty=!0,Kf(this))}),this.__v_isReadonly=r}get value(){const e=St(this);return Wf(e),e._dirty&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function on(t,e){let n,r;const s=ht(t);return s?(n=t,r=je):(n=t.get,r=t.set),new aw(n,r,s||!r)}Promise.resolve();function uw(t,e,...n){const r=t.vnode.props||Vt;let s=n;const a=e.startsWith("update:"),l=a&&e.slice(7);if(l&&l in r){const m=`${l==="modelValue"?"model":l}Modifiers`,{number:_,trim:v}=r[m]||Vt;v?s=n.map(x=>x.trim()):_&&(s=n.map(by))}let c,f=r[c=zu(e)]||r[c=zu(sn(e))];!f&&a&&(f=r[c=zu($i(e))]),f&&Ve(f,t,6,s);const p=r[c+"Once"];if(p){if(!t.emitted)t.emitted={};else if(t.emitted[c])return;t.emitted[c]=!0,Ve(p,t,6,s)}}function Yf(t,e,n=!1){const r=e.emitsCache,s=r.get(t);if(s!==void 0)return s;const a=t.emits;let l={},c=!1;if(!ht(t)){const f=p=>{const m=Yf(p,e,!0);m&&(c=!0,_e(l,m))};!n&&e.mixins.length&&e.mixins.forEach(f),t.extends&&f(t.extends),t.mixins&&t.mixins.forEach(f)}return!a&&!c?(r.set(t,null),null):(at(a)?a.forEach(f=>l[f]=null):_e(l,a),r.set(t,l),l)}function Ju(t,e){return!t||!ho(e)?!1:(e=e.slice(2).replace(/Once$/,""),Pt(t,e[0].toLowerCase()+e.slice(1))||Pt(t,$i(e))||Pt(t,e))}let Ge=null,Po=null;function Ao(t){const e=Ge;return Ge=t,Po=t&&t.type.__scopeId||null,e}function US(t){Po=t}function VS(){Po=null}function lw(t,e=Ge,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&Td(-1);const a=Ao(e),l=t(...s);return Ao(a),r._d&&Td(1),l};return r._n=!0,r._c=!0,r._d=!0,r}function tl(t){const{type:e,vnode:n,proxy:r,withProxy:s,props:a,propsOptions:[l],slots:c,attrs:f,emit:p,render:m,renderCache:_,data:v,setupState:x,ctx:A,inheritAttrs:S}=t;let R,V;const G=Ao(t);try{if(n.shapeFlag&4){const ot=s||r;R=un(m.call(ot,ot,_,a,x,v,A)),V=f}else{const ot=e;R=un(ot.length>1?ot(a,{attrs:f,slots:c,emit:p}):ot(a,null)),V=e.props?f:cw(f)}}catch(ot){Zr.length=0,Bo(ot,t,1),R=Re(zn)}let J=R;if(V&&S!==!1){const ot=Object.keys(V),{shapeFlag:It}=J;ot.length&&It&(1|6)&&(l&&ot.some(Ru)&&(V=hw(V,l)),J=Ki(J,V))}return n.dirs&&(J.dirs=J.dirs?J.dirs.concat(n.dirs):n.dirs),n.transition&&(J.transition=n.transition),R=J,Ao(G),R}const cw=t=>{let e;for(const n in t)(n==="class"||n==="style"||ho(n))&&((e||(e={}))[n]=t[n]);return e},hw=(t,e)=>{const n={};for(const r in t)(!Ru(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function fw(t,e,n){const{props:r,children:s,component:a}=t,{props:l,children:c,patchFlag:f}=e,p=a.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&f>=0){if(f&1024)return!0;if(f&16)return r?Xf(r,l,p):!!l;if(f&8){const m=e.dynamicProps;for(let _=0;_<m.length;_++){const v=m[_];if(l[v]!==r[v]&&!Ju(p,v))return!0}}}else return(s||c)&&(!c||!c.$stable)?!0:r===l?!1:r?l?Xf(r,l,p):!0:!!l;return!1}function Xf(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const a=r[s];if(e[a]!==t[a]&&!Ju(n,a))return!0}return!1}function dw({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const pw=t=>t.__isSuspense;function mw(t,e){e&&e.pendingBranch?at(t)?e.effects.push(...t):e.effects.push(t):d0(t)}function Io(t,e){if(se){let n=se.provides;const r=se.parent&&se.parent.provides;r===n&&(n=se.provides=Object.create(r)),n[t]=e}}function En(t,e,n=!1){const r=se||Ge;if(r){const s=r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(s&&t in s)return s[t];if(arguments.length>1)return n&&ht(e)?e.call(r.proxy):e}}function gw(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return id(()=>{t.isMounted=!0}),rd(()=>{t.isUnmounting=!0}),t}const Ue=[Function,Array],_w={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ue,onEnter:Ue,onAfterEnter:Ue,onEnterCancelled:Ue,onBeforeLeave:Ue,onLeave:Ue,onAfterLeave:Ue,onLeaveCancelled:Ue,onBeforeAppear:Ue,onAppear:Ue,onAfterAppear:Ue,onAppearCancelled:Ue},setup(t,{slots:e}){const n=n0(),r=gw();let s;return()=>{const a=e.default&&td(e.default(),!0);if(!a||!a.length)return;const l=St(t),{mode:c}=l,f=a[0];if(r.isLeaving)return nl(f);const p=Jf(f);if(!p)return nl(f);const m=el(p,l,r,n);il(p,m);const _=n.subTree,v=_&&Jf(_);let x=!1;const{getTransitionKey:A}=p.type;if(A){const S=A();s===void 0?s=S:S!==s&&(s=S,x=!0)}if(v&&v.type!==zn&&(!li(p,v)||x)){const S=el(v,l,r,n);if(il(v,S),c==="out-in")return r.isLeaving=!0,S.afterLeave=()=>{r.isLeaving=!1,n.update()},nl(f);c==="in-out"&&p.type!==zn&&(S.delayLeave=(R,V,G)=>{const J=Qf(r,v);J[String(v.key)]=v,R._leaveCb=()=>{V(),R._leaveCb=void 0,delete m.delayedLeave},m.delayedLeave=G})}return f}}},vw=_w;function Qf(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function el(t,e,n,r){const{appear:s,mode:a,persisted:l=!1,onBeforeEnter:c,onEnter:f,onAfterEnter:p,onEnterCancelled:m,onBeforeLeave:_,onLeave:v,onAfterLeave:x,onLeaveCancelled:A,onBeforeAppear:S,onAppear:R,onAfterAppear:V,onAppearCancelled:G}=e,J=String(t.key),ot=Qf(n,t),It=(mt,Kt)=>{mt&&Ve(mt,r,9,Kt)},Ht={mode:a,persisted:l,beforeEnter(mt){let Kt=c;if(!n.isMounted)if(s)Kt=S||c;else return;mt._leaveCb&&mt._leaveCb(!0);const Ft=ot[J];Ft&&li(t,Ft)&&Ft.el._leaveCb&&Ft.el._leaveCb(),It(Kt,[mt])},enter(mt){let Kt=f,Ft=p,ue=m;if(!n.isMounted)if(s)Kt=R||f,Ft=V||p,ue=G||m;else return;let _t=!1;const Ct=mt._enterCb=Qe=>{_t||(_t=!0,Qe?It(ue,[mt]):It(Ft,[mt]),Ht.delayedLeave&&Ht.delayedLeave(),mt._enterCb=void 0)};Kt?(Kt(mt,Ct),Kt.length<=1&&Ct()):Ct()},leave(mt,Kt){const Ft=String(t.key);if(mt._enterCb&&mt._enterCb(!0),n.isUnmounting)return Kt();It(_,[mt]);let ue=!1;const _t=mt._leaveCb=Ct=>{ue||(ue=!0,Kt(),Ct?It(A,[mt]):It(x,[mt]),mt._leaveCb=void 0,ot[Ft]===t&&delete ot[Ft])};ot[Ft]=t,v?(v(mt,_t),v.length<=1&&_t()):_t()},clone(mt){return el(mt,e,n,r)}};return Ht}function nl(t){if(So(t))return t=Ki(t),t.children=null,t}function Jf(t){return So(t)?t.children?t.children[0]:void 0:t}function il(t,e){t.shapeFlag&6&&t.component?il(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function td(t,e=!1){let n=[],r=0;for(let s=0;s<t.length;s++){const a=t[s];a.type===an?(a.patchFlag&128&&r++,n=n.concat(td(a.children,e))):(e||a.type!==zn)&&n.push(a)}if(r>1)for(let s=0;s<n.length;s++)n[s].patchFlag=-2;return n}function ed(t){return ht(t)?{setup:t,name:t.name}:t}const rl=t=>!!t.type.__asyncLoader,So=t=>t.type.__isKeepAlive;function yw(t,e){nd(t,"a",e)}function ww(t,e){nd(t,"da",e)}function nd(t,e,n=se){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(Co(e,r,n),n){let s=n.parent;for(;s&&s.parent;)So(s.parent.vnode)&&xw(r,e,n,s),s=s.parent}}function xw(t,e,n,r){const s=Co(e,t,r,!0);sd(()=>{Ou(r[e],s)},n)}function Co(t,e,n=se,r=!1){if(n){const s=n[t]||(n[t]=[]),a=e.__weh||(e.__weh=(...l)=>{if(n.isUnmounted)return;qi(),ji(n);const c=Ve(e,n,t,l);return ci(),ri(),c});return r?s.unshift(a):s.push(a),a}}const Tn=t=>(e,n=se)=>(!Do||t==="sp")&&Co(t,e,n),Ew=Tn("bm"),id=Tn("m"),Tw=Tn("bu"),bw=Tn("u"),rd=Tn("bum"),sd=Tn("um"),Pw=Tn("sp"),Aw=Tn("rtg"),Iw=Tn("rtc");function Sw(t,e=se){Co("ec",t,e)}let sl=!0;function Cw(t){const e=ud(t),n=t.proxy,r=t.ctx;sl=!1,e.beforeCreate&&od(e.beforeCreate,t,"bc");const{data:s,computed:a,methods:l,watch:c,provide:f,inject:p,created:m,beforeMount:_,mounted:v,beforeUpdate:x,updated:A,activated:S,deactivated:R,beforeDestroy:V,beforeUnmount:G,destroyed:J,unmounted:ot,render:It,renderTracked:Ht,renderTriggered:mt,errorCaptured:Kt,serverPrefetch:Ft,expose:ue,inheritAttrs:_t,components:Ct,directives:Qe,filters:ge}=e;if(p&&Lw(p,r,null,t.appContext.config.unwrapInjectedRef),l)for(const xt in l){const $=l[xt];ht($)&&(r[xt]=$.bind(n))}if(s){const xt=s.call(n,n);re(xt)&&(t.data=Vr(xt))}if(sl=!0,a)for(const xt in a){const $=a[xt],Ee=ht($)?$.bind(n,n):ht($.get)?$.get.bind(n,n):je,ct=!ht($)&&ht($.set)?$.set.bind(n):je,yt=on({get:Ee,set:ct});Object.defineProperty(r,xt,{enumerable:!0,configurable:!0,get:()=>yt.value,set:jt=>yt.value=jt})}if(c)for(const xt in c)ad(c[xt],r,n,xt);if(f){const xt=ht(f)?f.call(n):f;Reflect.ownKeys(xt).forEach($=>{Io($,xt[$])})}m&&od(m,t,"c");function vt(xt,$){at($)?$.forEach(Ee=>xt(Ee.bind(n))):$&&xt($.bind(n))}if(vt(Ew,_),vt(id,v),vt(Tw,x),vt(bw,A),vt(yw,S),vt(ww,R),vt(Sw,Kt),vt(Iw,Ht),vt(Aw,mt),vt(rd,G),vt(sd,ot),vt(Pw,Ft),at(ue))if(ue.length){const xt=t.exposed||(t.exposed={});ue.forEach($=>{Object.defineProperty(xt,$,{get:()=>n[$],set:Ee=>n[$]=Ee})})}else t.exposed||(t.exposed={});It&&t.render===je&&(t.render=It),_t!=null&&(t.inheritAttrs=_t),Ct&&(t.components=Ct),Qe&&(t.directives=Qe)}function Lw(t,e,n=je,r=!1){at(t)&&(t=ol(t));for(const s in t){const a=t[s];let l;re(a)?"default"in a?l=En(a.from||s,a.default,!0):l=En(a.from||s):l=En(a),ve(l)&&r?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>l.value,set:c=>l.value=c}):e[s]=l}}function od(t,e,n){Ve(at(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function ad(t,e,n,r){const s=r.includes(".")?Ud(n,r):()=>n[r];if(ce(t)){const a=e[t];ht(a)&&Fo(s,a)}else if(ht(t))Fo(s,t.bind(n));else if(re(t))if(at(t))t.forEach(a=>ad(a,e,n,r));else{const a=ht(t.handler)?t.handler.bind(n):e[t.handler];ht(a)&&Fo(s,a,t)}}function ud(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:a,config:{optionMergeStrategies:l}}=t.appContext,c=a.get(e);let f;return c?f=c:!s.length&&!n&&!r?f=e:(f={},s.length&&s.forEach(p=>Lo(f,p,l,!0)),Lo(f,e,l)),a.set(e,f),f}function Lo(t,e,n,r=!1){const{mixins:s,extends:a}=e;a&&Lo(t,a,n,!0),s&&s.forEach(l=>Lo(t,l,n,!0));for(const l in e)if(!(r&&l==="expose")){const c=Nw[l]||n&&n[l];t[l]=c?c(t[l],e[l]):e[l]}return t}const Nw={data:ld,props:si,emits:si,methods:si,computed:si,beforeCreate:Te,created:Te,beforeMount:Te,mounted:Te,beforeUpdate:Te,updated:Te,beforeDestroy:Te,beforeUnmount:Te,destroyed:Te,unmounted:Te,activated:Te,deactivated:Te,errorCaptured:Te,serverPrefetch:Te,components:si,directives:si,watch:kw,provide:ld,inject:Mw};function ld(t,e){return e?t?function(){return _e(ht(t)?t.call(this,this):t,ht(e)?e.call(this,this):e)}:e:t}function Mw(t,e){return si(ol(t),ol(e))}function ol(t){if(at(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Te(t,e){return t?[...new Set([].concat(t,e))]:e}function si(t,e){return t?_e(_e(Object.create(null),t),e):e}function kw(t,e){if(!t)return e;if(!e)return t;const n=_e(Object.create(null),t);for(const r in e)n[r]=Te(t[r],e[r]);return n}function Rw(t,e,n,r=!1){const s={},a={};_o(a,ko,1),t.propsDefaults=Object.create(null),cd(t,e,s,a);for(const l in t.propsOptions[0])l in s||(s[l]=void 0);n?t.props=r?s:tw(s):t.type.props?t.props=s:t.props=a,t.attrs=a}function Ow(t,e,n,r){const{props:s,attrs:a,vnode:{patchFlag:l}}=t,c=St(s),[f]=t.propsOptions;let p=!1;if((r||l>0)&&!(l&16)){if(l&8){const m=t.vnode.dynamicProps;for(let _=0;_<m.length;_++){let v=m[_];const x=e[v];if(f)if(Pt(a,v))x!==a[v]&&(a[v]=x,p=!0);else{const A=sn(v);s[A]=al(f,c,A,x,t,!1)}else x!==a[v]&&(a[v]=x,p=!0)}}}else{cd(t,e,s,a)&&(p=!0);let m;for(const _ in c)(!e||!Pt(e,_)&&((m=$i(_))===_||!Pt(e,m)))&&(f?n&&(n[_]!==void 0||n[m]!==void 0)&&(s[_]=al(f,c,_,void 0,t,!0)):delete s[_]);if(a!==c)for(const _ in a)(!e||!Pt(e,_))&&(delete a[_],p=!0)}p&&xn(t,"set","$attrs")}function cd(t,e,n,r){const[s,a]=t.propsOptions;let l=!1,c;if(e)for(let f in e){if(po(f))continue;const p=e[f];let m;s&&Pt(s,m=sn(f))?!a||!a.includes(m)?n[m]=p:(c||(c={}))[m]=p:Ju(t.emitsOptions,f)||(!(f in r)||p!==r[f])&&(r[f]=p,l=!0)}if(a){const f=St(n),p=c||Vt;for(let m=0;m<a.length;m++){const _=a[m];n[_]=al(s,f,_,p[_],t,!Pt(p,_))}}return l}function al(t,e,n,r,s,a){const l=t[n];if(l!=null){const c=Pt(l,"default");if(c&&r===void 0){const f=l.default;if(l.type!==Function&&ht(f)){const{propsDefaults:p}=s;n in p?r=p[n]:(ji(s),r=p[n]=f.call(null,e),ci())}else r=f}l[0]&&(a&&!c?r=!1:l[1]&&(r===""||r===$i(n))&&(r=!0))}return r}function hd(t,e,n=!1){const r=e.propsCache,s=r.get(t);if(s)return s;const a=t.props,l={},c=[];let f=!1;if(!ht(t)){const m=_=>{f=!0;const[v,x]=hd(_,e,!0);_e(l,v),x&&c.push(...x)};!n&&e.mixins.length&&e.mixins.forEach(m),t.extends&&m(t.extends),t.mixins&&t.mixins.forEach(m)}if(!a&&!f)return r.set(t,Vi),Vi;if(at(a))for(let m=0;m<a.length;m++){const _=sn(a[m]);fd(_)&&(l[_]=Vt)}else if(a)for(const m in a){const _=sn(m);if(fd(_)){const v=a[m],x=l[_]=at(v)||ht(v)?{type:v}:v;if(x){const A=md(Boolean,x.type),S=md(String,x.type);x[0]=A>-1,x[1]=S<0||A<S,(A>-1||Pt(x,"default"))&&c.push(_)}}}const p=[l,c];return r.set(t,p),p}function fd(t){return t[0]!=="$"}function dd(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:t===null?"null":""}function pd(t,e){return dd(t)===dd(e)}function md(t,e){return at(e)?e.findIndex(n=>pd(n,t)):ht(e)&&pd(e,t)?0:-1}const gd=t=>t[0]==="_"||t==="$stable",ul=t=>at(t)?t.map(un):[un(t)],Dw=(t,e,n)=>{const r=lw((...s)=>ul(e(...s)),n);return r._c=!1,r},_d=(t,e,n)=>{const r=t._ctx;for(const s in t){if(gd(s))continue;const a=t[s];if(ht(a))e[s]=Dw(s,a,r);else if(a!=null){const l=ul(a);e[s]=()=>l}}},vd=(t,e)=>{const n=ul(e);t.slots.default=()=>n},Bw=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=St(e),_o(e,"_",n)):_d(e,t.slots={})}else t.slots={},e&&vd(t,e);_o(t.slots,ko,1)},zw=(t,e,n)=>{const{vnode:r,slots:s}=t;let a=!0,l=Vt;if(r.shapeFlag&32){const c=e._;c?n&&c===1?a=!1:(_e(s,e),!n&&c===1&&delete s._):(a=!e.$stable,_d(e,s)),l=e}else e&&(vd(t,e),l={default:1});if(a)for(const c in s)!gd(c)&&!(c in l)&&delete s[c]};function oi(t,e,n,r){const s=t.dirs,a=e&&e.dirs;for(let l=0;l<s.length;l++){const c=s[l];a&&(c.oldValue=a[l].value);let f=c.dir[r];f&&(qi(),Ve(f,n,8,[t.el,c,t,e]),ri())}}function yd(){return{app:null,config:{isNativeTag:vy,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Fw=0;function Uw(t,e){return function(r,s=null){s!=null&&!re(s)&&(s=null);const a=yd(),l=new Set;let c=!1;const f=a.app={_uid:Fw++,_component:r,_props:s,_container:null,_context:a,_instance:null,version:m0,get config(){return a.config},set config(p){},use(p,...m){return l.has(p)||(p&&ht(p.install)?(l.add(p),p.install(f,...m)):ht(p)&&(l.add(p),p(f,...m))),f},mixin(p){return a.mixins.includes(p)||a.mixins.push(p),f},component(p,m){return m?(a.components[p]=m,f):a.components[p]},directive(p,m){return m?(a.directives[p]=m,f):a.directives[p]},mount(p,m,_){if(!c){const v=Re(r,s);return v.appContext=a,m&&e?e(v,p):t(v,p,_),c=!0,f._container=p,p.__vue_app__=f,pl(v.component)||v.component.proxy}},unmount(){c&&(t(null,f._container),delete f._container.__vue_app__)},provide(p,m){return a.provides[p]=m,f}};return f}}function ll(t,e,n,r,s=!1){if(at(t)){t.forEach((v,x)=>ll(v,e&&(at(e)?e[x]:e),n,r,s));return}if(rl(r)&&!s)return;const a=r.shapeFlag&4?pl(r.component)||r.component.proxy:r.el,l=s?null:a,{i:c,r:f}=t,p=e&&e.r,m=c.refs===Vt?c.refs={}:c.refs,_=c.setupState;if(p!=null&&p!==f&&(ce(p)?(m[p]=null,Pt(_,p)&&(_[p]=null)):ve(p)&&(p.value=null)),ht(f))Un(f,c,12,[l,m]);else{const v=ce(f),x=ve(f);if(v||x){const A=()=>{if(t.f){const S=v?m[f]:f.value;s?at(S)&&Ou(S,a):at(S)?S.includes(a)||S.push(a):v?m[f]=[a]:(f.value=[a],t.k&&(m[t.k]=f.value))}else v?(m[f]=l,Pt(_,f)&&(_[f]=l)):ve(f)&&(f.value=l,t.k&&(m[t.k]=l))};l?(A.id=-1,Le(A,n)):A()}}}const Le=mw;function Vw(t){return Hw(t)}function Hw(t,e){const n=Py();n.__VUE__=!0;const{insert:r,remove:s,patchProp:a,createElement:l,createText:c,createComment:f,setText:p,setElementText:m,parentNode:_,nextSibling:v,setScopeId:x=je,cloneNode:A,insertStaticContent:S}=t,R=(y,E,b,M=null,N=null,B=null,H=!1,O=null,z=!!E.dynamicChildren)=>{if(y===E)return;y&&!li(y,E)&&(M=K(y),Bt(y,N,B,!0),y=null),E.patchFlag===-2&&(z=!1,E.dynamicChildren=null);const{type:k,ref:Y,shapeFlag:j}=E;switch(k){case cl:V(y,E,b,M);break;case zn:G(y,E,b,M);break;case No:y==null&&J(E,b,M,H);break;case an:Qe(y,E,b,M,N,B,H,O,z);break;default:j&1?Ht(y,E,b,M,N,B,H,O,z):j&6?ge(y,E,b,M,N,B,H,O,z):(j&64||j&128)&&k.process(y,E,b,M,N,B,H,O,z,Nt)}Y!=null&&N&&ll(Y,y&&y.ref,B,E||y,!E)},V=(y,E,b,M)=>{if(y==null)r(E.el=c(E.children),b,M);else{const N=E.el=y.el;E.children!==y.children&&p(N,E.children)}},G=(y,E,b,M)=>{y==null?r(E.el=f(E.children||""),b,M):E.el=y.el},J=(y,E,b,M)=>{[y.el,y.anchor]=S(y.children,E,b,M)},ot=({el:y,anchor:E},b,M)=>{let N;for(;y&&y!==E;)N=v(y),r(y,b,M),y=N;r(E,b,M)},It=({el:y,anchor:E})=>{let b;for(;y&&y!==E;)b=v(y),s(y),y=b;s(E)},Ht=(y,E,b,M,N,B,H,O,z)=>{H=H||E.type==="svg",y==null?mt(E,b,M,N,B,H,O,z):ue(y,E,N,B,H,O,z)},mt=(y,E,b,M,N,B,H,O)=>{let z,k;const{type:Y,props:j,shapeFlag:Q,transition:nt,patchFlag:dt,dirs:Rt}=y;if(y.el&&A!==void 0&&dt===-1)z=y.el=A(y.el);else{if(z=y.el=l(y.type,B,j&&j.is,j),Q&8?m(z,y.children):Q&16&&Ft(y.children,z,null,M,N,B&&Y!=="foreignObject",H,O),Rt&&oi(y,null,M,"created"),j){for(const Ot in j)Ot!=="value"&&!po(Ot)&&a(z,Ot,null,j[Ot],B,y.children,M,N,D);"value"in j&&a(z,"value",null,j.value),(k=j.onVnodeBeforeMount)&&ln(k,M,y)}Kt(z,y,y.scopeId,H,M)}Rt&&oi(y,null,M,"beforeMount");const Et=(!N||N&&!N.pendingBranch)&&nt&&!nt.persisted;Et&&nt.beforeEnter(z),r(z,E,b),((k=j&&j.onVnodeMounted)||Et||Rt)&&Le(()=>{k&&ln(k,M,y),Et&&nt.enter(z),Rt&&oi(y,null,M,"mounted")},N)},Kt=(y,E,b,M,N)=>{if(b&&x(y,b),M)for(let B=0;B<M.length;B++)x(y,M[B]);if(N){let B=N.subTree;if(E===B){const H=N.vnode;Kt(y,H,H.scopeId,H.slotScopeIds,N.parent)}}},Ft=(y,E,b,M,N,B,H,O,z=0)=>{for(let k=z;k<y.length;k++){const Y=y[k]=O?Fn(y[k]):un(y[k]);R(null,Y,E,b,M,N,B,H,O)}},ue=(y,E,b,M,N,B,H)=>{const O=E.el=y.el;let{patchFlag:z,dynamicChildren:k,dirs:Y}=E;z|=y.patchFlag&16;const j=y.props||Vt,Q=E.props||Vt;let nt;b&&ai(b,!1),(nt=Q.onVnodeBeforeUpdate)&&ln(nt,b,E,y),Y&&oi(E,y,b,"beforeUpdate"),b&&ai(b,!0);const dt=N&&E.type!=="foreignObject";if(k?_t(y.dynamicChildren,k,O,b,M,dt,B):H||Ee(y,E,O,null,b,M,dt,B,!1),z>0){if(z&16)Ct(O,E,j,Q,b,M,N);else if(z&2&&j.class!==Q.class&&a(O,"class",null,Q.class,N),z&4&&a(O,"style",j.style,Q.style,N),z&8){const Rt=E.dynamicProps;for(let Et=0;Et<Rt.length;Et++){const Ot=Rt[Et],Ce=j[Ot],dn=Q[Ot];(dn!==Ce||Ot==="value")&&a(O,Ot,Ce,dn,N,y.children,b,M,D)}}z&1&&y.children!==E.children&&m(O,E.children)}else!H&&k==null&&Ct(O,E,j,Q,b,M,N);((nt=Q.onVnodeUpdated)||Y)&&Le(()=>{nt&&ln(nt,b,E,y),Y&&oi(E,y,b,"updated")},M)},_t=(y,E,b,M,N,B,H)=>{for(let O=0;O<E.length;O++){const z=y[O],k=E[O],Y=z.el&&(z.type===an||!li(z,k)||z.shapeFlag&(6|64))?_(z.el):b;R(z,k,Y,null,M,N,B,H,!0)}},Ct=(y,E,b,M,N,B,H)=>{if(b!==M){for(const O in M){if(po(O))continue;const z=M[O],k=b[O];z!==k&&O!=="value"&&a(y,O,k,z,H,E.children,N,B,D)}if(b!==Vt)for(const O in b)!po(O)&&!(O in M)&&a(y,O,b[O],null,H,E.children,N,B,D);"value"in M&&a(y,"value",b.value,M.value)}},Qe=(y,E,b,M,N,B,H,O,z)=>{const k=E.el=y?y.el:c(""),Y=E.anchor=y?y.anchor:c("");let{patchFlag:j,dynamicChildren:Q,slotScopeIds:nt}=E;nt&&(O=O?O.concat(nt):nt),y==null?(r(k,b,M),r(Y,b,M),Ft(E.children,b,Y,N,B,H,O,z)):j>0&&j&64&&Q&&y.dynamicChildren?(_t(y.dynamicChildren,Q,b,N,B,H,O),(E.key!=null||N&&E===N.subTree)&&wd(y,E,!0)):Ee(y,E,b,Y,N,B,H,O,z)},ge=(y,E,b,M,N,B,H,O,z)=>{E.slotScopeIds=O,y==null?E.shapeFlag&512?N.ctx.activate(E,b,M,H,z):Ln(E,b,M,N,B,H,z):vt(y,E,z)},Ln=(y,E,b,M,N,B,H)=>{const O=y.component=e0(y,M,N);if(So(y)&&(O.ctx.renderer=Nt),i0(O),O.asyncDep){if(N&&N.registerDep(O,xt),!y.el){const z=O.subTree=Re(zn);G(null,z,E,b)}return}xt(O,y,E,b,N,B,H)},vt=(y,E,b)=>{const M=E.component=y.component;if(fw(y,E,b))if(M.asyncDep&&!M.asyncResolved){$(M,E,b);return}else M.next=E,h0(M.update),M.update();else E.component=y.component,E.el=y.el,M.vnode=E},xt=(y,E,b,M,N,B,H)=>{const O=()=>{if(y.isMounted){let{next:Y,bu:j,u:Q,parent:nt,vnode:dt}=y,Rt=Y,Et;ai(y,!1),Y?(Y.el=dt.el,$(y,Y,H)):Y=dt,j&&Fu(j),(Et=Y.props&&Y.props.onVnodeBeforeUpdate)&&ln(Et,nt,Y,dt),ai(y,!0);const Ot=tl(y),Ce=y.subTree;y.subTree=Ot,R(Ce,Ot,_(Ce.el),K(Ce),y,N,B),Y.el=Ot.el,Rt===null&&dw(y,Ot.el),Q&&Le(Q,N),(Et=Y.props&&Y.props.onVnodeUpdated)&&Le(()=>ln(Et,nt,Y,dt),N)}else{let Y;const{el:j,props:Q}=E,{bm:nt,m:dt,parent:Rt}=y,Et=rl(E);if(ai(y,!1),nt&&Fu(nt),!Et&&(Y=Q&&Q.onVnodeBeforeMount)&&ln(Y,Rt,E),ai(y,!0),j&&rt){const Ot=()=>{y.subTree=tl(y),rt(j,y.subTree,y,N,null)};Et?E.type.__asyncLoader().then(()=>!y.isUnmounted&&Ot()):Ot()}else{const Ot=y.subTree=tl(y);R(null,Ot,b,M,y,N,B),E.el=Ot.el}if(dt&&Le(dt,N),!Et&&(Y=Q&&Q.onVnodeMounted)){const Ot=E;Le(()=>ln(Y,Rt,Ot),N)}E.shapeFlag&256&&y.a&&Le(y.a,N),y.isMounted=!0,E=b=M=null}},z=y.effect=new Zu(O,()=>kd(y.update),y.scope),k=y.update=z.run.bind(z);k.id=y.uid,ai(y,!0),k()},$=(y,E,b)=>{E.component=y;const M=y.vnode.props;y.vnode=E,y.next=null,Ow(y,E.props,M,b),zw(y,E.children,b),qi(),vl(void 0,y.update),ri()},Ee=(y,E,b,M,N,B,H,O,z=!1)=>{const k=y&&y.children,Y=y?y.shapeFlag:0,j=E.children,{patchFlag:Q,shapeFlag:nt}=E;if(Q>0){if(Q&128){yt(k,j,b,M,N,B,H,O,z);return}else if(Q&256){ct(k,j,b,M,N,B,H,O,z);return}}nt&8?(Y&16&&D(k,N,B),j!==k&&m(b,j)):Y&16?nt&16?yt(k,j,b,M,N,B,H,O,z):D(k,N,B,!0):(Y&8&&m(b,""),nt&16&&Ft(j,b,M,N,B,H,O,z))},ct=(y,E,b,M,N,B,H,O,z)=>{y=y||Vi,E=E||Vi;const k=y.length,Y=E.length,j=Math.min(k,Y);let Q;for(Q=0;Q<j;Q++){const nt=E[Q]=z?Fn(E[Q]):un(E[Q]);R(y[Q],nt,b,null,N,B,H,O,z)}k>Y?D(y,N,B,!0,!1,j):Ft(E,b,M,N,B,H,O,z,j)},yt=(y,E,b,M,N,B,H,O,z)=>{let k=0;const Y=E.length;let j=y.length-1,Q=Y-1;for(;k<=j&&k<=Q;){const nt=y[k],dt=E[k]=z?Fn(E[k]):un(E[k]);if(li(nt,dt))R(nt,dt,b,null,N,B,H,O,z);else break;k++}for(;k<=j&&k<=Q;){const nt=y[j],dt=E[Q]=z?Fn(E[Q]):un(E[Q]);if(li(nt,dt))R(nt,dt,b,null,N,B,H,O,z);else break;j--,Q--}if(k>j){if(k<=Q){const nt=Q+1,dt=nt<Y?E[nt].el:M;for(;k<=Q;)R(null,E[k]=z?Fn(E[k]):un(E[k]),b,dt,N,B,H,O,z),k++}}else if(k>Q)for(;k<=j;)Bt(y[k],N,B,!0),k++;else{const nt=k,dt=k,Rt=new Map;for(k=dt;k<=Q;k++){const Ut=E[k]=z?Fn(E[k]):un(E[k]);Ut.key!=null&&Rt.set(Ut.key,k)}let Et,Ot=0;const Ce=Q-dt+1;let dn=!1,Ii=0;const pn=new Array(Ce);for(k=0;k<Ce;k++)pn[k]=0;for(k=nt;k<=j;k++){const Ut=y[k];if(Ot>=Ce){Bt(Ut,N,B,!0);continue}let le;if(Ut.key!=null)le=Rt.get(Ut.key);else for(Et=dt;Et<=Q;Et++)if(pn[Et-dt]===0&&li(Ut,E[Et])){le=Et;break}le===void 0?Bt(Ut,N,B,!0):(pn[le-dt]=k+1,le>=Ii?Ii=le:dn=!0,R(Ut,E[le],b,null,N,B,H,O,z),Ot++)}const Pr=dn?$w(pn):Vi;for(Et=Pr.length-1,k=Ce-1;k>=0;k--){const Ut=dt+k,le=E[Ut],$s=Ut+1<Y?E[Ut+1].el:M;pn[k]===0?R(null,le,b,$s,N,B,H,O,z):dn&&(Et<0||k!==Pr[Et]?jt(le,b,$s,2):Et--)}}},jt=(y,E,b,M,N=null)=>{const{el:B,type:H,transition:O,children:z,shapeFlag:k}=y;if(k&6){jt(y.component.subTree,E,b,M);return}if(k&128){y.suspense.move(E,b,M);return}if(k&64){H.move(y,E,b,Nt);return}if(H===an){r(B,E,b);for(let j=0;j<z.length;j++)jt(z[j],E,b,M);r(y.anchor,E,b);return}if(H===No){ot(y,E,b);return}if(M!==2&&k&1&&O)if(M===0)O.beforeEnter(B),r(B,E,b),Le(()=>O.enter(B),N);else{const{leave:j,delayLeave:Q,afterLeave:nt}=O,dt=()=>r(B,E,b),Rt=()=>{j(B,()=>{dt(),nt&&nt()})};Q?Q(B,dt,Rt):Rt()}else r(B,E,b)},Bt=(y,E,b,M=!1,N=!1)=>{const{type:B,props:H,ref:O,children:z,dynamicChildren:k,shapeFlag:Y,patchFlag:j,dirs:Q}=y;if(O!=null&&ll(O,null,b,y,!0),Y&256){E.ctx.deactivate(y);return}const nt=Y&1&&Q,dt=!rl(y);let Rt;if(dt&&(Rt=H&&H.onVnodeBeforeUnmount)&&ln(Rt,E,y),Y&6)U(y.component,b,M);else{if(Y&128){y.suspense.unmount(b,M);return}nt&&oi(y,null,E,"beforeUnmount"),Y&64?y.type.remove(y,E,b,N,Nt,M):k&&(B!==an||j>0&&j&64)?D(k,E,b,!1,!0):(B===an&&j&(128|256)||!N&&Y&16)&&D(z,E,b),M&&Gt(y)}(dt&&(Rt=H&&H.onVnodeUnmounted)||nt)&&Le(()=>{Rt&&ln(Rt,E,y),nt&&oi(y,null,E,"unmounted")},b)},Gt=y=>{const{type:E,el:b,anchor:M,transition:N}=y;if(E===an){I(b,M);return}if(E===No){It(y);return}const B=()=>{s(b),N&&!N.persisted&&N.afterLeave&&N.afterLeave()};if(y.shapeFlag&1&&N&&!N.persisted){const{leave:H,delayLeave:O}=N,z=()=>H(b,B);O?O(y.el,B,z):z()}else B()},I=(y,E)=>{let b;for(;y!==E;)b=v(y),s(y),y=b;s(E)},U=(y,E,b)=>{const{bum:M,scope:N,update:B,subTree:H,um:O}=y;M&&Fu(M),N.stop(),B&&(B.active=!1,Bt(H,y,E,b)),O&&Le(O,E),Le(()=>{y.isUnmounted=!0},E),E&&E.pendingBranch&&!E.isUnmounted&&y.asyncDep&&!y.asyncResolved&&y.suspenseId===E.pendingId&&(E.deps--,E.deps===0&&E.resolve())},D=(y,E,b,M=!1,N=!1,B=0)=>{for(let H=B;H<y.length;H++)Bt(y[H],E,b,M,N)},K=y=>y.shapeFlag&6?K(y.component.subTree):y.shapeFlag&128?y.suspense.next():v(y.anchor||y.el),Lt=(y,E,b)=>{y==null?E._vnode&&Bt(E._vnode,null,null,!0):R(E._vnode||null,y,E,null,null,null,b),Dd(),E._vnode=y},Nt={p:R,um:Bt,m:jt,r:Gt,mt:Ln,mc:Ft,pc:Ee,pbc:_t,n:K,o:t};let ut,rt;return e&&([ut,rt]=e(Nt)),{render:Lt,hydrate:ut,createApp:Uw(Lt,ut)}}function ai({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function wd(t,e,n=!1){const r=t.children,s=e.children;if(at(r)&&at(s))for(let a=0;a<r.length;a++){const l=r[a];let c=s[a];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=s[a]=Fn(s[a]),c.el=l.el),n||wd(l,c))}}function $w(t){const e=t.slice(),n=[0];let r,s,a,l,c;const f=t.length;for(r=0;r<f;r++){const p=t[r];if(p!==0){if(s=n[n.length-1],t[s]<p){e[r]=s,n.push(r);continue}for(a=0,l=n.length-1;a<l;)c=a+l>>1,t[n[c]]<p?a=c+1:l=c;p<t[n[a]]&&(a>0&&(e[r]=n[a-1]),n[a]=r)}}for(a=n.length,l=n[a-1];a-- >0;)n[a]=l,l=e[l];return n}const Zw=t=>t.__isTeleport,xd="components";function HS(t,e){return Ww(xd,t,!0,e)||t}const qw=Symbol();function Ww(t,e,n=!0,r=!1){const s=Ge||se;if(s){const a=s.type;if(t===xd){const c=a0(a);if(c&&(c===e||c===sn(e)||c===go(sn(e))))return a}const l=Ed(s[t]||a[t],e)||Ed(s.appContext[t],e);return!l&&r?a:l}}function Ed(t,e){return t&&(t[e]||t[sn(e)]||t[go(sn(e))])}const an=Symbol(void 0),cl=Symbol(void 0),zn=Symbol(void 0),No=Symbol(void 0),Zr=[];let ui=null;function $S(t=!1){Zr.push(ui=t?null:[])}function Kw(){Zr.pop(),ui=Zr[Zr.length-1]||null}let Mo=1;function Td(t){Mo+=t}function bd(t){return t.dynamicChildren=Mo>0?ui||Vi:null,Kw(),Mo>0&&ui&&ui.push(t),t}function ZS(t,e,n,r,s,a){return bd(Ad(t,e,n,r,s,a,!0))}function qS(t,e,n,r,s){return bd(Re(t,e,n,r,s,!0))}function hl(t){return t?t.__v_isVNode===!0:!1}function li(t,e){return t.type===e.type&&t.key===e.key}const ko="__vInternal",Pd=({key:t})=>t!=null?t:null,Ro=({ref:t,ref_key:e,ref_for:n})=>t!=null?ce(t)||ve(t)||ht(t)?{i:Ge,r:t,k:e,f:!!n}:t:null;function Ad(t,e=null,n=null,r=0,s=null,a=t===an?0:1,l=!1,c=!1){const f={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Pd(e),ref:e&&Ro(e),scopeId:Po,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null};return c?(fl(f,n),a&128&&t.normalize(f)):n&&(f.shapeFlag|=ce(n)?8:16),Mo>0&&!l&&ui&&(f.patchFlag>0||a&6)&&f.patchFlag!==32&&ui.push(f),f}const Re=jw;function jw(t,e=null,n=null,r=0,s=null,a=!1){if((!t||t===qw)&&(t=zn),hl(t)){const c=Ki(t,e,!0);return n&&fl(c,n),c}if(u0(t)&&(t=t.__vccOpts),e){e=Gw(e);let{class:c,style:f}=e;c&&!ce(c)&&(e.class=ku(c)),re(f)&&(Zf(f)&&!at(f)&&(f=_e({},f)),e.style=Mu(f))}const l=ce(t)?1:pw(t)?128:Zw(t)?64:re(t)?4:ht(t)?2:0;return Ad(t,e,n,r,s,l,a,!0)}function Gw(t){return t?Zf(t)||ko in t?_e({},t):t:null}function Ki(t,e,n=!1){const{props:r,ref:s,patchFlag:a,children:l}=t,c=e?Xw(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&Pd(c),ref:e&&e.ref?n&&s?at(s)?s.concat(Ro(e)):[s,Ro(e)]:Ro(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:l,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==an?a===-1?16:a|16:a,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Ki(t.ssContent),ssFallback:t.ssFallback&&Ki(t.ssFallback),el:t.el,anchor:t.anchor}}function Yw(t=" ",e=0){return Re(cl,null,t,e)}function WS(t,e){const n=Re(No,null,t);return n.staticCount=e,n}function un(t){return t==null||typeof t=="boolean"?Re(zn):at(t)?Re(an,null,t.slice()):typeof t=="object"?Fn(t):Re(cl,null,String(t))}function Fn(t){return t.el===null||t.memo?t:Ki(t)}function fl(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(at(e))n=16;else if(typeof e=="object")if(r&(1|64)){const s=e.default;s&&(s._c&&(s._d=!1),fl(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!(ko in e)?e._ctx=Ge:s===3&&Ge&&(Ge.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else ht(e)?(e={default:e,_ctx:Ge},n=32):(e=String(e),r&64?(n=16,e=[Yw(e)]):n=8);t.children=e,t.shapeFlag|=n}function Xw(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=ku([e.class,r.class]));else if(s==="style")e.style=Mu([e.style,r.style]);else if(ho(s)){const a=e[s],l=r[s];a!==l&&!(at(a)&&a.includes(l))&&(e[s]=a?[].concat(a,l):l)}else s!==""&&(e[s]=r[s])}return e}function ln(t,e,n,r=null){Ve(t,e,7,[n,r])}function KS(t,e,n,r){let s;const a=n&&n[r];if(at(t)||ce(t)){s=new Array(t.length);for(let l=0,c=t.length;l<c;l++)s[l]=e(t[l],l,void 0,a&&a[l])}else if(typeof t=="number"){s=new Array(t);for(let l=0;l<t;l++)s[l]=e(l+1,l,void 0,a&&a[l])}else if(re(t))if(t[Symbol.iterator])s=Array.from(t,(l,c)=>e(l,c,void 0,a&&a[c]));else{const l=Object.keys(t);s=new Array(l.length);for(let c=0,f=l.length;c<f;c++){const p=l[c];s[c]=e(t[p],p,c,a&&a[c])}}else s=[];return n&&(n[r]=s),s}const dl=t=>t?Id(t)?pl(t)||t.proxy:dl(t.parent):null,Oo=_e(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>dl(t.parent),$root:t=>dl(t.root),$emit:t=>t.emit,$options:t=>ud(t),$forceUpdate:t=>()=>kd(t.update),$nextTick:t=>Md.bind(t.proxy),$watch:t=>p0.bind(t)}),Qw={get({_:t},e){const{ctx:n,setupState:r,data:s,props:a,accessCache:l,type:c,appContext:f}=t;let p;if(e[0]!=="$"){const x=l[e];if(x!==void 0)switch(x){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return a[e]}else{if(r!==Vt&&Pt(r,e))return l[e]=1,r[e];if(s!==Vt&&Pt(s,e))return l[e]=2,s[e];if((p=t.propsOptions[0])&&Pt(p,e))return l[e]=3,a[e];if(n!==Vt&&Pt(n,e))return l[e]=4,n[e];sl&&(l[e]=0)}}const m=Oo[e];let _,v;if(m)return e==="$attrs"&&ke(t,"get",e),m(t);if((_=c.__cssModules)&&(_=_[e]))return _;if(n!==Vt&&Pt(n,e))return l[e]=4,n[e];if(v=f.config.globalProperties,Pt(v,e))return v[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:a}=t;if(s!==Vt&&Pt(s,e))s[e]=n;else if(r!==Vt&&Pt(r,e))r[e]=n;else if(Pt(t.props,e))return!1;return e[0]==="$"&&e.slice(1)in t?!1:(a[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:a}},l){let c;return!!n[l]||t!==Vt&&Pt(t,l)||e!==Vt&&Pt(e,l)||(c=a[0])&&Pt(c,l)||Pt(r,l)||Pt(Oo,l)||Pt(s.config.globalProperties,l)}},Jw=yd();let t0=0;function e0(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||Jw,a={uid:t0++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new Ay(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:hd(r,s),emitsOptions:Yf(r,s),emit:null,emitted:null,propsDefaults:Vt,inheritAttrs:r.inheritAttrs,ctx:Vt,data:Vt,props:Vt,attrs:Vt,slots:Vt,refs:Vt,setupState:Vt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=e?e.root:a,a.emit=uw.bind(null,a),t.ce&&t.ce(a),a}let se=null;const n0=()=>se||Ge,ji=t=>{se=t,t.scope.on()},ci=()=>{se&&se.scope.off(),se=null};function Id(t){return t.vnode.shapeFlag&4}let Do=!1;function i0(t,e=!1){Do=e;const{props:n,children:r}=t.vnode,s=Id(t);Rw(t,n,s,e),Bw(t,r);const a=s?r0(t,e):void 0;return Do=!1,a}function r0(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=qf(new Proxy(t.ctx,Qw));const{setup:r}=n;if(r){const s=t.setupContext=r.length>1?o0(t):null;ji(t),qi();const a=Un(r,t,0,[t.props,s]);if(ri(),ci(),Tf(a)){if(a.then(ci,ci),e)return a.then(l=>{Sd(t,l,e)}).catch(l=>{Bo(l,t,0)});t.asyncDep=a}else Sd(t,a,e)}else Ld(t,e)}function Sd(t,e,n){ht(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:re(e)&&(t.setupState=Gf(e)),Ld(t,n)}let Cd;function Ld(t,e,n){const r=t.type;if(!t.render){if(!e&&Cd&&!r.render){const s=r.template;if(s){const{isCustomElement:a,compilerOptions:l}=t.appContext.config,{delimiters:c,compilerOptions:f}=r,p=_e(_e({isCustomElement:a,delimiters:c},l),f);r.render=Cd(s,p)}}t.render=r.render||je}ji(t),qi(),Cw(t),ri(),ci()}function s0(t){return new Proxy(t.attrs,{get(e,n){return ke(t,"get","$attrs"),e[n]}})}function o0(t){const e=r=>{t.exposed=r||{}};let n;return{get attrs(){return n||(n=s0(t))},slots:t.slots,emit:t.emit,expose:e}}function pl(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(Gf(qf(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Oo)return Oo[n](t)}}))}function a0(t){return ht(t)&&t.displayName||t.name}function u0(t){return ht(t)&&"__vccOpts"in t}function Un(t,e,n,r){let s;try{s=r?t(...r):t()}catch(a){Bo(a,e,n)}return s}function Ve(t,e,n,r){if(ht(t)){const a=Un(t,e,n,r);return a&&Tf(a)&&a.catch(l=>{Bo(l,e,n)}),a}const s=[];for(let a=0;a<t.length;a++)s.push(Ve(t[a],e,n,r));return s}function Bo(t,e,n,r=!0){const s=e?e.vnode:null;if(e){let a=e.parent;const l=e.proxy,c=n;for(;a;){const p=a.ec;if(p){for(let m=0;m<p.length;m++)if(p[m](t,l,c)===!1)return}a=a.parent}const f=e.appContext.config.errorHandler;if(f){Un(f,null,10,[t,l,c]);return}}l0(t,n,s,r)}function l0(t,e,n,r=!0){console.error(t)}let zo=!1,ml=!1;const Oe=[];let bn=0;const qr=[];let Wr=null,Gi=0;const Kr=[];let Vn=null,Yi=0;const Nd=Promise.resolve();let gl=null,_l=null;function Md(t){const e=gl||Nd;return t?e.then(this?t.bind(this):t):e}function c0(t){let e=bn+1,n=Oe.length;for(;e<n;){const r=e+n>>>1;jr(Oe[r])<t?e=r+1:n=r}return e}function kd(t){(!Oe.length||!Oe.includes(t,zo&&t.allowRecurse?bn+1:bn))&&t!==_l&&(t.id==null?Oe.push(t):Oe.splice(c0(t.id),0,t),Rd())}function Rd(){!zo&&!ml&&(ml=!0,gl=Nd.then(Bd))}function h0(t){const e=Oe.indexOf(t);e>bn&&Oe.splice(e,1)}function Od(t,e,n,r){at(t)?n.push(...t):(!e||!e.includes(t,t.allowRecurse?r+1:r))&&n.push(t),Rd()}function f0(t){Od(t,Wr,qr,Gi)}function d0(t){Od(t,Vn,Kr,Yi)}function vl(t,e=null){if(qr.length){for(_l=e,Wr=[...new Set(qr)],qr.length=0,Gi=0;Gi<Wr.length;Gi++)Wr[Gi]();Wr=null,Gi=0,_l=null,vl(t,e)}}function Dd(t){if(Kr.length){const e=[...new Set(Kr)];if(Kr.length=0,Vn){Vn.push(...e);return}for(Vn=e,Vn.sort((n,r)=>jr(n)-jr(r)),Yi=0;Yi<Vn.length;Yi++)Vn[Yi]();Vn=null,Yi=0}}const jr=t=>t.id==null?1/0:t.id;function Bd(t){ml=!1,zo=!0,vl(t),Oe.sort((n,r)=>jr(n)-jr(r));const e=je;try{for(bn=0;bn<Oe.length;bn++){const n=Oe[bn];n&&n.active!==!1&&Un(n,null,14)}}finally{bn=0,Oe.length=0,Dd(),zo=!1,gl=null,(Oe.length||qr.length||Kr.length)&&Bd(t)}}const zd={};function Fo(t,e,n){return Fd(t,e,n)}function Fd(t,e,{immediate:n,deep:r,flush:s,onTrack:a,onTrigger:l}=Vt){const c=se;let f,p=!1,m=!1;if(ve(t)?(f=()=>t.value,p=!!t._shallow):Wi(t)?(f=()=>t,r=!0):at(t)?(m=!0,p=t.some(Wi),f=()=>t.map(V=>{if(ve(V))return V.value;if(Wi(V))return Xi(V);if(ht(V))return Un(V,c,2)})):ht(t)?e?f=()=>Un(t,c,2):f=()=>{if(!(c&&c.isUnmounted))return _&&_(),Ve(t,c,3,[v])}:f=je,e&&r){const V=f;f=()=>Xi(V())}let _,v=V=>{_=R.onStop=()=>{Un(V,c,4)}};if(Do)return v=je,e?n&&Ve(e,c,3,[f(),m?[]:void 0,v]):f(),je;let x=m?[]:zd;const A=()=>{if(!!R.active)if(e){const V=R.run();(r||p||(m?V.some((G,J)=>zr(G,x[J])):zr(V,x)))&&(_&&_(),Ve(e,c,3,[V,x===zd?void 0:x,v]),x=V)}else R.run()};A.allowRecurse=!!e;let S;s==="sync"?S=A:s==="post"?S=()=>Le(A,c&&c.suspense):S=()=>{!c||c.isMounted?f0(A):A()};const R=new Zu(f,S);return e?n?A():x=R.run():s==="post"?Le(R.run.bind(R),c&&c.suspense):R.run(),()=>{R.stop(),c&&c.scope&&Ou(c.scope.effects,R)}}function p0(t,e,n){const r=this.proxy,s=ce(t)?t.includes(".")?Ud(r,t):()=>r[t]:t.bind(r,r);let a;ht(e)?a=e:(a=e.handler,n=e);const l=se;ji(this);const c=Fd(s,a.bind(r),n);return l?ji(l):ci(),c}function Ud(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}function Xi(t,e){if(!re(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),ve(t))Xi(t.value,e);else if(at(t))for(let n=0;n<t.length;n++)Xi(t[n],e);else if(Ef(t)||Hi(t))t.forEach(n=>{Xi(n,e)});else if(Pf(t))for(const n in t)Xi(t[n],e);return t}function Vd(t,e,n){const r=arguments.length;return r===2?re(e)&&!at(e)?hl(e)?Re(t,null,[e]):Re(t,e):Re(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&hl(n)&&(n=[n]),Re(t,e,n))}const m0="3.2.26",g0="http://www.w3.org/2000/svg",Qi=typeof document!="undefined"?document:null,Hd=new Map,_0={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e?Qi.createElementNS(g0,t):Qi.createElement(t,n?{is:n}:void 0);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>Qi.createTextNode(t),createComment:t=>Qi.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Qi.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},cloneNode(t){const e=t.cloneNode(!0);return"_value"in t&&(e._value=t._value),e},insertStaticContent(t,e,n,r){const s=n?n.previousSibling:e.lastChild;let a=Hd.get(t);if(!a){const l=Qi.createElement("template");if(l.innerHTML=r?`<svg>${t}</svg>`:t,a=l.content,r){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}Hd.set(t,a)}return e.insertBefore(a.cloneNode(!0),n),[s?s.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function v0(t,e,n){const r=t._vtc;r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function y0(t,e,n){const r=t.style,s=ce(n);if(n&&!s){for(const a in n)yl(r,a,n[a]);if(e&&!ce(e))for(const a in e)n[a]==null&&yl(r,a,"")}else{const a=r.display;s?e!==n&&(r.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(r.display=a)}}const $d=/\s*!important$/;function yl(t,e,n){if(at(n))n.forEach(r=>yl(t,e,r));else if(e.startsWith("--"))t.setProperty(e,n);else{const r=w0(t,e);$d.test(n)?t.setProperty($i(r),n.replace($d,""),"important"):t[r]=n}}const Zd=["Webkit","Moz","ms"],wl={};function w0(t,e){const n=wl[e];if(n)return n;let r=sn(e);if(r!=="filter"&&r in t)return wl[e]=r;r=go(r);for(let s=0;s<Zd.length;s++){const a=Zd[s]+r;if(a in t)return wl[e]=a}return e}const qd="http://www.w3.org/1999/xlink";function x0(t,e,n,r,s){if(r&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(qd,e.slice(6,e.length)):t.setAttributeNS(qd,e,n);else{const a=py(e);n==null||a&&!wf(n)?t.removeAttribute(e):t.setAttribute(e,a?"":n)}}function E0(t,e,n,r,s,a,l){if(e==="innerHTML"||e==="textContent"){r&&l(r,s,a),t[e]=n==null?"":n;return}if(e==="value"&&t.tagName!=="PROGRESS"&&!t.tagName.includes("-")){t._value=n;const c=n==null?"":n;(t.value!==c||t.tagName==="OPTION")&&(t.value=c),n==null&&t.removeAttribute(e);return}if(n===""||n==null){const c=typeof t[e];if(c==="boolean"){t[e]=wf(n);return}else if(n==null&&c==="string"){t[e]="",t.removeAttribute(e);return}else if(c==="number"){try{t[e]=0}catch{}t.removeAttribute(e);return}}try{t[e]=n}catch{}}let Uo=Date.now,Wd=!1;if(typeof window!="undefined"){Uo()>document.createEvent("Event").timeStamp&&(Uo=()=>performance.now());const t=navigator.userAgent.match(/firefox\/(\d+)/i);Wd=!!(t&&Number(t[1])<=53)}let xl=0;const T0=Promise.resolve(),b0=()=>{xl=0},P0=()=>xl||(T0.then(b0),xl=Uo());function A0(t,e,n,r){t.addEventListener(e,n,r)}function I0(t,e,n,r){t.removeEventListener(e,n,r)}function S0(t,e,n,r,s=null){const a=t._vei||(t._vei={}),l=a[e];if(r&&l)l.value=r;else{const[c,f]=C0(e);if(r){const p=a[e]=L0(r,s);A0(t,c,p,f)}else l&&(I0(t,c,l,f),a[e]=void 0)}}const Kd=/(?:Once|Passive|Capture)$/;function C0(t){let e;if(Kd.test(t)){e={};let n;for(;n=t.match(Kd);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[$i(t.slice(2)),e]}function L0(t,e){const n=r=>{const s=r.timeStamp||Uo();(Wd||s>=n.attached-1)&&Ve(N0(r,n.value),e,5,[r])};return n.value=t,n.attached=P0(),n}function N0(t,e){if(at(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r(s))}else return e}const jd=/^on[a-z]/,M0=(t,e,n,r,s=!1,a,l,c,f)=>{e==="class"?v0(t,r,s):e==="style"?y0(t,n,r):ho(e)?Ru(e)||S0(t,e,n,r,l):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):k0(t,e,r,s))?E0(t,e,r,a,l,c,f):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),x0(t,e,r,s))};function k0(t,e,n,r){return r?!!(e==="innerHTML"||e==="textContent"||e in t&&jd.test(e)&&ht(n)):e==="spellcheck"||e==="draggable"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||jd.test(e)&&ce(n)?!1:e in t}const R0={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};vw.props;const O0=_e({patchProp:M0},_0);let Gd;function D0(){return Gd||(Gd=Vw(O0))}const jS=(...t)=>{const e=D0().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=B0(r);if(!s)return;const a=e._component;!ht(a)&&!a.render&&!a.template&&(a.template=s.innerHTML),s.innerHTML="";const l=n(s,!1,s instanceof SVGElement);return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),l},e};function B0(t){return ce(t)?document.querySelector(t):t}/*!
  * vue-router v4.0.12
  * (c) 2021 Eduardo San Martin Morote
  * @license MIT
  */const Yd=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",Ji=t=>Yd?Symbol(t):"_vr_"+t,z0=Ji("rvlm"),Xd=Ji("rvd"),El=Ji("r"),Tl=Ji("rl"),bl=Ji("rvl"),tr=typeof window!="undefined";function F0(t){return t.__esModule||Yd&&t[Symbol.toStringTag]==="Module"}const zt=Object.assign;function Pl(t,e){const n={};for(const r in e){const s=e[r];n[r]=Array.isArray(s)?s.map(t):t(s)}return n}const Gr=()=>{},U0=/\/$/,V0=t=>t.replace(U0,"");function Al(t,e,n="/"){let r,s={},a="",l="";const c=e.indexOf("?"),f=e.indexOf("#",c>-1?c:0);return c>-1&&(r=e.slice(0,c),a=e.slice(c+1,f>-1?f:e.length),s=t(a)),f>-1&&(r=r||e.slice(0,f),l=e.slice(f,e.length)),r=q0(r!=null?r:e,n),{fullPath:r+(a&&"?")+a+l,path:r,query:s,hash:l}}function H0(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Qd(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function $0(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&er(e.matched[r],n.matched[s])&&Jd(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function er(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Jd(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!Z0(t[n],e[n]))return!1;return!0}function Z0(t,e){return Array.isArray(t)?tp(t,e):Array.isArray(e)?tp(e,t):t===e}function tp(t,e){return Array.isArray(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function q0(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/");let s=n.length-1,a,l;for(a=0;a<r.length;a++)if(l=r[a],!(s===1||l==="."))if(l==="..")s--;else break;return n.slice(0,s).join("/")+"/"+r.slice(a-(a===r.length?1:0)).join("/")}var Yr;(function(t){t.pop="pop",t.push="push"})(Yr||(Yr={}));var Xr;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Xr||(Xr={}));function W0(t){if(!t)if(tr){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),V0(t)}const K0=/^[^#]+#/;function j0(t,e){return t.replace(K0,"#")+e}function G0(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const Vo=()=>({left:window.pageXOffset,top:window.pageYOffset});function Y0(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=G0(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function ep(t,e){return(history.state?history.state.position-e:-1)+t}const Il=new Map;function X0(t,e){Il.set(t,e)}function Q0(t){const e=Il.get(t);return Il.delete(t),e}let J0=()=>location.protocol+"//"+location.host;function np(t,e){const{pathname:n,search:r,hash:s}=e,a=t.indexOf("#");if(a>-1){let c=s.includes(t.slice(a))?t.slice(a).length:1,f=s.slice(c);return f[0]!=="/"&&(f="/"+f),Qd(f,"")}return Qd(n,t)+r+s}function tx(t,e,n,r){let s=[],a=[],l=null;const c=({state:v})=>{const x=np(t,location),A=n.value,S=e.value;let R=0;if(v){if(n.value=x,e.value=v,l&&l===A){l=null;return}R=S?v.position-S.position:0}else r(x);s.forEach(V=>{V(n.value,A,{delta:R,type:Yr.pop,direction:R?R>0?Xr.forward:Xr.back:Xr.unknown})})};function f(){l=n.value}function p(v){s.push(v);const x=()=>{const A=s.indexOf(v);A>-1&&s.splice(A,1)};return a.push(x),x}function m(){const{history:v}=window;!v.state||v.replaceState(zt({},v.state,{scroll:Vo()}),"")}function _(){for(const v of a)v();a=[],window.removeEventListener("popstate",c),window.removeEventListener("beforeunload",m)}return window.addEventListener("popstate",c),window.addEventListener("beforeunload",m),{pauseListeners:f,listen:p,destroy:_}}function ip(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?Vo():null}}function ex(t){const{history:e,location:n}=window,r={value:np(t,n)},s={value:e.state};s.value||a(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function a(f,p,m){const _=t.indexOf("#"),v=_>-1?(n.host&&document.querySelector("base")?t:t.slice(_))+f:J0()+t+f;try{e[m?"replaceState":"pushState"](p,"",v),s.value=p}catch(x){console.error(x),n[m?"replace":"assign"](v)}}function l(f,p){const m=zt({},e.state,ip(s.value.back,f,s.value.forward,!0),p,{position:s.value.position});a(f,m,!0),r.value=f}function c(f,p){const m=zt({},s.value,e.state,{forward:f,scroll:Vo()});a(m.current,m,!0);const _=zt({},ip(r.value,f,null),{position:m.position+1},p);a(f,_,!1),r.value=f}return{location:r,state:s,push:c,replace:l}}function nx(t){t=W0(t);const e=ex(t),n=tx(t,e.state,e.location,e.replace);function r(a,l=!0){l||n.pauseListeners(),history.go(a)}const s=zt({location:"",base:t,go:r,createHref:j0.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function GS(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),nx(t)}function ix(t){return typeof t=="string"||t&&typeof t=="object"}function rp(t){return typeof t=="string"||typeof t=="symbol"}const Hn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},sp=Ji("nf");var op;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(op||(op={}));function nr(t,e){return zt(new Error,{type:t,[sp]:!0},e)}function hi(t,e){return t instanceof Error&&sp in t&&(e==null||!!(t.type&e))}const ap="[^/]+?",rx={sensitive:!1,strict:!1,start:!0,end:!0},sx=/[.+*?^${}()[\]/\\]/g;function ox(t,e){const n=zt({},rx,e),r=[];let s=n.start?"^":"";const a=[];for(const p of t){const m=p.length?[]:[90];n.strict&&!p.length&&(s+="/");for(let _=0;_<p.length;_++){const v=p[_];let x=40+(n.sensitive?.25:0);if(v.type===0)_||(s+="/"),s+=v.value.replace(sx,"\\$&"),x+=40;else if(v.type===1){const{value:A,repeatable:S,optional:R,regexp:V}=v;a.push({name:A,repeatable:S,optional:R});const G=V||ap;if(G!==ap){x+=10;try{new RegExp(`(${G})`)}catch(ot){throw new Error(`Invalid custom RegExp for param "${A}" (${G}): `+ot.message)}}let J=S?`((?:${G})(?:/(?:${G}))*)`:`(${G})`;_||(J=R&&p.length<2?`(?:/${J})`:"/"+J),R&&(J+="?"),s+=J,x+=20,R&&(x+=-8),S&&(x+=-20),G===".*"&&(x+=-50)}m.push(x)}r.push(m)}if(n.strict&&n.end){const p=r.length-1;r[p][r[p].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&(s+="(?:/|$)");const l=new RegExp(s,n.sensitive?"":"i");function c(p){const m=p.match(l),_={};if(!m)return null;for(let v=1;v<m.length;v++){const x=m[v]||"",A=a[v-1];_[A.name]=x&&A.repeatable?x.split("/"):x}return _}function f(p){let m="",_=!1;for(const v of t){(!_||!m.endsWith("/"))&&(m+="/"),_=!1;for(const x of v)if(x.type===0)m+=x.value;else if(x.type===1){const{value:A,repeatable:S,optional:R}=x,V=A in p?p[A]:"";if(Array.isArray(V)&&!S)throw new Error(`Provided param "${A}" is an array but it is not repeatable (* or + modifiers)`);const G=Array.isArray(V)?V.join("/"):V;if(!G)if(R)v.length<2&&(m.endsWith("/")?m=m.slice(0,-1):_=!0);else throw new Error(`Missing required param "${A}"`);m+=G}}return m}return{re:l,score:r,keys:a,parse:c,stringify:f}}function ax(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===40+40?-1:1:t.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function ux(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const a=ax(r[n],s[n]);if(a)return a;n++}return s.length-r.length}const lx={type:0,value:""},cx=/[a-zA-Z0-9_]/;function hx(t){if(!t)return[[]];if(t==="/")return[[lx]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(x){throw new Error(`ERR (${n})/"${p}": ${x}`)}let n=0,r=n;const s=[];let a;function l(){a&&s.push(a),a=[]}let c=0,f,p="",m="";function _(){!p||(n===0?a.push({type:0,value:p}):n===1||n===2||n===3?(a.length>1&&(f==="*"||f==="+")&&e(`A repeatable param (${p}) must be alone in its segment. eg: '/:ids+.`),a.push({type:1,value:p,regexp:m,repeatable:f==="*"||f==="+",optional:f==="*"||f==="?"})):e("Invalid state to consume buffer"),p="")}function v(){p+=f}for(;c<t.length;){if(f=t[c++],f==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:f==="/"?(p&&_(),l()):f===":"?(_(),n=1):v();break;case 4:v(),n=r;break;case 1:f==="("?n=2:cx.test(f)?v():(_(),n=0,f!=="*"&&f!=="?"&&f!=="+"&&c--);break;case 2:f===")"?m[m.length-1]=="\\"?m=m.slice(0,-1)+f:n=3:m+=f;break;case 3:_(),n=0,f!=="*"&&f!=="?"&&f!=="+"&&c--,m="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${p}"`),_(),l(),s}function fx(t,e,n){const r=ox(hx(t.path),n),s=zt(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function dx(t,e){const n=[],r=new Map;e=lp({strict:!1,end:!0,sensitive:!1},e);function s(m){return r.get(m)}function a(m,_,v){const x=!v,A=mx(m);A.aliasOf=v&&v.record;const S=lp(e,m),R=[A];if("alias"in m){const J=typeof m.alias=="string"?[m.alias]:m.alias;for(const ot of J)R.push(zt({},A,{components:v?v.record.components:A.components,path:ot,aliasOf:v?v.record:A}))}let V,G;for(const J of R){const{path:ot}=J;if(_&&ot[0]!=="/"){const It=_.record.path,Ht=It[It.length-1]==="/"?"":"/";J.path=_.record.path+(ot&&Ht+ot)}if(V=fx(J,_,S),v?v.alias.push(V):(G=G||V,G!==V&&G.alias.push(V),x&&m.name&&!up(V)&&l(m.name)),"children"in A){const It=A.children;for(let Ht=0;Ht<It.length;Ht++)a(It[Ht],V,v&&v.children[Ht])}v=v||V,f(V)}return G?()=>{l(G)}:Gr}function l(m){if(rp(m)){const _=r.get(m);_&&(r.delete(m),n.splice(n.indexOf(_),1),_.children.forEach(l),_.alias.forEach(l))}else{const _=n.indexOf(m);_>-1&&(n.splice(_,1),m.record.name&&r.delete(m.record.name),m.children.forEach(l),m.alias.forEach(l))}}function c(){return n}function f(m){let _=0;for(;_<n.length&&ux(m,n[_])>=0;)_++;n.splice(_,0,m),m.record.name&&!up(m)&&r.set(m.record.name,m)}function p(m,_){let v,x={},A,S;if("name"in m&&m.name){if(v=r.get(m.name),!v)throw nr(1,{location:m});S=v.record.name,x=zt(px(_.params,v.keys.filter(G=>!G.optional).map(G=>G.name)),m.params),A=v.stringify(x)}else if("path"in m)A=m.path,v=n.find(G=>G.re.test(A)),v&&(x=v.parse(A),S=v.record.name);else{if(v=_.name?r.get(_.name):n.find(G=>G.re.test(_.path)),!v)throw nr(1,{location:m,currentLocation:_});S=v.record.name,x=zt({},_.params,m.params),A=v.stringify(x)}const R=[];let V=v;for(;V;)R.unshift(V.record),V=V.parent;return{name:S,path:A,params:x,matched:R,meta:_x(R)}}return t.forEach(m=>a(m)),{addRoute:a,resolve:p,removeRoute:l,getRoutes:c,getRecordMatcher:s}}function px(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function mx(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:gx(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||{}:{default:t.component}}}function gx(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="boolean"?n:n[r];return e}function up(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function _x(t){return t.reduce((e,n)=>zt(e,n.meta),{})}function lp(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}const cp=/#/g,vx=/&/g,yx=/\//g,wx=/=/g,xx=/\?/g,hp=/\+/g,Ex=/%5B/g,Tx=/%5D/g,fp=/%5E/g,bx=/%60/g,dp=/%7B/g,Px=/%7C/g,pp=/%7D/g,Ax=/%20/g;function Sl(t){return encodeURI(""+t).replace(Px,"|").replace(Ex,"[").replace(Tx,"]")}function Ix(t){return Sl(t).replace(dp,"{").replace(pp,"}").replace(fp,"^")}function Cl(t){return Sl(t).replace(hp,"%2B").replace(Ax,"+").replace(cp,"%23").replace(vx,"%26").replace(bx,"`").replace(dp,"{").replace(pp,"}").replace(fp,"^")}function Sx(t){return Cl(t).replace(wx,"%3D")}function Cx(t){return Sl(t).replace(cp,"%23").replace(xx,"%3F")}function Lx(t){return t==null?"":Cx(t).replace(yx,"%2F")}function Ho(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function Nx(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<r.length;++s){const a=r[s].replace(hp," "),l=a.indexOf("="),c=Ho(l<0?a:a.slice(0,l)),f=l<0?null:Ho(a.slice(l+1));if(c in e){let p=e[c];Array.isArray(p)||(p=e[c]=[p]),p.push(f)}else e[c]=f}return e}function mp(t){let e="";for(let n in t){const r=t[n];if(n=Sx(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(Array.isArray(r)?r.map(a=>a&&Cl(a)):[r&&Cl(r)]).forEach(a=>{a!==void 0&&(e+=(e.length?"&":"")+n,a!=null&&(e+="="+a))})}return e}function Mx(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=Array.isArray(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}function Qr(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t,reset:n}}function $n(t,e,n,r,s){const a=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((l,c)=>{const f=_=>{_===!1?c(nr(4,{from:n,to:e})):_ instanceof Error?c(_):ix(_)?c(nr(2,{from:e,to:_})):(a&&r.enterCallbacks[s]===a&&typeof _=="function"&&a.push(_),l())},p=t.call(r&&r.instances[s],e,n,f);let m=Promise.resolve(p);t.length<3&&(m=m.then(f)),m.catch(_=>c(_))})}function Ll(t,e,n,r){const s=[];for(const a of t)for(const l in a.components){let c=a.components[l];if(!(e!=="beforeRouteEnter"&&!a.instances[l]))if(kx(c)){const p=(c.__vccOpts||c)[e];p&&s.push($n(p,n,r,a,l))}else{let f=c();s.push(()=>f.then(p=>{if(!p)return Promise.reject(new Error(`Couldn't resolve component "${l}" at "${a.path}"`));const m=F0(p)?p.default:p;a.components[l]=m;const v=(m.__vccOpts||m)[e];return v&&$n(v,n,r,a,l)()}))}}return s}function kx(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function gp(t){const e=En(El),n=En(Tl),r=on(()=>e.resolve($r(t.to))),s=on(()=>{const{matched:f}=r.value,{length:p}=f,m=f[p-1],_=n.matched;if(!m||!_.length)return-1;const v=_.findIndex(er.bind(null,m));if(v>-1)return v;const x=_p(f[p-2]);return p>1&&_p(m)===x&&_[_.length-1].path!==x?_.findIndex(er.bind(null,f[p-2])):v}),a=on(()=>s.value>-1&&Bx(n.params,r.value.params)),l=on(()=>s.value>-1&&s.value===n.matched.length-1&&Jd(n.params,r.value.params));function c(f={}){return Dx(f)?e[$r(t.replace)?"replace":"push"]($r(t.to)).catch(Gr):Promise.resolve()}return{route:r,href:on(()=>r.value.href),isActive:a,isExactActive:l,navigate:c}}const Rx=ed({name:"RouterLink",props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:gp,setup(t,{slots:e}){const n=Vr(gp(t)),{options:r}=En(El),s=on(()=>({[vp(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[vp(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const a=e.default&&e.default(n);return t.custom?a:Vd("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},a)}}}),Ox=Rx;function Dx(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function Bx(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!Array.isArray(s)||s.length!==r.length||r.some((a,l)=>a!==s[l]))return!1}return!0}function _p(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const vp=(t,e,n)=>t!=null?t:e!=null?e:n,zx=ed({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},setup(t,{attrs:e,slots:n}){const r=En(bl),s=on(()=>t.route||r.value),a=En(Xd,0),l=on(()=>s.value.matched[a]);Io(Xd,a+1),Io(z0,l),Io(bl,s);const c=ew();return Fo(()=>[c.value,l.value,t.name],([f,p,m],[_,v,x])=>{p&&(p.instances[m]=f,v&&v!==p&&f&&f===_&&(p.leaveGuards.size||(p.leaveGuards=v.leaveGuards),p.updateGuards.size||(p.updateGuards=v.updateGuards))),f&&p&&(!v||!er(p,v)||!_)&&(p.enterCallbacks[m]||[]).forEach(A=>A(f))},{flush:"post"}),()=>{const f=s.value,p=l.value,m=p&&p.components[t.name],_=t.name;if(!m)return yp(n.default,{Component:m,route:f});const v=p.props[t.name],x=v?v===!0?f.params:typeof v=="function"?v(f):v:null,S=Vd(m,zt({},x,e,{onVnodeUnmounted:R=>{R.component.isUnmounted&&(p.instances[_]=null)},ref:c}));return yp(n.default,{Component:S,route:f})||S}}});function yp(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const Fx=zx;function YS(t){const e=dx(t.routes,t),n=t.parseQuery||Nx,r=t.stringifyQuery||mp,s=t.history,a=Qr(),l=Qr(),c=Qr(),f=nw(Hn);let p=Hn;tr&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const m=Pl.bind(null,I=>""+I),_=Pl.bind(null,Lx),v=Pl.bind(null,Ho);function x(I,U){let D,K;return rp(I)?(D=e.getRecordMatcher(I),K=U):K=I,e.addRoute(K,D)}function A(I){const U=e.getRecordMatcher(I);U&&e.removeRoute(U)}function S(){return e.getRoutes().map(I=>I.record)}function R(I){return!!e.getRecordMatcher(I)}function V(I,U){if(U=zt({},U||f.value),typeof I=="string"){const rt=Al(n,I,U.path),y=e.resolve({path:rt.path},U),E=s.createHref(rt.fullPath);return zt(rt,y,{params:v(y.params),hash:Ho(rt.hash),redirectedFrom:void 0,href:E})}let D;if("path"in I)D=zt({},I,{path:Al(n,I.path,U.path).path});else{const rt=zt({},I.params);for(const y in rt)rt[y]==null&&delete rt[y];D=zt({},I,{params:_(I.params)}),U.params=_(U.params)}const K=e.resolve(D,U),Lt=I.hash||"";K.params=m(v(K.params));const Nt=H0(r,zt({},I,{hash:Ix(Lt),path:K.path})),ut=s.createHref(Nt);return zt({fullPath:Nt,hash:Lt,query:r===mp?Mx(I.query):I.query||{}},K,{redirectedFrom:void 0,href:ut})}function G(I){return typeof I=="string"?Al(n,I,f.value.path):zt({},I)}function J(I,U){if(p!==I)return nr(8,{from:U,to:I})}function ot(I){return mt(I)}function It(I){return ot(zt(G(I),{replace:!0}))}function Ht(I){const U=I.matched[I.matched.length-1];if(U&&U.redirect){const{redirect:D}=U;let K=typeof D=="function"?D(I):D;return typeof K=="string"&&(K=K.includes("?")||K.includes("#")?K=G(K):{path:K},K.params={}),zt({query:I.query,hash:I.hash,params:I.params},K)}}function mt(I,U){const D=p=V(I),K=f.value,Lt=I.state,Nt=I.force,ut=I.replace===!0,rt=Ht(D);if(rt)return mt(zt(G(rt),{state:Lt,force:Nt,replace:ut}),U||D);const y=D;y.redirectedFrom=U;let E;return!Nt&&$0(r,K,D)&&(E=nr(16,{to:y,from:K}),ct(K,K,!0,!1)),(E?Promise.resolve(E):Ft(y,K)).catch(b=>hi(b)?b:xt(b,y,K)).then(b=>{if(b){if(hi(b,2))return mt(zt(G(b.to),{state:Lt,force:Nt,replace:ut}),U||y)}else b=_t(y,K,!0,ut,Lt);return ue(y,K,b),b})}function Kt(I,U){const D=J(I,U);return D?Promise.reject(D):Promise.resolve()}function Ft(I,U){let D;const[K,Lt,Nt]=Ux(I,U);D=Ll(K.reverse(),"beforeRouteLeave",I,U);for(const rt of K)rt.leaveGuards.forEach(y=>{D.push($n(y,I,U))});const ut=Kt.bind(null,I,U);return D.push(ut),ir(D).then(()=>{D=[];for(const rt of a.list())D.push($n(rt,I,U));return D.push(ut),ir(D)}).then(()=>{D=Ll(Lt,"beforeRouteUpdate",I,U);for(const rt of Lt)rt.updateGuards.forEach(y=>{D.push($n(y,I,U))});return D.push(ut),ir(D)}).then(()=>{D=[];for(const rt of I.matched)if(rt.beforeEnter&&!U.matched.includes(rt))if(Array.isArray(rt.beforeEnter))for(const y of rt.beforeEnter)D.push($n(y,I,U));else D.push($n(rt.beforeEnter,I,U));return D.push(ut),ir(D)}).then(()=>(I.matched.forEach(rt=>rt.enterCallbacks={}),D=Ll(Nt,"beforeRouteEnter",I,U),D.push(ut),ir(D))).then(()=>{D=[];for(const rt of l.list())D.push($n(rt,I,U));return D.push(ut),ir(D)}).catch(rt=>hi(rt,8)?rt:Promise.reject(rt))}function ue(I,U,D){for(const K of c.list())K(I,U,D)}function _t(I,U,D,K,Lt){const Nt=J(I,U);if(Nt)return Nt;const ut=U===Hn,rt=tr?history.state:{};D&&(K||ut?s.replace(I.fullPath,zt({scroll:ut&&rt&&rt.scroll},Lt)):s.push(I.fullPath,Lt)),f.value=I,ct(I,U,D,ut),Ee()}let Ct;function Qe(){Ct=s.listen((I,U,D)=>{const K=V(I),Lt=Ht(K);if(Lt){mt(zt(Lt,{replace:!0}),K).catch(Gr);return}p=K;const Nt=f.value;tr&&X0(ep(Nt.fullPath,D.delta),Vo()),Ft(K,Nt).catch(ut=>hi(ut,4|8)?ut:hi(ut,2)?(mt(ut.to,K).then(rt=>{hi(rt,4|16)&&!D.delta&&D.type===Yr.pop&&s.go(-1,!1)}).catch(Gr),Promise.reject()):(D.delta&&s.go(-D.delta,!1),xt(ut,K,Nt))).then(ut=>{ut=ut||_t(K,Nt,!1),ut&&(D.delta?s.go(-D.delta,!1):D.type===Yr.pop&&hi(ut,4|16)&&s.go(-1,!1)),ue(K,Nt,ut)}).catch(Gr)})}let ge=Qr(),Ln=Qr(),vt;function xt(I,U,D){Ee(I);const K=Ln.list();return K.length?K.forEach(Lt=>Lt(I,U,D)):console.error(I),Promise.reject(I)}function $(){return vt&&f.value!==Hn?Promise.resolve():new Promise((I,U)=>{ge.add([I,U])})}function Ee(I){vt||(vt=!0,Qe(),ge.list().forEach(([U,D])=>I?D(I):U()),ge.reset())}function ct(I,U,D,K){const{scrollBehavior:Lt}=t;if(!tr||!Lt)return Promise.resolve();const Nt=!D&&Q0(ep(I.fullPath,0))||(K||!D)&&history.state&&history.state.scroll||null;return Md().then(()=>Lt(I,U,Nt)).then(ut=>ut&&Y0(ut)).catch(ut=>xt(ut,I,U))}const yt=I=>s.go(I);let jt;const Bt=new Set;return{currentRoute:f,addRoute:x,removeRoute:A,hasRoute:R,getRoutes:S,resolve:V,options:t,push:ot,replace:It,go:yt,back:()=>yt(-1),forward:()=>yt(1),beforeEach:a.add,beforeResolve:l.add,afterEach:c.add,onError:Ln.add,isReady:$,install(I){const U=this;I.component("RouterLink",Ox),I.component("RouterView",Fx),I.config.globalProperties.$router=U,Object.defineProperty(I.config.globalProperties,"$route",{enumerable:!0,get:()=>$r(f)}),tr&&!jt&&f.value===Hn&&(jt=!0,ot(s.location).catch(Lt=>{}));const D={};for(const Lt in Hn)D[Lt]=on(()=>f.value[Lt]);I.provide(El,U),I.provide(Tl,Vr(D)),I.provide(bl,f);const K=I.unmount;Bt.add(I),I.unmount=function(){Bt.delete(I),Bt.size<1&&(p=Hn,Ct&&Ct(),f.value=Hn,jt=!1,vt=!1),K()}}}}function ir(t){return t.reduce((e,n)=>e.then(()=>n()),Promise.resolve())}function Ux(t,e){const n=[],r=[],s=[],a=Math.max(e.matched.length,t.matched.length);for(let l=0;l<a;l++){const c=e.matched[l];c&&(t.matched.find(p=>er(p,c))?r.push(c):n.push(c));const f=t.matched[l];f&&(e.matched.find(p=>er(p,f))||s.push(f))}return[n,r,s]}function XS(){return En(Tl)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $o(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Hx(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($o())}function $x(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Zx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function qx(){return $o().indexOf("Electron/")>=0}function Wx(){const t=$o();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Kx(){return $o().indexOf("MSAppHost/")>=0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jx="FirebaseError";class Nl extends Error{constructor(e,n,r){super(n);this.code=e,this.customData=r,this.name=jx,Object.setPrototypeOf(this,Nl.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wp.prototype.create)}}class wp{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,a=this.errors[e],l=a?Gx(a,r):"Error",c=`${this.serviceName}: ${l} (${s}).`;return new Nl(s,c,r)}}function Gx(t,e){return t.replace(Yx,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Yx=/\{\$([^}]+)}/g;function Ml(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const a=t[s],l=e[s];if(xp(a)&&xp(l)){if(!Ml(a,l))return!1}else if(a!==l)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function xp(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jr(t){return t&&t._delegate?t._delegate:t}class Zo{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Vx;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Jx(e))try{this.getOrInitializeService({instanceIdentifier:fi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=fi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=fi){return this.instances.has(e)}getOptions(e=fi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);r===c&&l.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),a=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(s,a);const l=this.instances.get(s);return l&&e(l,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(!!r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Qx(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=fi){return this.component?this.component.multipleInstances?e:fi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Qx(t){return t===fi?void 0:t}function Jx(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tE{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Xx(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Mt||(Mt={}));const eE={debug:Mt.DEBUG,verbose:Mt.VERBOSE,info:Mt.INFO,warn:Mt.WARN,error:Mt.ERROR,silent:Mt.SILENT},nE=Mt.INFO,iE={[Mt.DEBUG]:"log",[Mt.VERBOSE]:"log",[Mt.INFO]:"info",[Mt.WARN]:"warn",[Mt.ERROR]:"error"},rE=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=iE[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ep{constructor(e){this.name=e,this._logLevel=nE,this._logHandler=rE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Mt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?eE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Mt.DEBUG,...e),this._logHandler(this,Mt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Mt.VERBOSE,...e),this._logHandler(this,Mt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Mt.INFO,...e),this._logHandler(this,Mt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Mt.WARN,...e),this._logHandler(this,Mt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Mt.ERROR,...e),this._logHandler(this,Mt.ERROR,...e)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(oE(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function oE(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const kl="@firebase/app",Tp="0.7.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rl=new Ep("@firebase/app"),aE="@firebase/app-compat",uE="@firebase/analytics-compat",lE="@firebase/analytics",cE="@firebase/app-check-compat",hE="@firebase/app-check",fE="@firebase/auth",dE="@firebase/auth-compat",pE="@firebase/database",mE="@firebase/database-compat",gE="@firebase/functions",_E="@firebase/functions-compat",vE="@firebase/installations",yE="@firebase/installations-compat",wE="@firebase/messaging",xE="@firebase/messaging-compat",EE="@firebase/performance",TE="@firebase/performance-compat",bE="@firebase/remote-config",PE="@firebase/remote-config-compat",AE="@firebase/storage",IE="@firebase/storage-compat",SE="@firebase/firestore",CE="@firebase/firestore-compat",LE="firebase",NE="9.4.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bp="[DEFAULT]",ME={[kl]:"fire-core",[aE]:"fire-core-compat",[lE]:"fire-analytics",[uE]:"fire-analytics-compat",[hE]:"fire-app-check",[cE]:"fire-app-check-compat",[fE]:"fire-auth",[dE]:"fire-auth-compat",[pE]:"fire-rtdb",[mE]:"fire-rtdb-compat",[gE]:"fire-fn",[_E]:"fire-fn-compat",[vE]:"fire-iid",[yE]:"fire-iid-compat",[wE]:"fire-fcm",[xE]:"fire-fcm-compat",[EE]:"fire-perf",[TE]:"fire-perf-compat",[bE]:"fire-rc",[PE]:"fire-rc-compat",[AE]:"fire-gcs",[IE]:"fire-gcs-compat",[SE]:"fire-fst",[CE]:"fire-fst-compat","fire-js":"fire-js",[LE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qo=new Map,Ol=new Map;function kE(t,e){try{t.container.addComponent(e)}catch(n){Rl.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Dl(t){const e=t.name;if(Ol.has(e))return Rl.debug(`There were multiple attempts to register component ${e}.`),!1;Ol.set(e,t);for(const n of qo.values())kE(n,t);return!0}function RE(t,e){return t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OE={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function."},Wo=new wp("app","Firebase",OE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Zo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Wo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE=NE;function QS(t,e={}){typeof e!="object"&&(e={name:e});const n=Object.assign({name:bp,automaticDataCollectionEnabled:!1},e),r=n.name;if(typeof r!="string"||!r)throw Wo.create("bad-app-name",{appName:String(r)});const s=qo.get(r);if(s){if(Ml(t,s.options)&&Ml(n,s.config))return s;throw Wo.create("duplicate-app",{appName:r})}const a=new tE(r);for(const c of Ol.values())a.addComponent(c);const l=new DE(t,n,a);return qo.set(r,l),l}function zE(t=bp){const e=qo.get(t);if(!e)throw Wo.create("no-app",{appName:t});return e}function rr(t,e,n){var r;let s=(r=ME[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const a=s.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${s}" with version "${e}":`];a&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Rl.warn(c.join(" "));return}Dl(new Zo(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FE(t){Dl(new Zo("platform-logger",e=>new sE(e),"PRIVATE")),rr(kl,Tp,t),rr(kl,Tp,"esm2017"),rr("fire-js","")}FE("");var UE="firebase",VE="9.4.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rr(UE,VE,"app");var HE=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},W,Bl=Bl||{},st=HE||self;function Ko(){}function zl(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function ts(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function $E(t){return Object.prototype.hasOwnProperty.call(t,Fl)&&t[Fl]||(t[Fl]=++ZE)}var Fl="closure_uid_"+(1e9*Math.random()>>>0),ZE=0;function qE(t,e,n){return t.call.apply(t.bind,arguments)}function WE(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),t.apply(e,s)}}return function(){return t.apply(e,arguments)}}function he(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?he=qE:he=WE,he.apply(null,arguments)}function jo(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function fe(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(r,s,a){for(var l=Array(arguments.length-2),c=2;c<arguments.length;c++)l[c-2]=arguments[c];return e.prototype[s].apply(r,l)}}function Zn(){this.s=this.s,this.o=this.o}var KE=0,jE={};Zn.prototype.s=!1;Zn.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),KE!=0)){var t=$E(this);delete jE[t]}};Zn.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Pp=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Ap=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){const r=t.length,s=typeof t=="string"?t.split(""):t;for(let a=0;a<r;a++)a in s&&e.call(n,s[a],a,t)};function GE(t){t:{var e=UT;const n=t.length,r=typeof t=="string"?t.split(""):t;for(let s=0;s<n;s++)if(s in r&&e.call(void 0,r[s],s,t)){e=s;break t}e=-1}return 0>e?null:typeof t=="string"?t.charAt(e):t[e]}function Ip(t){return Array.prototype.concat.apply([],arguments)}function Ul(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function Go(t){return/^[\s\xa0]*$/.test(t)}var Sp=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function be(t,e){return t.indexOf(e)!=-1}function Vl(t,e){return t<e?-1:t>e?1:0}var Pe;t:{var Cp=st.navigator;if(Cp){var Lp=Cp.userAgent;if(Lp){Pe=Lp;break t}}Pe=""}function Hl(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function Np(t){const e={};for(const n in t)e[n]=t[n];return e}var Mp="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function kp(t,e){let n,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(n in r)t[n]=r[n];for(let a=0;a<Mp.length;a++)n=Mp[a],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function $l(t){return $l[" "](t),t}$l[" "]=Ko;function YE(t){var e=JE;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}var XE=be(Pe,"Opera"),sr=be(Pe,"Trident")||be(Pe,"MSIE"),Rp=be(Pe,"Edge"),Zl=Rp||sr,Op=be(Pe,"Gecko")&&!(be(Pe.toLowerCase(),"webkit")&&!be(Pe,"Edge"))&&!(be(Pe,"Trident")||be(Pe,"MSIE"))&&!be(Pe,"Edge"),QE=be(Pe.toLowerCase(),"webkit")&&!be(Pe,"Edge");function Dp(){var t=st.document;return t?t.documentMode:void 0}var Yo;t:{var ql="",Wl=function(){var t=Pe;if(Op)return/rv:([^\);]+)(\)|;)/.exec(t);if(Rp)return/Edge\/([\d\.]+)/.exec(t);if(sr)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(QE)return/WebKit\/(\S+)/.exec(t);if(XE)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Wl&&(ql=Wl?Wl[1]:""),sr){var Kl=Dp();if(Kl!=null&&Kl>parseFloat(ql)){Yo=String(Kl);break t}}Yo=ql}var JE={};function tT(){return YE(function(){let t=0;const e=Sp(String(Yo)).split("."),n=Sp("9").split("."),r=Math.max(e.length,n.length);for(let l=0;t==0&&l<r;l++){var s=e[l]||"",a=n[l]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s[0].length==0&&a[0].length==0)break;t=Vl(s[1].length==0?0:parseInt(s[1],10),a[1].length==0?0:parseInt(a[1],10))||Vl(s[2].length==0,a[2].length==0)||Vl(s[2],a[2]),s=s[3],a=a[3]}while(t==0)}return 0<=t})}var jl;if(st.document&&sr){var Bp=Dp();jl=Bp||parseInt(Yo,10)||void 0}else jl=void 0;var eT=jl,nT=function(){if(!st.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{st.addEventListener("test",Ko,e),st.removeEventListener("test",Ko,e)}catch{}return t}();function ye(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}ye.prototype.h=function(){this.defaultPrevented=!0};function es(t,e){if(ye.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Op){t:{try{$l(e.nodeName);var s=!0;break t}catch{}s=!1}s||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:iT[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&es.Z.h.call(this)}}fe(es,ye);var iT={2:"touch",3:"pen",4:"mouse"};es.prototype.h=function(){es.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var ns="closure_listenable_"+(1e6*Math.random()|0),rT=0;function sT(t,e,n,r,s){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=s,this.key=++rT,this.ca=this.fa=!1}function Xo(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function Qo(t){this.src=t,this.g={},this.h=0}Qo.prototype.add=function(t,e,n,r,s){var a=t.toString();t=this.g[a],t||(t=this.g[a]=[],this.h++);var l=Yl(t,e,r,s);return-1<l?(e=t[l],n||(e.fa=!1)):(e=new sT(e,this.src,a,!!r,s),e.fa=n,t.push(e)),e};function Gl(t,e){var n=e.type;if(n in t.g){var r=t.g[n],s=Pp(r,e),a;(a=0<=s)&&Array.prototype.splice.call(r,s,1),a&&(Xo(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Yl(t,e,n,r){for(var s=0;s<t.length;++s){var a=t[s];if(!a.ca&&a.listener==e&&a.capture==!!n&&a.ia==r)return s}return-1}var Xl="closure_lm_"+(1e6*Math.random()|0),Ql={};function zp(t,e,n,r,s){if(r&&r.once)return Up(t,e,n,r,s);if(Array.isArray(e)){for(var a=0;a<e.length;a++)zp(t,e[a],n,r,s);return null}return n=nc(n),t&&t[ns]?t.N(e,n,ts(r)?!!r.capture:!!r,s):Fp(t,e,n,!1,r,s)}function Fp(t,e,n,r,s,a){if(!e)throw Error("Invalid event type");var l=ts(s)?!!s.capture:!!s,c=tc(t);if(c||(t[Xl]=c=new Qo(t)),n=c.add(e,n,r,l,a),n.proxy)return n;if(r=oT(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)nT||(s=l),s===void 0&&(s=!1),t.addEventListener(e.toString(),r,s);else if(t.attachEvent)t.attachEvent(Hp(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function oT(){function t(n){return e.call(t.src,t.listener,n)}var e=aT;return t}function Up(t,e,n,r,s){if(Array.isArray(e)){for(var a=0;a<e.length;a++)Up(t,e[a],n,r,s);return null}return n=nc(n),t&&t[ns]?t.O(e,n,ts(r)?!!r.capture:!!r,s):Fp(t,e,n,!0,r,s)}function Vp(t,e,n,r,s){if(Array.isArray(e))for(var a=0;a<e.length;a++)Vp(t,e[a],n,r,s);else r=ts(r)?!!r.capture:!!r,n=nc(n),t&&t[ns]?(t=t.i,e=String(e).toString(),e in t.g&&(a=t.g[e],n=Yl(a,n,r,s),-1<n&&(Xo(a[n]),Array.prototype.splice.call(a,n,1),a.length==0&&(delete t.g[e],t.h--)))):t&&(t=tc(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Yl(e,n,r,s)),(n=-1<t?e[t]:null)&&Jl(n))}function Jl(t){if(typeof t!="number"&&t&&!t.ca){var e=t.src;if(e&&e[ns])Gl(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Hp(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=tc(e))?(Gl(n,t),n.h==0&&(n.src=null,e[Xl]=null)):Xo(t)}}}function Hp(t){return t in Ql?Ql[t]:Ql[t]="on"+t}function aT(t,e){if(t.ca)t=!0;else{e=new es(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&Jl(t),t=n.call(r,e)}return t}function tc(t){return t=t[Xl],t instanceof Qo?t:null}var ec="__closure_events_fn_"+(1e9*Math.random()>>>0);function nc(t){return typeof t=="function"?t:(t[ec]||(t[ec]=function(e){return t.handleEvent(e)}),t[ec])}function oe(){Zn.call(this),this.i=new Qo(this),this.P=this,this.I=null}fe(oe,Zn);oe.prototype[ns]=!0;oe.prototype.removeEventListener=function(t,e,n,r){Vp(this,t,e,n,r)};function de(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,typeof e=="string")e=new ye(e,t);else if(e instanceof ye)e.target=e.target||t;else{var s=e;e=new ye(r,t),kp(e,s)}if(s=!0,n)for(var a=n.length-1;0<=a;a--){var l=e.g=n[a];s=Jo(l,r,!0,e)&&s}if(l=e.g=t,s=Jo(l,r,!0,e)&&s,s=Jo(l,r,!1,e)&&s,n)for(a=0;a<n.length;a++)l=e.g=n[a],s=Jo(l,r,!1,e)&&s}oe.prototype.M=function(){if(oe.Z.M.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Xo(n[r]);delete t.g[e],t.h--}}this.I=null};oe.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};oe.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Jo(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,a=0;a<e.length;++a){var l=e[a];if(l&&!l.ca&&l.capture==n){var c=l.listener,f=l.ia||l.src;l.fa&&Gl(t.i,l),s=c.call(f,r)!==!1&&s}}return s&&!r.defaultPrevented}var ic=st.JSON.stringify;function uT(){var t=Zp;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class lT{constructor(){this.h=this.g=null}add(e,n){const r=$p.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var $p=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new cT,t=>t.reset());class cT{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function hT(t){st.setTimeout(()=>{throw t},0)}function rc(t,e){sc||fT(),oc||(sc(),oc=!0),Zp.add(t,e)}var sc;function fT(){var t=st.Promise.resolve(void 0);sc=function(){t.then(dT)}}var oc=!1,Zp=new lT;function dT(){for(var t;t=uT();){try{t.h.call(t.g)}catch(n){hT(n)}var e=$p;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}oc=!1}function ta(t,e){oe.call(this),this.h=t||1,this.g=e||st,this.j=he(this.kb,this),this.l=Date.now()}fe(ta,oe);W=ta.prototype;W.da=!1;W.S=null;W.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),de(this,"tick"),this.da&&(ac(this),this.start()))}};W.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function ac(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}W.M=function(){ta.Z.M.call(this),ac(this),delete this.g};function uc(t,e,n){if(typeof t=="function")n&&(t=he(t,n));else if(t&&typeof t.handleEvent=="function")t=he(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:st.setTimeout(t,e||0)}function qp(t){t.g=uc(()=>{t.g=null,t.i&&(t.i=!1,qp(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class pT extends Zn{constructor(e,n){super();this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:qp(this)}M(){super.M(),this.g&&(st.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function is(t){Zn.call(this),this.h=t,this.g={}}fe(is,Zn);var Wp=[];function Kp(t,e,n,r){Array.isArray(n)||(n&&(Wp[0]=n.toString()),n=Wp);for(var s=0;s<n.length;s++){var a=zp(e,n[s],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}}function jp(t){Hl(t.g,function(e,n){this.g.hasOwnProperty(n)&&Jl(e)},t),t.g={}}is.prototype.M=function(){is.Z.M.call(this),jp(this)};is.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function ea(){this.g=!0}ea.prototype.Aa=function(){this.g=!1};function mT(t,e,n,r,s,a){t.info(function(){if(t.g)if(a)for(var l="",c=a.split("&"),f=0;f<c.length;f++){var p=c[f].split("=");if(1<p.length){var m=p[0];p=p[1];var _=m.split("_");l=2<=_.length&&_[1]=="type"?l+(m+"="+p+"&"):l+(m+"=redacted&")}}else l=null;else l=a;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+`
`+n+`
`+l})}function gT(t,e,n,r,s,a,l){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+`
`+n+`
`+a+" "+l})}function or(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+vT(t,n)+(r?" "+r:"")})}function _T(t,e){t.info(function(){return"TIMEOUT: "+e})}ea.prototype.info=function(){};function vT(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var a=s[0];if(a!="noop"&&a!="stop"&&a!="close")for(var l=1;l<s.length;l++)s[l]=""}}}}return ic(n)}catch{return e}}var di={},Gp=null;function na(){return Gp=Gp||new oe}di.Ma="serverreachability";function Yp(t){ye.call(this,di.Ma,t)}fe(Yp,ye);function rs(t){const e=na();de(e,new Yp(e,t))}di.STAT_EVENT="statevent";function Xp(t,e){ye.call(this,di.STAT_EVENT,t),this.stat=e}fe(Xp,ye);function Ae(t){const e=na();de(e,new Xp(e,t))}di.Na="timingevent";function Qp(t,e){ye.call(this,di.Na,t),this.size=e}fe(Qp,ye);function ss(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return st.setTimeout(function(){t()},e)}var ia={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Jp={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function lc(){}lc.prototype.h=null;function tm(t){return t.h||(t.h=t.i())}function em(){}var os={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function cc(){ye.call(this,"d")}fe(cc,ye);function hc(){ye.call(this,"c")}fe(hc,ye);var fc;function ra(){}fe(ra,lc);ra.prototype.g=function(){return new XMLHttpRequest};ra.prototype.i=function(){return{}};fc=new ra;function as(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new is(this),this.P=yT,t=Zl?125:void 0,this.W=new ta(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new nm}function nm(){this.i=null,this.g="",this.h=!1}var yT=45e3,dc={},sa={};W=as.prototype;W.setTimeout=function(t){this.P=t};function pc(t,e,n){t.K=1,t.v=ca(Pn(e)),t.s=n,t.U=!0,im(t,null)}function im(t,e){t.F=Date.now(),us(t),t.A=Pn(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),fm(n.h,"t",r),t.C=0,n=t.l.H,t.h=new nm,t.g=Om(t.l,n?e:null,!t.s),0<t.O&&(t.L=new pT(he(t.Ia,t,t.g),t.O)),Kp(t.V,t.g,"readystatechange",t.gb),e=t.H?Np(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),rs(1),mT(t.j,t.u,t.A,t.m,t.X,t.s)}W.gb=function(t){t=t.target;const e=this.L;e&&An(t)==3?e.l():this.Ia(t)};W.Ia=function(t){try{if(t==this.g)t:{const m=An(this.g);var e=this.g.Da();const _=this.g.ba();if(!(3>m)&&(m!=3||Zl||this.g&&(this.h.h||this.g.ga()||bm(this.g)))){this.I||m!=4||e==7||(e==8||0>=_?rs(3):rs(2)),oa(this);var n=this.g.ba();this.N=n;e:if(rm(this)){var r=bm(this.g);t="";var s=r.length,a=An(this.g)==4;if(!this.h.i){if(typeof TextDecoder=="undefined"){pi(this),ls(this);var l="";break e}this.h.i=new st.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:a&&e==s-1});r.splice(0,s),this.h.g+=t,this.C=0,l=this.h.g}else l=this.g.ga();if(this.i=n==200,gT(this.j,this.u,this.A,this.m,this.X,m,n),this.i){if(this.$&&!this.J){e:{if(this.g){var c,f=this.g;if((c=f.g?f.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Go(c)){var p=c;break e}}p=null}if(n=p)or(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,mc(this,n);else{this.i=!1,this.o=3,Ae(12),pi(this),ls(this);break t}}this.U?(sm(this,m,l),Zl&&this.i&&m==3&&(Kp(this.V,this.W,"tick",this.fb),this.W.start())):(or(this.j,this.m,l,null),mc(this,l)),m==4&&pi(this),this.i&&!this.I&&(m==4?Nm(this.l,this):(this.i=!1,us(this)))}else n==400&&0<l.indexOf("Unknown SID")?(this.o=3,Ae(12)):(this.o=0,Ae(13)),pi(this),ls(this)}}}catch{}finally{}};function rm(t){return t.g?t.u=="GET"&&t.K!=2&&t.l.Ba:!1}function sm(t,e,n){let r=!0,s;for(;!t.I&&t.C<n.length;)if(s=wT(t,n),s==sa){e==4&&(t.o=4,Ae(14),r=!1),or(t.j,t.m,null,"[Incomplete Response]");break}else if(s==dc){t.o=4,Ae(15),or(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else or(t.j,t.m,s,null),mc(t,s);rm(t)&&s!=sa&&s!=dc&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,Ae(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.aa&&(t.aa=!0,e=t.l,e.g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ac(e),e.L=!0,Ae(11))):(or(t.j,t.m,n,"[Invalid Chunked Response]"),pi(t),ls(t))}W.fb=function(){if(this.g){var t=An(this.g),e=this.g.ga();this.C<e.length&&(oa(this),sm(this,t,e),this.i&&t!=4&&us(this))}};function wT(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?sa:(n=Number(e.substring(n,r)),isNaN(n)?dc:(r+=1,r+n>e.length?sa:(e=e.substr(r,n),t.C=r+n,e)))}W.cancel=function(){this.I=!0,pi(this)};function us(t){t.Y=Date.now()+t.P,om(t,t.P)}function om(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=ss(he(t.eb,t),e)}function oa(t){t.B&&(st.clearTimeout(t.B),t.B=null)}W.eb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(_T(this.j,this.A),this.K!=2&&(rs(3),Ae(17)),pi(this),this.o=2,ls(this)):om(this,this.Y-t)};function ls(t){t.l.G==0||t.I||Nm(t.l,t)}function pi(t){oa(t);var e=t.L;e&&typeof e.na=="function"&&e.na(),t.L=null,ac(t.W),jp(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function mc(t,e){try{var n=t.l;if(n.G!=0&&(n.g==t||vc(n.i,t))){if(n.I=t.N,!t.J&&vc(n.i,t)&&n.G==3){try{var r=n.Ca.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0)t:if(!n.u){if(n.g)if(n.g.F+3e3<t.F)ga(n),pa(n);else break t;Pc(n),Ae(18)}else n.ta=s[1],0<n.ta-n.U&&37500>s[2]&&n.N&&n.A==0&&!n.v&&(n.v=ss(he(n.ab,n),6e3));if(1>=mm(n.i)&&n.ka){try{n.ka()}catch{}n.ka=void 0}}else _i(n,11)}else if((t.J||n.g==t)&&ga(n),!Go(e))for(s=n.Ca.g.parse(e),e=0;e<s.length;e++){let p=s[e];if(n.U=p[0],p=p[1],n.G==2)if(p[0]=="c"){n.J=p[1],n.la=p[2];const m=p[3];m!=null&&(n.ma=m,n.h.info("VER="+n.ma));const _=p[4];_!=null&&(n.za=_,n.h.info("SVER="+n.za));const v=p[5];v!=null&&typeof v=="number"&&0<v&&(r=1.5*v,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;const x=t.g;if(x){const A=x.g?x.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(A){var a=r.i;!a.g&&(be(A,"spdy")||be(A,"quic")||be(A,"h2"))&&(a.j=a.l,a.g=new Set,a.h&&(yc(a,a.h),a.h=null))}if(r.D){const S=x.g?x.g.getResponseHeader("X-HTTP-Session-Id"):null;S&&(r.sa=S,$t(r.F,r.D,S))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms")),r=n;var l=t;if(r.oa=Rm(r,r.H?r.la:null,r.W),l.J){gm(r.i,l);var c=l,f=r.K;f&&c.setTimeout(f),c.B&&(oa(c),us(c)),r.g=l}else Cm(r);0<n.l.length&&ma(n)}else p[0]!="stop"&&p[0]!="close"||_i(n,7);else n.G==3&&(p[0]=="stop"||p[0]=="close"?p[0]=="stop"?_i(n,7):Tc(n):p[0]!="noop"&&n.j&&n.j.wa(p),n.A=0)}}rs(4)}catch{}}function xT(t){if(t.R&&typeof t.R=="function")return t.R();if(typeof t=="string")return t.split("");if(zl(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function gc(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(zl(t)||typeof t=="string")Ap(t,e,void 0);else{if(t.T&&typeof t.T=="function")var n=t.T();else if(t.R&&typeof t.R=="function")n=void 0;else if(zl(t)||typeof t=="string"){n=[];for(var r=t.length,s=0;s<r;s++)n.push(s)}else for(s in n=[],r=0,t)n[r++]=s;r=xT(t),s=r.length;for(var a=0;a<s;a++)e.call(void 0,r[a],n&&n[a],t)}}function ar(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof ar)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}W=ar.prototype;W.R=function(){_c(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t};W.T=function(){return _c(this),this.g.concat()};function _c(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];mi(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var s={};for(n=e=0;e<t.g.length;)r=t.g[e],mi(s,r)||(t.g[n++]=r,s[r]=1),e++;t.g.length=n}}W.get=function(t,e){return mi(this.h,t)?this.h[t]:e};W.set=function(t,e){mi(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e};W.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var s=n[r],a=this.get(s);t.call(e,a,s,this)}};function mi(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var am=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ET(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),s=null;if(0<=r){var a=t[n].substring(0,r);s=t[n].substring(r+1)}else a=t[n];e(a,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function gi(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof gi){this.g=e!==void 0?e:t.g,aa(this,t.j),this.s=t.s,ua(this,t.i),la(this,t.m),this.l=t.l,e=t.h;var n=new fs;n.i=e.i,e.g&&(n.g=new ar(e.g),n.h=e.h),um(this,n),this.o=t.o}else t&&(n=String(t).match(am))?(this.g=!!e,aa(this,n[1]||"",!0),this.s=cs(n[2]||""),ua(this,n[3]||"",!0),la(this,n[4]),this.l=cs(n[5]||"",!0),um(this,n[6]||"",!0),this.o=cs(n[7]||"")):(this.g=!!e,this.h=new fs(null,this.g))}gi.prototype.toString=function(){var t=[],e=this.j;e&&t.push(hs(e,lm,!0),":");var n=this.i;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(hs(e,lm,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.i&&n.charAt(0)!="/"&&t.push("/"),t.push(hs(n,n.charAt(0)=="/"?IT:AT,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",hs(n,CT)),t.join("")};function Pn(t){return new gi(t)}function aa(t,e,n){t.j=n?cs(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function ua(t,e,n){t.i=n?cs(e,!0):e}function la(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function um(t,e,n){e instanceof fs?(t.h=e,LT(t.h,t.g)):(n||(e=hs(e,ST)),t.h=new fs(e,t.g))}function $t(t,e,n){t.h.set(e,n)}function ca(t){return $t(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function TT(t){return t instanceof gi?Pn(t):new gi(t,void 0)}function bT(t,e,n,r){var s=new gi(null,void 0);return t&&aa(s,t),e&&ua(s,e),n&&la(s,n),r&&(s.l=r),s}function cs(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function hs(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,PT),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function PT(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var lm=/[#\/\?@]/g,AT=/[#\?:]/g,IT=/[#\?]/g,ST=/[#\?@]/g,CT=/#/g;function fs(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function qn(t){t.g||(t.g=new ar,t.h=0,t.i&&ET(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}W=fs.prototype;W.add=function(t,e){qn(this),this.i=null,t=ur(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function cm(t,e){qn(t),e=ur(t,e),mi(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,t=t.g,mi(t.h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&_c(t)))}function hm(t,e){return qn(t),e=ur(t,e),mi(t.g.h,e)}W.forEach=function(t,e){qn(this),this.g.forEach(function(n,r){Ap(n,function(s){t.call(e,s,r,this)},this)},this)};W.T=function(){qn(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var s=t[r],a=0;a<s.length;a++)n.push(e[r]);return n};W.R=function(t){qn(this);var e=[];if(typeof t=="string")hm(this,t)&&(e=Ip(e,this.g.get(ur(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=Ip(e,t[n])}return e};W.set=function(t,e){return qn(this),this.i=null,t=ur(this,t),hm(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};W.get=function(t,e){return t?(t=this.R(t),0<t.length?String(t[0]):e):e};function fm(t,e,n){cm(t,e),0<n.length&&(t.i=null,t.g.set(ur(t,e),Ul(n)),t.h+=n.length)}W.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],s=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var l=s;r[a]!==""&&(l+="="+encodeURIComponent(String(r[a]))),t.push(l)}}return this.i=t.join("&")};function ur(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function LT(t,e){e&&!t.j&&(qn(t),t.i=null,t.g.forEach(function(n,r){var s=r.toLowerCase();r!=s&&(cm(this,r),fm(this,s,n))},t)),t.j=e}var NT=class{constructor(t,e){this.h=t,this.g=e}};function dm(t){this.l=t||MT,st.PerformanceNavigationTiming?(t=st.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(st.g&&st.g.Ea&&st.g.Ea()&&st.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var MT=10;function pm(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function mm(t){return t.h?1:t.g?t.g.size:0}function vc(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function yc(t,e){t.g?t.g.add(e):t.h=e}function gm(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}dm.prototype.cancel=function(){if(this.i=_m(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function _m(t){if(t.h!=null)return t.i.concat(t.h.D);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return Ul(t.i)}function wc(){}wc.prototype.stringify=function(t){return st.JSON.stringify(t,void 0)};wc.prototype.parse=function(t){return st.JSON.parse(t,void 0)};function kT(){this.g=new wc}function RT(t,e,n){const r=n||"";try{gc(t,function(s,a){let l=s;ts(s)&&(l=ic(s)),e.push(r+a+"="+encodeURIComponent(l))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function OT(t,e){const n=new ea;if(st.Image){const r=new Image;r.onload=jo(ha,n,r,"TestLoadImage: loaded",!0,e),r.onerror=jo(ha,n,r,"TestLoadImage: error",!1,e),r.onabort=jo(ha,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=jo(ha,n,r,"TestLoadImage: timeout",!1,e),st.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function ha(t,e,n,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function ds(t){this.l=t.$b||null,this.j=t.ib||!1}fe(ds,lc);ds.prototype.g=function(){return new fa(this.l,this.j)};ds.prototype.i=function(t){return function(){return t}}({});function fa(t,e){oe.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=xc,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}fe(fa,oe);var xc=0;W=fa.prototype;W.open=function(t,e){if(this.readyState!=xc)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,ms(this)};W.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||st).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))};W.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ps(this)),this.readyState=xc};W.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,ms(this)),this.g&&(this.readyState=3,ms(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof st.ReadableStream!="undefined"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;vm(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))};function vm(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}W.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?ps(this):ms(this),this.readyState==3&&vm(this)}};W.Ua=function(t){this.g&&(this.response=this.responseText=t,ps(this))};W.Ta=function(t){this.g&&(this.response=t,ps(this))};W.ha=function(){this.g&&ps(this)};function ps(t){t.readyState=4,t.l=null,t.j=null,t.A=null,ms(t)}W.setRequestHeader=function(t,e){this.v.append(t,e)};W.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};W.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function ms(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(fa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var DT=st.JSON.parse;function te(t){oe.call(this),this.headers=new ar,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ym,this.K=this.L=!1}fe(te,oe);var ym="",BT=/^https?$/i,zT=["POST","PUT"];W=te.prototype;W.ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():fc.g(),this.C=this.u?tm(this.u):tm(fc),this.g.onreadystatechange=he(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(a){wm(this,a);return}t=n||"";const s=new ar(this.headers);r&&gc(r,function(a,l){s.set(l,a)}),r=GE(s.T()),n=st.FormData&&t instanceof st.FormData,!(0<=Pp(zT,e))||r||n||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach(function(a,l){this.g.setRequestHeader(l,a)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Tm(this),0<this.B&&((this.K=FT(this.g))?(this.g.timeout=this.B,this.g.ontimeout=he(this.pa,this)):this.A=uc(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(a){wm(this,a)}};function FT(t){return sr&&tT()&&typeof t.timeout=="number"&&t.ontimeout!==void 0}function UT(t){return t.toLowerCase()=="content-type"}W.pa=function(){typeof Bl!="undefined"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,de(this,"timeout"),this.abort(8))};function wm(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,xm(t),da(t)}function xm(t){t.D||(t.D=!0,de(t,"complete"),de(t,"error"))}W.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,de(this,"complete"),de(this,"abort"),da(this))};W.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),da(this,!0)),te.Z.M.call(this)};W.Fa=function(){this.s||(this.F||this.v||this.l?Em(this):this.cb())};W.cb=function(){Em(this)};function Em(t){if(t.h&&typeof Bl!="undefined"&&(!t.C[1]||An(t)!=4||t.ba()!=2)){if(t.v&&An(t)==4)uc(t.Fa,0,t);else if(de(t,"readystatechange"),An(t)==4){t.h=!1;try{const c=t.ba();t:switch(c){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var n;if(!(n=e)){var r;if(r=c===0){var s=String(t.H).match(am)[1]||null;if(!s&&st.self&&st.self.location){var a=st.self.location.protocol;s=a.substr(0,a.length-1)}r=!BT.test(s?s.toLowerCase():"")}n=r}if(n)de(t,"complete"),de(t,"success");else{t.m=6;try{var l=2<An(t)?t.g.statusText:""}catch{l=""}t.j=l+" ["+t.ba()+"]",xm(t)}}finally{da(t)}}}}function da(t,e){if(t.g){Tm(t);const n=t.g,r=t.C[0]?Ko:null;t.g=null,t.C=null,e||de(t,"ready");try{n.onreadystatechange=r}catch{}}}function Tm(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(st.clearTimeout(t.A),t.A=null)}function An(t){return t.g?t.g.readyState:0}W.ba=function(){try{return 2<An(this)?this.g.status:-1}catch{return-1}};W.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}};W.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),DT(e)}};function bm(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case ym:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}W.Da=function(){return this.m};W.La=function(){return typeof this.j=="string"?this.j:String(this.j)};function VT(t){let e="";return Hl(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function Ec(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=VT(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):$t(t,e,n))}function gs(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Pm(t){this.za=0,this.l=[],this.h=new ea,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=gs("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=gs("baseRetryDelayMs",5e3,t),this.$a=gs("retryDelaySeedMs",1e4,t),this.Ya=gs("forwardChannelMaxRetries",2,t),this.ra=gs("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new dm(t&&t.concurrentRequestLimit),this.Ca=new kT,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||t.Xb!==!1}W=Pm.prototype;W.ma=8;W.G=1;function Tc(t){if(Am(t),t.G==3){var e=t.V++,n=Pn(t.F);$t(n,"SID",t.J),$t(n,"RID",e),$t(n,"TYPE","terminate"),_s(t,n),e=new as(t,t.h,e,void 0),e.K=2,e.v=ca(Pn(n)),n=!1,st.navigator&&st.navigator.sendBeacon&&(n=st.navigator.sendBeacon(e.v.toString(),"")),!n&&st.Image&&(new Image().src=e.v,n=!0),n||(e.g=Om(e.l,null),e.g.ea(e.v)),e.F=Date.now(),us(e)}km(t)}W.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch{}};function pa(t){t.g&&(Ac(t),t.g.cancel(),t.g=null)}function Am(t){pa(t),t.u&&(st.clearTimeout(t.u),t.u=null),ga(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&st.clearTimeout(t.m),t.m=null)}function bc(t,e){t.l.push(new NT(t.Za++,e)),t.G==3&&ma(t)}function ma(t){pm(t.i)||t.m||(t.m=!0,rc(t.Ha,t),t.C=0)}function HT(t,e){return mm(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.l=e.D.concat(t.l),!0):t.G==1||t.G==2||t.C>=(t.Xa?0:t.Ya)?!1:(t.m=ss(he(t.Ha,t,e),Mm(t,t.C)),t.C++,!0)}W.Ha=function(t){if(this.m)if(this.m=null,this.G==1){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;const s=new as(this,this.h,t,void 0);let a=this.s;if(this.P&&(a?(a=Np(a),kp(a,this.P)):a=this.P),this.o===null&&(s.H=a),this.ja)t:{for(var e=0,n=0;n<this.l.length;n++){e:{var r=this.l[n];if("__data__"in r.g&&(r=r.g.__data__,typeof r=="string")){r=r.length;break e}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break t}if(e===4096||n===this.l.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=Sm(this,s,e),n=Pn(this.F),$t(n,"RID",t),$t(n,"CVER",22),this.D&&$t(n,"X-HTTP-Session-Id",this.D),_s(this,n),this.o&&a&&Ec(n,this.o,a),yc(this.i,s),this.Ra&&$t(n,"TYPE","init"),this.ja?($t(n,"$req",e),$t(n,"SID","null"),s.$=!0,pc(s,n,null)):pc(s,n,e),this.G=2}}else this.G==3&&(t?Im(this,t):this.l.length==0||pm(this.i)||Im(this))};function Im(t,e){var n;e?n=e.m:n=t.V++;const r=Pn(t.F);$t(r,"SID",t.J),$t(r,"RID",n),$t(r,"AID",t.U),_s(t,r),t.o&&t.s&&Ec(r,t.o,t.s),n=new as(t,t.h,n,t.C+1),t.o===null&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=Sm(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),yc(t.i,n),pc(n,r,e)}function _s(t,e){t.j&&gc({},function(n,r){$t(e,r,n)})}function Sm(t,e,n){n=Math.min(t.l.length,n);var r=t.j?he(t.j.Oa,t.j,t):null;t:{var s=t.l;let a=-1;for(;;){const l=["count="+n];a==-1?0<n?(a=s[0].h,l.push("ofs="+a)):a=0:l.push("ofs="+a);let c=!0;for(let f=0;f<n;f++){let p=s[f].h;const m=s[f].g;if(p-=a,0>p)a=Math.max(0,s[f].h-100),c=!1;else try{RT(m,l,"req"+p+"_")}catch{r&&r(m)}}if(c){r=l.join("&");break t}}}return t=t.l.splice(0,n),e.D=t,r}function Cm(t){t.g||t.u||(t.Y=1,rc(t.Ga,t),t.A=0)}function Pc(t){return t.g||t.u||3<=t.A?!1:(t.Y++,t.u=ss(he(t.Ga,t),Mm(t,t.A)),t.A++,!0)}W.Ga=function(){if(this.u=null,Lm(this),this.$&&!(this.L||this.g==null||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=ss(he(this.bb,this),t)}};W.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ae(10),pa(this),Lm(this))};function Ac(t){t.B!=null&&(st.clearTimeout(t.B),t.B=null)}function Lm(t){t.g=new as(t,t.h,"rpc",t.Y),t.o===null&&(t.g.H=t.s),t.g.O=0;var e=Pn(t.oa);$t(e,"RID","rpc"),$t(e,"SID",t.J),$t(e,"CI",t.N?"0":"1"),$t(e,"AID",t.U),_s(t,e),$t(e,"TYPE","xmlhttp"),t.o&&t.s&&Ec(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=ca(Pn(e)),n.s=null,n.U=!0,im(n,t)}W.ab=function(){this.v!=null&&(this.v=null,pa(this),Pc(this),Ae(19))};function ga(t){t.v!=null&&(st.clearTimeout(t.v),t.v=null)}function Nm(t,e){var n=null;if(t.g==e){ga(t),Ac(t),t.g=null;var r=2}else if(vc(t.i,e))n=e.D,gm(t.i,e),r=1;else return;if(t.I=e.N,t.G!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.F;var s=t.C;r=na(),de(r,new Qp(r,n,e,s)),ma(t)}else Cm(t);else if(s=e.o,s==3||s==0&&0<t.I||!(r==1&&HT(t,e)||r==2&&Pc(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),s){case 1:_i(t,5);break;case 4:_i(t,10);break;case 3:_i(t,6);break;default:_i(t,2)}}}function Mm(t,e){let n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function _i(t,e){if(t.h.info("Error code "+e),e==2){var n=null;t.j&&(n=null);var r=he(t.jb,t);n||(n=new gi("//www.google.com/images/cleardot.gif"),st.location&&st.location.protocol=="http"||aa(n,"https"),ca(n)),OT(n.toString(),r)}else Ae(2);t.G=0,t.j&&t.j.va(e),km(t),Am(t)}W.jb=function(t){t?(this.h.info("Successfully pinged google.com"),Ae(2)):(this.h.info("Failed to ping google.com"),Ae(1))};function km(t){t.G=0,t.I=-1,t.j&&((_m(t.i).length!=0||t.l.length!=0)&&(t.i.i.length=0,Ul(t.l),t.l.length=0),t.j.ua())}function Rm(t,e,n){let r=TT(n);if(r.i!="")e&&ua(r,e+"."+r.i),la(r,r.m);else{const s=st.location;r=bT(s.protocol,e?e+"."+s.hostname:s.hostname,+s.port,n)}return t.aa&&Hl(t.aa,function(s,a){$t(r,a,s)}),e=t.D,n=t.sa,e&&n&&$t(r,e,n),$t(r,"VER",t.ma),_s(t,r),r}function Om(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ba&&!t.qa?new te(new ds({ib:!0})):new te(t.qa),e.L=t.H,e}function Dm(){}W=Dm.prototype;W.xa=function(){};W.wa=function(){};W.va=function(){};W.ua=function(){};W.Oa=function(){};function _a(){if(sr&&!(10<=Number(eT)))throw Error("Environmental error: no available transport.")}_a.prototype.g=function(t,e){return new De(t,e)};function De(t,e){oe.call(this),this.g=new Pm(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!Go(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Go(e)&&(this.g.D=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new lr(this)}fe(De,oe);De.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),rc(he(t.hb,t,e))),Ae(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=Rm(t,null,t.W),ma(t)};De.prototype.close=function(){Tc(this.g)};De.prototype.u=function(t){if(typeof t=="string"){var e={};e.__data__=t,bc(this.g,e)}else this.v?(e={},e.__data__=ic(t),bc(this.g,e)):bc(this.g,t)};De.prototype.M=function(){this.g.j=null,delete this.j,Tc(this.g),delete this.g,De.Z.M.call(this)};function Bm(t){cc.call(this);var e=t.__sm__;if(e){t:{for(const n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}fe(Bm,cc);function zm(){hc.call(this),this.status=1}fe(zm,hc);function lr(t){this.g=t}fe(lr,Dm);lr.prototype.xa=function(){de(this.g,"a")};lr.prototype.wa=function(t){de(this.g,new Bm(t))};lr.prototype.va=function(t){de(this.g,new zm(t))};lr.prototype.ua=function(){de(this.g,"b")};_a.prototype.createWebChannel=_a.prototype.g;De.prototype.send=De.prototype.u;De.prototype.open=De.prototype.m;De.prototype.close=De.prototype.close;ia.NO_ERROR=0;ia.TIMEOUT=8;ia.HTTP_ERROR=6;Jp.COMPLETE="complete";em.EventType=os;os.OPEN="a";os.CLOSE="b";os.ERROR="c";os.MESSAGE="d";oe.prototype.listen=oe.prototype.N;te.prototype.listenOnce=te.prototype.O;te.prototype.getLastError=te.prototype.La;te.prototype.getLastErrorCode=te.prototype.Da;te.prototype.getStatus=te.prototype.ba;te.prototype.getResponseJson=te.prototype.Qa;te.prototype.getResponseText=te.prototype.ga;te.prototype.send=te.prototype.ea;var $T=function(){return new _a},ZT=function(){return na()},Ic=ia,qT=Jp,WT=di,Fm={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},KT=ds,va=em,jT=te;const Um="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ne.UNAUTHENTICATED=new Ne(null),Ne.GOOGLE_CREDENTIALS=new Ne("google-credentials-uid"),Ne.FIRST_PARTY=new Ne("first-party-uid"),Ne.MOCK_USER=new Ne("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cr="9.4.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vi=new Ep("@firebase/firestore");function Vm(){return vi.logLevel}function et(t,...e){if(vi.logLevel<=Mt.DEBUG){const n=e.map(Sc);vi.debug(`Firestore (${cr}): ${t}`,...n)}}function Wn(t,...e){if(vi.logLevel<=Mt.ERROR){const n=e.map(Sc);vi.error(`Firestore (${cr}): ${t}`,...n)}}function Hm(t,...e){if(vi.logLevel<=Mt.WARN){const n=e.map(Sc);vi.warn(`Firestore (${cr}): ${t}`,...n)}}function Sc(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ft(t="Unexpected state"){const e=`FIRESTORE (${cr}) INTERNAL ASSERTION FAILED: `+t;throw Wn(e),new Error(e)}function ee(t,e){t||ft()}function At(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class X extends Error{constructor(e,n){super(n),this.code=e,this.message=n,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(e,n){this.user=n,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization=`Bearer ${e}`}}class YT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ne.UNAUTHENTICATED))}shutdown(){}}class XT{constructor(e){this.t=e,this.currentUser=Ne.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const s=f=>this.i!==r?(r=this.i,n(f)):Promise.resolve();let a=new yi;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new yi,e.enqueueRetryable(()=>s(this.currentUser))};const l=()=>{const f=a;e.enqueueRetryable(async()=>{await f.promise,await s(this.currentUser)})},c=f=>{et("FirebaseCredentialsProvider","Auth detected"),this.auth=f,this.auth.addAuthTokenListener(this.o),l()};this.t.onInit(f=>c(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?c(f):(et("FirebaseCredentialsProvider","Auth not yet detected"),a.resolve(),a=new yi)}},0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(et("FirebaseCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ee(typeof r.accessToken=="string"),new GT(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ee(e===null||typeof e=="string"),new Ne(e)}}class QT{constructor(e,n,r){this.h=e,this.l=n,this.m=r,this.type="FirstParty",this.user=Ne.FIRST_PARTY}get authHeaders(){const e={"X-Goog-AuthUser":this.l},n=this.h.auth.getAuthHeaderValueForFirstParty([]);return n&&(e.Authorization=n),this.m&&(e["X-Goog-Iam-Authorization-Token"]=this.m),e}}class JT{constructor(e,n,r){this.h=e,this.l=n,this.m=r}getToken(){return Promise.resolve(new QT(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n(Ne.FIRST_PARTY))}shutdown(){}invalidateToken(){}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.g(r),this.p=r=>n.writeSequenceNumber(r))}g(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.p&&this.p(e),e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tb(t){const e=typeof self!="undefined"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cc.T=-1;class $m{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=tb(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<n&&(r+=e.charAt(s[a]%e.length))}return r}}function Dt(t,e){return t<e?-1:t>e?1:0}function vs(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new X(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new X(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new X(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new X(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return He.fromMillis(Date.now())}static fromDate(e){return He.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new He(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Dt(this.nanoseconds,e.nanoseconds):Dt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new kt(e)}static min(){return new kt(new He(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zm(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ys(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function qm(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(e,n,r){n===void 0?n=0:n>e.length&&ft(),r===void 0?r=e.length-n:r>e.length-n&&ft(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ws.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ws?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const a=e.get(s),l=n.get(s);if(a<l)return-1;if(a>l)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Zt extends ws{construct(e,n,r){return new Zt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new X(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Zt(n)}static emptyPath(){return new Zt([])}}const eb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $e extends ws{construct(e,n,r){return new $e(e,n,r)}static isValidIdentifier(e){return eb.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$e.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new $e(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const a=()=>{if(r.length===0)throw new X(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let l=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new X(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[s+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new X(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,s+=2}else c==="`"?(l=!l,s++):c!=="."||l?(r+=c,s++):(a(),s++)}if(a(),l)throw new X(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $e(n)}static emptyPath(){return new $e([])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e){this.binaryString=e}static fromBase64String(e){const n=atob(e);return new we(n)}static fromUint8Array(e){const n=function(r){let s="";for(let a=0;a<r.length;++a)s+=String.fromCharCode(r[a]);return s}(e);return new we(n)}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Dt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}we.EMPTY_BYTE_STRING=new we("");const nb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Kn(t){if(ee(!!t),typeof t=="string"){let e=0;const n=nb.exec(t);if(ee(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ne(t.seconds),nanos:ne(t.nanos)}}function ne(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function hr(t){return typeof t=="string"?we.fromBase64String(t):we.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Km(t){const e=t.mapValue.fields.__previous_value__;return Wm(e)?Km(e):e}function xs(t){const e=Kn(t.mapValue.fields.__local_write_time__.timestampValue);return new He(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fr(t){return t==null}function ya(t){return t===0&&1/t==-1/0}function ib(t){return typeof t=="number"&&Number.isInteger(t)&&!ya(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e){this.path=e}static fromPath(e){return new it(Zt.fromString(e))}static fromName(e){return new it(Zt.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return e!==null&&Zt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Zt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new it(new Zt(e.slice()))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Wm(t)?4:10:ft()}function cn(t,e){const n=wi(t);if(n!==wi(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return xs(t).isEqual(xs(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const a=Kn(r.timestampValue),l=Kn(s.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return hr(r.bytesValue).isEqual(hr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return ne(r.geoPointValue.latitude)===ne(s.geoPointValue.latitude)&&ne(r.geoPointValue.longitude)===ne(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return ne(r.integerValue)===ne(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const a=ne(r.doubleValue),l=ne(s.doubleValue);return a===l?ya(a)===ya(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return vs(t.arrayValue.values||[],e.arrayValue.values||[],cn);case 10:return function(r,s){const a=r.mapValue.fields||{},l=s.mapValue.fields||{};if(Zm(a)!==Zm(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!cn(a[c],l[c])))return!1;return!0}(t,e);default:return ft()}}function Es(t,e){return(t.values||[]).find(n=>cn(n,e))!==void 0}function dr(t,e){const n=wi(t),r=wi(e);if(n!==r)return Dt(n,r);switch(n){case 0:return 0;case 1:return Dt(t.booleanValue,e.booleanValue);case 2:return function(s,a){const l=ne(s.integerValue||s.doubleValue),c=ne(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return jm(t.timestampValue,e.timestampValue);case 4:return jm(xs(t),xs(e));case 5:return Dt(t.stringValue,e.stringValue);case 6:return function(s,a){const l=hr(s),c=hr(a);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const l=s.split("/"),c=a.split("/");for(let f=0;f<l.length&&f<c.length;f++){const p=Dt(l[f],c[f]);if(p!==0)return p}return Dt(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const l=Dt(ne(s.latitude),ne(a.latitude));return l!==0?l:Dt(ne(s.longitude),ne(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,a){const l=s.values||[],c=a.values||[];for(let f=0;f<l.length&&f<c.length;++f){const p=dr(l[f],c[f]);if(p)return p}return Dt(l.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,a){const l=s.fields||{},c=Object.keys(l),f=a.fields||{},p=Object.keys(f);c.sort(),p.sort();for(let m=0;m<c.length&&m<p.length;++m){const _=Dt(c[m],p[m]);if(_!==0)return _;const v=dr(l[c[m]],f[p[m]]);if(v!==0)return v}return Dt(c.length,p.length)}(t.mapValue,e.mapValue);default:throw ft()}}function jm(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Dt(t,e);const n=Kn(t),r=Kn(e),s=Dt(n.seconds,r.seconds);return s!==0?s:Dt(n.nanos,r.nanos)}function Lc(t){return Nc(t)}function Nc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const s=Kn(r);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?hr(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,it.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let s="[",a=!0;for(const l of r.values||[])a?a=!1:s+=",",s+=Nc(l);return s+"]"}(t.arrayValue):"mapValue"in t?function(r){const s=Object.keys(r.fields||{}).sort();let a="{",l=!0;for(const c of s)l?l=!1:a+=",",a+=`${c}:${Nc(r.fields[c])}`;return a+"}"}(t.mapValue):ft();var e,n}function Gm(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Mc(t){return!!t&&"integerValue"in t}function kc(t){return!!t&&"arrayValue"in t}function Ym(t){return!!t&&"nullValue"in t}function Xm(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Rc(t){return!!t&&"mapValue"in t}function Ts(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ys(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ts(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ts(t.arrayValue.values[n]);return e}return Object.assign({},t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this.value=e}static empty(){return new In({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Rc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ts(n)}setAll(e){let n=$e.emptyPath(),r={},s=[];e.forEach((l,c)=>{if(!n.isImmediateParentOf(c)){const f=this.getFieldsMap(n);this.applyChanges(f,r,s),r={},s=[],n=c.popLast()}l?r[c.lastSegment()]=Ts(l):s.push(c.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,r,s)}delete(e){const n=this.field(e.popLast());Rc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return cn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Rc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ys(n,(s,a)=>e[s]=a);for(const s of r)delete e[s]}clone(){return new In(Ts(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e,n,r,s,a){this.key=e,this.documentType=n,this.version=r,this.data=s,this.documentState=a}static newInvalidDocument(e){return new xe(e,0,kt.min(),In.empty(),0)}static newFoundDocument(e,n,r){return new xe(e,1,n,r,0)}static newNoDocument(e,n){return new xe(e,2,n,In.empty(),0)}static newUnknownDocument(e,n){return new xe(e,3,n,In.empty(),2)}convertToFoundDocument(e,n){return this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=In.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=In.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof xe&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}clone(){return new xe(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(e,n=null,r=[],s=[],a=null,l=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=l,this.endAt=c,this.A=null}}function Qm(t,e=null,n=[],r=[],s=null,a=null,l=null){return new rb(t,e,n,r,s,a,l)}function Oc(t){const e=At(t);if(e.A===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>ob(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),fr(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=wa(e.startAt)),e.endAt&&(n+="|ub:",n+=wa(e.endAt)),e.A=n}return e.A}function sb(t){let e=t.path.canonicalString();return t.collectionGroup!==null&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map(n=>{return`${(r=n).field.canonicalString()} ${r.op} ${Lc(r.value)}`;var r}).join(", ")}]`),fr(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map(n=>function(r){return`${r.field.canonicalString()} (${r.dir})`}(n)).join(", ")}]`),t.startAt&&(e+=", startAt: "+wa(t.startAt)),t.endAt&&(e+=", endAt: "+wa(t.endAt)),`Target(${e})`}function Dc(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<t.orderBy.length;s++)if(!pb(t.orderBy[s],e.orderBy[s]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let s=0;s<t.filters.length;s++)if(n=t.filters[s],r=e.filters[s],n.op!==r.op||!n.field.isEqual(r.field)||!cn(n.value,r.value))return!1;var n,r;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!eg(t.startAt,e.startAt)&&eg(t.endAt,e.endAt)}function Bc(t){return it.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class Ie extends class{}{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.R(e,n,r):new ab(e,n,r):n==="array-contains"?new cb(e,r):n==="in"?new hb(e,r):n==="not-in"?new fb(e,r):n==="array-contains-any"?new db(e,r):new Ie(e,n,r)}static R(e,n,r){return n==="in"?new ub(e,r):new lb(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.P(dr(n,this.value)):n!==null&&wi(this.value)===wi(n)&&this.P(dr(n,this.value))}P(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ft()}}v(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}function ob(t){return t.field.canonicalString()+t.op.toString()+Lc(t.value)}class ab extends Ie{constructor(e,n,r){super(e,n,r),this.key=it.fromName(r.referenceValue)}matches(e){const n=it.comparator(e.key,this.key);return this.P(n)}}class ub extends Ie{constructor(e,n){super(e,"in",n),this.keys=Jm("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class lb extends Ie{constructor(e,n){super(e,"not-in",n),this.keys=Jm("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Jm(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>it.fromName(r.referenceValue))}class cb extends Ie{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return kc(n)&&Es(n.arrayValue,this.value)}}class hb extends Ie{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Es(this.value.arrayValue,n)}}class fb extends Ie{constructor(e,n){super(e,"not-in",n)}matches(e){if(Es(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Es(this.value.arrayValue,n)}}class db extends Ie{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!kc(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Es(this.value.arrayValue,r))}}class zc{constructor(e,n){this.position=e,this.before=n}}function wa(t){return`${t.before?"b":"a"}:${t.position.map(e=>Lc(e)).join(",")}`}class bs{constructor(e,n="asc"){this.field=e,this.dir=n}}function pb(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function tg(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const a=e[s],l=t.position[s];if(a.field.isKeyField()?r=it.comparator(it.fromName(l.referenceValue),n.key):r=dr(l,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return t.before?r<=0:r<0}function eg(t,e){if(t===null)return e===null;if(e===null||t.before!==e.before||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!cn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e,n=null,r=[],s=[],a=null,l="F",c=null,f=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=l,this.startAt=c,this.endAt=f,this.V=null,this.S=null,this.startAt,this.endAt}}function mb(t,e,n,r,s,a,l,c){return new Ps(t,e,n,r,s,a,l,c)}function ng(t){return new Ps(t)}function xa(t){return!fr(t.limit)&&t.limitType==="F"}function Ea(t){return!fr(t.limit)&&t.limitType==="L"}function ig(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function rg(t){for(const e of t.filters)if(e.v())return e.field;return null}function sg(t){return t.collectionGroup!==null}function As(t){const e=At(t);if(e.V===null){e.V=[];const n=rg(e),r=ig(e);if(n!==null&&r===null)n.isKeyField()||e.V.push(new bs(n)),e.V.push(new bs($e.keyField(),"asc"));else{let s=!1;for(const a of e.explicitOrderBy)e.V.push(a),a.field.isKeyField()&&(s=!0);if(!s){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.V.push(new bs($e.keyField(),a))}}}return e.V}function xi(t){const e=At(t);if(!e.S)if(e.limitType==="F")e.S=Qm(e.path,e.collectionGroup,As(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const a of As(e)){const l=a.dir==="desc"?"asc":"desc";n.push(new bs(a.field,l))}const r=e.endAt?new zc(e.endAt.position,!e.endAt.before):null,s=e.startAt?new zc(e.startAt.position,!e.startAt.before):null;e.S=Qm(e.path,e.collectionGroup,n,e.filters,e.limit,r,s)}return e.S}function gb(t,e,n){return new Ps(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ta(t,e){return Dc(xi(t),xi(e))&&t.limitType===e.limitType}function og(t){return`${Oc(xi(t))}|lt:${t.limitType}`}function Fc(t){return`Query(target=${sb(xi(t))}; limitType=${t.limitType})`}function ba(t,e){return e.isFoundDocument()&&function(n,r){const s=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):it.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(t,e)&&function(n,r){for(const s of n.explicitOrderBy)if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(n,r){for(const s of n.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(n,r){return!(n.startAt&&!tg(n.startAt,As(n),r)||n.endAt&&tg(n.endAt,As(n),r))}(t,e)}function ag(t){return(e,n)=>{let r=!1;for(const s of As(t)){const a=_b(s,e,n);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function _b(t,e,n){const r=t.field.isKeyField()?it.comparator(e.key,n.key):function(s,a,l){const c=a.data.field(s),f=l.data.field(s);return c!==null&&f!==null?dr(c,f):ft()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ft()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ug(t,e){if(t.D){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ya(e)?"-0":e}}function lg(t){return{integerValue:""+t}}function vb(t,e){return ib(e)?lg(e):ug(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(){this._=void 0}}function yb(t,e,n){return t instanceof Uc?function(r,s){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&(a.fields.__previous_value__=s),{mapValue:a}}(n,e):t instanceof Aa?cg(t,e):t instanceof Ia?hg(t,e):function(r,s){const a=xb(r,s),l=fg(a)+fg(r.C);return Mc(a)&&Mc(r.C)?lg(l):ug(r.N,l)}(t,e)}function wb(t,e,n){return t instanceof Aa?cg(t,e):t instanceof Ia?hg(t,e):n}function xb(t,e){return t instanceof Vc?Mc(n=e)||function(r){return!!r&&"doubleValue"in r}(n)?e:{integerValue:0}:null;var n}class Uc extends Pa{}class Aa extends Pa{constructor(e){super(),this.elements=e}}function cg(t,e){const n=dg(e);for(const r of t.elements)n.some(s=>cn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Ia extends Pa{constructor(e){super(),this.elements=e}}function hg(t,e){let n=dg(e);for(const r of t.elements)n=n.filter(s=>!cn(s,r));return{arrayValue:{values:n}}}class Vc extends Pa{constructor(e,n){super(),this.N=e,this.C=n}}function fg(t){return ne(t.integerValue||t.doubleValue)}function dg(t){return kc(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Eb(t,e){return t.field.isEqual(e.field)&&function(n,r){return n instanceof Aa&&r instanceof Aa||n instanceof Ia&&r instanceof Ia?vs(n.elements,r.elements,cn):n instanceof Vc&&r instanceof Vc?cn(n.C,r.C):n instanceof Uc&&r instanceof Uc}(t.transform,e.transform)}function Sa(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class pg{}function Tb(t,e,n){t instanceof _g?function(r,s,a){const l=r.value.clone(),c=yg(r.fieldTransforms,s,a.transformResults);l.setAll(c),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof $c?function(r,s,a){if(!Sa(r.precondition,s))return void s.convertToUnknownDocument(a.version);const l=yg(r.fieldTransforms,s,a.transformResults),c=s.data;c.setAll(vg(r)),c.setAll(l),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):function(r,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Hc(t,e,n){t instanceof _g?function(r,s,a){if(!Sa(r.precondition,s))return;const l=r.value.clone(),c=wg(r.fieldTransforms,a,s);l.setAll(c),s.convertToFoundDocument(gg(s),l).setHasLocalMutations()}(t,e,n):t instanceof $c?function(r,s,a){if(!Sa(r.precondition,s))return;const l=wg(r.fieldTransforms,a,s),c=s.data;c.setAll(vg(r)),c.setAll(l),s.convertToFoundDocument(gg(s),c).setHasLocalMutations()}(t,e,n):function(r,s){Sa(r.precondition,s)&&s.convertToNoDocument(kt.min())}(t,e)}function mg(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&vs(n,r,(s,a)=>Eb(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function gg(t){return t.isFoundDocument()?t.version:kt.min()}class _g extends pg{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}}class $c extends pg{constructor(e,n,r,s,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}}function vg(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function yg(t,e,n){const r=new Map;ee(t.length===n.length);for(let s=0;s<n.length;s++){const a=t[s],l=a.transform,c=e.data.field(a.field);r.set(a.field,wb(l,c,n[s]))}return r}function wg(t,e,n){const r=new Map;for(const s of t){const a=s.transform,l=n.data.field(s.field);r.set(s.field,yb(a,l,e))}return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{constructor(e){this.count=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ie,gt;function xg(t){if(t===void 0)return Wn("GRPC error has no .code"),F.UNKNOWN;switch(t){case ie.OK:return F.OK;case ie.CANCELLED:return F.CANCELLED;case ie.UNKNOWN:return F.UNKNOWN;case ie.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case ie.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case ie.INTERNAL:return F.INTERNAL;case ie.UNAVAILABLE:return F.UNAVAILABLE;case ie.UNAUTHENTICATED:return F.UNAUTHENTICATED;case ie.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case ie.NOT_FOUND:return F.NOT_FOUND;case ie.ALREADY_EXISTS:return F.ALREADY_EXISTS;case ie.PERMISSION_DENIED:return F.PERMISSION_DENIED;case ie.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case ie.ABORTED:return F.ABORTED;case ie.OUT_OF_RANGE:return F.OUT_OF_RANGE;case ie.UNIMPLEMENTED:return F.UNIMPLEMENTED;case ie.DATA_LOSS:return F.DATA_LOSS;default:return ft()}}(gt=ie||(ie={}))[gt.OK=0]="OK",gt[gt.CANCELLED=1]="CANCELLED",gt[gt.UNKNOWN=2]="UNKNOWN",gt[gt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",gt[gt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",gt[gt.NOT_FOUND=5]="NOT_FOUND",gt[gt.ALREADY_EXISTS=6]="ALREADY_EXISTS",gt[gt.PERMISSION_DENIED=7]="PERMISSION_DENIED",gt[gt.UNAUTHENTICATED=16]="UNAUTHENTICATED",gt[gt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",gt[gt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",gt[gt.ABORTED=10]="ABORTED",gt[gt.OUT_OF_RANGE=11]="OUT_OF_RANGE",gt[gt.UNIMPLEMENTED=12]="UNIMPLEMENTED",gt[gt.INTERNAL=13]="INTERNAL",gt[gt.UNAVAILABLE=14]="UNAVAILABLE",gt[gt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e,n){this.comparator=e,this.root=n||pe.EMPTY}insert(e,n){return new Se(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,pe.BLACK,null,null))}remove(e){return new Se(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pe.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ca(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ca(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ca(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ca(this.root,e,this.comparator,!0)}}class Ca{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pe{constructor(e,n,r,s,a){this.key=e,this.value=n,this.color=r!=null?r:pe.RED,this.left=s!=null?s:pe.EMPTY,this.right=a!=null?a:pe.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,a){return new pe(e!=null?e:this.key,n!=null?n:this.value,r!=null?r:this.color,s!=null?s:this.left,a!=null?a:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,n,r),null):a===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return pe.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return pe.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pe.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ft();const e=this.left.check();if(e!==this.right.check())throw ft();return e+(this.isRed()?0:1)}}pe.EMPTY=null,pe.RED=!0,pe.BLACK=!1;pe.EMPTY=new class{constructor(){this.size=0}get key(){throw ft()}get value(){throw ft()}get color(){throw ft()}get left(){throw ft()}get right(){throw ft()}copy(t,e,n,r,s){return this}insert(t,e,n){return new pe(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.comparator=e,this.data=new Se(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Eg(this.data.getIterator())}getIteratorFrom(e){return new Eg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof me)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new me(this.comparator);return n.data=e,n}}class Eg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pb=new Se(it.comparator);function Ei(){return Pb}const Ab=new Se(it.comparator);function Zc(){return Ab}new Se(it.comparator);const Ib=new me(it.comparator);function qt(...t){let e=Ib;for(const n of t)e=e.add(n);return e}const Sb=new me(Dt);function Tg(){return Sb}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e,n,r,s,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n){const r=new Map;return r.set(e,Is.createSynthesizedTargetChangeForCurrentChange(e,n)),new La(kt.min(),r,Tg(),Ei(),qt())}}class Is{constructor(e,n,r,s,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n){return new Is(we.EMPTY_BYTE_STRING,n,qt(),qt(),qt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e,n,r,s){this.k=e,this.removedTargetIds=n,this.key=r,this.$=s}}class bg{constructor(e,n){this.targetId=e,this.O=n}}class Pg{constructor(e,n,r=we.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Ag{constructor(){this.F=0,this.M=Sg(),this.L=we.EMPTY_BYTE_STRING,this.B=!1,this.U=!0}get current(){return this.B}get resumeToken(){return this.L}get q(){return this.F!==0}get K(){return this.U}j(e){e.approximateByteSize()>0&&(this.U=!0,this.L=e)}W(){let e=qt(),n=qt(),r=qt();return this.M.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ft()}}),new Is(this.L,this.B,e,n,r)}G(){this.U=!1,this.M=Sg()}H(e,n){this.U=!0,this.M=this.M.insert(e,n)}J(e){this.U=!0,this.M=this.M.remove(e)}Y(){this.F+=1}X(){this.F-=1}Z(){this.U=!0,this.B=!0}}class Cb{constructor(e){this.tt=e,this.et=new Map,this.nt=Ei(),this.st=Ig(),this.it=new me(Dt)}rt(e){for(const n of e.k)e.$&&e.$.isFoundDocument()?this.ot(n,e.$):this.ct(n,e.key,e.$);for(const n of e.removedTargetIds)this.ct(n,e.key,e.$)}at(e){this.forEachTarget(e,n=>{const r=this.ut(n);switch(e.state){case 0:this.ht(n)&&r.j(e.resumeToken);break;case 1:r.X(),r.q||r.G(),r.j(e.resumeToken);break;case 2:r.X(),r.q||this.removeTarget(n);break;case 3:this.ht(n)&&(r.Z(),r.j(e.resumeToken));break;case 4:this.ht(n)&&(this.lt(n),r.j(e.resumeToken));break;default:ft()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.et.forEach((r,s)=>{this.ht(s)&&n(s)})}ft(e){const n=e.targetId,r=e.O.count,s=this.dt(n);if(s){const a=s.target;if(Bc(a))if(r===0){const l=new it(a.path);this.ct(n,l,xe.newNoDocument(l,kt.min()))}else ee(r===1);else this.wt(n)!==r&&(this.lt(n),this.it=this.it.add(n))}}_t(e){const n=new Map;this.et.forEach((a,l)=>{const c=this.dt(l);if(c){if(a.current&&Bc(c.target)){const f=new it(c.target.path);this.nt.get(f)!==null||this.gt(l,f)||this.ct(l,f,xe.newNoDocument(f,e))}a.K&&(n.set(l,a.W()),a.G())}});let r=qt();this.st.forEach((a,l)=>{let c=!0;l.forEachWhile(f=>{const p=this.dt(f);return!p||p.purpose===2||(c=!1,!1)}),c&&(r=r.add(a))});const s=new La(e,n,this.it,this.nt,r);return this.nt=Ei(),this.st=Ig(),this.it=new me(Dt),s}ot(e,n){if(!this.ht(e))return;const r=this.gt(e,n.key)?2:0;this.ut(e).H(n.key,r),this.nt=this.nt.insert(n.key,n),this.st=this.st.insert(n.key,this.yt(n.key).add(e))}ct(e,n,r){if(!this.ht(e))return;const s=this.ut(e);this.gt(e,n)?s.H(n,1):s.J(n),this.st=this.st.insert(n,this.yt(n).delete(e)),r&&(this.nt=this.nt.insert(n,r))}removeTarget(e){this.et.delete(e)}wt(e){const n=this.ut(e).W();return this.tt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Y(e){this.ut(e).Y()}ut(e){let n=this.et.get(e);return n||(n=new Ag,this.et.set(e,n)),n}yt(e){let n=this.st.get(e);return n||(n=new me(Dt),this.st=this.st.insert(e,n)),n}ht(e){const n=this.dt(e)!==null;return n||et("WatchChangeAggregator","Detected inactive target",e),n}dt(e){const n=this.et.get(e);return n&&n.q?null:this.tt.Tt(e)}lt(e){this.et.set(e,new Ag),this.tt.getRemoteKeysForTarget(e).forEach(n=>{this.ct(e,n,null)})}gt(e,n){return this.tt.getRemoteKeysForTarget(e).has(n)}}function Ig(){return new Se(it.comparator)}function Sg(){return new Se(it.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lb=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),Nb=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))();class Mb{constructor(e,n){this.databaseId=e,this.D=n}}function qc(t,e){return t.D?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Cg(t,e){return t.D?e.toBase64():e.toUint8Array()}function Ss(t){return ee(!!t),kt.fromTimestamp(function(e){const n=Kn(e);return new He(n.seconds,n.nanos)}(t))}function Lg(t,e){return function(n){return new Zt(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function Ng(t){const e=Zt.fromString(t);return ee(Bg(e)),e}function Wc(t,e){const n=Ng(e);if(n.get(1)!==t.databaseId.projectId)throw new X(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new X(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new it(kg(n))}function Kc(t,e){return Lg(t.databaseId,e)}function kb(t){const e=Ng(t);return e.length===4?Zt.emptyPath():kg(e)}function Mg(t){return new Zt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function kg(t){return ee(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Rb(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:ft()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(f,p){return f.D?(ee(p===void 0||typeof p=="string"),we.fromBase64String(p||"")):(ee(p===void 0||p instanceof Uint8Array),we.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&function(f){const p=f.code===void 0?F.UNKNOWN:xg(f.code);return new X(p,f.message||"")}(l);n=new Pg(r,s,a,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Wc(t,r.document.name),a=Ss(r.document.updateTime),l=new In({mapValue:{fields:r.document.fields}}),c=xe.newFoundDocument(s,a,l),f=r.targetIds||[],p=r.removedTargetIds||[];n=new Na(f,p,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Wc(t,r.document),a=r.readTime?Ss(r.readTime):kt.min(),l=xe.newNoDocument(s,a),c=r.removedTargetIds||[];n=new Na([],c,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Wc(t,r.document),a=r.removedTargetIds||[];n=new Na([],a,s,null)}else{if(!("filter"in e))return ft();{e.filter;const r=e.filter;r.targetId;const s=r.count||0,a=new bb(s),l=r.targetId;n=new bg(l,a)}}return n}function Ob(t,e){return{documents:[Kc(t,e.path)]}}function Db(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=Kc(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Kc(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(c){if(c.length===0)return;const f=c.map(p=>function(m){if(m.op==="=="){if(Xm(m.value))return{unaryFilter:{field:pr(m.field),op:"IS_NAN"}};if(Ym(m.value))return{unaryFilter:{field:pr(m.field),op:"IS_NULL"}}}else if(m.op==="!="){if(Xm(m.value))return{unaryFilter:{field:pr(m.field),op:"IS_NOT_NAN"}};if(Ym(m.value))return{unaryFilter:{field:pr(m.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pr(m.field),op:Ub(m.op),value:m.value}}}(p));return f.length===1?f[0]:{compositeFilter:{op:"AND",filters:f}}}(e.filters);s&&(n.structuredQuery.where=s);const a=function(c){if(c.length!==0)return c.map(f=>function(p){return{field:pr(p.field),direction:Fb(p.dir)}}(f))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=function(c,f){return c.D||fr(f)?f:{value:f}}(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=Og(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Og(e.endAt)),n}function Bb(t){let e=kb(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ee(r===1);const m=n.from[0];m.allDescendants?s=m.collectionId:e=e.child(m.collectionId)}let a=[];n.where&&(a=Rg(n.where));let l=[];n.orderBy&&(l=n.orderBy.map(m=>function(_){return new bs(mr(_.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(m)));let c=null;n.limit&&(c=function(m){let _;return _=typeof m=="object"?m.value:m,fr(_)?null:_}(n.limit));let f=null;n.startAt&&(f=Dg(n.startAt));let p=null;return n.endAt&&(p=Dg(n.endAt)),mb(e,s,l,a,c,"F",f,p)}function zb(t,e){const n=function(r,s){switch(s){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ft()}}(0,e.purpose);return n==null?null:{"goog-listen-tags":n}}function Rg(t){return t?t.unaryFilter!==void 0?[Hb(t)]:t.fieldFilter!==void 0?[Vb(t)]:t.compositeFilter!==void 0?t.compositeFilter.filters.map(e=>Rg(e)).reduce((e,n)=>e.concat(n)):ft():[]}function Og(t){return{before:t.before,values:t.position}}function Dg(t){const e=!!t.before,n=t.values||[];return new zc(n,e)}function Fb(t){return Lb[t]}function Ub(t){return Nb[t]}function pr(t){return{fieldPath:t.canonicalString()}}function mr(t){return $e.fromServerFormat(t.fieldPath)}function Vb(t){return Ie.create(mr(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ft()}}(t.fieldFilter.op),t.fieldFilter.value)}function Hb(t){switch(t.unaryFilter.op){case"IS_NAN":const e=mr(t.unaryFilter.field);return Ie.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=mr(t.unaryFilter.field);return Ie.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=mr(t.unaryFilter.field);return Ie.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=mr(t.unaryFilter.field);return Ie.create(s,"!=",{nullValue:"NULL_VALUE"});default:return ft()}}function Bg(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}const $b="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Zb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ft(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new q((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof q?n:q.resolve(n)}catch(n){return q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):q.reject(n)}static resolve(e){return new q((n,r)=>{n(e)})}static reject(e){return new q((n,r)=>{r(e)})}static waitFor(e){return new q((n,r)=>{let s=0,a=0,l=!1;e.forEach(c=>{++s,c.next(()=>{++a,l&&a===s&&n()},f=>r(f))}),l=!0,a===s&&n()})}static or(e){let n=q.resolve(!1);for(const r of e)n=n.next(s=>s?q.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,a)=>{r.push(n.call(this,s,a))}),this.waitFor(r)}}function Cs(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&Tb(a,e,r[s])}}applyToLocalView(e){for(const n of this.baseMutations)n.key.isEqual(e.key)&&Hc(n,e,this.localWriteTime);for(const n of this.mutations)n.key.isEqual(e.key)&&Hc(n,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(n=>{const r=e.get(n.key),s=r;this.applyToLocalView(s),r.isValidDocument()||s.convertToNoDocument(kt.min())})}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),qt())}isEqual(e){return this.batchId===e.batchId&&vs(this.mutations,e.mutations,(n,r)=>mg(n,r))&&vs(this.baseMutations,e.baseMutations,(n,r)=>mg(n,r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e,n,r,s,a=kt.min(),l=kt.min(),c=we.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c}withSequenceNumber(e){return new Ti(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new Ti(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Ti(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(e){this.Wt=e}}function Kb(t){const e=Bb({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?gb(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(){this.Gt=new Gb}addToCollectionParentIndex(e,n){return this.Gt.add(n),q.resolve()}getCollectionParents(e,n){return q.resolve(this.Gt.getEntries(n))}}class Gb{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new me(Zt.comparator),a=!s.has(r);return this.index[n]=s.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new me(Zt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e){this.ne=e}next(){return this.ne+=2,this.ne}static se(){return new gr(0)}static ie(){return new gr(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jc(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==$b)throw t;et("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={}}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s!==void 0){for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,n]);s.push([e,n])}else this.inner[r]=[[e,n]]}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),!0;return!1}forEach(e){ys(this.inner,(n,r)=>{for(const[s,a]of r)e(s,a)})}isEmpty(){return qm(this.inner)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(){this.changes=new Ls(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}getReadTime(e){const n=this.changes.get(e);return n?n.readTime:kt.min()}addEntry(e,n){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:n})}removeEntry(e,n=null){this.assertNotApplied(),this.changes.set(e,{document:xe.newInvalidDocument(e),readTime:n})}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?q.resolve(r.document):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg{constructor(e,n,r){this.He=e,this.In=n,this.Ht=r}An(e,n){return this.In.getAllMutationBatchesAffectingDocumentKey(e,n).next(r=>this.Rn(e,n,r))}Rn(e,n,r){return this.He.getEntry(e,n).next(s=>{for(const a of r)a.applyToLocalView(s);return s})}bn(e,n){e.forEach((r,s)=>{for(const a of n)a.applyToLocalView(s)})}Pn(e,n){return this.He.getEntries(e,n).next(r=>this.vn(e,r).next(()=>r))}vn(e,n){return this.In.getAllMutationBatchesAffectingDocumentKeys(e,n).next(r=>this.bn(n,r))}getDocumentsMatchingQuery(e,n,r){return function(s){return it.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.Vn(e,n.path):sg(n)?this.Sn(e,n,r):this.Dn(e,n,r)}Vn(e,n){return this.An(e,new it(n)).next(r=>{let s=Zc();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}Sn(e,n,r){const s=n.collectionGroup;let a=Zc();return this.Ht.getCollectionParents(e,s).next(l=>q.forEach(l,c=>{const f=function(p,m){return new Ps(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,c.child(s));return this.Dn(e,f,r).next(p=>{p.forEach((m,_)=>{a=a.insert(m,_)})})}).next(()=>a))}Dn(e,n,r){let s,a;return this.He.getDocumentsMatchingQuery(e,n,r).next(l=>(s=l,this.In.getAllMutationBatchesAffectingQuery(e,n))).next(l=>(a=l,this.Cn(e,a,s).next(c=>{s=c;for(const f of a)for(const p of f.mutations){const m=p.key;let _=s.get(m);_==null&&(_=xe.newInvalidDocument(m),s=s.insert(m,_)),Hc(p,_,f.localWriteTime),_.isFoundDocument()||(s=s.remove(m))}}))).next(()=>(s.forEach((l,c)=>{ba(n,c)||(s=s.remove(l))}),s))}Cn(e,n,r){let s=qt();for(const l of n)for(const c of l.mutations)c instanceof $c&&r.get(c.key)===null&&(s=s.add(c.key));let a=r;return this.He.getEntries(e,s).next(l=>(l.forEach((c,f)=>{f.isFoundDocument()&&(a=a.insert(c,f))}),a))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Nn=r,this.xn=s}static kn(e,n){let r=qt(),s=qt();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new Gc(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{$n(e){this.On=e}getDocumentsMatchingQuery(e,n,r,s){return function(a){return a.filters.length===0&&a.limit===null&&a.startAt==null&&a.endAt==null&&(a.explicitOrderBy.length===0||a.explicitOrderBy.length===1&&a.explicitOrderBy[0].field.isKeyField())}(n)||r.isEqual(kt.min())?this.Fn(e,n):this.On.Pn(e,s).next(a=>{const l=this.Mn(n,a);return(xa(n)||Ea(n))&&this.Ln(n.limitType,l,s,r)?this.Fn(e,n):(Vm()<=Mt.DEBUG&&et("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Fc(n)),this.On.getDocumentsMatchingQuery(e,n,r).next(c=>(l.forEach(f=>{c=c.insert(f.key,f)}),c)))})}Mn(e,n){let r=new me(ag(e));return n.forEach((s,a)=>{ba(e,a)&&(r=r.add(a))}),r}Ln(e,n,r,s){if(r.size!==n.size)return!0;const a=e==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Fn(e,n){return Vm()<=Mt.DEBUG&&et("QueryEngine","Using full collection scan to execute query:",Fc(n)),this.On.getDocumentsMatchingQuery(e,n,kt.min())}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(e,n,r,s){this.persistence=e,this.Bn=n,this.N=s,this.Un=new Se(Dt),this.qn=new Ls(a=>Oc(a),Dc),this.Kn=kt.min(),this.In=e.getMutationQueue(r),this.jn=e.getRemoteDocumentCache(),this.ze=e.getTargetCache(),this.Qn=new zg(this.jn,this.In,this.persistence.getIndexManager()),this.Je=e.getBundleCache(),this.Bn.$n(this.Qn)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Un))}}function Jb(t,e,n,r){return new Qb(t,e,n,r)}async function Fg(t,e){const n=At(t);let r=n.In,s=n.Qn;const a=await n.persistence.runTransaction("Handle user change","readonly",l=>{let c;return n.In.getAllMutationBatches(l).next(f=>(c=f,r=n.persistence.getMutationQueue(e),s=new zg(n.jn,r,n.persistence.getIndexManager()),r.getAllMutationBatches(l))).next(f=>{const p=[],m=[];let _=qt();for(const v of c){p.push(v.batchId);for(const x of v.mutations)_=_.add(x.key)}for(const v of f){m.push(v.batchId);for(const x of v.mutations)_=_.add(x.key)}return s.Pn(l,_).next(v=>({Wn:v,removedBatchIds:p,addedBatchIds:m}))})});return n.In=r,n.Qn=s,n.Bn.$n(n.Qn),a}function Ug(t){const e=At(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.ze.getLastRemoteSnapshotVersion(n))}function tP(t,e){const n=At(t),r=e.snapshotVersion;let s=n.Un;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=n.jn.newChangeBuffer({trackRemovals:!0});s=n.Un;const c=[];e.targetChanges.forEach((p,m)=>{const _=s.get(m);if(!_)return;c.push(n.ze.removeMatchingKeys(a,p.removedDocuments,m).next(()=>n.ze.addMatchingKeys(a,p.addedDocuments,m)));const v=p.resumeToken;if(v.approximateByteSize()>0){const x=_.withResumeToken(v,r).withSequenceNumber(a.currentSequenceNumber);s=s.insert(m,x),function(A,S,R){return ee(S.resumeToken.approximateByteSize()>0),A.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=3e8?!0:R.addedDocuments.size+R.modifiedDocuments.size+R.removedDocuments.size>0}(_,x,p)&&c.push(n.ze.updateTargetData(a,x))}});let f=Ei();if(e.documentUpdates.forEach((p,m)=>{e.resolvedLimboDocuments.has(p)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(a,p))}),c.push(eP(a,l,e.documentUpdates,r,void 0).next(p=>{f=p})),!r.isEqual(kt.min())){const p=n.ze.getLastRemoteSnapshotVersion(a).next(m=>n.ze.setTargetsMetadata(a,a.currentSequenceNumber,r));c.push(p)}return q.waitFor(c).next(()=>l.apply(a)).next(()=>n.Qn.vn(a,f)).next(()=>f)}).then(a=>(n.Un=s,a))}function eP(t,e,n,r,s){let a=qt();return n.forEach(l=>a=a.add(l)),e.getEntries(t,a).next(l=>{let c=Ei();return n.forEach((f,p)=>{const m=l.get(f),_=(s==null?void 0:s.get(f))||r;p.isNoDocument()&&p.version.isEqual(kt.min())?(e.removeEntry(f,_),c=c.insert(f,p)):!m.isValidDocument()||p.version.compareTo(m.version)>0||p.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(p,_),c=c.insert(f,p)):et("LocalStore","Ignoring outdated watch update for ",f,". Current version:",m.version," Watch version:",p.version)}),c})}function nP(t,e){const n=At(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.ze.getTargetData(r,e).next(a=>a?(s=a,q.resolve(s)):n.ze.allocateTargetId(r).next(l=>(s=new Ti(e,l,0,r.currentSequenceNumber),n.ze.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Un.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Un=n.Un.insert(r.targetId,r),n.qn.set(e,r.targetId)),r})}async function Yc(t,e,n){const r=At(t),s=r.Un.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,s))}catch(l){if(!Cs(l))throw l;et("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Un=r.Un.remove(e),r.qn.delete(s.target)}function Vg(t,e,n){const r=At(t);let s=kt.min(),a=qt();return r.persistence.runTransaction("Execute query","readonly",l=>function(c,f,p){const m=At(c),_=m.qn.get(p);return _!==void 0?q.resolve(m.Un.get(_)):m.ze.getTargetData(f,p)}(r,l,xi(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.ze.getMatchingKeysForTargetId(l,c.targetId).next(f=>{a=f})}).next(()=>r.Bn.getDocumentsMatchingQuery(l,e,n?s:kt.min(),n?a:qt())).next(c=>({documents:c,Gn:a})))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(e){this.N=e,this.Yn=new Map,this.Xn=new Map}getBundleMetadata(e,n){return q.resolve(this.Yn.get(n))}saveBundleMetadata(e,n){var r;return this.Yn.set(n.id,{id:(r=n).id,version:r.version,createTime:Ss(r.createTime)}),q.resolve()}getNamedQuery(e,n){return q.resolve(this.Xn.get(n))}saveNamedQuery(e,n){return this.Xn.set(n.name,function(r){return{name:r.name,query:Kb(r.bundledQuery),readTime:Ss(r.readTime)}}(n)),q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(){this.Zn=new me(ae.ts),this.es=new me(ae.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,n){const r=new ae(e,n);this.Zn=this.Zn.add(r),this.es=this.es.add(r)}ss(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.rs(new ae(e,n))}os(e,n){e.forEach(r=>this.removeReference(r,n))}cs(e){const n=new it(new Zt([])),r=new ae(n,e),s=new ae(n,e+1),a=[];return this.es.forEachInRange([r,s],l=>{this.rs(l),a.push(l.key)}),a}us(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const n=new it(new Zt([])),r=new ae(n,e),s=new ae(n,e+1);let a=qt();return this.es.forEachInRange([r,s],l=>{a=a.add(l.key)}),a}containsKey(e){const n=new ae(e,0),r=this.Zn.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ae{constructor(e,n){this.key=e,this.ls=n}static ts(e,n){return it.comparator(e.key,n.key)||Dt(e.ls,n.ls)}static ns(e,n){return Dt(e.ls,n.ls)||it.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(e,n){this.Ht=e,this.referenceDelegate=n,this.In=[],this.fs=1,this.ds=new me(ae.ts)}checkEmpty(e){return q.resolve(this.In.length===0)}addMutationBatch(e,n,r,s){const a=this.fs;this.fs++,this.In.length>0&&this.In[this.In.length-1];const l=new qb(a,n,r,s);this.In.push(l);for(const c of s)this.ds=this.ds.add(new ae(c.key,a)),this.Ht.addToCollectionParentIndex(e,c.key.path.popLast());return q.resolve(l)}lookupMutationBatch(e,n){return q.resolve(this.ws(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this._s(r),a=s<0?0:s;return q.resolve(this.In.length>a?this.In[a]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.In.length===0?-1:this.fs-1)}getAllMutationBatches(e){return q.resolve(this.In.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ae(n,0),s=new ae(n,Number.POSITIVE_INFINITY),a=[];return this.ds.forEachInRange([r,s],l=>{const c=this.ws(l.ls);a.push(c)}),q.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new me(Dt);return n.forEach(s=>{const a=new ae(s,0),l=new ae(s,Number.POSITIVE_INFINITY);this.ds.forEachInRange([a,l],c=>{r=r.add(c.ls)})}),q.resolve(this.gs(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let a=r;it.isDocumentKey(a)||(a=a.child(""));const l=new ae(new it(a),0);let c=new me(Dt);return this.ds.forEachWhile(f=>{const p=f.key.path;return!!r.isPrefixOf(p)&&(p.length===s&&(c=c.add(f.ls)),!0)},l),q.resolve(this.gs(c))}gs(e){const n=[];return e.forEach(r=>{const s=this.ws(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ee(this.ys(n.batchId,"removed")===0),this.In.shift();let r=this.ds;return q.forEach(n.mutations,s=>{const a=new ae(s.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.ds=r})}te(e){}containsKey(e,n){const r=new ae(n,0),s=this.ds.firstAfterOrEqual(r);return q.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.In.length,q.resolve()}ys(e,n){return this._s(e)}_s(e){return this.In.length===0?0:e-this.In[0].batchId}ws(e){const n=this._s(e);return n<0||n>=this.In.length?null:this.In[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(e,n){this.Ht=e,this.ps=n,this.docs=new Se(it.comparator),this.size=0}addEntry(e,n,r){const s=n.key,a=this.docs.get(s),l=a?a.size:0,c=this.ps(n);return this.docs=this.docs.insert(s,{document:n.clone(),size:c,readTime:r}),this.size+=c-l,this.Ht.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return q.resolve(r?r.document.clone():xe.newInvalidDocument(n))}getEntries(e,n){let r=Ei();return n.forEach(s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.clone():xe.newInvalidDocument(s))}),q.resolve(r)}getDocumentsMatchingQuery(e,n,r){let s=Ei();const a=new it(n.path.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:f,readTime:p}}=l.getNext();if(!n.path.isPrefixOf(c.path))break;p.compareTo(r)<=0||ba(n,f)&&(s=s.insert(f.key,f.clone()))}return q.resolve(s)}Ts(e,n){return q.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new oP(this)}getSize(e){return q.resolve(this.size)}}class oP extends Yb{constructor(e){super(),this.Se=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.document.isValidDocument()?n.push(this.Se.addEntry(e,s.document,this.getReadTime(r))):this.Se.removeEntry(r)}),q.waitFor(n)}getFromCache(e,n){return this.Se.getEntry(e,n)}getAllFromCache(e,n){return this.Se.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(e){this.persistence=e,this.Es=new Ls(n=>Oc(n),Dc),this.lastRemoteSnapshotVersion=kt.min(),this.highestTargetId=0,this.Is=0,this.As=new Xc,this.targetCount=0,this.Rs=gr.se()}forEachTarget(e,n){return this.Es.forEach((r,s)=>n(s)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.Is)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Is&&(this.Is=n),q.resolve()}ce(e){this.Es.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Rs=new gr(n),this.highestTargetId=n),e.sequenceNumber>this.Is&&(this.Is=e.sequenceNumber)}addTargetData(e,n){return this.ce(n),this.targetCount+=1,q.resolve()}updateTargetData(e,n){return this.ce(n),q.resolve()}removeTargetData(e,n){return this.Es.delete(n.target),this.As.cs(n.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,n,r){let s=0;const a=[];return this.Es.forEach((l,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.Es.delete(l),a.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),q.waitFor(a).next(()=>s)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,n){const r=this.Es.get(n)||null;return q.resolve(r)}addMatchingKeys(e,n,r){return this.As.ss(n,r),q.resolve()}removeMatchingKeys(e,n,r){this.As.os(n,r);const s=this.persistence.referenceDelegate,a=[];return s&&n.forEach(l=>{a.push(s.markPotentiallyOrphaned(e,l))}),q.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.As.cs(n),q.resolve()}getMatchingKeysForTargetId(e,n){const r=this.As.hs(n);return q.resolve(r)}containsKey(e,n){return q.resolve(this.As.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(e,n){this.bs={},this.Le=new Cc(0),this.Be=!1,this.Be=!0,this.referenceDelegate=e(this),this.ze=new aP(this),this.Ht=new jb,this.He=function(r,s){return new sP(r,s)}(this.Ht,r=>this.referenceDelegate.Ps(r)),this.N=new Wb(n),this.Je=new iP(this.N)}start(){return Promise.resolve()}shutdown(){return this.Be=!1,Promise.resolve()}get started(){return this.Be}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Ht}getMutationQueue(e){let n=this.bs[e.toKey()];return n||(n=new rP(this.Ht,this.referenceDelegate),this.bs[e.toKey()]=n),n}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getBundleCache(){return this.Je}runTransaction(e,n,r){et("MemoryPersistence","Starting transaction:",e);const s=new lP(this.Le.next());return this.referenceDelegate.vs(),r(s).next(a=>this.referenceDelegate.Vs(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Ss(e,n){return q.or(Object.values(this.bs).map(r=>()=>r.containsKey(e,n)))}}class lP extends Zb{constructor(e){super(),this.currentSequenceNumber=e}}class Qc{constructor(e){this.persistence=e,this.Ds=new Xc,this.Cs=null}static Ns(e){return new Qc(e)}get xs(){if(this.Cs)return this.Cs;throw ft()}addReference(e,n,r){return this.Ds.addReference(r,n),this.xs.delete(r.toString()),q.resolve()}removeReference(e,n,r){return this.Ds.removeReference(r,n),this.xs.add(r.toString()),q.resolve()}markPotentiallyOrphaned(e,n){return this.xs.add(n.toString()),q.resolve()}removeTarget(e,n){this.Ds.cs(n.targetId).forEach(s=>this.xs.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(a=>this.xs.add(a.toString()))}).next(()=>r.removeTargetData(e,n))}vs(){this.Cs=new Set}Vs(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.xs,r=>{const s=it.fromPath(r);return this.ks(e,s).next(a=>{a||n.removeEntry(s)})}).next(()=>(this.Cs=null,n.apply(e)))}updateLimboDocument(e,n){return this.ks(e,n).next(r=>{r?this.xs.delete(n.toString()):this.xs.add(n.toString())})}Ps(e){return 0}ks(e,n){return q.or([()=>q.resolve(this.Ds.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ss(e,n)])}}class Hg{constructor(){this.activeTargetIds=Tg()}Fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ms(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Os(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class cP{constructor(){this.yi=new Hg,this.pi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.yi.Fs(e),this.pi[e]||"not-current"}updateQueryState(e,n,r){this.pi[e]=n}removeLocalQueryTarget(e){this.yi.Ms(e)}isLocalQueryTarget(e){return this.yi.activeTargetIds.has(e)}clearQueryState(e){delete this.pi[e]}getAllActiveQueryTargets(){return this.yi.activeTargetIds}isActiveQueryTarget(e){return this.yi.activeTargetIds.has(e)}start(){return this.yi=new Hg,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{Ti(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{constructor(){this.Ei=()=>this.Ii(),this.Ai=()=>this.Ri(),this.bi=[],this.Pi()}Ti(e){this.bi.push(e)}shutdown(){window.removeEventListener("online",this.Ei),window.removeEventListener("offline",this.Ai)}Pi(){window.addEventListener("online",this.Ei),window.addEventListener("offline",this.Ai)}Ii(){et("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.bi)e(0)}Ri(){et("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.bi)e(1)}static bt(){return typeof window!="undefined"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP{constructor(e){this.vi=e.vi,this.Vi=e.Vi}Si(e){this.Di=e}Ci(e){this.Ni=e}onMessage(e){this.xi=e}close(){this.Vi()}send(e){this.vi(e)}ki(){this.Di()}$i(e){this.Ni(e)}Oi(e){this.xi(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.Fi=n+"://"+e.host,this.Mi="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Li(e,n,r,s){const a=this.Bi(e,n);et("RestConnection","Sending: ",a,r);const l={};return this.Ui(l,s),this.qi(e,a,l,r).then(c=>(et("RestConnection","Received: ",c),c),c=>{throw Hm("RestConnection",`${e} failed with error: `,c,"url: ",a,"request:",r),c})}Ki(e,n,r,s){return this.Li(e,n,r,s)}Ui(e,n){if(e["X-Goog-Api-Client"]="gl-js/ fire/"+cr,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n)for(const r in n.authHeaders)n.authHeaders.hasOwnProperty(r)&&(e[r]=n.authHeaders[r])}Bi(e,n){const r=fP[e];return`${this.Fi}/v1/${n}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}qi(e,n,r,s){return new Promise((a,l)=>{const c=new jT;c.listenOnce(qT.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Ic.NO_ERROR:const p=c.getResponseJson();et("Connection","XHR received:",JSON.stringify(p)),a(p);break;case Ic.TIMEOUT:et("Connection",'RPC "'+e+'" timed out'),l(new X(F.DEADLINE_EXCEEDED,"Request time out"));break;case Ic.HTTP_ERROR:const m=c.getStatus();if(et("Connection",'RPC "'+e+'" failed with status:',m,"response text:",c.getResponseText()),m>0){const _=c.getResponseJson().error;if(_&&_.status&&_.message){const v=function(x){const A=x.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(A)>=0?A:F.UNKNOWN}(_.status);l(new X(v,_.message))}else l(new X(F.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new X(F.UNAVAILABLE,"Connection failed."));break;default:ft()}}finally{et("Connection",'RPC "'+e+'" completed.')}});const f=JSON.stringify(s);c.send(n,"POST",f,r,15)})}ji(e,n){const r=[this.Fi,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=$T(),a=ZT(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(l.xmlHttpFactory=new KT({})),this.Ui(l.initMessageHeaders,n),Hx()||Zx()||qx()||Wx()||Kx()||$x()||(l.httpHeadersOverwriteParam="$httpHeaders");const c=r.join("");et("Connection","Creating WebChannel: "+c,l);const f=s.createWebChannel(c,l);let p=!1,m=!1;const _=new dP({vi:x=>{m?et("Connection","Not sending because WebChannel is closed:",x):(p||(et("Connection","Opening WebChannel transport."),f.open(),p=!0),et("Connection","WebChannel sending:",x),f.send(x))},Vi:()=>f.close()}),v=(x,A,S)=>{x.listen(A,R=>{try{S(R)}catch(V){setTimeout(()=>{throw V},0)}})};return v(f,va.EventType.OPEN,()=>{m||et("Connection","WebChannel transport opened.")}),v(f,va.EventType.CLOSE,()=>{m||(m=!0,et("Connection","WebChannel transport closed"),_.$i())}),v(f,va.EventType.ERROR,x=>{m||(m=!0,Hm("Connection","WebChannel transport errored:",x),_.$i(new X(F.UNAVAILABLE,"The operation could not be completed")))}),v(f,va.EventType.MESSAGE,x=>{var A;if(!m){const S=x.data[0];ee(!!S);const R=S,V=R.error||((A=R[0])===null||A===void 0?void 0:A.error);if(V){et("Connection","WebChannel received error:",V);const G=V.status;let J=function(It){const Ht=ie[It];if(Ht!==void 0)return xg(Ht)}(G),ot=V.message;J===void 0&&(J=F.INTERNAL,ot="Unknown error status: "+G+" with message "+V.message),m=!0,_.$i(new X(J,ot)),f.close()}else et("Connection","WebChannel received:",S),_.Oi(S)}}),v(a,WT.STAT_EVENT,x=>{x.stat===Fm.PROXY?et("Connection","Detected buffering proxy"):x.stat===Fm.NOPROXY&&et("Connection","Detected no buffering proxy")}),setTimeout(()=>{_.ki()},0),_}}function Jc(){return typeof document!="undefined"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ma(t){return new Mb(t,!0)}class Zg{constructor(e,n,r=1e3,s=1.5,a=6e4){this.Oe=e,this.timerId=n,this.Qi=r,this.Wi=s,this.Gi=a,this.zi=0,this.Hi=null,this.Ji=Date.now(),this.reset()}reset(){this.zi=0}Yi(){this.zi=this.Gi}Xi(e){this.cancel();const n=Math.floor(this.zi+this.Zi()),r=Math.max(0,Date.now()-this.Ji),s=Math.max(0,n-r);s>0&&et("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.zi} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Hi=this.Oe.enqueueAfterDelay(this.timerId,s,()=>(this.Ji=Date.now(),e())),this.zi*=this.Wi,this.zi<this.Qi&&(this.zi=this.Qi),this.zi>this.Gi&&(this.zi=this.Gi)}tr(){this.Hi!==null&&(this.Hi.skipDelay(),this.Hi=null)}cancel(){this.Hi!==null&&(this.Hi.cancel(),this.Hi=null)}Zi(){return(Math.random()-.5)*this.zi}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(e,n,r,s,a,l,c){this.Oe=e,this.er=r,this.nr=s,this.sr=a,this.credentialsProvider=l,this.listener=c,this.state=0,this.ir=0,this.rr=null,this.cr=null,this.stream=null,this.ar=new Zg(e,n)}ur(){return this.state===1||this.state===5||this.hr()}hr(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.lr()}async stop(){this.ur()&&await this.close(0)}dr(){this.state=0,this.ar.reset()}wr(){this.hr()&&this.rr===null&&(this.rr=this.Oe.enqueueAfterDelay(this.er,6e4,()=>this._r()))}mr(e){this.gr(),this.stream.send(e)}async _r(){if(this.hr())return this.close(0)}gr(){this.rr&&(this.rr.cancel(),this.rr=null)}yr(){this.cr&&(this.cr.cancel(),this.cr=null)}async close(e,n){this.gr(),this.yr(),this.ar.cancel(),this.ir++,e!==4?this.ar.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(Wn(n.toString()),Wn("Using maximum backoff delay to prevent overloading the backend."),this.ar.Yi()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&this.credentialsProvider.invalidateToken(),this.stream!==null&&(this.pr(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ci(n)}pr(){}auth(){this.state=1;const e=this.Tr(this.ir),n=this.ir;this.credentialsProvider.getToken().then(r=>{this.ir===n&&this.Er(r)},r=>{e(()=>{const s=new X(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Ir(s)})})}Er(e){const n=this.Tr(this.ir);this.stream=this.Ar(e),this.stream.Si(()=>{n(()=>(this.state=2,this.cr=this.Oe.enqueueAfterDelay(this.nr,1e4,()=>(this.hr()&&(this.state=3),Promise.resolve())),this.listener.Si()))}),this.stream.Ci(r=>{n(()=>this.Ir(r))}),this.stream.onMessage(r=>{n(()=>this.onMessage(r))})}lr(){this.state=5,this.ar.Xi(async()=>{this.state=0,this.start()})}Ir(e){return et("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Tr(e){return n=>{this.Oe.enqueueAndForget(()=>this.ir===e?n():(et("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class gP extends mP{constructor(e,n,r,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,a),this.N=s}Ar(e){return this.sr.ji("Listen",e)}onMessage(e){this.ar.reset();const n=Rb(this.N,e),r=function(s){if(!("targetChange"in s))return kt.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?kt.min():a.readTime?Ss(a.readTime):kt.min()}(e);return this.listener.Rr(n,r)}br(e){const n={};n.database=Mg(this.N),n.addTarget=function(s,a){let l;const c=a.target;return l=Bc(c)?{documents:Ob(s,c)}:{query:Db(s,c)},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?l.resumeToken=Cg(s,a.resumeToken):a.snapshotVersion.compareTo(kt.min())>0&&(l.readTime=qc(s,a.snapshotVersion.toTimestamp())),l}(this.N,e);const r=zb(this.N,e);r&&(n.labels=r),this.mr(n)}Pr(e){const n={};n.database=Mg(this.N),n.removeTarget=e,this.mr(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P extends class{}{constructor(e,n,r){super(),this.credentials=e,this.sr=n,this.N=r,this.kr=!1}$r(){if(this.kr)throw new X(F.FAILED_PRECONDITION,"The client has already been terminated.")}Li(e,n,r){return this.$r(),this.credentials.getToken().then(s=>this.sr.Li(e,n,r,s)).catch(s=>{throw s.name==="FirebaseError"?(s.code===F.UNAUTHENTICATED&&this.credentials.invalidateToken(),s):new X(F.UNKNOWN,s.toString())})}Ki(e,n,r){return this.$r(),this.credentials.getToken().then(s=>this.sr.Ki(e,n,r,s)).catch(s=>{throw s.name==="FirebaseError"?(s.code===F.UNAUTHENTICATED&&this.credentials.invalidateToken(),s):new X(F.UNKNOWN,s.toString())})}terminate(){this.kr=!0}}class vP{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.Or=0,this.Fr=null,this.Mr=!0}Lr(){this.Or===0&&(this.Br("Unknown"),this.Fr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.Fr=null,this.Ur("Backend didn't respond within 10 seconds."),this.Br("Offline"),Promise.resolve())))}qr(e){this.state==="Online"?this.Br("Unknown"):(this.Or++,this.Or>=1&&(this.Kr(),this.Ur(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.Br("Offline")))}set(e){this.Kr(),this.Or=0,e==="Online"&&(this.Mr=!1),this.Br(e)}Br(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}Ur(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Mr?(Wn(n),this.Mr=!1):et("OnlineStateTracker",n)}Kr(){this.Fr!==null&&(this.Fr.cancel(),this.Fr=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(e,n,r,s,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.jr=[],this.Qr=new Map,this.Wr=new Set,this.Gr=[],this.zr=a,this.zr.Ti(l=>{r.enqueueAndForget(async()=>{Ms(this)&&(et("RemoteStore","Restarting streams for network reachability change."),await async function(c){const f=At(c);f.Wr.add(4),await Ns(f),f.Hr.set("Unknown"),f.Wr.delete(4),await ka(f)}(this))})}),this.Hr=new vP(r,s)}}async function ka(t){if(Ms(t))for(const e of t.Gr)await e(!0)}async function Ns(t){for(const e of t.Gr)await e(!1)}function qg(t,e){const n=At(t);n.Qr.has(e.targetId)||(n.Qr.set(e.targetId,e),nh(n)?eh(n):_r(n).hr()&&th(n,e))}function Wg(t,e){const n=At(t),r=_r(n);n.Qr.delete(e),r.hr()&&Kg(n,e),n.Qr.size===0&&(r.hr()?r.wr():Ms(n)&&n.Hr.set("Unknown"))}function th(t,e){t.Jr.Y(e.targetId),_r(t).br(e)}function Kg(t,e){t.Jr.Y(e),_r(t).Pr(e)}function eh(t){t.Jr=new Cb({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Tt:e=>t.Qr.get(e)||null}),_r(t).start(),t.Hr.Lr()}function nh(t){return Ms(t)&&!_r(t).ur()&&t.Qr.size>0}function Ms(t){return At(t).Wr.size===0}function jg(t){t.Jr=void 0}async function wP(t){t.Qr.forEach((e,n)=>{th(t,e)})}async function xP(t,e){jg(t),nh(t)?(t.Hr.qr(e),eh(t)):t.Hr.set("Unknown")}async function EP(t,e,n){if(t.Hr.set("Online"),e instanceof Pg&&e.state===2&&e.cause)try{await async function(r,s){const a=s.cause;for(const l of s.targetIds)r.Qr.has(l)&&(await r.remoteSyncer.rejectListen(l,a),r.Qr.delete(l),r.Jr.removeTarget(l))}(t,e)}catch(r){et("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Gg(t,r)}else if(e instanceof Na?t.Jr.rt(e):e instanceof bg?t.Jr.ft(e):t.Jr.at(e),!n.isEqual(kt.min()))try{const r=await Ug(t.localStore);n.compareTo(r)>=0&&await function(s,a){const l=s.Jr._t(a);return l.targetChanges.forEach((c,f)=>{if(c.resumeToken.approximateByteSize()>0){const p=s.Qr.get(f);p&&s.Qr.set(f,p.withResumeToken(c.resumeToken,a))}}),l.targetMismatches.forEach(c=>{const f=s.Qr.get(c);if(!f)return;s.Qr.set(c,f.withResumeToken(we.EMPTY_BYTE_STRING,f.snapshotVersion)),Kg(s,c);const p=new Ti(f.target,c,1,f.sequenceNumber);th(s,p)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){et("RemoteStore","Failed to raise snapshot:",r),await Gg(t,r)}}async function Gg(t,e,n){if(!Cs(e))throw e;t.Wr.add(1),await Ns(t),t.Hr.set("Offline"),n||(n=()=>Ug(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{et("RemoteStore","Retrying IndexedDB access"),await n(),t.Wr.delete(1),await ka(t)})}async function TP(t,e){const n=At(t);e?(n.Wr.delete(2),await ka(n)):e||(n.Wr.add(2),await Ns(n),n.Hr.set("Unknown"))}function _r(t){return t.Yr||(t.Yr=function(e,n,r){const s=At(e);return s.$r(),new gP(n,s.sr,s.credentials,s.N,r)}(t.datastore,t.asyncQueue,{Si:wP.bind(null,t),Ci:xP.bind(null,t),Rr:EP.bind(null,t)}),t.Gr.push(async e=>{e?(t.Yr.dr(),nh(t)?eh(t):t.Hr.set("Unknown")):(await t.Yr.stop(),jg(t))})),t.Yr}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(e,n,r,s,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new yi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,n,r,s,a){const l=Date.now()+r,c=new ih(e,n,l,s,a);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new X(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Yg(t,e){if(Wn("AsyncQueue",`${e}: ${t}`),Cs(t))return new X(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e){this.comparator=e?(n,r)=>e(n,r)||it.comparator(n.key,r.key):(n,r)=>it.comparator(n.key,r.key),this.keyedMap=Zc(),this.sortedSet=new Se(this.comparator)}static emptySet(e){return new vr(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof vr)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new vr;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(){this.Zr=new Se(it.comparator)}track(e){const n=e.doc.key,r=this.Zr.get(n);r?e.type!==0&&r.type===3?this.Zr=this.Zr.insert(n,e):e.type===3&&r.type!==1?this.Zr=this.Zr.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Zr=this.Zr.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Zr=this.Zr.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Zr=this.Zr.remove(n):e.type===1&&r.type===2?this.Zr=this.Zr.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Zr=this.Zr.insert(n,{type:2,doc:e.doc}):ft():this.Zr=this.Zr.insert(n,e)}eo(){const e=[];return this.Zr.inorderTraversal((n,r)=>{e.push(r)}),e}}class yr{constructor(e,n,r,s,a,l,c,f){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=f}static fromInitialDocuments(e,n,r,s){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new yr(e,n,vr.emptySet(n),a,r,s,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ta(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(){this.no=void 0,this.listeners=[]}}class PP{constructor(){this.queries=new Ls(e=>og(e),Ta),this.onlineState="Unknown",this.so=new Set}}async function AP(t,e){const n=At(t),r=e.query;let s=!1,a=n.queries.get(r);if(a||(s=!0,a=new bP),s)try{a.no=await n.onListen(r)}catch(l){const c=Yg(l,`Initialization of query '${Fc(e.query)}' failed`);return void e.onError(c)}n.queries.set(r,a),a.listeners.push(e),e.io(n.onlineState),a.no&&e.ro(a.no)&&rh(n)}async function IP(t,e){const n=At(t),r=e.query;let s=!1;const a=n.queries.get(r);if(a){const l=a.listeners.indexOf(e);l>=0&&(a.listeners.splice(l,1),s=a.listeners.length===0)}if(s)return n.queries.delete(r),n.onUnlisten(r)}function SP(t,e){const n=At(t);let r=!1;for(const s of e){const a=s.query,l=n.queries.get(a);if(l){for(const c of l.listeners)c.ro(s)&&(r=!0);l.no=s}}r&&rh(n)}function CP(t,e,n){const r=At(t),s=r.queries.get(e);if(s)for(const a of s.listeners)a.onError(n);r.queries.delete(e)}function rh(t){t.so.forEach(e=>{e.next()})}class LP{constructor(e,n,r){this.query=e,this.oo=n,this.co=!1,this.ao=null,this.onlineState="Unknown",this.options=r||{}}ro(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new yr(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let n=!1;return this.co?this.uo(e)&&(this.oo.next(e),n=!0):this.ho(e,this.onlineState)&&(this.lo(e),n=!0),this.ao=e,n}onError(e){this.oo.error(e)}io(e){this.onlineState=e;let n=!1;return this.ao&&!this.co&&this.ho(this.ao,e)&&(this.lo(this.ao),n=!0),n}ho(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.fo||!r)&&(!e.docs.isEmpty()||n==="Offline")}uo(e){if(e.docChanges.length>0)return!0;const n=this.ao&&this.ao.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}lo(e){e=yr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.co=!0,this.oo.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg{constructor(e){this.key=e}}class Jg{constructor(e){this.key=e}}class NP{constructor(e,n){this.query=e,this.po=n,this.To=null,this.current=!1,this.Eo=qt(),this.mutatedKeys=qt(),this.Io=ag(e),this.Ao=new vr(this.Io)}get Ro(){return this.po}bo(e,n){const r=n?n.Po:new Xg,s=n?n.Ao:this.Ao;let a=n?n.mutatedKeys:this.mutatedKeys,l=s,c=!1;const f=xa(this.query)&&s.size===this.query.limit?s.last():null,p=Ea(this.query)&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((m,_)=>{const v=s.get(m),x=ba(this.query,_)?_:null,A=!!v&&this.mutatedKeys.has(v.key),S=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let R=!1;v&&x?v.data.isEqual(x.data)?A!==S&&(r.track({type:3,doc:x}),R=!0):this.vo(v,x)||(r.track({type:2,doc:x}),R=!0,(f&&this.Io(x,f)>0||p&&this.Io(x,p)<0)&&(c=!0)):!v&&x?(r.track({type:0,doc:x}),R=!0):v&&!x&&(r.track({type:1,doc:v}),R=!0,(f||p)&&(c=!0)),R&&(x?(l=l.add(x),a=S?a.add(m):a.delete(m)):(l=l.delete(m),a=a.delete(m)))}),xa(this.query)||Ea(this.query))for(;l.size>this.query.limit;){const m=xa(this.query)?l.last():l.first();l=l.delete(m.key),a=a.delete(m.key),r.track({type:1,doc:m})}return{Ao:l,Po:r,Ln:c,mutatedKeys:a}}vo(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const s=this.Ao;this.Ao=e.Ao,this.mutatedKeys=e.mutatedKeys;const a=e.Po.eo();a.sort((p,m)=>function(_,v){const x=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ft()}};return x(_)-x(v)}(p.type,m.type)||this.Io(p.doc,m.doc)),this.Vo(r);const l=n?this.So():[],c=this.Eo.size===0&&this.current?1:0,f=c!==this.To;return this.To=c,a.length!==0||f?{snapshot:new yr(this.query,e.Ao,s,a,e.mutatedKeys,c===0,f,!1),Do:l}:{Do:l}}io(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ao:this.Ao,Po:new Xg,mutatedKeys:this.mutatedKeys,Ln:!1},!1)):{Do:[]}}Co(e){return!this.po.has(e)&&!!this.Ao.has(e)&&!this.Ao.get(e).hasLocalMutations}Vo(e){e&&(e.addedDocuments.forEach(n=>this.po=this.po.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.po=this.po.delete(n)),this.current=e.current)}So(){if(!this.current)return[];const e=this.Eo;this.Eo=qt(),this.Ao.forEach(r=>{this.Co(r.key)&&(this.Eo=this.Eo.add(r.key))});const n=[];return e.forEach(r=>{this.Eo.has(r)||n.push(new Jg(r))}),this.Eo.forEach(r=>{e.has(r)||n.push(new Qg(r))}),n}No(e){this.po=e.Gn,this.Eo=qt();const n=this.bo(e.documents);return this.applyChanges(n,!0)}xo(){return yr.fromInitialDocuments(this.query,this.Ao,this.mutatedKeys,this.To===0)}}class MP{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class kP{constructor(e){this.key=e,this.ko=!1}}class RP{constructor(e,n,r,s,a,l){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.$o={},this.Oo=new Ls(c=>og(c),Ta),this.Fo=new Map,this.Mo=new Set,this.Lo=new Se(it.comparator),this.Bo=new Map,this.Uo=new Xc,this.qo={},this.Ko=new Map,this.jo=gr.ie(),this.onlineState="Unknown",this.Qo=void 0}get isPrimaryClient(){return this.Qo===!0}}async function OP(t,e){const n=HP(t);let r,s;const a=n.Oo.get(e);if(a)r=a.targetId,n.sharedClientState.addLocalQueryTarget(r),s=a.view.xo();else{const l=await nP(n.localStore,xi(e)),c=n.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,s=await DP(n,e,r,c==="current"),n.isPrimaryClient&&qg(n.remoteStore,l)}return s}async function DP(t,e,n,r){t.Wo=(m,_,v)=>async function(x,A,S,R){let V=A.view.bo(S);V.Ln&&(V=await Vg(x.localStore,A.query,!1).then(({documents:ot})=>A.view.bo(ot,V)));const G=R&&R.targetChanges.get(A.targetId),J=A.view.applyChanges(V,x.isPrimaryClient,G);return i_(x,A.targetId,J.Do),J.snapshot}(t,m,_,v);const s=await Vg(t.localStore,e,!0),a=new NP(e,s.Gn),l=a.bo(s.documents),c=Is.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline"),f=a.applyChanges(l,t.isPrimaryClient,c);i_(t,n,f.Do);const p=new MP(e,n,a);return t.Oo.set(e,p),t.Fo.has(n)?t.Fo.get(n).push(e):t.Fo.set(n,[e]),f.snapshot}async function BP(t,e){const n=At(t),r=n.Oo.get(e),s=n.Fo.get(r.targetId);if(s.length>1)return n.Fo.set(r.targetId,s.filter(a=>!Ta(a,e))),void n.Oo.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Yc(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Wg(n.remoteStore,r.targetId),sh(n,r.targetId)}).catch(jc)):(sh(n,r.targetId),await Yc(n.localStore,r.targetId,!0))}async function t_(t,e){const n=At(t);try{const r=await tP(n.localStore,e);e.targetChanges.forEach((s,a)=>{const l=n.Bo.get(a);l&&(ee(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?l.ko=!0:s.modifiedDocuments.size>0?ee(l.ko):s.removedDocuments.size>0&&(ee(l.ko),l.ko=!1))}),await r_(n,r,e)}catch(r){await jc(r)}}function e_(t,e,n){const r=At(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Oo.forEach((a,l)=>{const c=l.view.io(e);c.snapshot&&s.push(c.snapshot)}),function(a,l){const c=At(a);c.onlineState=l;let f=!1;c.queries.forEach((p,m)=>{for(const _ of m.listeners)_.io(l)&&(f=!0)}),f&&rh(c)}(r.eventManager,e),s.length&&r.$o.Rr(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function zP(t,e,n){const r=At(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Bo.get(e),a=s&&s.key;if(a){let l=new Se(it.comparator);l=l.insert(a,xe.newNoDocument(a,kt.min()));const c=qt().add(a),f=new La(kt.min(),new Map,new me(Dt),l,c);await t_(r,f),r.Lo=r.Lo.remove(a),r.Bo.delete(e),oh(r)}else await Yc(r.localStore,e,!1).then(()=>sh(r,e,n)).catch(jc)}function sh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Fo.get(e))t.Oo.delete(r),n&&t.$o.Go(r,n);t.Fo.delete(e),t.isPrimaryClient&&t.Uo.cs(e).forEach(r=>{t.Uo.containsKey(r)||n_(t,r)})}function n_(t,e){t.Mo.delete(e.path.canonicalString());const n=t.Lo.get(e);n!==null&&(Wg(t.remoteStore,n),t.Lo=t.Lo.remove(e),t.Bo.delete(n),oh(t))}function i_(t,e,n){for(const r of n)r instanceof Qg?(t.Uo.addReference(r.key,e),FP(t,r)):r instanceof Jg?(et("SyncEngine","Document no longer in limbo: "+r.key),t.Uo.removeReference(r.key,e),t.Uo.containsKey(r.key)||n_(t,r.key)):ft()}function FP(t,e){const n=e.key,r=n.path.canonicalString();t.Lo.get(n)||t.Mo.has(r)||(et("SyncEngine","New document in limbo: "+n),t.Mo.add(r),oh(t))}function oh(t){for(;t.Mo.size>0&&t.Lo.size<t.maxConcurrentLimboResolutions;){const e=t.Mo.values().next().value;t.Mo.delete(e);const n=new it(Zt.fromString(e)),r=t.jo.next();t.Bo.set(r,new kP(n)),t.Lo=t.Lo.insert(n,r),qg(t.remoteStore,new Ti(xi(ng(n.path)),r,2,Cc.T))}}async function r_(t,e,n){const r=At(t),s=[],a=[],l=[];r.Oo.isEmpty()||(r.Oo.forEach((c,f)=>{l.push(r.Wo(f,e,n).then(p=>{if(p){r.isPrimaryClient&&r.sharedClientState.updateQueryState(f.targetId,p.fromCache?"not-current":"current"),s.push(p);const m=Gc.kn(f.targetId,p);a.push(m)}}))}),await Promise.all(l),r.$o.Rr(s),await async function(c,f){const p=At(c);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>q.forEach(f,_=>q.forEach(_.Nn,v=>p.persistence.referenceDelegate.addReference(m,_.targetId,v)).next(()=>q.forEach(_.xn,v=>p.persistence.referenceDelegate.removeReference(m,_.targetId,v)))))}catch(m){if(!Cs(m))throw m;et("LocalStore","Failed to update sequence numbers: "+m)}for(const m of f){const _=m.targetId;if(!m.fromCache){const v=p.Un.get(_),x=v.snapshotVersion,A=v.withLastLimboFreeSnapshotVersion(x);p.Un=p.Un.insert(_,A)}}}(r.localStore,a))}async function UP(t,e){const n=At(t);if(!n.currentUser.isEqual(e)){et("SyncEngine","User change. New user:",e.toKey());const r=await Fg(n.localStore,e);n.currentUser=e,function(s,a){s.Ko.forEach(l=>{l.forEach(c=>{c.reject(new X(F.CANCELLED,a))})}),s.Ko.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await r_(n,r.Wn)}}function VP(t,e){const n=At(t),r=n.Bo.get(e);if(r&&r.ko)return qt().add(r.key);{let s=qt();const a=n.Fo.get(e);if(!a)return s;for(const l of a){const c=n.Oo.get(l);s=s.unionWith(c.view.Ro)}return s}}function HP(t){const e=At(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=t_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=VP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zP.bind(null,e),e.$o.Rr=SP.bind(null,e.eventManager),e.$o.Go=CP.bind(null,e.eventManager),e}class $P{constructor(){this.synchronizeTabs=!1}async initialize(e){this.N=Ma(e.databaseInfo.databaseId),this.sharedClientState=this.Ho(e),this.persistence=this.Jo(e),await this.persistence.start(),this.gcScheduler=this.Yo(e),this.localStore=this.Xo(e)}Yo(e){return null}Xo(e){return Jb(this.persistence,new Xb,e.initialUser,this.N)}Jo(e){return new uP(Qc.Ns,this.N)}Ho(e){return new cP}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class ZP{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>e_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=UP.bind(null,this.syncEngine),await TP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new PP}createDatastore(e){const n=Ma(e.databaseInfo.databaseId),r=(s=e.databaseInfo,new pP(s));var s;return function(a,l,c){return new _P(a,l,c)}(e.credentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,s=e.asyncQueue,a=c=>e_(this.syncEngine,c,0),l=$g.bt()?new $g:new hP,new yP(n,r,s,a,l);var n,r,s,a,l}createSyncEngine(e,n){return function(r,s,a,l,c,f,p){const m=new RP(r,s,a,l,c,f);return p&&(m.Qo=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=At(e);et("RemoteStore","RemoteStore shutting down."),n.Wr.add(5),await Ns(n),n.zr.shutdown(),n.Hr.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.tc(this.observer.next,e)}error(e){this.observer.error?this.tc(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}ec(){this.muted=!0}tc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(e,n,r){this.credentials=e,this.asyncQueue=n,this.databaseInfo=r,this.user=Ne.UNAUTHENTICATED,this.clientId=$m.I(),this.credentialListener=()=>Promise.resolve(),this.credentials.start(n,async s=>{et("FirestoreClient","Received user=",s.uid),await this.credentialListener(s),this.user=s})}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.credentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new X(F.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new yi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.credentials.shutdown(),e.resolve()}catch(n){const r=Yg(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function KP(t,e){t.asyncQueue.verifyOperationInProgress(),et("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Fg(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e}async function jP(t,e){t.asyncQueue.verifyOperationInProgress();const n=await GP(t);et("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(s=>async function(a,l){const c=At(a);c.asyncQueue.verifyOperationInProgress(),et("RemoteStore","RemoteStore received new credentials");const f=Ms(c);c.Wr.add(3),await Ns(c),f&&c.Hr.set("Unknown"),await c.remoteSyncer.handleCredentialChange(l),c.Wr.delete(3),await ka(c)}(e.remoteStore,s)),t.onlineComponents=e}async function GP(t){return t.offlineComponents||(et("FirestoreClient","Using default OfflineComponentProvider"),await KP(t,new $P)),t.offlineComponents}async function YP(t){return t.onlineComponents||(et("FirestoreClient","Using default OnlineComponentProvider"),await jP(t,new ZP)),t.onlineComponents}async function XP(t){const e=await YP(t),n=e.eventManager;return n.onListen=OP.bind(null,e.syncEngine),n.onUnlisten=BP.bind(null,e.syncEngine),n}function QP(t,e,n={}){const r=new yi;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,l,c,f){const p=new qP({next:_=>{a.enqueueAndForget(()=>IP(s,m)),_.fromCache&&c.source==="server"?f.reject(new X(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(_)},error:_=>f.reject(_)}),m=new LP(l,p,{includeMetadataChanges:!0,fo:!0});return AP(s,m)}(await XP(t),t.asyncQueue,e,n,r)),r.promise}class JP{constructor(e,n,r,s,a,l,c,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.useFetchStreams=f}}class ks{constructor(e,n){this.projectId=e,this.database=n||"(default)"}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ks&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o_(t,e,n){if(!n)throw new X(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function tA(t,e,n,r){if(e===!0&&r===!0)throw new X(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function a_(t){if(!it.isDocumentKey(t))throw new X(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function u_(t){if(it.isDocumentKey(t))throw new X(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ra(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ft()}function l_(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new X(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ra(t);throw new X(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{constructor(e){var n;if(e.host===void 0){if(e.ssl!==void 0)throw new X(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new X(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,tA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(e,n){this._credentials=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new c_({}),this._settingsFrozen=!1,e instanceof ks?this._databaseId=e:(this._app=e,this._databaseId=function(r){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new X(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ks(r.options.projectId)}(e))}get app(){if(!this._app)throw new X(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new X(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new c_(e),e.credentials!==void 0&&(this._credentials=function(n){if(!n)return new YT;switch(n.type){case"gapi":const r=n.client;return ee(!(typeof r!="object"||r===null||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new JT(r,n.sessionIndex||"0",n.iamToken||null);case"provider":return n.client;default:throw new X(F.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=s_.get(e);n&&(et("ComponentProvider","Removing Datastore"),s_.delete(e),n.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new jn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ze(this.firestore,e,this._key)}}class Rs{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Rs(this.firestore,e,this._query)}}class jn extends Rs{constructor(e,n,r){super(e,n,ng(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ze(this.firestore,null,new it(e))}withConverter(e){return new jn(this.firestore,e,this._path)}}function JS(t,e,...n){if(t=Jr(t),o_("collection","path",e),t instanceof ah){const r=Zt.fromString(e,...n);return u_(r),new jn(t,null,r)}{if(!(t instanceof Ze||t instanceof jn))throw new X(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Zt.fromString(e,...n));return u_(r),new jn(t.firestore,null,r)}}function tC(t,e,...n){if(t=Jr(t),arguments.length===1&&(e=$m.I()),o_("doc","path",e),t instanceof ah){const r=Zt.fromString(e,...n);return a_(r),new Ze(t,null,new it(r))}{if(!(t instanceof Ze||t instanceof jn))throw new X(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Zt.fromString(e,...n));return a_(r),new Ze(t.firestore,t instanceof jn?t.converter:null,new it(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(){this._c=Promise.resolve(),this.mc=[],this.gc=!1,this.yc=[],this.Tc=null,this.Ec=!1,this.Ic=!1,this.Ac=[],this.ar=new Zg(this,"async_queue_retry"),this.Rc=()=>{const n=Jc();n&&et("AsyncQueue","Visibility state changed to "+n.visibilityState),this.ar.tr()};const e=Jc();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Rc)}get isShuttingDown(){return this.gc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.bc(),this.Pc(e)}enterRestrictedMode(e){if(!this.gc){this.gc=!0,this.Ic=e||!1;const n=Jc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Rc)}}enqueue(e){if(this.bc(),this.gc)return new Promise(()=>{});const n=new yi;return this.Pc(()=>this.gc&&this.Ic?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.mc.push(e),this.vc()))}async vc(){if(this.mc.length!==0){try{await this.mc[0](),this.mc.shift(),this.ar.reset()}catch(e){if(!Cs(e))throw e;et("AsyncQueue","Operation failed with retryable error: "+e)}this.mc.length>0&&this.ar.Xi(()=>this.vc())}}Pc(e){const n=this._c.then(()=>(this.Ec=!0,e().catch(r=>{this.Tc=r,this.Ec=!1;const s=function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),l}(r);throw Wn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.Ec=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.bc(),this.Ac.indexOf(e)>-1&&(n=0);const s=ih.createAndSchedule(this,e,n,r,a=>this.Vc(a));return this.yc.push(s),s}bc(){this.Tc&&ft()}verifyOperationInProgress(){}async Sc(){let e;do e=this._c,await e;while(e!==this._c)}Dc(e){for(const n of this.yc)if(n.timerId===e)return!0;return!1}Cc(e){return this.Sc().then(()=>{this.yc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.yc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Sc()})}Nc(e){this.Ac.push(e)}Vc(e){const n=this.yc.indexOf(e);this.yc.splice(n,1)}}class h_ extends ah{constructor(e,n){super(e,n),this.type="firestore",this._queue=new eA,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||f_(this),this._firestoreClient.terminate()}}function eC(t=zE()){return RE(t,"firestore").getImmediate()}function nA(t){return t._firestoreClient||f_(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function f_(t){var e;const n=t._freezeSettings(),r=function(s,a,l,c){return new JP(s,a,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,c.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new WP(t._credentials,t._queue,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new X(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $e(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new wr(we.fromBase64String(e))}catch(n){throw new X(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new wr(we.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new X(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new X(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Dt(this._lat,e._lat)||Dt(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA=/^__.*__$/;function m_(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ft()}}class lh{constructor(e,n,r,s,a,l){this.settings=e,this.databaseId=n,this.N=r,this.ignoreUndefinedProperties=s,a===void 0&&this.xc(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get kc(){return this.settings.kc}$c(e){return new lh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.N,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Oc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.$c({path:r,Fc:!1});return s.Mc(e),s}Lc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.$c({path:r,Fc:!1});return s.xc(),s}Bc(e){return this.$c({path:void 0,Fc:!0})}Uc(e){return hh(e,this.settings.methodName,this.settings.qc||!1,this.path,this.settings.Kc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.Mc(this.path.get(e))}Mc(e){if(e.length===0)throw this.Uc("Document fields must not be empty");if(m_(this.kc)&&iA.test(e))throw this.Uc('Document fields cannot begin and end with "__"')}}class rA{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.N=r||Ma(e)}jc(e,n,r,s=!1){return new lh({kc:e,methodName:n,Kc:r,path:$e.emptyPath(),Fc:!1,qc:s},this.databaseId,this.N,this.ignoreUndefinedProperties)}}function sA(t){const e=t._freezeSettings(),n=Ma(t._databaseId);return new rA(t._databaseId,!!e.ignoreUndefinedProperties,n)}function oA(t,e,n,r=!1){return ch(n,t.jc(r?4:3,e))}function ch(t,e){if(g_(t=Jr(t)))return uA("Unsupported field value:",e,t),aA(t,e);if(t instanceof p_)return function(n,r){if(!m_(r.kc))throw r.Uc(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Uc(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Fc&&e.kc!==4)throw e.Uc("Nested arrays are not supported");return function(n,r){const s=[];let a=0;for(const l of n){let c=ch(l,r.Bc(a));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),a++}return{arrayValue:{values:s}}}(t,e)}return function(n,r){if((n=Jr(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return vb(r.N,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=He.fromDate(n);return{timestampValue:qc(r.N,s)}}if(n instanceof He){const s=new He(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:qc(r.N,s)}}if(n instanceof uh)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof wr)return{bytesValue:Cg(r.N,n._byteString)};if(n instanceof Ze){const s=r.databaseId,a=n.firestore._databaseId;if(!a.isEqual(s))throw r.Uc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Lg(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.Uc(`Unsupported field value: ${Ra(n)}`)}(t,e)}function aA(t,e){const n={};return qm(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ys(t,(r,s)=>{const a=ch(s,e.Oc(r));a!=null&&(n[r]=a)}),{mapValue:{fields:n}}}function g_(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof He||t instanceof uh||t instanceof wr||t instanceof Ze||t instanceof p_)}function uA(t,e,n){if(!g_(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const r=Ra(n);throw r==="an object"?e.Uc(t+" a custom object"):e.Uc(t+" "+r)}}const lA=new RegExp("[~\\*/\\[\\]]");function cA(t,e,n){if(e.search(lA)>=0)throw hh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new d_(...e.split("."))._internalPath}catch{throw hh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function hh(t,e,n,r,s){const a=r&&!r.isEmpty(),l=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let f="";return(a||l)&&(f+=" (found",a&&(f+=` in field ${r}`),l&&(f+=` in document ${s}`),f+=")"),new X(F.INVALID_ARGUMENT,c+t+f)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{constructor(e,n,r,s,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Ze(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new hA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(fh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class hA extends __{data(){return super.data()}}function fh(t,e){return typeof e=="string"?cA(t,e):e instanceof d_?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fA extends __{constructor(e,n,r,s,a,l){super(e,n,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Da(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(fh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Da extends fA{data(e={}){return super.data(e)}}class dA{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Oa(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Da(this._firestore,this._userDataWriter,r.key,r,new Oa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new X(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new Da(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Oa(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const c=new Da(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Oa(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,p=-1;return l.type!==0&&(f=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),p=a.indexOf(l.doc.key)),{type:pA(l.type),doc:c,oldIndex:f,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function pA(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ft()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mA(t){if(Ea(t)&&t.explicitOrderBy.length===0)throw new X(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class gA{}function nC(t,...e){for(const n of e)t=n._apply(t);return t}class _A extends gA{constructor(e,n,r){super(),this.Gc=e,this.zc=n,this.Hc=r,this.type="where"}_apply(e){const n=sA(e.firestore),r=function(s,a,l,c,f,p,m){let _;if(f.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new X(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on FieldPath.documentId().`);if(p==="in"||p==="not-in"){y_(m,p);const x=[];for(const A of m)x.push(v_(c,s,A));_={arrayValue:{values:x}}}else _=v_(c,s,m)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||y_(m,p),_=oA(l,a,m,p==="in"||p==="not-in");const v=Ie.create(f,p,_);return function(x,A){if(A.v()){const R=rg(x);if(R!==null&&!R.isEqual(A.field))throw new X(F.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${R.toString()}' and '${A.field.toString()}'`);const V=ig(x);V!==null&&vA(x,A.field,V)}const S=function(R,V){for(const G of R.filters)if(V.indexOf(G.op)>=0)return G.op;return null}(x,function(R){switch(R){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(A.op));if(S!==null)throw S===A.op?new X(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${A.op.toString()}' filter.`):new X(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${A.op.toString()}' filters with '${S.toString()}' filters.`)}(s,v),v}(e._query,"where",n,e.firestore._databaseId,this.Gc,this.zc,this.Hc);return new Rs(e.firestore,e.converter,function(s,a){const l=s.filters.concat([a]);return new Ps(s.path,s.collectionGroup,s.explicitOrderBy.slice(),l,s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}function iC(t,e,n){const r=e,s=fh("where",t);return new _A(s,r,n)}function v_(t,e,n){if(typeof(n=Jr(n))=="string"){if(n==="")throw new X(F.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!sg(e)&&n.indexOf("/")!==-1)throw new X(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Zt.fromString(n));if(!it.isDocumentKey(r))throw new X(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Gm(t,new it(r))}if(n instanceof Ze)return Gm(t,n._key);throw new X(F.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ra(n)}.`)}function y_(t,e){if(!Array.isArray(t)||t.length===0)throw new X(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(t.length>10)throw new X(F.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function vA(t,e,n){if(!n.isEqual(e))throw new X(F.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{convertValue(e,n="none"){switch(wi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ne(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(hr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw ft()}}convertObject(e,n){const r={};return ys(e.fields,(s,a)=>{r[s]=this.convertValue(a,n)}),r}convertGeoPoint(e){return new uh(ne(e.latitude),ne(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Km(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(xs(e));default:return null}}convertTimestamp(e){const n=Kn(e);return new He(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Zt.fromString(e);ee(Bg(r));const s=new ks(r.get(1),r.get(3)),a=new it(r.popFirst(5));return s.isEqual(n)||Wn(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}class wA extends yA{constructor(e){super(),this.firestore=e}convertBytes(e){return new wr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ze(this.firestore,null,n)}}function rC(t){t=l_(t,Rs);const e=l_(t.firestore,h_),n=nA(e),r=new wA(e);return mA(t._query),QP(n,t._query).then(s=>new dA(e,r,t,s))}(function(t,e=!0){(function(n){cr=n})(BE),Dl(new Zo("firestore",(n,{options:r})=>{const s=n.getProvider("app").getImmediate(),a=new h_(s,new XT(n.getProvider("auth-internal")));return r=Object.assign({useFetchStreams:e},r),a._setSettings(r),a},"PUBLIC")),rr(Um,"3.3.0",t),rr(Um,"3.3.0","esm2017")})();var xA=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},dh={exports:{}};/* @preserve
 * Leaflet 1.7.1, a JS library for interactive maps. http://leafletjs.com
 * (c) 2010-2019 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,r){r(e)})(xA,function(n){var r="1.7.1";function s(i){var o,u,h,d;for(u=1,h=arguments.length;u<h;u++){d=arguments[u];for(o in d)i[o]=d[o]}return i}var a=Object.create||function(){function i(){}return function(o){return i.prototype=o,new i}}();function l(i,o){var u=Array.prototype.slice;if(i.bind)return i.bind.apply(i,u.call(arguments,1));var h=u.call(arguments,2);return function(){return i.apply(o,h.length?h.concat(u.call(arguments)):arguments)}}var c=0;function f(i){return i._leaflet_id=i._leaflet_id||++c,i._leaflet_id}function p(i,o,u){var h,d,g,w;return w=function(){h=!1,d&&(g.apply(u,d),d=!1)},g=function(){h?d=arguments:(i.apply(u,arguments),setTimeout(w,o),h=!0)},g}function m(i,o,u){var h=o[1],d=o[0],g=h-d;return i===h&&u?i:((i-d)%g+g)%g+d}function _(){return!1}function v(i,o){var u=Math.pow(10,o===void 0?6:o);return Math.round(i*u)/u}function x(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}function A(i){return x(i).split(/\s+/)}function S(i,o){Object.prototype.hasOwnProperty.call(i,"options")||(i.options=i.options?a(i.options):{});for(var u in o)i.options[u]=o[u];return i.options}function R(i,o,u){var h=[];for(var d in i)h.push(encodeURIComponent(u?d.toUpperCase():d)+"="+encodeURIComponent(i[d]));return(!o||o.indexOf("?")===-1?"?":"&")+h.join("&")}var V=/\{ *([\w_-]+) *\}/g;function G(i,o){return i.replace(V,function(u,h){var d=o[h];if(d===void 0)throw new Error("No value provided for variable "+u);return typeof d=="function"&&(d=d(o)),d})}var J=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"};function ot(i,o){for(var u=0;u<i.length;u++)if(i[u]===o)return u;return-1}var It="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Ht(i){return window["webkit"+i]||window["moz"+i]||window["ms"+i]}var mt=0;function Kt(i){var o=+new Date,u=Math.max(0,16-(o-mt));return mt=o+u,window.setTimeout(i,u)}var Ft=window.requestAnimationFrame||Ht("RequestAnimationFrame")||Kt,ue=window.cancelAnimationFrame||Ht("CancelAnimationFrame")||Ht("CancelRequestAnimationFrame")||function(i){window.clearTimeout(i)};function _t(i,o,u){if(u&&Ft===Kt)i.call(o);else return Ft.call(window,l(i,o))}function Ct(i){i&&ue.call(window,i)}var Qe={extend:s,create:a,bind:l,lastId:c,stamp:f,throttle:p,wrapNum:m,falseFn:_,formatNum:v,trim:x,splitWords:A,setOptions:S,getParamString:R,template:G,isArray:J,indexOf:ot,emptyImageUrl:It,requestFn:Ft,cancelFn:ue,requestAnimFrame:_t,cancelAnimFrame:Ct};function ge(){}ge.extend=function(i){var o=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},u=o.__super__=this.prototype,h=a(u);h.constructor=o,o.prototype=h;for(var d in this)Object.prototype.hasOwnProperty.call(this,d)&&d!=="prototype"&&d!=="__super__"&&(o[d]=this[d]);return i.statics&&(s(o,i.statics),delete i.statics),i.includes&&(Ln(i.includes),s.apply(null,[h].concat(i.includes)),delete i.includes),h.options&&(i.options=s(a(h.options),i.options)),s(h,i),h._initHooks=[],h.callInitHooks=function(){if(!this._initHooksCalled){u.callInitHooks&&u.callInitHooks.call(this),this._initHooksCalled=!0;for(var g=0,w=h._initHooks.length;g<w;g++)h._initHooks[g].call(this)}},o},ge.include=function(i){return s(this.prototype,i),this},ge.mergeOptions=function(i){return s(this.prototype.options,i),this},ge.addInitHook=function(i){var o=Array.prototype.slice.call(arguments,1),u=typeof i=="function"?i:function(){this[i].apply(this,o)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(u),this};function Ln(i){if(!(typeof L=="undefined"||!L||!L.Mixin)){i=J(i)?i:[i];for(var o=0;o<i.length;o++)i[o]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var vt={on:function(i,o,u){if(typeof i=="object")for(var h in i)this._on(h,i[h],o);else{i=A(i);for(var d=0,g=i.length;d<g;d++)this._on(i[d],o,u)}return this},off:function(i,o,u){if(!i)delete this._events;else if(typeof i=="object")for(var h in i)this._off(h,i[h],o);else{i=A(i);for(var d=0,g=i.length;d<g;d++)this._off(i[d],o,u)}return this},_on:function(i,o,u){this._events=this._events||{};var h=this._events[i];h||(h=[],this._events[i]=h),u===this&&(u=void 0);for(var d={fn:o,ctx:u},g=h,w=0,T=g.length;w<T;w++)if(g[w].fn===o&&g[w].ctx===u)return;g.push(d)},_off:function(i,o,u){var h,d,g;if(!!this._events&&(h=this._events[i],!!h)){if(!o){for(d=0,g=h.length;d<g;d++)h[d].fn=_;delete this._events[i];return}if(u===this&&(u=void 0),h)for(d=0,g=h.length;d<g;d++){var w=h[d];if(w.ctx===u&&w.fn===o){w.fn=_,this._firingCount&&(this._events[i]=h=h.slice()),h.splice(d,1);return}}}},fire:function(i,o,u){if(!this.listens(i,u))return this;var h=s({},o,{type:i,target:this,sourceTarget:o&&o.sourceTarget||this});if(this._events){var d=this._events[i];if(d){this._firingCount=this._firingCount+1||1;for(var g=0,w=d.length;g<w;g++){var T=d[g];T.fn.call(T.ctx||this,h)}this._firingCount--}}return u&&this._propagateEvent(h),this},listens:function(i,o){var u=this._events&&this._events[i];if(u&&u.length)return!0;if(o){for(var h in this._eventParents)if(this._eventParents[h].listens(i,o))return!0}return!1},once:function(i,o,u){if(typeof i=="object"){for(var h in i)this.once(h,i[h],o);return this}var d=l(function(){this.off(i,o,u).off(i,d,u)},this);return this.on(i,o,u).on(i,d,u)},addEventParent:function(i){return this._eventParents=this._eventParents||{},this._eventParents[f(i)]=i,this},removeEventParent:function(i){return this._eventParents&&delete this._eventParents[f(i)],this},_propagateEvent:function(i){for(var o in this._eventParents)this._eventParents[o].fire(i.type,s({layer:i.target,propagatedFrom:i.target},i),!0)}};vt.addEventListener=vt.on,vt.removeEventListener=vt.clearAllEventListeners=vt.off,vt.addOneTimeEventListener=vt.once,vt.fireEvent=vt.fire,vt.hasEventListeners=vt.listens;var xt=ge.extend(vt);function $(i,o,u){this.x=u?Math.round(i):i,this.y=u?Math.round(o):o}var Ee=Math.trunc||function(i){return i>0?Math.floor(i):Math.ceil(i)};$.prototype={clone:function(){return new $(this.x,this.y)},add:function(i){return this.clone()._add(ct(i))},_add:function(i){return this.x+=i.x,this.y+=i.y,this},subtract:function(i){return this.clone()._subtract(ct(i))},_subtract:function(i){return this.x-=i.x,this.y-=i.y,this},divideBy:function(i){return this.clone()._divideBy(i)},_divideBy:function(i){return this.x/=i,this.y/=i,this},multiplyBy:function(i){return this.clone()._multiplyBy(i)},_multiplyBy:function(i){return this.x*=i,this.y*=i,this},scaleBy:function(i){return new $(this.x*i.x,this.y*i.y)},unscaleBy:function(i){return new $(this.x/i.x,this.y/i.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Ee(this.x),this.y=Ee(this.y),this},distanceTo:function(i){i=ct(i);var o=i.x-this.x,u=i.y-this.y;return Math.sqrt(o*o+u*u)},equals:function(i){return i=ct(i),i.x===this.x&&i.y===this.y},contains:function(i){return i=ct(i),Math.abs(i.x)<=Math.abs(this.x)&&Math.abs(i.y)<=Math.abs(this.y)},toString:function(){return"Point("+v(this.x)+", "+v(this.y)+")"}};function ct(i,o,u){return i instanceof $?i:J(i)?new $(i[0],i[1]):i==null?i:typeof i=="object"&&"x"in i&&"y"in i?new $(i.x,i.y):new $(i,o,u)}function yt(i,o){if(!!i)for(var u=o?[i,o]:i,h=0,d=u.length;h<d;h++)this.extend(u[h])}yt.prototype={extend:function(i){return i=ct(i),!this.min&&!this.max?(this.min=i.clone(),this.max=i.clone()):(this.min.x=Math.min(i.x,this.min.x),this.max.x=Math.max(i.x,this.max.x),this.min.y=Math.min(i.y,this.min.y),this.max.y=Math.max(i.y,this.max.y)),this},getCenter:function(i){return new $((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,i)},getBottomLeft:function(){return new $(this.min.x,this.max.y)},getTopRight:function(){return new $(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(i){var o,u;return typeof i[0]=="number"||i instanceof $?i=ct(i):i=jt(i),i instanceof yt?(o=i.min,u=i.max):o=u=i,o.x>=this.min.x&&u.x<=this.max.x&&o.y>=this.min.y&&u.y<=this.max.y},intersects:function(i){i=jt(i);var o=this.min,u=this.max,h=i.min,d=i.max,g=d.x>=o.x&&h.x<=u.x,w=d.y>=o.y&&h.y<=u.y;return g&&w},overlaps:function(i){i=jt(i);var o=this.min,u=this.max,h=i.min,d=i.max,g=d.x>o.x&&h.x<u.x,w=d.y>o.y&&h.y<u.y;return g&&w},isValid:function(){return!!(this.min&&this.max)}};function jt(i,o){return!i||i instanceof yt?i:new yt(i,o)}function Bt(i,o){if(!!i)for(var u=o?[i,o]:i,h=0,d=u.length;h<d;h++)this.extend(u[h])}Bt.prototype={extend:function(i){var o=this._southWest,u=this._northEast,h,d;if(i instanceof I)h=i,d=i;else if(i instanceof Bt){if(h=i._southWest,d=i._northEast,!h||!d)return this}else return i?this.extend(U(i)||Gt(i)):this;return!o&&!u?(this._southWest=new I(h.lat,h.lng),this._northEast=new I(d.lat,d.lng)):(o.lat=Math.min(h.lat,o.lat),o.lng=Math.min(h.lng,o.lng),u.lat=Math.max(d.lat,u.lat),u.lng=Math.max(d.lng,u.lng)),this},pad:function(i){var o=this._southWest,u=this._northEast,h=Math.abs(o.lat-u.lat)*i,d=Math.abs(o.lng-u.lng)*i;return new Bt(new I(o.lat-h,o.lng-d),new I(u.lat+h,u.lng+d))},getCenter:function(){return new I((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new I(this.getNorth(),this.getWest())},getSouthEast:function(){return new I(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(i){typeof i[0]=="number"||i instanceof I||"lat"in i?i=U(i):i=Gt(i);var o=this._southWest,u=this._northEast,h,d;return i instanceof Bt?(h=i.getSouthWest(),d=i.getNorthEast()):h=d=i,h.lat>=o.lat&&d.lat<=u.lat&&h.lng>=o.lng&&d.lng<=u.lng},intersects:function(i){i=Gt(i);var o=this._southWest,u=this._northEast,h=i.getSouthWest(),d=i.getNorthEast(),g=d.lat>=o.lat&&h.lat<=u.lat,w=d.lng>=o.lng&&h.lng<=u.lng;return g&&w},overlaps:function(i){i=Gt(i);var o=this._southWest,u=this._northEast,h=i.getSouthWest(),d=i.getNorthEast(),g=d.lat>o.lat&&h.lat<u.lat,w=d.lng>o.lng&&h.lng<u.lng;return g&&w},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(i,o){return i?(i=Gt(i),this._southWest.equals(i.getSouthWest(),o)&&this._northEast.equals(i.getNorthEast(),o)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Gt(i,o){return i instanceof Bt?i:new Bt(i,o)}function I(i,o,u){if(isNaN(i)||isNaN(o))throw new Error("Invalid LatLng object: ("+i+", "+o+")");this.lat=+i,this.lng=+o,u!==void 0&&(this.alt=+u)}I.prototype={equals:function(i,o){if(!i)return!1;i=U(i);var u=Math.max(Math.abs(this.lat-i.lat),Math.abs(this.lng-i.lng));return u<=(o===void 0?1e-9:o)},toString:function(i){return"LatLng("+v(this.lat,i)+", "+v(this.lng,i)+")"},distanceTo:function(i){return K.distance(this,U(i))},wrap:function(){return K.wrapLatLng(this)},toBounds:function(i){var o=180*i/40075017,u=o/Math.cos(Math.PI/180*this.lat);return Gt([this.lat-o,this.lng-u],[this.lat+o,this.lng+u])},clone:function(){return new I(this.lat,this.lng,this.alt)}};function U(i,o,u){return i instanceof I?i:J(i)&&typeof i[0]!="object"?i.length===3?new I(i[0],i[1],i[2]):i.length===2?new I(i[0],i[1]):null:i==null?i:typeof i=="object"&&"lat"in i?new I(i.lat,"lng"in i?i.lng:i.lon,i.alt):o===void 0?null:new I(i,o,u)}var D={latLngToPoint:function(i,o){var u=this.projection.project(i),h=this.scale(o);return this.transformation._transform(u,h)},pointToLatLng:function(i,o){var u=this.scale(o),h=this.transformation.untransform(i,u);return this.projection.unproject(h)},project:function(i){return this.projection.project(i)},unproject:function(i){return this.projection.unproject(i)},scale:function(i){return 256*Math.pow(2,i)},zoom:function(i){return Math.log(i/256)/Math.LN2},getProjectedBounds:function(i){if(this.infinite)return null;var o=this.projection.bounds,u=this.scale(i),h=this.transformation.transform(o.min,u),d=this.transformation.transform(o.max,u);return new yt(h,d)},infinite:!1,wrapLatLng:function(i){var o=this.wrapLng?m(i.lng,this.wrapLng,!0):i.lng,u=this.wrapLat?m(i.lat,this.wrapLat,!0):i.lat,h=i.alt;return new I(u,o,h)},wrapLatLngBounds:function(i){var o=i.getCenter(),u=this.wrapLatLng(o),h=o.lat-u.lat,d=o.lng-u.lng;if(h===0&&d===0)return i;var g=i.getSouthWest(),w=i.getNorthEast(),T=new I(g.lat-h,g.lng-d),P=new I(w.lat-h,w.lng-d);return new Bt(T,P)}},K=s({},D,{wrapLng:[-180,180],R:6371e3,distance:function(i,o){var u=Math.PI/180,h=i.lat*u,d=o.lat*u,g=Math.sin((o.lat-i.lat)*u/2),w=Math.sin((o.lng-i.lng)*u/2),T=g*g+Math.cos(h)*Math.cos(d)*w*w,P=2*Math.atan2(Math.sqrt(T),Math.sqrt(1-T));return this.R*P}}),Lt=6378137,Nt={R:Lt,MAX_LATITUDE:85.0511287798,project:function(i){var o=Math.PI/180,u=this.MAX_LATITUDE,h=Math.max(Math.min(u,i.lat),-u),d=Math.sin(h*o);return new $(this.R*i.lng*o,this.R*Math.log((1+d)/(1-d))/2)},unproject:function(i){var o=180/Math.PI;return new I((2*Math.atan(Math.exp(i.y/this.R))-Math.PI/2)*o,i.x*o/this.R)},bounds:function(){var i=Lt*Math.PI;return new yt([-i,-i],[i,i])}()};function ut(i,o,u,h){if(J(i)){this._a=i[0],this._b=i[1],this._c=i[2],this._d=i[3];return}this._a=i,this._b=o,this._c=u,this._d=h}ut.prototype={transform:function(i,o){return this._transform(i.clone(),o)},_transform:function(i,o){return o=o||1,i.x=o*(this._a*i.x+this._b),i.y=o*(this._c*i.y+this._d),i},untransform:function(i,o){return o=o||1,new $((i.x/o-this._b)/this._a,(i.y/o-this._d)/this._c)}};function rt(i,o,u,h){return new ut(i,o,u,h)}var y=s({},K,{code:"EPSG:3857",projection:Nt,transformation:function(){var i=.5/(Math.PI*Nt.R);return rt(i,.5,-i,.5)}()}),E=s({},y,{code:"EPSG:900913"});function b(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function M(i,o){var u="",h,d,g,w,T,P;for(h=0,g=i.length;h<g;h++){for(T=i[h],d=0,w=T.length;d<w;d++)P=T[d],u+=(d?"L":"M")+P.x+" "+P.y;u+=o?Zs?"z":"x":""}return u||"M0 0"}var N=document.documentElement.style,B="ActiveXObject"in window,H=B&&!document.addEventListener,O="msLaunchUri"in navigator&&!("documentMode"in document),z=en("webkit"),k=en("android"),Y=en("android 2")||en("android 3"),j=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Q=k&&en("Google")&&j<537&&!("AudioNode"in window),nt=!!window.opera,dt=!O&&en("chrome"),Rt=en("gecko")&&!z&&!nt&&!B,Et=!dt&&en("safari"),Ot=en("phantom"),Ce="OTransition"in N,dn=navigator.platform.indexOf("Win")===0,Ii=B&&"transition"in N,pn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Y,Pr="MozPerspective"in N,Ut=!window.L_DISABLE_3D&&(Ii||pn||Pr)&&!Ce&&!Ot,le=typeof orientation!="undefined"||en("mobile"),$s=le&&z,uv=le&&pn,Nn=!window.PointerEvent&&window.MSPointerEvent,Je=!!(window.PointerEvent||Nn),tn=!window.L_NO_TOUCH&&(Je||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),Ch=le&&nt,lv=le&&Rt,Mn=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Si=function(){var i=!1;try{var o=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("testPassiveEventSupport",_,o),window.removeEventListener("testPassiveEventSupport",_,o)}catch{}return i}(),Lh=function(){return!!document.createElement("canvas").getContext}(),Zs=!!(document.createElementNS&&b("svg").createSVGRect),qs=!Zs&&function(){try{var i=document.createElement("div");i.innerHTML='<v:shape adj="1"/>';var o=i.firstChild;return o.style.behavior="url(#default#VML)",o&&typeof o.adj=="object"}catch{return!1}}();function en(i){return navigator.userAgent.toLowerCase().indexOf(i)>=0}var cv={ie:B,ielt9:H,edge:O,webkit:z,android:k,android23:Y,androidStock:Q,opera:nt,chrome:dt,gecko:Rt,safari:Et,phantom:Ot,opera12:Ce,win:dn,ie3d:Ii,webkit3d:pn,gecko3d:Pr,any3d:Ut,mobile:le,mobileWebkit:$s,mobileWebkit3d:uv,msPointer:Nn,pointer:Je,touch:tn,mobileOpera:Ch,mobileGecko:lv,retina:Mn,passiveEvents:Si,canvas:Lh,svg:Zs,vml:qs},Qa=Nn?"MSPointerDown":"pointerdown",Ja=Nn?"MSPointerMove":"pointermove",tu=Nn?"MSPointerUp":"pointerup",eu=Nn?"MSPointerCancel":"pointercancel",Ci={},Nh=!1;function hv(i,o,u,h){return o==="touchstart"?dv(i,u,h):o==="touchmove"?gv(i,u,h):o==="touchend"&&_v(i,u,h),this}function fv(i,o,u){var h=i["_leaflet_"+o+u];return o==="touchstart"?i.removeEventListener(Qa,h,!1):o==="touchmove"?i.removeEventListener(Ja,h,!1):o==="touchend"&&(i.removeEventListener(tu,h,!1),i.removeEventListener(eu,h,!1)),this}function dv(i,o,u){var h=l(function(d){d.MSPOINTER_TYPE_TOUCH&&d.pointerType===d.MSPOINTER_TYPE_TOUCH&&Fe(d),nu(d,o)});i["_leaflet_touchstart"+u]=h,i.addEventListener(Qa,h,!1),Nh||(document.addEventListener(Qa,pv,!0),document.addEventListener(Ja,mv,!0),document.addEventListener(tu,Mh,!0),document.addEventListener(eu,Mh,!0),Nh=!0)}function pv(i){Ci[i.pointerId]=i}function mv(i){Ci[i.pointerId]&&(Ci[i.pointerId]=i)}function Mh(i){delete Ci[i.pointerId]}function nu(i,o){i.touches=[];for(var u in Ci)i.touches.push(Ci[u]);i.changedTouches=[i],o(i)}function gv(i,o,u){var h=function(d){d.pointerType===(d.MSPOINTER_TYPE_MOUSE||"mouse")&&d.buttons===0||nu(d,o)};i["_leaflet_touchmove"+u]=h,i.addEventListener(Ja,h,!1)}function _v(i,o,u){var h=function(d){nu(d,o)};i["_leaflet_touchend"+u]=h,i.addEventListener(tu,h,!1),i.addEventListener(eu,h,!1)}var Ws=Nn?"MSPointerDown":Je?"pointerdown":"touchstart",Ks=Nn?"MSPointerUp":Je?"pointerup":"touchend",Li="_leaflet_";function vv(i,o,u){var h,d,g=!1,w=250;function T(C){if(Je){if(!C.isPrimary||C.pointerType==="mouse")return}else if(C.touches.length>1)return;var Z=Date.now(),tt=Z-(h||Z);d=C.touches?C.touches[0]:C,g=tt>0&&tt<=w,h=Z}function P(C){if(g&&!d.cancelBubble){if(Je){if(C.pointerType==="mouse")return;var Z={},tt,bt;for(bt in d)tt=d[bt],Z[bt]=tt&&tt.bind?tt.bind(d):tt;d=Z}d.type="dblclick",d.button=0,o(d),h=null}}return i[Li+Ws+u]=T,i[Li+Ks+u]=P,i[Li+"dblclick"+u]=o,i.addEventListener(Ws,T,Si?{passive:!1}:!1),i.addEventListener(Ks,P,Si?{passive:!1}:!1),i.addEventListener("dblclick",o,!1),this}function yv(i,o){var u=i[Li+Ws+o],h=i[Li+Ks+o],d=i[Li+"dblclick"+o];return i.removeEventListener(Ws,u,Si?{passive:!1}:!1),i.removeEventListener(Ks,h,Si?{passive:!1}:!1),i.removeEventListener("dblclick",d,!1),this}var iu=Ys(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ar=Ys(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),kh=Ar==="webkitTransition"||Ar==="OTransition"?Ar+"End":"transitionend";function Rh(i){return typeof i=="string"?document.getElementById(i):i}function Ir(i,o){var u=i.style[o]||i.currentStyle&&i.currentStyle[o];if((!u||u==="auto")&&document.defaultView){var h=document.defaultView.getComputedStyle(i,null);u=h?h[o]:null}return u==="auto"?null:u}function Tt(i,o,u){var h=document.createElement(i);return h.className=o||"",u&&u.appendChild(h),h}function Wt(i){var o=i.parentNode;o&&o.removeChild(i)}function js(i){for(;i.firstChild;)i.removeChild(i.firstChild)}function Ni(i){var o=i.parentNode;o&&o.lastChild!==i&&o.appendChild(i)}function Mi(i){var o=i.parentNode;o&&o.firstChild!==i&&o.insertBefore(i,o.firstChild)}function ru(i,o){if(i.classList!==void 0)return i.classList.contains(o);var u=Gs(i);return u.length>0&&new RegExp("(^|\\s)"+o+"(\\s|$)").test(u)}function lt(i,o){if(i.classList!==void 0)for(var u=A(o),h=0,d=u.length;h<d;h++)i.classList.add(u[h]);else if(!ru(i,o)){var g=Gs(i);su(i,(g?g+" ":"")+o)}}function Yt(i,o){i.classList!==void 0?i.classList.remove(o):su(i,x((" "+Gs(i)+" ").replace(" "+o+" "," ")))}function su(i,o){i.className.baseVal===void 0?i.className=o:i.className.baseVal=o}function Gs(i){return i.correspondingElement&&(i=i.correspondingElement),i.className.baseVal===void 0?i.className:i.className.baseVal}function ze(i,o){"opacity"in i.style?i.style.opacity=o:"filter"in i.style&&wv(i,o)}function wv(i,o){var u=!1,h="DXImageTransform.Microsoft.Alpha";try{u=i.filters.item(h)}catch{if(o===1)return}o=Math.round(o*100),u?(u.Enabled=o!==100,u.Opacity=o):i.style.filter+=" progid:"+h+"(opacity="+o+")"}function Ys(i){for(var o=document.documentElement.style,u=0;u<i.length;u++)if(i[u]in o)return i[u];return!1}function Yn(i,o,u){var h=o||new $(0,0);i.style[iu]=(Ii?"translate("+h.x+"px,"+h.y+"px)":"translate3d("+h.x+"px,"+h.y+"px,0)")+(u?" scale("+u+")":"")}function Qt(i,o){i._leaflet_pos=o,Ut?Yn(i,o):(i.style.left=o.x+"px",i.style.top=o.y+"px")}function kn(i){return i._leaflet_pos||new $(0,0)}var Sr,Cr,ou;if("onselectstart"in document)Sr=function(){pt(window,"selectstart",Fe)},Cr=function(){Xt(window,"selectstart",Fe)};else{var Lr=Ys(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Sr=function(){if(Lr){var i=document.documentElement.style;ou=i[Lr],i[Lr]="none"}},Cr=function(){Lr&&(document.documentElement.style[Lr]=ou,ou=void 0)}}function au(){pt(window,"dragstart",Fe)}function uu(){Xt(window,"dragstart",Fe)}var Xs,lu;function cu(i){for(;i.tabIndex===-1;)i=i.parentNode;!i.style||(Qs(),Xs=i,lu=i.style.outline,i.style.outline="none",pt(window,"keydown",Qs))}function Qs(){!Xs||(Xs.style.outline=lu,Xs=void 0,lu=void 0,Xt(window,"keydown",Qs))}function Oh(i){do i=i.parentNode;while((!i.offsetWidth||!i.offsetHeight)&&i!==document.body);return i}function hu(i){var o=i.getBoundingClientRect();return{x:o.width/i.offsetWidth||1,y:o.height/i.offsetHeight||1,boundingClientRect:o}}var xv={TRANSFORM:iu,TRANSITION:Ar,TRANSITION_END:kh,get:Rh,getStyle:Ir,create:Tt,remove:Wt,empty:js,toFront:Ni,toBack:Mi,hasClass:ru,addClass:lt,removeClass:Yt,setClass:su,getClass:Gs,setOpacity:ze,testProp:Ys,setTransform:Yn,setPosition:Qt,getPosition:kn,disableTextSelection:Sr,enableTextSelection:Cr,disableImageDrag:au,enableImageDrag:uu,preventOutline:cu,restoreOutline:Qs,getSizedParentNode:Oh,getScale:hu};function pt(i,o,u,h){if(typeof o=="object")for(var d in o)Js(i,d,o[d],u);else{o=A(o);for(var g=0,w=o.length;g<w;g++)Js(i,o[g],u,h)}return this}var qe="_leaflet_events";function Xt(i,o,u,h){if(typeof o=="object")for(var d in o)du(i,d,o[d],u);else if(o){o=A(o);for(var g=0,w=o.length;g<w;g++)du(i,o[g],u,h)}else{for(var T in i[qe])du(i,T,i[qe][T]);delete i[qe]}return this}function Dh(){if(Je)return!(O||Et)}var fu={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Js(i,o,u,h){var d=o+f(u)+(h?"_"+f(h):"");if(i[qe]&&i[qe][d])return this;var g=function(T){return u.call(h||i,T||window.event)},w=g;Je&&o.indexOf("touch")===0?hv(i,o,g,d):tn&&o==="dblclick"&&!Dh()?vv(i,g,d):"addEventListener"in i?o==="touchstart"||o==="touchmove"||o==="wheel"||o==="mousewheel"?i.addEventListener(fu[o]||o,g,Si?{passive:!1}:!1):o==="mouseenter"||o==="mouseleave"?(g=function(T){T=T||window.event,to(i,T)&&w(T)},i.addEventListener(fu[o],g,!1)):i.addEventListener(o,w,!1):"attachEvent"in i&&i.attachEvent("on"+o,g),i[qe]=i[qe]||{},i[qe][d]=g}function du(i,o,u,h){var d=o+f(u)+(h?"_"+f(h):""),g=i[qe]&&i[qe][d];if(!g)return this;Je&&o.indexOf("touch")===0?fv(i,o,d):tn&&o==="dblclick"&&!Dh()?yv(i,d):"removeEventListener"in i?i.removeEventListener(fu[o]||o,g,!1):"detachEvent"in i&&i.detachEvent("on"+o,g),i[qe][d]=null}function Xn(i){return i.stopPropagation?i.stopPropagation():i.originalEvent?i.originalEvent._stopped=!0:i.cancelBubble=!0,_u(i),this}function pu(i){return Js(i,"wheel",Xn),this}function Nr(i){return pt(i,"mousedown touchstart dblclick",Xn),Js(i,"click",gu),this}function Fe(i){return i.preventDefault?i.preventDefault():i.returnValue=!1,this}function mn(i){return Fe(i),Xn(i),this}function Bh(i,o){if(!o)return new $(i.clientX,i.clientY);var u=hu(o),h=u.boundingClientRect;return new $((i.clientX-h.left)/u.x-o.clientLeft,(i.clientY-h.top)/u.y-o.clientTop)}var Ev=dn&&dt?2*window.devicePixelRatio:Rt?window.devicePixelRatio:1;function zh(i){return O?i.wheelDeltaY/2:i.deltaY&&i.deltaMode===0?-i.deltaY/Ev:i.deltaY&&i.deltaMode===1?-i.deltaY*20:i.deltaY&&i.deltaMode===2?-i.deltaY*60:i.deltaX||i.deltaZ?0:i.wheelDelta?(i.wheelDeltaY||i.wheelDelta)/2:i.detail&&Math.abs(i.detail)<32765?-i.detail*20:i.detail?i.detail/-32765*60:0}var mu={};function gu(i){mu[i.type]=!0}function _u(i){var o=mu[i.type];return mu[i.type]=!1,o}function to(i,o){var u=o.relatedTarget;if(!u)return!0;try{for(;u&&u!==i;)u=u.parentNode}catch{return!1}return u!==i}var Tv={on:pt,off:Xt,stopPropagation:Xn,disableScrollPropagation:pu,disableClickPropagation:Nr,preventDefault:Fe,stop:mn,getMousePosition:Bh,getWheelDelta:zh,fakeStop:gu,skipped:_u,isExternalTarget:to,addListener:pt,removeListener:Xt},Fh=xt.extend({run:function(i,o,u,h){this.stop(),this._el=i,this._inProgress=!0,this._duration=u||.25,this._easeOutPower=1/Math.max(h||.5,.2),this._startPos=kn(i),this._offset=o.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){!this._inProgress||(this._step(!0),this._complete())},_animate:function(){this._animId=_t(this._animate,this),this._step()},_step:function(i){var o=+new Date-this._startTime,u=this._duration*1e3;o<u?this._runFrame(this._easeOut(o/u),i):(this._runFrame(1),this._complete())},_runFrame:function(i,o){var u=this._startPos.add(this._offset.multiplyBy(i));o&&u._round(),Qt(this._el,u),this.fire("step")},_complete:function(){Ct(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(i){return 1-Math.pow(1-i,this._easeOutPower)}}),wt=xt.extend({options:{crs:y,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(i,o){o=S(this,o),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(i),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),o.maxBounds&&this.setMaxBounds(o.maxBounds),o.zoom!==void 0&&(this._zoom=this._limitZoom(o.zoom)),o.center&&o.zoom!==void 0&&this.setView(U(o.center),o.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ar&&Ut&&!Ch&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),pt(this._proxy,kh,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(i,o,u){if(o=o===void 0?this._zoom:this._limitZoom(o),i=this._limitCenter(U(i),o,this.options.maxBounds),u=u||{},this._stop(),this._loaded&&!u.reset&&u!==!0){u.animate!==void 0&&(u.zoom=s({animate:u.animate},u.zoom),u.pan=s({animate:u.animate,duration:u.duration},u.pan));var h=this._zoom!==o?this._tryAnimatedZoom&&this._tryAnimatedZoom(i,o,u.zoom):this._tryAnimatedPan(i,u.pan);if(h)return clearTimeout(this._sizeTimer),this}return this._resetView(i,o),this},setZoom:function(i,o){return this._loaded?this.setView(this.getCenter(),i,{zoom:o}):(this._zoom=i,this)},zoomIn:function(i,o){return i=i||(Ut?this.options.zoomDelta:1),this.setZoom(this._zoom+i,o)},zoomOut:function(i,o){return i=i||(Ut?this.options.zoomDelta:1),this.setZoom(this._zoom-i,o)},setZoomAround:function(i,o,u){var h=this.getZoomScale(o),d=this.getSize().divideBy(2),g=i instanceof $?i:this.latLngToContainerPoint(i),w=g.subtract(d).multiplyBy(1-1/h),T=this.containerPointToLatLng(d.add(w));return this.setView(T,o,{zoom:u})},_getBoundsCenterZoom:function(i,o){o=o||{},i=i.getBounds?i.getBounds():Gt(i);var u=ct(o.paddingTopLeft||o.padding||[0,0]),h=ct(o.paddingBottomRight||o.padding||[0,0]),d=this.getBoundsZoom(i,!1,u.add(h));if(d=typeof o.maxZoom=="number"?Math.min(o.maxZoom,d):d,d===1/0)return{center:i.getCenter(),zoom:d};var g=h.subtract(u).divideBy(2),w=this.project(i.getSouthWest(),d),T=this.project(i.getNorthEast(),d),P=this.unproject(w.add(T).divideBy(2).add(g),d);return{center:P,zoom:d}},fitBounds:function(i,o){if(i=Gt(i),!i.isValid())throw new Error("Bounds are not valid.");var u=this._getBoundsCenterZoom(i,o);return this.setView(u.center,u.zoom,o)},fitWorld:function(i){return this.fitBounds([[-90,-180],[90,180]],i)},panTo:function(i,o){return this.setView(i,this._zoom,{pan:o})},panBy:function(i,o){if(i=ct(i).round(),o=o||{},!i.x&&!i.y)return this.fire("moveend");if(o.animate!==!0&&!this.getSize().contains(i))return this._resetView(this.unproject(this.project(this.getCenter()).add(i)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Fh,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),o.noMoveStart||this.fire("movestart"),o.animate!==!1){lt(this._mapPane,"leaflet-pan-anim");var u=this._getMapPanePos().subtract(i).round();this._panAnim.run(this._mapPane,u,o.duration||.25,o.easeLinearity)}else this._rawPanBy(i),this.fire("move").fire("moveend");return this},flyTo:function(i,o,u){if(u=u||{},u.animate===!1||!Ut)return this.setView(i,o,u);this._stop();var h=this.project(this.getCenter()),d=this.project(i),g=this.getSize(),w=this._zoom;i=U(i),o=o===void 0?w:o;var T=Math.max(g.x,g.y),P=T*this.getZoomScale(w,o),C=d.distanceTo(h)||1,Z=1.42,tt=Z*Z;function bt(Jt){var co=Jt?-1:1,ly=Jt?P:T,cy=P*P-T*T+co*tt*tt*C*C,hy=2*ly*tt*C,Lu=cy/hy,yf=Math.sqrt(Lu*Lu+1)-Lu,fy=yf<1e-9?-18:Math.log(yf);return fy}function wn(Jt){return(Math.exp(Jt)-Math.exp(-Jt))/2}function ti(Jt){return(Math.exp(Jt)+Math.exp(-Jt))/2}function lo(Jt){return wn(Jt)/ti(Jt)}var On=bt(0);function Cu(Jt){return T*(ti(On)/ti(On+Z*Jt))}function sy(Jt){return T*(ti(On)*lo(On+Z*Jt)-wn(On))/tt}function oy(Jt){return 1-Math.pow(1-Jt,1.5)}var ay=Date.now(),_f=(bt(1)-On)/Z,uy=u.duration?1e3*u.duration:1e3*_f*.8;function vf(){var Jt=(Date.now()-ay)/uy,co=oy(Jt)*_f;Jt<=1?(this._flyToFrame=_t(vf,this),this._move(this.unproject(h.add(d.subtract(h).multiplyBy(sy(co)/C)),w),this.getScaleZoom(T/Cu(co),w),{flyTo:!0})):this._move(i,o)._moveEnd(!0)}return this._moveStart(!0,u.noMoveStart),vf.call(this),this},flyToBounds:function(i,o){var u=this._getBoundsCenterZoom(i,o);return this.flyTo(u.center,u.zoom,o)},setMaxBounds:function(i){if(i=Gt(i),i.isValid())this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds);else return this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds);return this.options.maxBounds=i,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)},setMinZoom:function(i){var o=this.options.minZoom;return this.options.minZoom=i,this._loaded&&o!==i&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(i):this},setMaxZoom:function(i){var o=this.options.maxZoom;return this.options.maxZoom=i,this._loaded&&o!==i&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(i):this},panInsideBounds:function(i,o){this._enforcingBounds=!0;var u=this.getCenter(),h=this._limitCenter(u,this._zoom,Gt(i));return u.equals(h)||this.panTo(h,o),this._enforcingBounds=!1,this},panInside:function(i,o){o=o||{};var u=ct(o.paddingTopLeft||o.padding||[0,0]),h=ct(o.paddingBottomRight||o.padding||[0,0]),d=this.getCenter(),g=this.project(d),w=this.project(i),T=this.getPixelBounds(),P=T.getSize().divideBy(2),C=jt([T.min.add(u),T.max.subtract(h)]);if(!C.contains(w)){this._enforcingBounds=!0;var Z=g.subtract(w),tt=ct(w.x+Z.x,w.y+Z.y);(w.x<C.min.x||w.x>C.max.x)&&(tt.x=g.x-Z.x,Z.x>0?tt.x+=P.x-u.x:tt.x-=P.x-h.x),(w.y<C.min.y||w.y>C.max.y)&&(tt.y=g.y-Z.y,Z.y>0?tt.y+=P.y-u.y:tt.y-=P.y-h.y),this.panTo(this.unproject(tt),o),this._enforcingBounds=!1}return this},invalidateSize:function(i){if(!this._loaded)return this;i=s({animate:!1,pan:!0},i===!0?{animate:!0}:i);var o=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var u=this.getSize(),h=o.divideBy(2).round(),d=u.divideBy(2).round(),g=h.subtract(d);return!g.x&&!g.y?this:(i.animate&&i.pan?this.panBy(g):(i.pan&&this._rawPanBy(g),this.fire("move"),i.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:o,newSize:u}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(i){if(i=this._locateOptions=s({timeout:1e4,watch:!1},i),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var o=l(this._handleGeolocationResponse,this),u=l(this._handleGeolocationError,this);return i.watch?this._locationWatchId=navigator.geolocation.watchPosition(o,u,i):navigator.geolocation.getCurrentPosition(o,u,i),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(i){var o=i.code,u=i.message||(o===1?"permission denied":o===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:o,message:"Geolocation error: "+u+"."})},_handleGeolocationResponse:function(i){var o=i.coords.latitude,u=i.coords.longitude,h=new I(o,u),d=h.toBounds(i.coords.accuracy*2),g=this._locateOptions;if(g.setView){var w=this.getBoundsZoom(d);this.setView(h,g.maxZoom?Math.min(w,g.maxZoom):w)}var T={latlng:h,bounds:d,timestamp:i.timestamp};for(var P in i.coords)typeof i.coords[P]=="number"&&(T[P]=i.coords[P]);this.fire("locationfound",T)},addHandler:function(i,o){if(!o)return this;var u=this[i]=new o(this);return this._handlers.push(u),this.options[i]&&u.enable(),this},remove:function(){if(this._initEvents(!0),this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Wt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Ct(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var i;for(i in this._layers)this._layers[i].remove();for(i in this._panes)Wt(this._panes[i]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(i,o){var u="leaflet-pane"+(i?" leaflet-"+i.replace("Pane","")+"-pane":""),h=Tt("div",u,o||this._mapPane);return i&&(this._panes[i]=h),h},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var i=this.getPixelBounds(),o=this.unproject(i.getBottomLeft()),u=this.unproject(i.getTopRight());return new Bt(o,u)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(i,o,u){i=Gt(i),u=ct(u||[0,0]);var h=this.getZoom()||0,d=this.getMinZoom(),g=this.getMaxZoom(),w=i.getNorthWest(),T=i.getSouthEast(),P=this.getSize().subtract(u),C=jt(this.project(T,h),this.project(w,h)).getSize(),Z=Ut?this.options.zoomSnap:1,tt=P.x/C.x,bt=P.y/C.y,wn=o?Math.max(tt,bt):Math.min(tt,bt);return h=this.getScaleZoom(wn,h),Z&&(h=Math.round(h/(Z/100))*(Z/100),h=o?Math.ceil(h/Z)*Z:Math.floor(h/Z)*Z),Math.max(d,Math.min(g,h))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new $(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(i,o){var u=this._getTopLeftPoint(i,o);return new yt(u,u.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(i){return this.options.crs.getProjectedBounds(i===void 0?this.getZoom():i)},getPane:function(i){return typeof i=="string"?this._panes[i]:i},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(i,o){var u=this.options.crs;return o=o===void 0?this._zoom:o,u.scale(i)/u.scale(o)},getScaleZoom:function(i,o){var u=this.options.crs;o=o===void 0?this._zoom:o;var h=u.zoom(i*u.scale(o));return isNaN(h)?1/0:h},project:function(i,o){return o=o===void 0?this._zoom:o,this.options.crs.latLngToPoint(U(i),o)},unproject:function(i,o){return o=o===void 0?this._zoom:o,this.options.crs.pointToLatLng(ct(i),o)},layerPointToLatLng:function(i){var o=ct(i).add(this.getPixelOrigin());return this.unproject(o)},latLngToLayerPoint:function(i){var o=this.project(U(i))._round();return o._subtract(this.getPixelOrigin())},wrapLatLng:function(i){return this.options.crs.wrapLatLng(U(i))},wrapLatLngBounds:function(i){return this.options.crs.wrapLatLngBounds(Gt(i))},distance:function(i,o){return this.options.crs.distance(U(i),U(o))},containerPointToLayerPoint:function(i){return ct(i).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(i){return ct(i).add(this._getMapPanePos())},containerPointToLatLng:function(i){var o=this.containerPointToLayerPoint(ct(i));return this.layerPointToLatLng(o)},latLngToContainerPoint:function(i){return this.layerPointToContainerPoint(this.latLngToLayerPoint(U(i)))},mouseEventToContainerPoint:function(i){return Bh(i,this._container)},mouseEventToLayerPoint:function(i){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(i))},mouseEventToLatLng:function(i){return this.layerPointToLatLng(this.mouseEventToLayerPoint(i))},_initContainer:function(i){var o=this._container=Rh(i);if(o){if(o._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");pt(o,"scroll",this._onScroll,this),this._containerId=f(o)},_initLayout:function(){var i=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ut,lt(i,"leaflet-container"+(tn?" leaflet-touch":"")+(Mn?" leaflet-retina":"")+(H?" leaflet-oldie":"")+(Et?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var o=Ir(i,"position");o!=="absolute"&&o!=="relative"&&o!=="fixed"&&(i.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var i=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Qt(this._mapPane,new $(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(lt(i.markerPane,"leaflet-zoom-hide"),lt(i.shadowPane,"leaflet-zoom-hide"))},_resetView:function(i,o){Qt(this._mapPane,new $(0,0));var u=!this._loaded;this._loaded=!0,o=this._limitZoom(o),this.fire("viewprereset");var h=this._zoom!==o;this._moveStart(h,!1)._move(i,o)._moveEnd(h),this.fire("viewreset"),u&&this.fire("load")},_moveStart:function(i,o){return i&&this.fire("zoomstart"),o||this.fire("movestart"),this},_move:function(i,o,u){o===void 0&&(o=this._zoom);var h=this._zoom!==o;return this._zoom=o,this._lastCenter=i,this._pixelOrigin=this._getNewPixelOrigin(i),(h||u&&u.pinch)&&this.fire("zoom",u),this.fire("move",u)},_moveEnd:function(i){return i&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Ct(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(i){Qt(this._mapPane,this._getMapPanePos().subtract(i))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(i){this._targets={},this._targets[f(this._container)]=this;var o=i?Xt:pt;o(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&o(window,"resize",this._onResize,this),Ut&&this.options.transform3DLimit&&(i?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Ct(this._resizeRequest),this._resizeRequest=_t(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var i=this._getMapPanePos();Math.max(Math.abs(i.x),Math.abs(i.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(i,o){for(var u=[],h,d=o==="mouseout"||o==="mouseover",g=i.target||i.srcElement,w=!1;g;){if(h=this._targets[f(g)],h&&(o==="click"||o==="preclick")&&!i._simulated&&this._draggableMoved(h)){w=!0;break}if(h&&h.listens(o,!0)&&(d&&!to(g,i)||(u.push(h),d))||g===this._container)break;g=g.parentNode}return!u.length&&!w&&!d&&to(g,i)&&(u=[this]),u},_handleDOMEvent:function(i){if(!(!this._loaded||_u(i))){var o=i.type;(o==="mousedown"||o==="keypress"||o==="keyup"||o==="keydown")&&cu(i.target||i.srcElement),this._fireDOMEvent(i,o)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(i,o,u){if(i.type==="click"){var h=s({},i);h.type="preclick",this._fireDOMEvent(h,h.type,u)}if(!i._stopped&&(u=(u||[]).concat(this._findEventTargets(i,o)),!!u.length)){var d=u[0];o==="contextmenu"&&d.listens(o,!0)&&Fe(i);var g={originalEvent:i};if(i.type!=="keypress"&&i.type!=="keydown"&&i.type!=="keyup"){var w=d.getLatLng&&(!d._radius||d._radius<=10);g.containerPoint=w?this.latLngToContainerPoint(d.getLatLng()):this.mouseEventToContainerPoint(i),g.layerPoint=this.containerPointToLayerPoint(g.containerPoint),g.latlng=w?d.getLatLng():this.layerPointToLatLng(g.layerPoint)}for(var T=0;T<u.length;T++)if(u[T].fire(o,g,!0),g.originalEvent._stopped||u[T].options.bubblingMouseEvents===!1&&ot(this._mouseEvents,o)!==-1)return}},_draggableMoved:function(i){return i=i.dragging&&i.dragging.enabled()?i:this,i.dragging&&i.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var i=0,o=this._handlers.length;i<o;i++)this._handlers[i].disable()},whenReady:function(i,o){return this._loaded?i.call(o||this,{target:this}):this.on("load",i,o),this},_getMapPanePos:function(){return kn(this._mapPane)||new $(0,0)},_moved:function(){var i=this._getMapPanePos();return i&&!i.equals([0,0])},_getTopLeftPoint:function(i,o){var u=i&&o!==void 0?this._getNewPixelOrigin(i,o):this.getPixelOrigin();return u.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(i,o){var u=this.getSize()._divideBy(2);return this.project(i,o)._subtract(u)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(i,o,u){var h=this._getNewPixelOrigin(u,o);return this.project(i,o)._subtract(h)},_latLngBoundsToNewLayerBounds:function(i,o,u){var h=this._getNewPixelOrigin(u,o);return jt([this.project(i.getSouthWest(),o)._subtract(h),this.project(i.getNorthWest(),o)._subtract(h),this.project(i.getSouthEast(),o)._subtract(h),this.project(i.getNorthEast(),o)._subtract(h)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(i){return this.latLngToLayerPoint(i).subtract(this._getCenterLayerPoint())},_limitCenter:function(i,o,u){if(!u)return i;var h=this.project(i,o),d=this.getSize().divideBy(2),g=new yt(h.subtract(d),h.add(d)),w=this._getBoundsOffset(g,u,o);return w.round().equals([0,0])?i:this.unproject(h.add(w),o)},_limitOffset:function(i,o){if(!o)return i;var u=this.getPixelBounds(),h=new yt(u.min.add(i),u.max.add(i));return i.add(this._getBoundsOffset(h,o))},_getBoundsOffset:function(i,o,u){var h=jt(this.project(o.getNorthEast(),u),this.project(o.getSouthWest(),u)),d=h.min.subtract(i.min),g=h.max.subtract(i.max),w=this._rebound(d.x,-g.x),T=this._rebound(d.y,-g.y);return new $(w,T)},_rebound:function(i,o){return i+o>0?Math.round(i-o)/2:Math.max(0,Math.ceil(i))-Math.max(0,Math.floor(o))},_limitZoom:function(i){var o=this.getMinZoom(),u=this.getMaxZoom(),h=Ut?this.options.zoomSnap:1;return h&&(i=Math.round(i/h)*h),Math.max(o,Math.min(u,i))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Yt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(i,o){var u=this._getCenterOffset(i)._trunc();return(o&&o.animate)!==!0&&!this.getSize().contains(u)?!1:(this.panBy(u,o),!0)},_createAnimProxy:function(){var i=this._proxy=Tt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(i),this.on("zoomanim",function(o){var u=iu,h=this._proxy.style[u];Yn(this._proxy,this.project(o.center,o.zoom),this.getZoomScale(o.zoom,1)),h===this._proxy.style[u]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Wt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var i=this.getCenter(),o=this.getZoom();Yn(this._proxy,this.project(i,o),this.getZoomScale(o,1))},_catchTransitionEnd:function(i){this._animatingZoom&&i.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(i,o,u){if(this._animatingZoom)return!0;if(u=u||{},!this._zoomAnimated||u.animate===!1||this._nothingToAnimate()||Math.abs(o-this._zoom)>this.options.zoomAnimationThreshold)return!1;var h=this.getZoomScale(o),d=this._getCenterOffset(i)._divideBy(1-1/h);return u.animate!==!0&&!this.getSize().contains(d)?!1:(_t(function(){this._moveStart(!0,!1)._animateZoom(i,o,!0)},this),!0)},_animateZoom:function(i,o,u,h){!this._mapPane||(u&&(this._animatingZoom=!0,this._animateToCenter=i,this._animateToZoom=o,lt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:i,zoom:o,noUpdate:h}),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){!this._animatingZoom||(this._mapPane&&Yt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),_t(function(){this._moveEnd(!0)},this))}});function bv(i,o){return new wt(i,o)}var We=ge.extend({options:{position:"topright"},initialize:function(i){S(this,i)},getPosition:function(){return this.options.position},setPosition:function(i){var o=this._map;return o&&o.removeControl(this),this.options.position=i,o&&o.addControl(this),this},getContainer:function(){return this._container},addTo:function(i){this.remove(),this._map=i;var o=this._container=this.onAdd(i),u=this.getPosition(),h=i._controlCorners[u];return lt(o,"leaflet-control"),u.indexOf("bottom")!==-1?h.insertBefore(o,h.firstChild):h.appendChild(o),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Wt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(i){this._map&&i&&i.screenX>0&&i.screenY>0&&this._map.getContainer().focus()}}),Mr=function(i){return new We(i)};wt.include({addControl:function(i){return i.addTo(this),this},removeControl:function(i){return i.remove(),this},_initControlPos:function(){var i=this._controlCorners={},o="leaflet-",u=this._controlContainer=Tt("div",o+"control-container",this._container);function h(d,g){var w=o+d+" "+o+g;i[d+g]=Tt("div",w,u)}h("top","left"),h("top","right"),h("bottom","left"),h("bottom","right")},_clearControlPos:function(){for(var i in this._controlCorners)Wt(this._controlCorners[i]);Wt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Uh=We.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(i,o,u,h){return u<h?-1:h<u?1:0}},initialize:function(i,o,u){S(this,u),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1;for(var h in i)this._addLayer(i[h],h);for(h in o)this._addLayer(o[h],h,!0)},onAdd:function(i){this._initLayout(),this._update(),this._map=i,i.on("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(i){return We.prototype.addTo.call(this,i),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(i,o){return this._addLayer(i,o),this._map?this._update():this},addOverlay:function(i,o){return this._addLayer(i,o,!0),this._map?this._update():this},removeLayer:function(i){i.off("add remove",this._onLayerChange,this);var o=this._getLayer(f(i));return o&&this._layers.splice(this._layers.indexOf(o),1),this._map?this._update():this},expand:function(){lt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var i=this._map.getSize().y-(this._container.offsetTop+50);return i<this._section.clientHeight?(lt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=i+"px"):Yt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Yt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var i="leaflet-control-layers",o=this._container=Tt("div",i),u=this.options.collapsed;o.setAttribute("aria-haspopup",!0),Nr(o),pu(o);var h=this._section=Tt("section",i+"-list");u&&(this._map.on("click",this.collapse,this),k||pt(o,{mouseenter:this.expand,mouseleave:this.collapse},this));var d=this._layersLink=Tt("a",i+"-toggle",o);d.href="#",d.title="Layers",tn?(pt(d,"click",mn),pt(d,"click",this.expand,this)):pt(d,"focus",this.expand,this),u||this.expand(),this._baseLayersList=Tt("div",i+"-base",h),this._separator=Tt("div",i+"-separator",h),this._overlaysList=Tt("div",i+"-overlays",h),o.appendChild(h)},_getLayer:function(i){for(var o=0;o<this._layers.length;o++)if(this._layers[o]&&f(this._layers[o].layer)===i)return this._layers[o]},_addLayer:function(i,o,u){this._map&&i.on("add remove",this._onLayerChange,this),this._layers.push({layer:i,name:o,overlay:u}),this.options.sortLayers&&this._layers.sort(l(function(h,d){return this.options.sortFunction(h.layer,d.layer,h.name,d.name)},this)),this.options.autoZIndex&&i.setZIndex&&(this._lastZIndex++,i.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;js(this._baseLayersList),js(this._overlaysList),this._layerControlInputs=[];var i,o,u,h,d=0;for(u=0;u<this._layers.length;u++)h=this._layers[u],this._addItem(h),o=o||h.overlay,i=i||!h.overlay,d+=h.overlay?0:1;return this.options.hideSingleBase&&(i=i&&d>1,this._baseLayersList.style.display=i?"":"none"),this._separator.style.display=o&&i?"":"none",this},_onLayerChange:function(i){this._handlingClick||this._update();var o=this._getLayer(f(i.target)),u=o.overlay?i.type==="add"?"overlayadd":"overlayremove":i.type==="add"?"baselayerchange":null;u&&this._map.fire(u,o)},_createRadioElement:function(i,o){var u='<input type="radio" class="leaflet-control-layers-selector" name="'+i+'"'+(o?' checked="checked"':"")+"/>",h=document.createElement("div");return h.innerHTML=u,h.firstChild},_addItem:function(i){var o=document.createElement("label"),u=this._map.hasLayer(i.layer),h;i.overlay?(h=document.createElement("input"),h.type="checkbox",h.className="leaflet-control-layers-selector",h.defaultChecked=u):h=this._createRadioElement("leaflet-base-layers_"+f(this),u),this._layerControlInputs.push(h),h.layerId=f(i.layer),pt(h,"click",this._onInputClick,this);var d=document.createElement("span");d.innerHTML=" "+i.name;var g=document.createElement("div");o.appendChild(g),g.appendChild(h),g.appendChild(d);var w=i.overlay?this._overlaysList:this._baseLayersList;return w.appendChild(o),this._checkDisabledLayers(),o},_onInputClick:function(){var i=this._layerControlInputs,o,u,h=[],d=[];this._handlingClick=!0;for(var g=i.length-1;g>=0;g--)o=i[g],u=this._getLayer(o.layerId).layer,o.checked?h.push(u):o.checked||d.push(u);for(g=0;g<d.length;g++)this._map.hasLayer(d[g])&&this._map.removeLayer(d[g]);for(g=0;g<h.length;g++)this._map.hasLayer(h[g])||this._map.addLayer(h[g]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var i=this._layerControlInputs,o,u,h=this._map.getZoom(),d=i.length-1;d>=0;d--)o=i[d],u=this._getLayer(o.layerId).layer,o.disabled=u.options.minZoom!==void 0&&h<u.options.minZoom||u.options.maxZoom!==void 0&&h>u.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),Pv=function(i,o,u){return new Uh(i,o,u)},vu=We.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(i){var o="leaflet-control-zoom",u=Tt("div",o+" leaflet-bar"),h=this.options;return this._zoomInButton=this._createButton(h.zoomInText,h.zoomInTitle,o+"-in",u,this._zoomIn),this._zoomOutButton=this._createButton(h.zoomOutText,h.zoomOutTitle,o+"-out",u,this._zoomOut),this._updateDisabled(),i.on("zoomend zoomlevelschange",this._updateDisabled,this),u},onRemove:function(i){i.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(i){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(i.shiftKey?3:1))},_zoomOut:function(i){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(i.shiftKey?3:1))},_createButton:function(i,o,u,h,d){var g=Tt("a",u,h);return g.innerHTML=i,g.href="#",g.title=o,g.setAttribute("role","button"),g.setAttribute("aria-label",o),Nr(g),pt(g,"click",mn),pt(g,"click",d,this),pt(g,"click",this._refocusOnMap,this),g},_updateDisabled:function(){var i=this._map,o="leaflet-disabled";Yt(this._zoomInButton,o),Yt(this._zoomOutButton,o),(this._disabled||i._zoom===i.getMinZoom())&&lt(this._zoomOutButton,o),(this._disabled||i._zoom===i.getMaxZoom())&&lt(this._zoomInButton,o)}});wt.mergeOptions({zoomControl:!0}),wt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new vu,this.addControl(this.zoomControl))});var Av=function(i){return new vu(i)},Vh=We.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(i){var o="leaflet-control-scale",u=Tt("div",o),h=this.options;return this._addScales(h,o+"-line",u),i.on(h.updateWhenIdle?"moveend":"move",this._update,this),i.whenReady(this._update,this),u},onRemove:function(i){i.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(i,o,u){i.metric&&(this._mScale=Tt("div",o,u)),i.imperial&&(this._iScale=Tt("div",o,u))},_update:function(){var i=this._map,o=i.getSize().y/2,u=i.distance(i.containerPointToLatLng([0,o]),i.containerPointToLatLng([this.options.maxWidth,o]));this._updateScales(u)},_updateScales:function(i){this.options.metric&&i&&this._updateMetric(i),this.options.imperial&&i&&this._updateImperial(i)},_updateMetric:function(i){var o=this._getRoundNum(i),u=o<1e3?o+" m":o/1e3+" km";this._updateScale(this._mScale,u,o/i)},_updateImperial:function(i){var o=i*3.2808399,u,h,d;o>5280?(u=o/5280,h=this._getRoundNum(u),this._updateScale(this._iScale,h+" mi",h/u)):(d=this._getRoundNum(o),this._updateScale(this._iScale,d+" ft",d/o))},_updateScale:function(i,o,u){i.style.width=Math.round(this.options.maxWidth*u)+"px",i.innerHTML=o},_getRoundNum:function(i){var o=Math.pow(10,(Math.floor(i)+"").length-1),u=i/o;return u=u>=10?10:u>=5?5:u>=3?3:u>=2?2:1,o*u}}),Iv=function(i){return new Vh(i)},yu=We.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(i){S(this,i),this._attributions={}},onAdd:function(i){i.attributionControl=this,this._container=Tt("div","leaflet-control-attribution"),Nr(this._container);for(var o in i._layers)i._layers[o].getAttribution&&this.addAttribution(i._layers[o].getAttribution());return this._update(),this._container},setPrefix:function(i){return this.options.prefix=i,this._update(),this},addAttribution:function(i){return i?(this._attributions[i]||(this._attributions[i]=0),this._attributions[i]++,this._update(),this):this},removeAttribution:function(i){return i?(this._attributions[i]&&(this._attributions[i]--,this._update()),this):this},_update:function(){if(!!this._map){var i=[];for(var o in this._attributions)this._attributions[o]&&i.push(o);var u=[];this.options.prefix&&u.push(this.options.prefix),i.length&&u.push(i.join(", ")),this._container.innerHTML=u.join(" | ")}}});wt.mergeOptions({attributionControl:!0}),wt.addInitHook(function(){this.options.attributionControl&&new yu().addTo(this)});var Sv=function(i){return new yu(i)};We.Layers=Uh,We.Zoom=vu,We.Scale=Vh,We.Attribution=yu,Mr.layers=Pv,Mr.zoom=Av,Mr.scale=Iv,Mr.attribution=Sv;var nn=ge.extend({initialize:function(i){this._map=i},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});nn.addTo=function(i,o){return i.addHandler(o,this),this};var Cv={Events:vt},Hh=tn?"touchstart mousedown":"mousedown",$h={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},wu={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},Qn=xt.extend({options:{clickTolerance:3},initialize:function(i,o,u,h){S(this,h),this._element=i,this._dragStartTarget=o||i,this._preventOutline=u},enable:function(){this._enabled||(pt(this._dragStartTarget,Hh,this._onDown,this),this._enabled=!0)},disable:function(){!this._enabled||(Qn._dragging===this&&this.finishDrag(),Xt(this._dragStartTarget,Hh,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(i){if(!(i._simulated||!this._enabled)&&(this._moved=!1,!ru(this._element,"leaflet-zoom-anim")&&!(Qn._dragging||i.shiftKey||i.which!==1&&i.button!==1&&!i.touches)&&(Qn._dragging=this,this._preventOutline&&cu(this._element),au(),Sr(),!this._moving))){this.fire("down");var o=i.touches?i.touches[0]:i,u=Oh(this._element);this._startPoint=new $(o.clientX,o.clientY),this._parentScale=hu(u),pt(document,wu[i.type],this._onMove,this),pt(document,$h[i.type],this._onUp,this)}},_onMove:function(i){if(!(i._simulated||!this._enabled)){if(i.touches&&i.touches.length>1){this._moved=!0;return}var o=i.touches&&i.touches.length===1?i.touches[0]:i,u=new $(o.clientX,o.clientY)._subtract(this._startPoint);!u.x&&!u.y||Math.abs(u.x)+Math.abs(u.y)<this.options.clickTolerance||(u.x/=this._parentScale.x,u.y/=this._parentScale.y,Fe(i),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=kn(this._element).subtract(u),lt(document.body,"leaflet-dragging"),this._lastTarget=i.target||i.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),lt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(u),this._moving=!0,Ct(this._animRequest),this._lastEvent=i,this._animRequest=_t(this._updatePosition,this,!0))}},_updatePosition:function(){var i={originalEvent:this._lastEvent};this.fire("predrag",i),Qt(this._element,this._newPos),this.fire("drag",i)},_onUp:function(i){i._simulated||!this._enabled||this.finishDrag()},finishDrag:function(){Yt(document.body,"leaflet-dragging"),this._lastTarget&&(Yt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var i in wu)Xt(document,wu[i],this._onMove,this),Xt(document,$h[i],this._onUp,this);uu(),Cr(),this._moved&&this._moving&&(Ct(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,Qn._dragging=!1}});function Zh(i,o){if(!o||!i.length)return i.slice();var u=o*o;return i=Mv(i,u),i=Nv(i,u),i}function qh(i,o,u){return Math.sqrt(kr(i,o,u,!0))}function Lv(i,o,u){return kr(i,o,u)}function Nv(i,o){var u=i.length,h=typeof Uint8Array!=void 0+""?Uint8Array:Array,d=new h(u);d[0]=d[u-1]=1,xu(i,d,o,0,u-1);var g,w=[];for(g=0;g<u;g++)d[g]&&w.push(i[g]);return w}function xu(i,o,u,h,d){var g=0,w,T,P;for(T=h+1;T<=d-1;T++)P=kr(i[T],i[h],i[d],!0),P>g&&(w=T,g=P);g>u&&(o[w]=1,xu(i,o,u,h,w),xu(i,o,u,w,d))}function Mv(i,o){for(var u=[i[0]],h=1,d=0,g=i.length;h<g;h++)kv(i[h],i[d])>o&&(u.push(i[h]),d=h);return d<g-1&&u.push(i[g-1]),u}var Wh;function Kh(i,o,u,h,d){var g=h?Wh:Jn(i,u),w=Jn(o,u),T,P,C;for(Wh=w;;){if(!(g|w))return[i,o];if(g&w)return!1;T=g||w,P=eo(i,o,T,u,d),C=Jn(P,u),T===g?(i=P,g=C):(o=P,w=C)}}function eo(i,o,u,h,d){var g=o.x-i.x,w=o.y-i.y,T=h.min,P=h.max,C,Z;return u&8?(C=i.x+g*(P.y-i.y)/w,Z=P.y):u&4?(C=i.x+g*(T.y-i.y)/w,Z=T.y):u&2?(C=P.x,Z=i.y+w*(P.x-i.x)/g):u&1&&(C=T.x,Z=i.y+w*(T.x-i.x)/g),new $(C,Z,d)}function Jn(i,o){var u=0;return i.x<o.min.x?u|=1:i.x>o.max.x&&(u|=2),i.y<o.min.y?u|=4:i.y>o.max.y&&(u|=8),u}function kv(i,o){var u=o.x-i.x,h=o.y-i.y;return u*u+h*h}function kr(i,o,u,h){var d=o.x,g=o.y,w=u.x-d,T=u.y-g,P=w*w+T*T,C;return P>0&&(C=((i.x-d)*w+(i.y-g)*T)/P,C>1?(d=u.x,g=u.y):C>0&&(d+=w*C,g+=T*C)),w=i.x-d,T=i.y-g,h?w*w+T*T:new $(d,g)}function gn(i){return!J(i[0])||typeof i[0][0]!="object"&&typeof i[0][0]!="undefined"}function jh(i){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),gn(i)}var Rv={simplify:Zh,pointToSegmentDistance:qh,closestPointOnSegment:Lv,clipSegment:Kh,_getEdgeIntersection:eo,_getBitCode:Jn,_sqClosestPointOnSegment:kr,isFlat:gn,_flat:jh};function Gh(i,o,u){var h,d=[1,4,2,8],g,w,T,P,C,Z,tt,bt;for(g=0,Z=i.length;g<Z;g++)i[g]._code=Jn(i[g],o);for(T=0;T<4;T++){for(tt=d[T],h=[],g=0,Z=i.length,w=Z-1;g<Z;w=g++)P=i[g],C=i[w],P._code&tt?C._code&tt||(bt=eo(C,P,tt,o,u),bt._code=Jn(bt,o),h.push(bt)):(C._code&tt&&(bt=eo(C,P,tt,o,u),bt._code=Jn(bt,o),h.push(bt)),h.push(P));i=h}return i}var Ov={clipPolygon:Gh},Eu={project:function(i){return new $(i.lng,i.lat)},unproject:function(i){return new I(i.y,i.x)},bounds:new yt([-180,-90],[180,90])},Tu={R:6378137,R_MINOR:6356752314245179e-9,bounds:new yt([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(i){var o=Math.PI/180,u=this.R,h=i.lat*o,d=this.R_MINOR/u,g=Math.sqrt(1-d*d),w=g*Math.sin(h),T=Math.tan(Math.PI/4-h/2)/Math.pow((1-w)/(1+w),g/2);return h=-u*Math.log(Math.max(T,1e-10)),new $(i.lng*o*u,h)},unproject:function(i){for(var o=180/Math.PI,u=this.R,h=this.R_MINOR/u,d=Math.sqrt(1-h*h),g=Math.exp(-i.y/u),w=Math.PI/2-2*Math.atan(g),T=0,P=.1,C;T<15&&Math.abs(P)>1e-7;T++)C=d*Math.sin(w),C=Math.pow((1-C)/(1+C),d/2),P=Math.PI/2-2*Math.atan(g*C)-w,w+=P;return new I(w*o,i.x*o/u)}},Dv={LonLat:Eu,Mercator:Tu,SphericalMercator:Nt},Bv=s({},K,{code:"EPSG:3395",projection:Tu,transformation:function(){var i=.5/(Math.PI*Tu.R);return rt(i,.5,-i,.5)}()}),Yh=s({},K,{code:"EPSG:4326",projection:Eu,transformation:rt(1/180,1,-1/180,.5)}),zv=s({},D,{projection:Eu,transformation:rt(1,0,-1,0),scale:function(i){return Math.pow(2,i)},zoom:function(i){return Math.log(i)/Math.LN2},distance:function(i,o){var u=o.lng-i.lng,h=o.lat-i.lat;return Math.sqrt(u*u+h*h)},infinite:!0});D.Earth=K,D.EPSG3395=Bv,D.EPSG3857=y,D.EPSG900913=E,D.EPSG4326=Yh,D.Simple=zv;var Ke=xt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(i){return i.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(i){return i&&i.removeLayer(this),this},getPane:function(i){return this._map.getPane(i?this.options[i]||i:this.options.pane)},addInteractiveTarget:function(i){return this._map._targets[f(i)]=this,this},removeInteractiveTarget:function(i){return delete this._map._targets[f(i)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(i){var o=i.target;if(!!o.hasLayer(this)){if(this._map=o,this._zoomAnimated=o._zoomAnimated,this.getEvents){var u=this.getEvents();o.on(u,this),this.once("remove",function(){o.off(u,this)},this)}this.onAdd(o),this.getAttribution&&o.attributionControl&&o.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),o.fire("layeradd",{layer:this})}}});wt.include({addLayer:function(i){if(!i._layerAdd)throw new Error("The provided object is not a Layer.");var o=f(i);return this._layers[o]?this:(this._layers[o]=i,i._mapToAdd=this,i.beforeAdd&&i.beforeAdd(this),this.whenReady(i._layerAdd,i),this)},removeLayer:function(i){var o=f(i);return this._layers[o]?(this._loaded&&i.onRemove(this),i.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(i.getAttribution()),delete this._layers[o],this._loaded&&(this.fire("layerremove",{layer:i}),i.fire("remove")),i._map=i._mapToAdd=null,this):this},hasLayer:function(i){return!!i&&f(i)in this._layers},eachLayer:function(i,o){for(var u in this._layers)i.call(o,this._layers[u]);return this},_addLayers:function(i){i=i?J(i)?i:[i]:[];for(var o=0,u=i.length;o<u;o++)this.addLayer(i[o])},_addZoomLimit:function(i){(isNaN(i.options.maxZoom)||!isNaN(i.options.minZoom))&&(this._zoomBoundLayers[f(i)]=i,this._updateZoomLevels())},_removeZoomLimit:function(i){var o=f(i);this._zoomBoundLayers[o]&&(delete this._zoomBoundLayers[o],this._updateZoomLevels())},_updateZoomLevels:function(){var i=1/0,o=-1/0,u=this._getZoomSpan();for(var h in this._zoomBoundLayers){var d=this._zoomBoundLayers[h].options;i=d.minZoom===void 0?i:Math.min(i,d.minZoom),o=d.maxZoom===void 0?o:Math.max(o,d.maxZoom)}this._layersMaxZoom=o===-1/0?void 0:o,this._layersMinZoom=i===1/0?void 0:i,u!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ki=Ke.extend({initialize:function(i,o){S(this,o),this._layers={};var u,h;if(i)for(u=0,h=i.length;u<h;u++)this.addLayer(i[u])},addLayer:function(i){var o=this.getLayerId(i);return this._layers[o]=i,this._map&&this._map.addLayer(i),this},removeLayer:function(i){var o=i in this._layers?i:this.getLayerId(i);return this._map&&this._layers[o]&&this._map.removeLayer(this._layers[o]),delete this._layers[o],this},hasLayer:function(i){if(!i)return!1;var o=typeof i=="number"?i:this.getLayerId(i);return o in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(i){var o=Array.prototype.slice.call(arguments,1),u,h;for(u in this._layers)h=this._layers[u],h[i]&&h[i].apply(h,o);return this},onAdd:function(i){this.eachLayer(i.addLayer,i)},onRemove:function(i){this.eachLayer(i.removeLayer,i)},eachLayer:function(i,o){for(var u in this._layers)i.call(o,this._layers[u]);return this},getLayer:function(i){return this._layers[i]},getLayers:function(){var i=[];return this.eachLayer(i.push,i),i},setZIndex:function(i){return this.invoke("setZIndex",i)},getLayerId:function(i){return f(i)}}),Fv=function(i,o){return new ki(i,o)},Ri=ki.extend({addLayer:function(i){return this.hasLayer(i)?this:(i.addEventParent(this),ki.prototype.addLayer.call(this,i),this.fire("layeradd",{layer:i}))},removeLayer:function(i){return this.hasLayer(i)?(i in this._layers&&(i=this._layers[i]),i.removeEventParent(this),ki.prototype.removeLayer.call(this,i),this.fire("layerremove",{layer:i})):this},setStyle:function(i){return this.invoke("setStyle",i)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var i=new Bt;for(var o in this._layers){var u=this._layers[o];i.extend(u.getBounds?u.getBounds():u.getLatLng())}return i}}),Uv=function(i,o){return new Ri(i,o)},Oi=ge.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(i){S(this,i)},createIcon:function(i){return this._createIcon("icon",i)},createShadow:function(i){return this._createIcon("shadow",i)},_createIcon:function(i,o){var u=this._getIconUrl(i);if(!u){if(i==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var h=this._createImg(u,o&&o.tagName==="IMG"?o:null);return this._setIconStyles(h,i),h},_setIconStyles:function(i,o){var u=this.options,h=u[o+"Size"];typeof h=="number"&&(h=[h,h]);var d=ct(h),g=ct(o==="shadow"&&u.shadowAnchor||u.iconAnchor||d&&d.divideBy(2,!0));i.className="leaflet-marker-"+o+" "+(u.className||""),g&&(i.style.marginLeft=-g.x+"px",i.style.marginTop=-g.y+"px"),d&&(i.style.width=d.x+"px",i.style.height=d.y+"px")},_createImg:function(i,o){return o=o||document.createElement("img"),o.src=i,o},_getIconUrl:function(i){return Mn&&this.options[i+"RetinaUrl"]||this.options[i+"Url"]}});function Vv(i){return new Oi(i)}var Rr=Oi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(i){return Rr.imagePath||(Rr.imagePath=this._detectIconPath()),(this.options.imagePath||Rr.imagePath)+Oi.prototype._getIconUrl.call(this,i)},_detectIconPath:function(){var i=Tt("div","leaflet-default-icon-path",document.body),o=Ir(i,"background-image")||Ir(i,"backgroundImage");return document.body.removeChild(i),o===null||o.indexOf("url")!==0?o="":o=o.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,""),o}}),Xh=nn.extend({initialize:function(i){this._marker=i},addHooks:function(){var i=this._marker._icon;this._draggable||(this._draggable=new Qn(i,i,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),lt(i,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Yt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(i){var o=this._marker,u=o._map,h=this._marker.options.autoPanSpeed,d=this._marker.options.autoPanPadding,g=kn(o._icon),w=u.getPixelBounds(),T=u.getPixelOrigin(),P=jt(w.min._subtract(T).add(d),w.max._subtract(T).subtract(d));if(!P.contains(g)){var C=ct((Math.max(P.max.x,g.x)-P.max.x)/(w.max.x-P.max.x)-(Math.min(P.min.x,g.x)-P.min.x)/(w.min.x-P.min.x),(Math.max(P.max.y,g.y)-P.max.y)/(w.max.y-P.max.y)-(Math.min(P.min.y,g.y)-P.min.y)/(w.min.y-P.min.y)).multiplyBy(h);u.panBy(C,{animate:!1}),this._draggable._newPos._add(C),this._draggable._startPos._add(C),Qt(o._icon,this._draggable._newPos),this._onDrag(i),this._panRequest=_t(this._adjustPan.bind(this,i))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(i){this._marker.options.autoPan&&(Ct(this._panRequest),this._panRequest=_t(this._adjustPan.bind(this,i)))},_onDrag:function(i){var o=this._marker,u=o._shadow,h=kn(o._icon),d=o._map.layerPointToLatLng(h);u&&Qt(u,h),o._latlng=d,i.latlng=d,i.oldLatLng=this._oldLatLng,o.fire("move",i).fire("drag",i)},_onDragEnd:function(i){Ct(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",i)}}),no=Ke.extend({options:{icon:new Rr,interactive:!0,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(i,o){S(this,o),this._latlng=U(i)},onAdd:function(i){this._zoomAnimated=this._zoomAnimated&&i.options.markerZoomAnimation,this._zoomAnimated&&i.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(i){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&i.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(i){var o=this._latlng;return this._latlng=U(i),this.update(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},setZIndexOffset:function(i){return this.options.zIndexOffset=i,this.update()},getIcon:function(){return this.options.icon},setIcon:function(i){return this.options.icon=i,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var i=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(i)}return this},_initIcon:function(){var i=this.options,o="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),u=i.icon.createIcon(this._icon),h=!1;u!==this._icon&&(this._icon&&this._removeIcon(),h=!0,i.title&&(u.title=i.title),u.tagName==="IMG"&&(u.alt=i.alt||"")),lt(u,o),i.keyboard&&(u.tabIndex="0"),this._icon=u,i.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var d=i.icon.createShadow(this._shadow),g=!1;d!==this._shadow&&(this._removeShadow(),g=!0),d&&(lt(d,o),d.alt=""),this._shadow=d,i.opacity<1&&this._updateOpacity(),h&&this.getPane().appendChild(this._icon),this._initInteraction(),d&&g&&this.getPane(i.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),Wt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Wt(this._shadow),this._shadow=null},_setPos:function(i){this._icon&&Qt(this._icon,i),this._shadow&&Qt(this._shadow,i),this._zIndex=i.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(i){this._icon&&(this._icon.style.zIndex=this._zIndex+i)},_animateZoom:function(i){var o=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center).round();this._setPos(o)},_initInteraction:function(){if(!!this.options.interactive&&(lt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Xh)){var i=this.options.draggable;this.dragging&&(i=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Xh(this),i&&this.dragging.enable()}},setOpacity:function(i){return this.options.opacity=i,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var i=this.options.opacity;this._icon&&ze(this._icon,i),this._shadow&&ze(this._shadow,i)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Hv(i,o){return new no(i,o)}var Rn=Ke.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(i){this._renderer=i.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(i){return S(this,i),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&i&&Object.prototype.hasOwnProperty.call(i,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),io=Rn.extend({options:{fill:!0,radius:10},initialize:function(i,o){S(this,o),this._latlng=U(i),this._radius=this.options.radius},setLatLng:function(i){var o=this._latlng;return this._latlng=U(i),this.redraw(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(i){return this.options.radius=this._radius=i,this.redraw()},getRadius:function(){return this._radius},setStyle:function(i){var o=i&&i.radius||this._radius;return Rn.prototype.setStyle.call(this,i),this.setRadius(o),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var i=this._radius,o=this._radiusY||i,u=this._clickTolerance(),h=[i+u,o+u];this._pxBounds=new yt(this._point.subtract(h),this._point.add(h))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(i){return i.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function $v(i,o){return new io(i,o)}var bu=io.extend({initialize:function(i,o,u){if(typeof o=="number"&&(o=s({},u,{radius:o})),S(this,o),this._latlng=U(i),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(i){return this._mRadius=i,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var i=[this._radius,this._radiusY||this._radius];return new Bt(this._map.layerPointToLatLng(this._point.subtract(i)),this._map.layerPointToLatLng(this._point.add(i)))},setStyle:Rn.prototype.setStyle,_project:function(){var i=this._latlng.lng,o=this._latlng.lat,u=this._map,h=u.options.crs;if(h.distance===K.distance){var d=Math.PI/180,g=this._mRadius/K.R/d,w=u.project([o+g,i]),T=u.project([o-g,i]),P=w.add(T).divideBy(2),C=u.unproject(P).lat,Z=Math.acos((Math.cos(g*d)-Math.sin(o*d)*Math.sin(C*d))/(Math.cos(o*d)*Math.cos(C*d)))/d;(isNaN(Z)||Z===0)&&(Z=g/Math.cos(Math.PI/180*o)),this._point=P.subtract(u.getPixelOrigin()),this._radius=isNaN(Z)?0:P.x-u.project([C,i-Z]).x,this._radiusY=P.y-w.y}else{var tt=h.unproject(h.project(this._latlng).subtract([this._mRadius,0]));this._point=u.latLngToLayerPoint(this._latlng),this._radius=this._point.x-u.latLngToLayerPoint(tt).x}this._updateBounds()}});function Zv(i,o,u){return new bu(i,o,u)}var _n=Rn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(i,o){S(this,o),this._setLatLngs(i)},getLatLngs:function(){return this._latlngs},setLatLngs:function(i){return this._setLatLngs(i),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(i){for(var o=1/0,u=null,h=kr,d,g,w=0,T=this._parts.length;w<T;w++)for(var P=this._parts[w],C=1,Z=P.length;C<Z;C++){d=P[C-1],g=P[C];var tt=h(i,d,g,!0);tt<o&&(o=tt,u=h(i,d,g))}return u&&(u.distance=Math.sqrt(o)),u},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var i,o,u,h,d,g,w,T=this._rings[0],P=T.length;if(!P)return null;for(i=0,o=0;i<P-1;i++)o+=T[i].distanceTo(T[i+1])/2;if(o===0)return this._map.layerPointToLatLng(T[0]);for(i=0,h=0;i<P-1;i++)if(d=T[i],g=T[i+1],u=d.distanceTo(g),h+=u,h>o)return w=(h-o)/u,this._map.layerPointToLatLng([g.x-w*(g.x-d.x),g.y-w*(g.y-d.y)])},getBounds:function(){return this._bounds},addLatLng:function(i,o){return o=o||this._defaultShape(),i=U(i),o.push(i),this._bounds.extend(i),this.redraw()},_setLatLngs:function(i){this._bounds=new Bt,this._latlngs=this._convertLatLngs(i)},_defaultShape:function(){return gn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(i){for(var o=[],u=gn(i),h=0,d=i.length;h<d;h++)u?(o[h]=U(i[h]),this._bounds.extend(o[h])):o[h]=this._convertLatLngs(i[h]);return o},_project:function(){var i=new yt;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,i),this._bounds.isValid()&&i.isValid()&&(this._rawPxBounds=i,this._updateBounds())},_updateBounds:function(){var i=this._clickTolerance(),o=new $(i,i);this._pxBounds=new yt([this._rawPxBounds.min.subtract(o),this._rawPxBounds.max.add(o)])},_projectLatlngs:function(i,o,u){var h=i[0]instanceof I,d=i.length,g,w;if(h){for(w=[],g=0;g<d;g++)w[g]=this._map.latLngToLayerPoint(i[g]),u.extend(w[g]);o.push(w)}else for(g=0;g<d;g++)this._projectLatlngs(i[g],o,u)},_clipPoints:function(){var i=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}var o=this._parts,u,h,d,g,w,T,P;for(u=0,d=0,g=this._rings.length;u<g;u++)for(P=this._rings[u],h=0,w=P.length;h<w-1;h++)T=Kh(P[h],P[h+1],i,h,!0),!!T&&(o[d]=o[d]||[],o[d].push(T[0]),(T[1]!==P[h+1]||h===w-2)&&(o[d].push(T[1]),d++))}},_simplifyPoints:function(){for(var i=this._parts,o=this.options.smoothFactor,u=0,h=i.length;u<h;u++)i[u]=Zh(i[u],o)},_update:function(){!this._map||(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(i,o){var u,h,d,g,w,T,P=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(u=0,g=this._parts.length;u<g;u++)for(T=this._parts[u],h=0,w=T.length,d=w-1;h<w;d=h++)if(!(!o&&h===0)&&qh(i,T[d],T[h])<=P)return!0;return!1}});function qv(i,o){return new _n(i,o)}_n._flat=jh;var Di=_n.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var i,o,u,h,d,g,w,T,P,C=this._rings[0],Z=C.length;if(!Z)return null;for(g=w=T=0,i=0,o=Z-1;i<Z;o=i++)u=C[i],h=C[o],d=u.y*h.x-h.y*u.x,w+=(u.x+h.x)*d,T+=(u.y+h.y)*d,g+=d*3;return g===0?P=C[0]:P=[w/g,T/g],this._map.layerPointToLatLng(P)},_convertLatLngs:function(i){var o=_n.prototype._convertLatLngs.call(this,i),u=o.length;return u>=2&&o[0]instanceof I&&o[0].equals(o[u-1])&&o.pop(),o},_setLatLngs:function(i){_n.prototype._setLatLngs.call(this,i),gn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return gn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var i=this._renderer._bounds,o=this.options.weight,u=new $(o,o);if(i=new yt(i.min.subtract(u),i.max.add(u)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}for(var h=0,d=this._rings.length,g;h<d;h++)g=Gh(this._rings[h],i,!0),g.length&&this._parts.push(g)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(i){var o=!1,u,h,d,g,w,T,P,C;if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(g=0,P=this._parts.length;g<P;g++)for(u=this._parts[g],w=0,C=u.length,T=C-1;w<C;T=w++)h=u[w],d=u[T],h.y>i.y!=d.y>i.y&&i.x<(d.x-h.x)*(i.y-h.y)/(d.y-h.y)+h.x&&(o=!o);return o||_n.prototype._containsPoint.call(this,i,!0)}});function Wv(i,o){return new Di(i,o)}var vn=Ri.extend({initialize:function(i,o){S(this,o),this._layers={},i&&this.addData(i)},addData:function(i){var o=J(i)?i:i.features,u,h,d;if(o){for(u=0,h=o.length;u<h;u++)d=o[u],(d.geometries||d.geometry||d.features||d.coordinates)&&this.addData(d);return this}var g=this.options;if(g.filter&&!g.filter(i))return this;var w=Pu(i,g);return w?(w.feature=oo(i),w.defaultOptions=w.options,this.resetStyle(w),g.onEachFeature&&g.onEachFeature(i,w),this.addLayer(w)):this},resetStyle:function(i){return i===void 0?this.eachLayer(this.resetStyle,this):(i.options=s({},i.defaultOptions),this._setLayerStyle(i,this.options.style),this)},setStyle:function(i){return this.eachLayer(function(o){this._setLayerStyle(o,i)},this)},_setLayerStyle:function(i,o){i.setStyle&&(typeof o=="function"&&(o=o(i.feature)),i.setStyle(o))}});function Pu(i,o){var u=i.type==="Feature"?i.geometry:i,h=u?u.coordinates:null,d=[],g=o&&o.pointToLayer,w=o&&o.coordsToLatLng||Au,T,P,C,Z;if(!h&&!u)return null;switch(u.type){case"Point":return T=w(h),Qh(g,i,T,o);case"MultiPoint":for(C=0,Z=h.length;C<Z;C++)T=w(h[C]),d.push(Qh(g,i,T,o));return new Ri(d);case"LineString":case"MultiLineString":return P=ro(h,u.type==="LineString"?0:1,w),new _n(P,o);case"Polygon":case"MultiPolygon":return P=ro(h,u.type==="Polygon"?1:2,w),new Di(P,o);case"GeometryCollection":for(C=0,Z=u.geometries.length;C<Z;C++){var tt=Pu({geometry:u.geometries[C],type:"Feature",properties:i.properties},o);tt&&d.push(tt)}return new Ri(d);default:throw new Error("Invalid GeoJSON object.")}}function Qh(i,o,u,h){return i?i(o,u):new no(u,h&&h.markersInheritOptions&&h)}function Au(i){return new I(i[1],i[0],i[2])}function ro(i,o,u){for(var h=[],d=0,g=i.length,w;d<g;d++)w=o?ro(i[d],o-1,u):(u||Au)(i[d]),h.push(w);return h}function Iu(i,o){return o=typeof o=="number"?o:6,i.alt!==void 0?[v(i.lng,o),v(i.lat,o),v(i.alt,o)]:[v(i.lng,o),v(i.lat,o)]}function so(i,o,u,h){for(var d=[],g=0,w=i.length;g<w;g++)d.push(o?so(i[g],o-1,u,h):Iu(i[g],h));return!o&&u&&d.push(d[0]),d}function Bi(i,o){return i.feature?s({},i.feature,{geometry:o}):oo(o)}function oo(i){return i.type==="Feature"||i.type==="FeatureCollection"?i:{type:"Feature",properties:{},geometry:i}}var Su={toGeoJSON:function(i){return Bi(this,{type:"Point",coordinates:Iu(this.getLatLng(),i)})}};no.include(Su),bu.include(Su),io.include(Su),_n.include({toGeoJSON:function(i){var o=!gn(this._latlngs),u=so(this._latlngs,o?1:0,!1,i);return Bi(this,{type:(o?"Multi":"")+"LineString",coordinates:u})}}),Di.include({toGeoJSON:function(i){var o=!gn(this._latlngs),u=o&&!gn(this._latlngs[0]),h=so(this._latlngs,u?2:o?1:0,!0,i);return o||(h=[h]),Bi(this,{type:(u?"Multi":"")+"Polygon",coordinates:h})}}),ki.include({toMultiPoint:function(i){var o=[];return this.eachLayer(function(u){o.push(u.toGeoJSON(i).geometry.coordinates)}),Bi(this,{type:"MultiPoint",coordinates:o})},toGeoJSON:function(i){var o=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(o==="MultiPoint")return this.toMultiPoint(i);var u=o==="GeometryCollection",h=[];return this.eachLayer(function(d){if(d.toGeoJSON){var g=d.toGeoJSON(i);if(u)h.push(g.geometry);else{var w=oo(g);w.type==="FeatureCollection"?h.push.apply(h,w.features):h.push(w)}}}),u?Bi(this,{geometries:h,type:"GeometryCollection"}):{type:"FeatureCollection",features:h}}});function Jh(i,o){return new vn(i,o)}var Kv=Jh,ao=Ke.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(i,o,u){this._url=i,this._bounds=Gt(o),S(this,u)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(lt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Wt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(i){return this.options.opacity=i,this._image&&this._updateOpacity(),this},setStyle:function(i){return i.opacity&&this.setOpacity(i.opacity),this},bringToFront:function(){return this._map&&Ni(this._image),this},bringToBack:function(){return this._map&&Mi(this._image),this},setUrl:function(i){return this._url=i,this._image&&(this._image.src=i),this},setBounds:function(i){return this._bounds=Gt(i),this._map&&this._reset(),this},getEvents:function(){var i={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var i=this._url.tagName==="IMG",o=this._image=i?this._url:Tt("img");if(lt(o,"leaflet-image-layer"),this._zoomAnimated&&lt(o,"leaflet-zoom-animated"),this.options.className&&lt(o,this.options.className),o.onselectstart=_,o.onmousemove=_,o.onload=l(this.fire,this,"load"),o.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),i){this._url=o.src;return}o.src=this._url,o.alt=this.options.alt},_animateZoom:function(i){var o=this._map.getZoomScale(i.zoom),u=this._map._latLngBoundsToNewLayerBounds(this._bounds,i.zoom,i.center).min;Yn(this._image,u,o)},_reset:function(){var i=this._image,o=new yt(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),u=o.getSize();Qt(i,o.min),i.style.width=u.x+"px",i.style.height=u.y+"px"},_updateOpacity:function(){ze(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var i=this.options.errorOverlayUrl;i&&this._url!==i&&(this._url=i,this._image.src=i)}}),jv=function(i,o,u){return new ao(i,o,u)},tf=ao.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1},_initImage:function(){var i=this._url.tagName==="VIDEO",o=this._image=i?this._url:Tt("video");if(lt(o,"leaflet-image-layer"),this._zoomAnimated&&lt(o,"leaflet-zoom-animated"),this.options.className&&lt(o,this.options.className),o.onselectstart=_,o.onmousemove=_,o.onloadeddata=l(this.fire,this,"load"),i){for(var u=o.getElementsByTagName("source"),h=[],d=0;d<u.length;d++)h.push(u[d].src);this._url=u.length>0?h:[o.src];return}J(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(o.style,"objectFit")&&(o.style.objectFit="fill"),o.autoplay=!!this.options.autoplay,o.loop=!!this.options.loop,o.muted=!!this.options.muted;for(var g=0;g<this._url.length;g++){var w=Tt("source");w.src=this._url[g],o.appendChild(w)}}});function Gv(i,o,u){return new tf(i,o,u)}var ef=ao.extend({_initImage:function(){var i=this._image=this._url;lt(i,"leaflet-image-layer"),this._zoomAnimated&&lt(i,"leaflet-zoom-animated"),this.options.className&&lt(i,this.options.className),i.onselectstart=_,i.onmousemove=_}});function Yv(i,o,u){return new ef(i,o,u)}var yn=Ke.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(i,o){S(this,i),this._source=o},onAdd:function(i){this._zoomAnimated=i._zoomAnimated,this._container||this._initLayout(),i._fadeAnimated&&ze(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),i._fadeAnimated&&ze(this._container,1),this.bringToFront()},onRemove:function(i){i._fadeAnimated?(ze(this._container,0),this._removeTimeout=setTimeout(l(Wt,void 0,this._container),200)):Wt(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(i){return this._latlng=U(i),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(i){return this._content=i,this.update(),this},getElement:function(){return this._container},update:function(){!this._map||(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var i={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ni(this._container),this},bringToBack:function(){return this._map&&Mi(this._container),this},_prepareOpen:function(i,o,u){if(o instanceof Ke||(u=o,o=i),o instanceof Ri)for(var h in i._layers){o=i._layers[h];break}if(!u)if(o.getCenter)u=o.getCenter();else if(o.getLatLng)u=o.getLatLng();else throw new Error("Unable to get source layer LatLng.");return this._source=o,this.update(),u},_updateContent:function(){if(!!this._content){var i=this._contentNode,o=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof o=="string")i.innerHTML=o;else{for(;i.hasChildNodes();)i.removeChild(i.firstChild);i.appendChild(o)}this.fire("contentupdate")}},_updatePosition:function(){if(!!this._map){var i=this._map.latLngToLayerPoint(this._latlng),o=ct(this.options.offset),u=this._getAnchor();this._zoomAnimated?Qt(this._container,i.add(u)):o=o.add(i).add(u);var h=this._containerBottom=-o.y,d=this._containerLeft=-Math.round(this._containerWidth/2)+o.x;this._container.style.bottom=h+"px",this._container.style.left=d+"px"}},_getAnchor:function(){return[0,0]}}),zi=yn.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(i){return i.openPopup(this),this},onAdd:function(i){yn.prototype.onAdd.call(this,i),i.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Rn||this._source.on("preclick",Xn))},onRemove:function(i){yn.prototype.onRemove.call(this,i),i.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Rn||this._source.off("preclick",Xn))},getEvents:function(){var i=yn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(i.preclick=this._close),this.options.keepInView&&(i.moveend=this._adjustPan),i},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var i="leaflet-popup",o=this._container=Tt("div",i+" "+(this.options.className||"")+" leaflet-zoom-animated"),u=this._wrapper=Tt("div",i+"-content-wrapper",o);if(this._contentNode=Tt("div",i+"-content",u),Nr(o),pu(this._contentNode),pt(o,"contextmenu",Xn),this._tipContainer=Tt("div",i+"-tip-container",o),this._tip=Tt("div",i+"-tip",this._tipContainer),this.options.closeButton){var h=this._closeButton=Tt("a",i+"-close-button",o);h.href="#close",h.innerHTML="&#215;",pt(h,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var i=this._contentNode,o=i.style;o.width="",o.whiteSpace="nowrap";var u=i.offsetWidth;u=Math.min(u,this.options.maxWidth),u=Math.max(u,this.options.minWidth),o.width=u+1+"px",o.whiteSpace="",o.height="";var h=i.offsetHeight,d=this.options.maxHeight,g="leaflet-popup-scrolled";d&&h>d?(o.height=d+"px",lt(i,g)):Yt(i,g),this._containerWidth=this._container.offsetWidth},_animateZoom:function(i){var o=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center),u=this._getAnchor();Qt(this._container,o.add(u))},_adjustPan:function(){if(!!this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var i=this._map,o=parseInt(Ir(this._container,"marginBottom"),10)||0,u=this._container.offsetHeight+o,h=this._containerWidth,d=new $(this._containerLeft,-u-this._containerBottom);d._add(kn(this._container));var g=i.layerPointToContainerPoint(d),w=ct(this.options.autoPanPadding),T=ct(this.options.autoPanPaddingTopLeft||w),P=ct(this.options.autoPanPaddingBottomRight||w),C=i.getSize(),Z=0,tt=0;g.x+h+P.x>C.x&&(Z=g.x+h-C.x+P.x),g.x-Z-T.x<0&&(Z=g.x-T.x),g.y+u+P.y>C.y&&(tt=g.y+u-C.y+P.y),g.y-tt-T.y<0&&(tt=g.y-T.y),(Z||tt)&&i.fire("autopanstart").panBy([Z,tt])}},_onCloseButtonClick:function(i){this._close(),mn(i)},_getAnchor:function(){return ct(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Xv=function(i,o){return new zi(i,o)};wt.mergeOptions({closePopupOnClick:!0}),wt.include({openPopup:function(i,o,u){return i instanceof zi||(i=new zi(u).setContent(i)),o&&i.setLatLng(o),this.hasLayer(i)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=i,this.addLayer(i))},closePopup:function(i){return(!i||i===this._popup)&&(i=this._popup,this._popup=null),i&&this.removeLayer(i),this}}),Ke.include({bindPopup:function(i,o){return i instanceof zi?(S(i,o),this._popup=i,i._source=this):((!this._popup||o)&&(this._popup=new zi(o,this)),this._popup.setContent(i)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(i,o){return this._popup&&this._map&&(o=this._popup._prepareOpen(this,i,o),this._map.openPopup(this._popup,o)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(i){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(i)),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(i){return this._popup&&this._popup.setContent(i),this},getPopup:function(){return this._popup},_openPopup:function(i){var o=i.layer||i.target;if(!!this._popup&&!!this._map){if(mn(i),o instanceof Rn){this.openPopup(i.layer||i.target,i.latlng);return}this._map.hasLayer(this._popup)&&this._popup._source===o?this.closePopup():this.openPopup(o,i.latlng)}},_movePopup:function(i){this._popup.setLatLng(i.latlng)},_onKeyPress:function(i){i.originalEvent.keyCode===13&&this._openPopup(i)}});var Fi=yn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(i){yn.prototype.onAdd.call(this,i),this.setOpacity(this.options.opacity),i.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(i){yn.prototype.onRemove.call(this,i),i.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var i=yn.prototype.getEvents.call(this);return tn&&!this.options.permanent&&(i.preclick=this._close),i},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var i="leaflet-tooltip",o=i+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Tt("div",o)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(i){var o,u,h=this._map,d=this._container,g=h.latLngToContainerPoint(h.getCenter()),w=h.layerPointToContainerPoint(i),T=this.options.direction,P=d.offsetWidth,C=d.offsetHeight,Z=ct(this.options.offset),tt=this._getAnchor();T==="top"?(o=P/2,u=C):T==="bottom"?(o=P/2,u=0):T==="center"?(o=P/2,u=C/2):T==="right"?(o=0,u=C/2):T==="left"?(o=P,u=C/2):w.x<g.x?(T="right",o=0,u=C/2):(T="left",o=P+(Z.x+tt.x)*2,u=C/2),i=i.subtract(ct(o,u,!0)).add(Z).add(tt),Yt(d,"leaflet-tooltip-right"),Yt(d,"leaflet-tooltip-left"),Yt(d,"leaflet-tooltip-top"),Yt(d,"leaflet-tooltip-bottom"),lt(d,"leaflet-tooltip-"+T),Qt(d,i)},_updatePosition:function(){var i=this._map.latLngToLayerPoint(this._latlng);this._setPosition(i)},setOpacity:function(i){this.options.opacity=i,this._container&&ze(this._container,i)},_animateZoom:function(i){var o=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center);this._setPosition(o)},_getAnchor:function(){return ct(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Qv=function(i,o){return new Fi(i,o)};wt.include({openTooltip:function(i,o,u){return i instanceof Fi||(i=new Fi(u).setContent(i)),o&&i.setLatLng(o),this.hasLayer(i)?this:this.addLayer(i)},closeTooltip:function(i){return i&&this.removeLayer(i),this}}),Ke.include({bindTooltip:function(i,o){return i instanceof Fi?(S(i,o),this._tooltip=i,i._source=this):((!this._tooltip||o)&&(this._tooltip=new Fi(o,this)),this._tooltip.setContent(i)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(i){if(!(!i&&this._tooltipHandlersAdded)){var o=i?"off":"on",u={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?u.add=this._openTooltip:(u.mouseover=this._openTooltip,u.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(u.mousemove=this._moveTooltip),tn&&(u.click=this._openTooltip)),this[o](u),this._tooltipHandlersAdded=!i}},openTooltip:function(i,o){return this._tooltip&&this._map&&(o=this._tooltip._prepareOpen(this,i,o),this._map.openTooltip(this._tooltip,o),this._tooltip.options.interactive&&this._tooltip._container&&(lt(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(Yt(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(i){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(i)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(i){return this._tooltip&&this._tooltip.setContent(i),this},getTooltip:function(){return this._tooltip},_openTooltip:function(i){var o=i.layer||i.target;!this._tooltip||!this._map||this.openTooltip(o,this._tooltip.options.sticky?i.latlng:void 0)},_moveTooltip:function(i){var o=i.latlng,u,h;this._tooltip.options.sticky&&i.originalEvent&&(u=this._map.mouseEventToContainerPoint(i.originalEvent),h=this._map.containerPointToLayerPoint(u),o=this._map.layerPointToLatLng(h)),this._tooltip.setLatLng(o)}});var nf=Oi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(i){var o=i&&i.tagName==="DIV"?i:document.createElement("div"),u=this.options;if(u.html instanceof Element?(js(o),o.appendChild(u.html)):o.innerHTML=u.html!==!1?u.html:"",u.bgPos){var h=ct(u.bgPos);o.style.backgroundPosition=-h.x+"px "+-h.y+"px"}return this._setIconStyles(o,"icon"),o},createShadow:function(){return null}});function Jv(i){return new nf(i)}Oi.Default=Rr;var Or=Ke.extend({options:{tileSize:256,opacity:1,updateWhenIdle:le,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(i){S(this,i)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(i){i._addZoomLimit(this)},onRemove:function(i){this._removeAllTiles(),Wt(this._container),i._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ni(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Mi(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(i){return this.options.opacity=i,this._updateOpacity(),this},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var i={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=p(this._onMoveEnd,this.options.updateInterval,this)),i.move=this._onMove),this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},createTile:function(){return document.createElement("div")},getTileSize:function(){var i=this.options.tileSize;return i instanceof $?i:new $(i,i)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(i){for(var o=this.getPane().children,u=-i(-1/0,1/0),h=0,d=o.length,g;h<d;h++)g=o[h].style.zIndex,o[h]!==this._container&&g&&(u=i(u,+g));isFinite(u)&&(this.options.zIndex=u+i(-1,1),this._updateZIndex())},_updateOpacity:function(){if(!!this._map&&!H){ze(this._container,this.options.opacity);var i=+new Date,o=!1,u=!1;for(var h in this._tiles){var d=this._tiles[h];if(!(!d.current||!d.loaded)){var g=Math.min(1,(i-d.loaded)/200);ze(d.el,g),g<1?o=!0:(d.active?u=!0:this._onOpaqueTile(d),d.active=!0)}}u&&!this._noPrune&&this._pruneTiles(),o&&(Ct(this._fadeFrame),this._fadeFrame=_t(this._updateOpacity,this))}},_onOpaqueTile:_,_initContainer:function(){this._container||(this._container=Tt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var i=this._tileZoom,o=this.options.maxZoom;if(i!==void 0){for(var u in this._levels)u=Number(u),this._levels[u].el.children.length||u===i?(this._levels[u].el.style.zIndex=o-Math.abs(i-u),this._onUpdateLevel(u)):(Wt(this._levels[u].el),this._removeTilesAtZoom(u),this._onRemoveLevel(u),delete this._levels[u]);var h=this._levels[i],d=this._map;return h||(h=this._levels[i]={},h.el=Tt("div","leaflet-tile-container leaflet-zoom-animated",this._container),h.el.style.zIndex=o,h.origin=d.project(d.unproject(d.getPixelOrigin()),i).round(),h.zoom=i,this._setZoomTransform(h,d.getCenter(),d.getZoom()),_(h.el.offsetWidth),this._onCreateLevel(h)),this._level=h,h}},_onUpdateLevel:_,_onRemoveLevel:_,_onCreateLevel:_,_pruneTiles:function(){if(!!this._map){var i,o,u=this._map.getZoom();if(u>this.options.maxZoom||u<this.options.minZoom){this._removeAllTiles();return}for(i in this._tiles)o=this._tiles[i],o.retain=o.current;for(i in this._tiles)if(o=this._tiles[i],o.current&&!o.active){var h=o.coords;this._retainParent(h.x,h.y,h.z,h.z-5)||this._retainChildren(h.x,h.y,h.z,h.z+2)}for(i in this._tiles)this._tiles[i].retain||this._removeTile(i)}},_removeTilesAtZoom:function(i){for(var o in this._tiles)this._tiles[o].coords.z===i&&this._removeTile(o)},_removeAllTiles:function(){for(var i in this._tiles)this._removeTile(i)},_invalidateAll:function(){for(var i in this._levels)Wt(this._levels[i].el),this._onRemoveLevel(Number(i)),delete this._levels[i];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(i,o,u,h){var d=Math.floor(i/2),g=Math.floor(o/2),w=u-1,T=new $(+d,+g);T.z=+w;var P=this._tileCoordsToKey(T),C=this._tiles[P];return C&&C.active?(C.retain=!0,!0):(C&&C.loaded&&(C.retain=!0),w>h?this._retainParent(d,g,w,h):!1)},_retainChildren:function(i,o,u,h){for(var d=2*i;d<2*i+2;d++)for(var g=2*o;g<2*o+2;g++){var w=new $(d,g);w.z=u+1;var T=this._tileCoordsToKey(w),P=this._tiles[T];if(P&&P.active){P.retain=!0;continue}else P&&P.loaded&&(P.retain=!0);u+1<h&&this._retainChildren(d,g,u+1,h)}},_resetView:function(i){var o=i&&(i.pinch||i.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),o,o)},_animateZoom:function(i){this._setView(i.center,i.zoom,!0,i.noUpdate)},_clampZoom:function(i){var o=this.options;return o.minNativeZoom!==void 0&&i<o.minNativeZoom?o.minNativeZoom:o.maxNativeZoom!==void 0&&o.maxNativeZoom<i?o.maxNativeZoom:i},_setView:function(i,o,u,h){var d=Math.round(o);this.options.maxZoom!==void 0&&d>this.options.maxZoom||this.options.minZoom!==void 0&&d<this.options.minZoom?d=void 0:d=this._clampZoom(d);var g=this.options.updateWhenZooming&&d!==this._tileZoom;(!h||g)&&(this._tileZoom=d,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),d!==void 0&&this._update(i),u||this._pruneTiles(),this._noPrune=!!u),this._setZoomTransforms(i,o)},_setZoomTransforms:function(i,o){for(var u in this._levels)this._setZoomTransform(this._levels[u],i,o)},_setZoomTransform:function(i,o,u){var h=this._map.getZoomScale(u,i.zoom),d=i.origin.multiplyBy(h).subtract(this._map._getNewPixelOrigin(o,u)).round();Ut?Yn(i.el,d,h):Qt(i.el,d)},_resetGrid:function(){var i=this._map,o=i.options.crs,u=this._tileSize=this.getTileSize(),h=this._tileZoom,d=this._map.getPixelWorldBounds(this._tileZoom);d&&(this._globalTileRange=this._pxBoundsToTileRange(d)),this._wrapX=o.wrapLng&&!this.options.noWrap&&[Math.floor(i.project([0,o.wrapLng[0]],h).x/u.x),Math.ceil(i.project([0,o.wrapLng[1]],h).x/u.y)],this._wrapY=o.wrapLat&&!this.options.noWrap&&[Math.floor(i.project([o.wrapLat[0],0],h).y/u.x),Math.ceil(i.project([o.wrapLat[1],0],h).y/u.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(i){var o=this._map,u=o._animatingZoom?Math.max(o._animateToZoom,o.getZoom()):o.getZoom(),h=o.getZoomScale(u,this._tileZoom),d=o.project(i,this._tileZoom).floor(),g=o.getSize().divideBy(h*2);return new yt(d.subtract(g),d.add(g))},_update:function(i){var o=this._map;if(!!o){var u=this._clampZoom(o.getZoom());if(i===void 0&&(i=o.getCenter()),this._tileZoom!==void 0){var h=this._getTiledPixelBounds(i),d=this._pxBoundsToTileRange(h),g=d.getCenter(),w=[],T=this.options.keepBuffer,P=new yt(d.getBottomLeft().subtract([T,-T]),d.getTopRight().add([T,-T]));if(!(isFinite(d.min.x)&&isFinite(d.min.y)&&isFinite(d.max.x)&&isFinite(d.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var C in this._tiles){var Z=this._tiles[C].coords;(Z.z!==this._tileZoom||!P.contains(new $(Z.x,Z.y)))&&(this._tiles[C].current=!1)}if(Math.abs(u-this._tileZoom)>1){this._setView(i,u);return}for(var tt=d.min.y;tt<=d.max.y;tt++)for(var bt=d.min.x;bt<=d.max.x;bt++){var wn=new $(bt,tt);if(wn.z=this._tileZoom,!!this._isValidTile(wn)){var ti=this._tiles[this._tileCoordsToKey(wn)];ti?ti.current=!0:w.push(wn)}}if(w.sort(function(On,Cu){return On.distanceTo(g)-Cu.distanceTo(g)}),w.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var lo=document.createDocumentFragment();for(bt=0;bt<w.length;bt++)this._addTile(w[bt],lo);this._level.el.appendChild(lo)}}}},_isValidTile:function(i){var o=this._map.options.crs;if(!o.infinite){var u=this._globalTileRange;if(!o.wrapLng&&(i.x<u.min.x||i.x>u.max.x)||!o.wrapLat&&(i.y<u.min.y||i.y>u.max.y))return!1}if(!this.options.bounds)return!0;var h=this._tileCoordsToBounds(i);return Gt(this.options.bounds).overlaps(h)},_keyToBounds:function(i){return this._tileCoordsToBounds(this._keyToTileCoords(i))},_tileCoordsToNwSe:function(i){var o=this._map,u=this.getTileSize(),h=i.scaleBy(u),d=h.add(u),g=o.unproject(h,i.z),w=o.unproject(d,i.z);return[g,w]},_tileCoordsToBounds:function(i){var o=this._tileCoordsToNwSe(i),u=new Bt(o[0],o[1]);return this.options.noWrap||(u=this._map.wrapLatLngBounds(u)),u},_tileCoordsToKey:function(i){return i.x+":"+i.y+":"+i.z},_keyToTileCoords:function(i){var o=i.split(":"),u=new $(+o[0],+o[1]);return u.z=+o[2],u},_removeTile:function(i){var o=this._tiles[i];!o||(Wt(o.el),delete this._tiles[i],this.fire("tileunload",{tile:o.el,coords:this._keyToTileCoords(i)}))},_initTile:function(i){lt(i,"leaflet-tile");var o=this.getTileSize();i.style.width=o.x+"px",i.style.height=o.y+"px",i.onselectstart=_,i.onmousemove=_,H&&this.options.opacity<1&&ze(i,this.options.opacity),k&&!Y&&(i.style.WebkitBackfaceVisibility="hidden")},_addTile:function(i,o){var u=this._getTilePos(i),h=this._tileCoordsToKey(i),d=this.createTile(this._wrapCoords(i),l(this._tileReady,this,i));this._initTile(d),this.createTile.length<2&&_t(l(this._tileReady,this,i,null,d)),Qt(d,u),this._tiles[h]={el:d,coords:i,current:!0},o.appendChild(d),this.fire("tileloadstart",{tile:d,coords:i})},_tileReady:function(i,o,u){o&&this.fire("tileerror",{error:o,tile:u,coords:i});var h=this._tileCoordsToKey(i);u=this._tiles[h],!!u&&(u.loaded=+new Date,this._map._fadeAnimated?(ze(u.el,0),Ct(this._fadeFrame),this._fadeFrame=_t(this._updateOpacity,this)):(u.active=!0,this._pruneTiles()),o||(lt(u.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:u.el,coords:i})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),H||!this._map._fadeAnimated?_t(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(i){return i.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(i){var o=new $(this._wrapX?m(i.x,this._wrapX):i.x,this._wrapY?m(i.y,this._wrapY):i.y);return o.z=i.z,o},_pxBoundsToTileRange:function(i){var o=this.getTileSize();return new yt(i.min.unscaleBy(o).floor(),i.max.unscaleBy(o).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var i in this._tiles)if(!this._tiles[i].loaded)return!1;return!0}});function ty(i){return new Or(i)}var Ui=Or.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(i,o){this._url=i,o=S(this,o),o.detectRetina&&Mn&&o.maxZoom>0&&(o.tileSize=Math.floor(o.tileSize/2),o.zoomReverse?(o.zoomOffset--,o.minZoom++):(o.zoomOffset++,o.maxZoom--),o.minZoom=Math.max(0,o.minZoom)),typeof o.subdomains=="string"&&(o.subdomains=o.subdomains.split("")),k||this.on("tileunload",this._onTileRemove)},setUrl:function(i,o){return this._url===i&&o===void 0&&(o=!0),this._url=i,o||this.redraw(),this},createTile:function(i,o){var u=document.createElement("img");return pt(u,"load",l(this._tileOnLoad,this,o,u)),pt(u,"error",l(this._tileOnError,this,o,u)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),u.alt="",u.setAttribute("role","presentation"),u.src=this.getTileUrl(i),u},getTileUrl:function(i){var o={r:Mn?"@2x":"",s:this._getSubdomain(i),x:i.x,y:i.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var u=this._globalTileRange.max.y-i.y;this.options.tms&&(o.y=u),o["-y"]=u}return G(this._url,s(o,this.options))},_tileOnLoad:function(i,o){H?setTimeout(l(i,this,null,o),0):i(null,o)},_tileOnError:function(i,o,u){var h=this.options.errorTileUrl;h&&o.getAttribute("src")!==h&&(o.src=h),i(u,o)},_onTileRemove:function(i){i.tile.onload=null},_getZoomForUrl:function(){var i=this._tileZoom,o=this.options.maxZoom,u=this.options.zoomReverse,h=this.options.zoomOffset;return u&&(i=o-i),i+h},_getSubdomain:function(i){var o=Math.abs(i.x+i.y)%this.options.subdomains.length;return this.options.subdomains[o]},_abortLoading:function(){var i,o;for(i in this._tiles)this._tiles[i].coords.z!==this._tileZoom&&(o=this._tiles[i].el,o.onload=_,o.onerror=_,o.complete||(o.src=It,Wt(o),delete this._tiles[i]))},_removeTile:function(i){var o=this._tiles[i];if(!!o)return Q||o.el.setAttribute("src",It),Or.prototype._removeTile.call(this,i)},_tileReady:function(i,o,u){if(!(!this._map||u&&u.getAttribute("src")===It))return Or.prototype._tileReady.call(this,i,o,u)}});function rf(i,o){return new Ui(i,o)}var sf=Ui.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(i,o){this._url=i;var u=s({},this.defaultWmsParams);for(var h in o)h in this.options||(u[h]=o[h]);o=S(this,o);var d=o.detectRetina&&Mn?2:1,g=this.getTileSize();u.width=g.x*d,u.height=g.y*d,this.wmsParams=u},onAdd:function(i){this._crs=this.options.crs||i.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var o=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[o]=this._crs.code,Ui.prototype.onAdd.call(this,i)},getTileUrl:function(i){var o=this._tileCoordsToNwSe(i),u=this._crs,h=jt(u.project(o[0]),u.project(o[1])),d=h.min,g=h.max,w=(this._wmsVersion>=1.3&&this._crs===Yh?[d.y,d.x,g.y,g.x]:[d.x,d.y,g.x,g.y]).join(","),T=Ui.prototype.getTileUrl.call(this,i);return T+R(this.wmsParams,T,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+w},setParams:function(i,o){return s(this.wmsParams,i),o||this.redraw(),this}});function ey(i,o){return new sf(i,o)}Ui.WMS=sf,rf.wms=ey;var rn=Ke.extend({options:{padding:.1,tolerance:0},initialize:function(i){S(this,i),f(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&lt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var i={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(i.zoomanim=this._onAnimZoom),i},_onAnimZoom:function(i){this._updateTransform(i.center,i.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(i,o){var u=this._map.getZoomScale(o,this._zoom),h=kn(this._container),d=this._map.getSize().multiplyBy(.5+this.options.padding),g=this._map.project(this._center,o),w=this._map.project(i,o),T=w.subtract(g),P=d.multiplyBy(-u).add(h).add(d).subtract(T);Ut?Yn(this._container,P,u):Qt(this._container,P)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var i in this._layers)this._layers[i]._reset()},_onZoomEnd:function(){for(var i in this._layers)this._layers[i]._project()},_updatePaths:function(){for(var i in this._layers)this._layers[i]._update()},_update:function(){var i=this.options.padding,o=this._map.getSize(),u=this._map.containerPointToLayerPoint(o.multiplyBy(-i)).round();this._bounds=new yt(u,u.add(o.multiplyBy(1+i*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),of=rn.extend({getEvents:function(){var i=rn.prototype.getEvents.call(this);return i.viewprereset=this._onViewPreReset,i},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){rn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var i=this._container=document.createElement("canvas");pt(i,"mousemove",this._onMouseMove,this),pt(i,"click dblclick mousedown mouseup contextmenu",this._onClick,this),pt(i,"mouseout",this._handleMouseOut,this),this._ctx=i.getContext("2d")},_destroyContainer:function(){Ct(this._redrawRequest),delete this._ctx,Wt(this._container),Xt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var i;this._redrawBounds=null;for(var o in this._layers)i=this._layers[o],i._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){rn.prototype._update.call(this);var i=this._bounds,o=this._container,u=i.getSize(),h=Mn?2:1;Qt(o,i.min),o.width=h*u.x,o.height=h*u.y,o.style.width=u.x+"px",o.style.height=u.y+"px",Mn&&this._ctx.scale(2,2),this._ctx.translate(-i.min.x,-i.min.y),this.fire("update")}},_reset:function(){rn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(i){this._updateDashArray(i),this._layers[f(i)]=i;var o=i._order={layer:i,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=o),this._drawLast=o,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(i){this._requestRedraw(i)},_removePath:function(i){var o=i._order,u=o.next,h=o.prev;u?u.prev=h:this._drawLast=h,h?h.next=u:this._drawFirst=u,delete i._order,delete this._layers[f(i)],this._requestRedraw(i)},_updatePath:function(i){this._extendRedrawBounds(i),i._project(),i._update(),this._requestRedraw(i)},_updateStyle:function(i){this._updateDashArray(i),this._requestRedraw(i)},_updateDashArray:function(i){if(typeof i.options.dashArray=="string"){var o=i.options.dashArray.split(/[, ]+/),u=[],h,d;for(d=0;d<o.length;d++){if(h=Number(o[d]),isNaN(h))return;u.push(h)}i.options._dashArray=u}else i.options._dashArray=i.options.dashArray},_requestRedraw:function(i){!this._map||(this._extendRedrawBounds(i),this._redrawRequest=this._redrawRequest||_t(this._redraw,this))},_extendRedrawBounds:function(i){if(i._pxBounds){var o=(i.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new yt,this._redrawBounds.extend(i._pxBounds.min.subtract([o,o])),this._redrawBounds.extend(i._pxBounds.max.add([o,o]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var i=this._redrawBounds;if(i){var o=i.getSize();this._ctx.clearRect(i.min.x,i.min.y,o.x,o.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var i,o=this._redrawBounds;if(this._ctx.save(),o){var u=o.getSize();this._ctx.beginPath(),this._ctx.rect(o.min.x,o.min.y,u.x,u.y),this._ctx.clip()}this._drawing=!0;for(var h=this._drawFirst;h;h=h.next)i=h.layer,(!o||i._pxBounds&&i._pxBounds.intersects(o))&&i._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(i,o){if(!!this._drawing){var u,h,d,g,w=i._parts,T=w.length,P=this._ctx;if(!!T){for(P.beginPath(),u=0;u<T;u++){for(h=0,d=w[u].length;h<d;h++)g=w[u][h],P[h?"lineTo":"moveTo"](g.x,g.y);o&&P.closePath()}this._fillStroke(P,i)}}},_updateCircle:function(i){if(!(!this._drawing||i._empty())){var o=i._point,u=this._ctx,h=Math.max(Math.round(i._radius),1),d=(Math.max(Math.round(i._radiusY),1)||h)/h;d!==1&&(u.save(),u.scale(1,d)),u.beginPath(),u.arc(o.x,o.y/d,h,0,Math.PI*2,!1),d!==1&&u.restore(),this._fillStroke(u,i)}},_fillStroke:function(i,o){var u=o.options;u.fill&&(i.globalAlpha=u.fillOpacity,i.fillStyle=u.fillColor||u.color,i.fill(u.fillRule||"evenodd")),u.stroke&&u.weight!==0&&(i.setLineDash&&i.setLineDash(o.options&&o.options._dashArray||[]),i.globalAlpha=u.opacity,i.lineWidth=u.weight,i.strokeStyle=u.color,i.lineCap=u.lineCap,i.lineJoin=u.lineJoin,i.stroke())},_onClick:function(i){for(var o=this._map.mouseEventToLayerPoint(i),u,h,d=this._drawFirst;d;d=d.next)u=d.layer,u.options.interactive&&u._containsPoint(o)&&(!(i.type==="click"||i.type!=="preclick")||!this._map._draggableMoved(u))&&(h=u);h&&(gu(i),this._fireEvent([h],i))},_onMouseMove:function(i){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var o=this._map.mouseEventToLayerPoint(i);this._handleMouseHover(i,o)}},_handleMouseOut:function(i){var o=this._hoveredLayer;o&&(Yt(this._container,"leaflet-interactive"),this._fireEvent([o],i,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(i,o){if(!this._mouseHoverThrottled){for(var u,h,d=this._drawFirst;d;d=d.next)u=d.layer,u.options.interactive&&u._containsPoint(o)&&(h=u);h!==this._hoveredLayer&&(this._handleMouseOut(i),h&&(lt(this._container,"leaflet-interactive"),this._fireEvent([h],i,"mouseover"),this._hoveredLayer=h)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],i),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(i,o,u){this._map._fireDOMEvent(o,u||o.type,i)},_bringToFront:function(i){var o=i._order;if(!!o){var u=o.next,h=o.prev;if(u)u.prev=h;else return;h?h.next=u:u&&(this._drawFirst=u),o.prev=this._drawLast,this._drawLast.next=o,o.next=null,this._drawLast=o,this._requestRedraw(i)}},_bringToBack:function(i){var o=i._order;if(!!o){var u=o.next,h=o.prev;if(h)h.next=u;else return;u?u.prev=h:h&&(this._drawLast=h),o.prev=null,o.next=this._drawFirst,this._drawFirst.prev=o,this._drawFirst=o,this._requestRedraw(i)}}});function af(i){return Lh?new of(i):null}var Dr=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(i){return document.createElement("<lvml:"+i+' class="lvml">')}}catch{return function(o){return document.createElement("<"+o+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),ny={_initContainer:function(){this._container=Tt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(rn.prototype._update.call(this),this.fire("update"))},_initPath:function(i){var o=i._container=Dr("shape");lt(o,"leaflet-vml-shape "+(this.options.className||"")),o.coordsize="1 1",i._path=Dr("path"),o.appendChild(i._path),this._updateStyle(i),this._layers[f(i)]=i},_addPath:function(i){var o=i._container;this._container.appendChild(o),i.options.interactive&&i.addInteractiveTarget(o)},_removePath:function(i){var o=i._container;Wt(o),i.removeInteractiveTarget(o),delete this._layers[f(i)]},_updateStyle:function(i){var o=i._stroke,u=i._fill,h=i.options,d=i._container;d.stroked=!!h.stroke,d.filled=!!h.fill,h.stroke?(o||(o=i._stroke=Dr("stroke")),d.appendChild(o),o.weight=h.weight+"px",o.color=h.color,o.opacity=h.opacity,h.dashArray?o.dashStyle=J(h.dashArray)?h.dashArray.join(" "):h.dashArray.replace(/( *, *)/g," "):o.dashStyle="",o.endcap=h.lineCap.replace("butt","flat"),o.joinstyle=h.lineJoin):o&&(d.removeChild(o),i._stroke=null),h.fill?(u||(u=i._fill=Dr("fill")),d.appendChild(u),u.color=h.fillColor||h.color,u.opacity=h.fillOpacity):u&&(d.removeChild(u),i._fill=null)},_updateCircle:function(i){var o=i._point.round(),u=Math.round(i._radius),h=Math.round(i._radiusY||u);this._setPath(i,i._empty()?"M0 0":"AL "+o.x+","+o.y+" "+u+","+h+" 0,"+65535*360)},_setPath:function(i,o){i._path.v=o},_bringToFront:function(i){Ni(i._container)},_bringToBack:function(i){Mi(i._container)}},uo=qs?Dr:b,Br=rn.extend({getEvents:function(){var i=rn.prototype.getEvents.call(this);return i.zoomstart=this._onZoomStart,i},_initContainer:function(){this._container=uo("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=uo("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Wt(this._container),Xt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){rn.prototype._update.call(this);var i=this._bounds,o=i.getSize(),u=this._container;(!this._svgSize||!this._svgSize.equals(o))&&(this._svgSize=o,u.setAttribute("width",o.x),u.setAttribute("height",o.y)),Qt(u,i.min),u.setAttribute("viewBox",[i.min.x,i.min.y,o.x,o.y].join(" ")),this.fire("update")}},_initPath:function(i){var o=i._path=uo("path");i.options.className&&lt(o,i.options.className),i.options.interactive&&lt(o,"leaflet-interactive"),this._updateStyle(i),this._layers[f(i)]=i},_addPath:function(i){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(i._path),i.addInteractiveTarget(i._path)},_removePath:function(i){Wt(i._path),i.removeInteractiveTarget(i._path),delete this._layers[f(i)]},_updatePath:function(i){i._project(),i._update()},_updateStyle:function(i){var o=i._path,u=i.options;!o||(u.stroke?(o.setAttribute("stroke",u.color),o.setAttribute("stroke-opacity",u.opacity),o.setAttribute("stroke-width",u.weight),o.setAttribute("stroke-linecap",u.lineCap),o.setAttribute("stroke-linejoin",u.lineJoin),u.dashArray?o.setAttribute("stroke-dasharray",u.dashArray):o.removeAttribute("stroke-dasharray"),u.dashOffset?o.setAttribute("stroke-dashoffset",u.dashOffset):o.removeAttribute("stroke-dashoffset")):o.setAttribute("stroke","none"),u.fill?(o.setAttribute("fill",u.fillColor||u.color),o.setAttribute("fill-opacity",u.fillOpacity),o.setAttribute("fill-rule",u.fillRule||"evenodd")):o.setAttribute("fill","none"))},_updatePoly:function(i,o){this._setPath(i,M(i._parts,o))},_updateCircle:function(i){var o=i._point,u=Math.max(Math.round(i._radius),1),h=Math.max(Math.round(i._radiusY),1)||u,d="a"+u+","+h+" 0 1,0 ",g=i._empty()?"M0 0":"M"+(o.x-u)+","+o.y+d+u*2+",0 "+d+-u*2+",0 ";this._setPath(i,g)},_setPath:function(i,o){i._path.setAttribute("d",o)},_bringToFront:function(i){Ni(i._path)},_bringToBack:function(i){Mi(i._path)}});qs&&Br.include(ny);function uf(i){return Zs||qs?new Br(i):null}wt.include({getRenderer:function(i){var o=i.options.renderer||this._getPaneRenderer(i.options.pane)||this.options.renderer||this._renderer;return o||(o=this._renderer=this._createRenderer()),this.hasLayer(o)||this.addLayer(o),o},_getPaneRenderer:function(i){if(i==="overlayPane"||i===void 0)return!1;var o=this._paneRenderers[i];return o===void 0&&(o=this._createRenderer({pane:i}),this._paneRenderers[i]=o),o},_createRenderer:function(i){return this.options.preferCanvas&&af(i)||uf(i)}});var lf=Di.extend({initialize:function(i,o){Di.prototype.initialize.call(this,this._boundsToLatLngs(i),o)},setBounds:function(i){return this.setLatLngs(this._boundsToLatLngs(i))},_boundsToLatLngs:function(i){return i=Gt(i),[i.getSouthWest(),i.getNorthWest(),i.getNorthEast(),i.getSouthEast()]}});function iy(i,o){return new lf(i,o)}Br.create=uo,Br.pointsToPath=M,vn.geometryToLayer=Pu,vn.coordsToLatLng=Au,vn.coordsToLatLngs=ro,vn.latLngToCoords=Iu,vn.latLngsToCoords=so,vn.getFeature=Bi,vn.asFeature=oo,wt.mergeOptions({boxZoom:!0});var cf=nn.extend({initialize:function(i){this._map=i,this._container=i._container,this._pane=i._panes.overlayPane,this._resetStateTimeout=0,i.on("unload",this._destroy,this)},addHooks:function(){pt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Xt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Wt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(i){if(!i.shiftKey||i.which!==1&&i.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Sr(),au(),this._startPoint=this._map.mouseEventToContainerPoint(i),pt(document,{contextmenu:mn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(i){this._moved||(this._moved=!0,this._box=Tt("div","leaflet-zoom-box",this._container),lt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(i);var o=new yt(this._point,this._startPoint),u=o.getSize();Qt(this._box,o.min),this._box.style.width=u.x+"px",this._box.style.height=u.y+"px"},_finish:function(){this._moved&&(Wt(this._box),Yt(this._container,"leaflet-crosshair")),Cr(),uu(),Xt(document,{contextmenu:mn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(i){if(!(i.which!==1&&i.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var o=new Bt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(o).fire("boxzoomend",{boxZoomBounds:o})}},_onKeyDown:function(i){i.keyCode===27&&this._finish()}});wt.addInitHook("addHandler","boxZoom",cf),wt.mergeOptions({doubleClickZoom:!0});var hf=nn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(i){var o=this._map,u=o.getZoom(),h=o.options.zoomDelta,d=i.originalEvent.shiftKey?u-h:u+h;o.options.doubleClickZoom==="center"?o.setZoom(d):o.setZoomAround(i.containerPoint,d)}});wt.addInitHook("addHandler","doubleClickZoom",hf),wt.mergeOptions({dragging:!0,inertia:!Y,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var ff=nn.extend({addHooks:function(){if(!this._draggable){var i=this._map;this._draggable=new Qn(i._mapPane,i._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),i.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),i.on("zoomend",this._onZoomEnd,this),i.whenReady(this._onZoomEnd,this))}lt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Yt(this._map._container,"leaflet-grab"),Yt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var i=this._map;if(i._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var o=Gt(this._map.options.maxBounds);this._offsetLimit=jt(this._map.latLngToContainerPoint(o.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(o.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;i.fire("movestart").fire("dragstart"),i.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(i){if(this._map.options.inertia){var o=this._lastTime=+new Date,u=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(u),this._times.push(o),this._prunePositions(o)}this._map.fire("move",i).fire("drag",i)},_prunePositions:function(i){for(;this._positions.length>1&&i-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var i=this._map.getSize().divideBy(2),o=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=o.subtract(i).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(i,o){return i-(i-o)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var i=this._draggable._newPos.subtract(this._draggable._startPos),o=this._offsetLimit;i.x<o.min.x&&(i.x=this._viscousLimit(i.x,o.min.x)),i.y<o.min.y&&(i.y=this._viscousLimit(i.y,o.min.y)),i.x>o.max.x&&(i.x=this._viscousLimit(i.x,o.max.x)),i.y>o.max.y&&(i.y=this._viscousLimit(i.y,o.max.y)),this._draggable._newPos=this._draggable._startPos.add(i)}},_onPreDragWrap:function(){var i=this._worldWidth,o=Math.round(i/2),u=this._initialWorldOffset,h=this._draggable._newPos.x,d=(h-o+u)%i+o-u,g=(h+o+u)%i-o-u,w=Math.abs(d+u)<Math.abs(g+u)?d:g;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=w},_onDragEnd:function(i){var o=this._map,u=o.options,h=!u.inertia||this._times.length<2;if(o.fire("dragend",i),h)o.fire("moveend");else{this._prunePositions(+new Date);var d=this._lastPos.subtract(this._positions[0]),g=(this._lastTime-this._times[0])/1e3,w=u.easeLinearity,T=d.multiplyBy(w/g),P=T.distanceTo([0,0]),C=Math.min(u.inertiaMaxSpeed,P),Z=T.multiplyBy(C/P),tt=C/(u.inertiaDeceleration*w),bt=Z.multiplyBy(-tt/2).round();!bt.x&&!bt.y?o.fire("moveend"):(bt=o._limitOffset(bt,o.options.maxBounds),_t(function(){o.panBy(bt,{duration:tt,easeLinearity:w,noMoveStart:!0,animate:!0})}))}}});wt.addInitHook("addHandler","dragging",ff),wt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var df=nn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(i){this._map=i,this._setPanDelta(i.options.keyboardPanDelta),this._setZoomDelta(i.options.zoomDelta)},addHooks:function(){var i=this._map._container;i.tabIndex<=0&&(i.tabIndex="0"),pt(i,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Xt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var i=document.body,o=document.documentElement,u=i.scrollTop||o.scrollTop,h=i.scrollLeft||o.scrollLeft;this._map._container.focus(),window.scrollTo(h,u)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(i){var o=this._panKeys={},u=this.keyCodes,h,d;for(h=0,d=u.left.length;h<d;h++)o[u.left[h]]=[-1*i,0];for(h=0,d=u.right.length;h<d;h++)o[u.right[h]]=[i,0];for(h=0,d=u.down.length;h<d;h++)o[u.down[h]]=[0,i];for(h=0,d=u.up.length;h<d;h++)o[u.up[h]]=[0,-1*i]},_setZoomDelta:function(i){var o=this._zoomKeys={},u=this.keyCodes,h,d;for(h=0,d=u.zoomIn.length;h<d;h++)o[u.zoomIn[h]]=i;for(h=0,d=u.zoomOut.length;h<d;h++)o[u.zoomOut[h]]=-i},_addHooks:function(){pt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Xt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(i){if(!(i.altKey||i.ctrlKey||i.metaKey)){var o=i.keyCode,u=this._map,h;if(o in this._panKeys)(!u._panAnim||!u._panAnim._inProgress)&&(h=this._panKeys[o],i.shiftKey&&(h=ct(h).multiplyBy(3)),u.panBy(h),u.options.maxBounds&&u.panInsideBounds(u.options.maxBounds));else if(o in this._zoomKeys)u.setZoom(u.getZoom()+(i.shiftKey?3:1)*this._zoomKeys[o]);else if(o===27&&u._popup&&u._popup.options.closeOnEscapeKey)u.closePopup();else return;mn(i)}}});wt.addInitHook("addHandler","keyboard",df),wt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var pf=nn.extend({addHooks:function(){pt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Xt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(i){var o=zh(i),u=this._map.options.wheelDebounceTime;this._delta+=o,this._lastMousePos=this._map.mouseEventToContainerPoint(i),this._startTime||(this._startTime=+new Date);var h=Math.max(u-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),h),mn(i)},_performZoom:function(){var i=this._map,o=i.getZoom(),u=this._map.options.zoomSnap||0;i._stop();var h=this._delta/(this._map.options.wheelPxPerZoomLevel*4),d=4*Math.log(2/(1+Math.exp(-Math.abs(h))))/Math.LN2,g=u?Math.ceil(d/u)*u:d,w=i._limitZoom(o+(this._delta>0?g:-g))-o;this._delta=0,this._startTime=null,!!w&&(i.options.scrollWheelZoom==="center"?i.setZoom(o+w):i.setZoomAround(this._lastMousePos,o+w))}});wt.addInitHook("addHandler","scrollWheelZoom",pf),wt.mergeOptions({tap:!0,tapTolerance:15});var mf=nn.extend({addHooks:function(){pt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Xt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(i){if(!!i.touches){if(Fe(i),this._fireClick=!0,i.touches.length>1){this._fireClick=!1,clearTimeout(this._holdTimeout);return}var o=i.touches[0],u=o.target;this._startPos=this._newPos=new $(o.clientX,o.clientY),u.tagName&&u.tagName.toLowerCase()==="a"&&lt(u,"leaflet-active"),this._holdTimeout=setTimeout(l(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",o))},this),1e3),this._simulateEvent("mousedown",o),pt(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(i){if(clearTimeout(this._holdTimeout),Xt(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&i&&i.changedTouches){var o=i.changedTouches[0],u=o.target;u&&u.tagName&&u.tagName.toLowerCase()==="a"&&Yt(u,"leaflet-active"),this._simulateEvent("mouseup",o),this._isTapValid()&&this._simulateEvent("click",o)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(i){var o=i.touches[0];this._newPos=new $(o.clientX,o.clientY),this._simulateEvent("mousemove",o)},_simulateEvent:function(i,o){var u=document.createEvent("MouseEvents");u._simulated=!0,o.target._simulatedClick=!0,u.initMouseEvent(i,!0,!0,window,1,o.screenX,o.screenY,o.clientX,o.clientY,!1,!1,!1,!1,0,null),o.target.dispatchEvent(u)}});tn&&(!Je||Et)&&wt.addInitHook("addHandler","tap",mf),wt.mergeOptions({touchZoom:tn&&!Y,bounceAtZoomLimits:!0});var gf=nn.extend({addHooks:function(){lt(this._map._container,"leaflet-touch-zoom"),pt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Yt(this._map._container,"leaflet-touch-zoom"),Xt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(i){var o=this._map;if(!(!i.touches||i.touches.length!==2||o._animatingZoom||this._zooming)){var u=o.mouseEventToContainerPoint(i.touches[0]),h=o.mouseEventToContainerPoint(i.touches[1]);this._centerPoint=o.getSize()._divideBy(2),this._startLatLng=o.containerPointToLatLng(this._centerPoint),o.options.touchZoom!=="center"&&(this._pinchStartLatLng=o.containerPointToLatLng(u.add(h)._divideBy(2))),this._startDist=u.distanceTo(h),this._startZoom=o.getZoom(),this._moved=!1,this._zooming=!0,o._stop(),pt(document,"touchmove",this._onTouchMove,this),pt(document,"touchend",this._onTouchEnd,this),Fe(i)}},_onTouchMove:function(i){if(!(!i.touches||i.touches.length!==2||!this._zooming)){var o=this._map,u=o.mouseEventToContainerPoint(i.touches[0]),h=o.mouseEventToContainerPoint(i.touches[1]),d=u.distanceTo(h)/this._startDist;if(this._zoom=o.getScaleZoom(d,this._startZoom),!o.options.bounceAtZoomLimits&&(this._zoom<o.getMinZoom()&&d<1||this._zoom>o.getMaxZoom()&&d>1)&&(this._zoom=o._limitZoom(this._zoom)),o.options.touchZoom==="center"){if(this._center=this._startLatLng,d===1)return}else{var g=u._add(h)._divideBy(2)._subtract(this._centerPoint);if(d===1&&g.x===0&&g.y===0)return;this._center=o.unproject(o.project(this._pinchStartLatLng,this._zoom).subtract(g),this._zoom)}this._moved||(o._moveStart(!0,!1),this._moved=!0),Ct(this._animRequest);var w=l(o._move,o,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=_t(w,this,!0),Fe(i)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Ct(this._animRequest),Xt(document,"touchmove",this._onTouchMove,this),Xt(document,"touchend",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});wt.addInitHook("addHandler","touchZoom",gf),wt.BoxZoom=cf,wt.DoubleClickZoom=hf,wt.Drag=ff,wt.Keyboard=df,wt.ScrollWheelZoom=pf,wt.Tap=mf,wt.TouchZoom=gf,n.version=r,n.Control=We,n.control=Mr,n.Browser=cv,n.Evented=xt,n.Mixin=Cv,n.Util=Qe,n.Class=ge,n.Handler=nn,n.extend=s,n.bind=l,n.stamp=f,n.setOptions=S,n.DomEvent=Tv,n.DomUtil=xv,n.PosAnimation=Fh,n.Draggable=Qn,n.LineUtil=Rv,n.PolyUtil=Ov,n.Point=$,n.point=ct,n.Bounds=yt,n.bounds=jt,n.Transformation=ut,n.transformation=rt,n.Projection=Dv,n.LatLng=I,n.latLng=U,n.LatLngBounds=Bt,n.latLngBounds=Gt,n.CRS=D,n.GeoJSON=vn,n.geoJSON=Jh,n.geoJson=Kv,n.Layer=Ke,n.LayerGroup=ki,n.layerGroup=Fv,n.FeatureGroup=Ri,n.featureGroup=Uv,n.ImageOverlay=ao,n.imageOverlay=jv,n.VideoOverlay=tf,n.videoOverlay=Gv,n.SVGOverlay=ef,n.svgOverlay=Yv,n.DivOverlay=yn,n.Popup=zi,n.popup=Xv,n.Tooltip=Fi,n.tooltip=Qv,n.Icon=Oi,n.icon=Vv,n.DivIcon=nf,n.divIcon=Jv,n.Marker=no,n.marker=Hv,n.TileLayer=Ui,n.tileLayer=rf,n.GridLayer=Or,n.gridLayer=ty,n.SVG=Br,n.svg=uf,n.Renderer=rn,n.Canvas=of,n.canvas=af,n.Path=Rn,n.CircleMarker=io,n.circleMarker=$v,n.Circle=bu,n.circle=Zv,n.Polyline=_n,n.polyline=qv,n.Polygon=Di,n.polygon=Wv,n.Rectangle=lf,n.rectangle=iy,n.Map=wt,n.map=bv;var ry=window.L;n.noConflict=function(){return window.L=ry,this},window.L=n})})(dh,dh.exports);var sC=dh.exports,oC="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",EA={value:()=>{}};function w_(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Ba(n)}function Ba(t){this._=t}function TA(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",s=n.indexOf(".");if(s>=0&&(r=n.slice(s+1),n=n.slice(0,s)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Ba.prototype=w_.prototype={constructor:Ba,on:function(t,e){var n=this._,r=TA(t+"",n),s,a=-1,l=r.length;if(arguments.length<2){for(;++a<l;)if((s=(t=r[a]).type)&&(s=bA(n[s],t.name)))return s;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<l;)if(s=(t=r[a]).type)n[s]=x_(n[s],t.name,e);else if(e==null)for(s in n)n[s]=x_(n[s],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Ba(t)},call:function(t,e){if((s=arguments.length-2)>0)for(var n=new Array(s),r=0,s,a;r<s;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,s=a.length;r<s;++r)a[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],s=0,a=r.length;s<a;++s)r[s].value.apply(e,n)}};function bA(t,e){for(var n=0,r=t.length,s;n<r;++n)if((s=t[n]).name===e)return s.value}function x_(t,e,n){for(var r=0,s=t.length;r<s;++r)if(t[r].name===e){t[r]=EA,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var ph="http://www.w3.org/1999/xhtml",E_={svg:"http://www.w3.org/2000/svg",xhtml:ph,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function za(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),E_.hasOwnProperty(e)?{space:E_[e],local:t}:t}function PA(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===ph&&e.documentElement.namespaceURI===ph?e.createElement(t):e.createElementNS(n,t)}}function AA(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function T_(t){var e=za(t);return(e.local?AA:PA)(e)}function IA(){}function mh(t){return t==null?IA:function(){return this.querySelector(t)}}function SA(t){typeof t!="function"&&(t=mh(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var a=e[s],l=a.length,c=r[s]=new Array(l),f,p,m=0;m<l;++m)(f=a[m])&&(p=t.call(f,f.__data__,m,a))&&("__data__"in f&&(p.__data__=f.__data__),c[m]=p);return new Be(r,this._parents)}function CA(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function LA(){return[]}function b_(t){return t==null?LA:function(){return this.querySelectorAll(t)}}function NA(t){return function(){return CA(t.apply(this,arguments))}}function MA(t){typeof t=="function"?t=NA(t):t=b_(t);for(var e=this._groups,n=e.length,r=[],s=[],a=0;a<n;++a)for(var l=e[a],c=l.length,f,p=0;p<c;++p)(f=l[p])&&(r.push(t.call(f,f.__data__,p,l)),s.push(f));return new Be(r,s)}function P_(t){return function(){return this.matches(t)}}function A_(t){return function(e){return e.matches(t)}}var kA=Array.prototype.find;function RA(t){return function(){return kA.call(this.children,t)}}function OA(){return this.firstElementChild}function DA(t){return this.select(t==null?OA:RA(typeof t=="function"?t:A_(t)))}var BA=Array.prototype.filter;function zA(){return Array.from(this.children)}function FA(t){return function(){return BA.call(this.children,t)}}function UA(t){return this.selectAll(t==null?zA:FA(typeof t=="function"?t:A_(t)))}function VA(t){typeof t!="function"&&(t=P_(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var a=e[s],l=a.length,c=r[s]=[],f,p=0;p<l;++p)(f=a[p])&&t.call(f,f.__data__,p,a)&&c.push(f);return new Be(r,this._parents)}function I_(t){return new Array(t.length)}function HA(){return new Be(this._enter||this._groups.map(I_),this._parents)}function Fa(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Fa.prototype={constructor:Fa,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function $A(t){return function(){return t}}function ZA(t,e,n,r,s,a){for(var l=0,c,f=e.length,p=a.length;l<p;++l)(c=e[l])?(c.__data__=a[l],r[l]=c):n[l]=new Fa(t,a[l]);for(;l<f;++l)(c=e[l])&&(s[l]=c)}function qA(t,e,n,r,s,a,l){var c,f,p=new Map,m=e.length,_=a.length,v=new Array(m),x;for(c=0;c<m;++c)(f=e[c])&&(v[c]=x=l.call(f,f.__data__,c,e)+"",p.has(x)?s[c]=f:p.set(x,f));for(c=0;c<_;++c)x=l.call(t,a[c],c,a)+"",(f=p.get(x))?(r[c]=f,f.__data__=a[c],p.delete(x)):n[c]=new Fa(t,a[c]);for(c=0;c<m;++c)(f=e[c])&&p.get(v[c])===f&&(s[c]=f)}function WA(t){return t.__data__}function KA(t,e){if(!arguments.length)return Array.from(this,WA);var n=e?qA:ZA,r=this._parents,s=this._groups;typeof t!="function"&&(t=$A(t));for(var a=s.length,l=new Array(a),c=new Array(a),f=new Array(a),p=0;p<a;++p){var m=r[p],_=s[p],v=_.length,x=jA(t.call(m,m&&m.__data__,p,r)),A=x.length,S=c[p]=new Array(A),R=l[p]=new Array(A),V=f[p]=new Array(v);n(m,_,S,R,V,x,e);for(var G=0,J=0,ot,It;G<A;++G)if(ot=S[G]){for(G>=J&&(J=G+1);!(It=R[J])&&++J<A;);ot._next=It||null}}return l=new Be(l,r),l._enter=c,l._exit=f,l}function jA(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function GA(){return new Be(this._exit||this._groups.map(I_),this._parents)}function YA(t,e,n){var r=this.enter(),s=this,a=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(s=e(s),s&&(s=s.selection())),n==null?a.remove():n(a),r&&s?r.merge(s).order():s}function XA(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,s=n.length,a=r.length,l=Math.min(s,a),c=new Array(s),f=0;f<l;++f)for(var p=n[f],m=r[f],_=p.length,v=c[f]=new Array(_),x,A=0;A<_;++A)(x=p[A]||m[A])&&(v[A]=x);for(;f<s;++f)c[f]=n[f];return new Be(c,this._parents)}function QA(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],s=r.length-1,a=r[s],l;--s>=0;)(l=r[s])&&(a&&l.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(l,a),a=l);return this}function JA(t){t||(t=t1);function e(_,v){return _&&v?t(_.__data__,v.__data__):!_-!v}for(var n=this._groups,r=n.length,s=new Array(r),a=0;a<r;++a){for(var l=n[a],c=l.length,f=s[a]=new Array(c),p,m=0;m<c;++m)(p=l[m])&&(f[m]=p);f.sort(e)}return new Be(s,this._parents).order()}function t1(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function e1(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function n1(){return Array.from(this)}function i1(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],s=0,a=r.length;s<a;++s){var l=r[s];if(l)return l}return null}function r1(){let t=0;for(const e of this)++t;return t}function s1(){return!this.node()}function o1(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var s=e[n],a=0,l=s.length,c;a<l;++a)(c=s[a])&&t.call(c,c.__data__,a,s);return this}function a1(t){return function(){this.removeAttribute(t)}}function u1(t){return function(){this.removeAttributeNS(t.space,t.local)}}function l1(t,e){return function(){this.setAttribute(t,e)}}function c1(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function h1(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function f1(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function d1(t,e){var n=za(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?u1:a1:typeof e=="function"?n.local?f1:h1:n.local?c1:l1)(n,e))}function S_(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function p1(t){return function(){this.style.removeProperty(t)}}function m1(t,e,n){return function(){this.style.setProperty(t,e,n)}}function g1(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function _1(t,e,n){return arguments.length>1?this.each((e==null?p1:typeof e=="function"?g1:m1)(t,e,n==null?"":n)):xr(this.node(),t)}function xr(t,e){return t.style.getPropertyValue(e)||S_(t).getComputedStyle(t,null).getPropertyValue(e)}function v1(t){return function(){delete this[t]}}function y1(t,e){return function(){this[t]=e}}function w1(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function x1(t,e){return arguments.length>1?this.each((e==null?v1:typeof e=="function"?w1:y1)(t,e)):this.node()[t]}function C_(t){return t.trim().split(/^|\s+/)}function gh(t){return t.classList||new L_(t)}function L_(t){this._node=t,this._names=C_(t.getAttribute("class")||"")}L_.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function N_(t,e){for(var n=gh(t),r=-1,s=e.length;++r<s;)n.add(e[r])}function M_(t,e){for(var n=gh(t),r=-1,s=e.length;++r<s;)n.remove(e[r])}function E1(t){return function(){N_(this,t)}}function T1(t){return function(){M_(this,t)}}function b1(t,e){return function(){(e.apply(this,arguments)?N_:M_)(this,t)}}function P1(t,e){var n=C_(t+"");if(arguments.length<2){for(var r=gh(this.node()),s=-1,a=n.length;++s<a;)if(!r.contains(n[s]))return!1;return!0}return this.each((typeof e=="function"?b1:e?E1:T1)(n,e))}function A1(){this.textContent=""}function I1(t){return function(){this.textContent=t}}function S1(t){return function(){var e=t.apply(this,arguments);this.textContent=e==null?"":e}}function C1(t){return arguments.length?this.each(t==null?A1:(typeof t=="function"?S1:I1)(t)):this.node().textContent}function L1(){this.innerHTML=""}function N1(t){return function(){this.innerHTML=t}}function M1(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e==null?"":e}}function k1(t){return arguments.length?this.each(t==null?L1:(typeof t=="function"?M1:N1)(t)):this.node().innerHTML}function R1(){this.nextSibling&&this.parentNode.appendChild(this)}function O1(){return this.each(R1)}function D1(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function B1(){return this.each(D1)}function z1(t){var e=typeof t=="function"?t:T_(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function F1(){return null}function U1(t,e){var n=typeof t=="function"?t:T_(t),r=e==null?F1:typeof e=="function"?e:mh(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function V1(){var t=this.parentNode;t&&t.removeChild(this)}function H1(){return this.each(V1)}function $1(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Z1(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function q1(t){return this.select(t?Z1:$1)}function W1(t){return arguments.length?this.property("__data__",t):this.node().__data__}function K1(t){return function(e){t.call(this,e,this.__data__)}}function j1(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function G1(t){return function(){var e=this.__on;if(!!e){for(var n=0,r=-1,s=e.length,a;n<s;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):e[++r]=a;++r?e.length=r:delete this.__on}}}function Y1(t,e,n){return function(){var r=this.__on,s,a=K1(e);if(r){for(var l=0,c=r.length;l<c;++l)if((s=r[l]).type===t.type&&s.name===t.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=a,s.options=n),s.value=e;return}}this.addEventListener(t.type,a,n),s={type:t.type,name:t.name,value:e,listener:a,options:n},r?r.push(s):this.__on=[s]}}function X1(t,e,n){var r=j1(t+""),s,a=r.length,l;if(arguments.length<2){var c=this.node().__on;if(c){for(var f=0,p=c.length,m;f<p;++f)for(s=0,m=c[f];s<a;++s)if((l=r[s]).type===m.type&&l.name===m.name)return m.value}return}for(c=e?Y1:G1,s=0;s<a;++s)this.each(c(r[s],e,n));return this}function k_(t,e,n){var r=S_(t),s=r.CustomEvent;typeof s=="function"?s=new s(e,n):(s=r.document.createEvent("Event"),n?(s.initEvent(e,n.bubbles,n.cancelable),s.detail=n.detail):s.initEvent(e,!1,!1)),t.dispatchEvent(s)}function Q1(t,e){return function(){return k_(this,t,e)}}function J1(t,e){return function(){return k_(this,t,e.apply(this,arguments))}}function tI(t,e){return this.each((typeof e=="function"?J1:Q1)(t,e))}function*eI(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],s=0,a=r.length,l;s<a;++s)(l=r[s])&&(yield l)}var R_=[null];function Be(t,e){this._groups=t,this._parents=e}function Er(){return new Be([[document.documentElement]],R_)}function nI(){return this}Be.prototype=Er.prototype={constructor:Be,select:SA,selectAll:MA,selectChild:DA,selectChildren:UA,filter:VA,data:KA,enter:HA,exit:GA,join:YA,merge:XA,selection:nI,order:QA,sort:JA,call:e1,nodes:n1,node:i1,size:r1,empty:s1,each:o1,attr:d1,style:_1,property:x1,classed:P1,text:C1,html:k1,raise:O1,lower:B1,append:z1,insert:U1,remove:H1,clone:q1,datum:W1,on:X1,dispatch:tI,[Symbol.iterator]:eI};function aC(t){return typeof t=="string"?new Be([[document.querySelector(t)]],[document.documentElement]):new Be([[t]],R_)}function _h(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function O_(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Os(){}var Ds=.7,Ua=1/Ds,Tr="\\s*([+-]?\\d+)\\s*",Bs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",hn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",iI=/^#([0-9a-f]{3,8})$/,rI=new RegExp(`^rgb\\(${Tr},${Tr},${Tr}\\)$`),sI=new RegExp(`^rgb\\(${hn},${hn},${hn}\\)$`),oI=new RegExp(`^rgba\\(${Tr},${Tr},${Tr},${Bs}\\)$`),aI=new RegExp(`^rgba\\(${hn},${hn},${hn},${Bs}\\)$`),uI=new RegExp(`^hsl\\(${Bs},${hn},${hn}\\)$`),lI=new RegExp(`^hsla\\(${Bs},${hn},${hn},${Bs}\\)$`),D_={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};_h(Os,zs,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:B_,formatHex:B_,formatHex8:cI,formatHsl:hI,formatRgb:z_,toString:z_});function B_(){return this.rgb().formatHex()}function cI(){return this.rgb().formatHex8()}function hI(){return $_(this).formatHsl()}function z_(){return this.rgb().formatRgb()}function zs(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=iI.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?F_(e):n===3?new Me(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Va(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Va(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=rI.exec(t))?new Me(e[1],e[2],e[3],1):(e=sI.exec(t))?new Me(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=oI.exec(t))?Va(e[1],e[2],e[3],e[4]):(e=aI.exec(t))?Va(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=uI.exec(t))?H_(e[1],e[2]/100,e[3]/100,1):(e=lI.exec(t))?H_(e[1],e[2]/100,e[3]/100,e[4]):D_.hasOwnProperty(t)?F_(D_[t]):t==="transparent"?new Me(NaN,NaN,NaN,0):null}function F_(t){return new Me(t>>16&255,t>>8&255,t&255,1)}function Va(t,e,n,r){return r<=0&&(t=e=n=NaN),new Me(t,e,n,r)}function fI(t){return t instanceof Os||(t=zs(t)),t?(t=t.rgb(),new Me(t.r,t.g,t.b,t.opacity)):new Me}function vh(t,e,n,r){return arguments.length===1?fI(t):new Me(t,e,n,r==null?1:r)}function Me(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}_h(Me,vh,O_(Os,{brighter(t){return t=t==null?Ua:Math.pow(Ua,t),new Me(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Ds:Math.pow(Ds,t),new Me(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Me(bi(this.r),bi(this.g),bi(this.b),Ha(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:U_,formatHex:U_,formatHex8:dI,formatRgb:V_,toString:V_}));function U_(){return`#${Pi(this.r)}${Pi(this.g)}${Pi(this.b)}`}function dI(){return`#${Pi(this.r)}${Pi(this.g)}${Pi(this.b)}${Pi((isNaN(this.opacity)?1:this.opacity)*255)}`}function V_(){const t=Ha(this.opacity);return`${t===1?"rgb(":"rgba("}${bi(this.r)}, ${bi(this.g)}, ${bi(this.b)}${t===1?")":`, ${t})`}`}function Ha(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function bi(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Pi(t){return t=bi(t),(t<16?"0":"")+t.toString(16)}function H_(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ye(t,e,n,r)}function $_(t){if(t instanceof Ye)return new Ye(t.h,t.s,t.l,t.opacity);if(t instanceof Os||(t=zs(t)),!t)return new Ye;if(t instanceof Ye)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,s=Math.min(e,n,r),a=Math.max(e,n,r),l=NaN,c=a-s,f=(a+s)/2;return c?(e===a?l=(n-r)/c+(n<r)*6:n===a?l=(r-e)/c+2:l=(e-n)/c+4,c/=f<.5?a+s:2-a-s,l*=60):c=f>0&&f<1?0:l,new Ye(l,c,f,t.opacity)}function pI(t,e,n,r){return arguments.length===1?$_(t):new Ye(t,e,n,r==null?1:r)}function Ye(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}_h(Ye,pI,O_(Os,{brighter(t){return t=t==null?Ua:Math.pow(Ua,t),new Ye(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Ds:Math.pow(Ds,t),new Ye(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,s=2*n-r;return new Me(yh(t>=240?t-240:t+120,s,r),yh(t,s,r),yh(t<120?t+240:t-120,s,r),this.opacity)},clamp(){return new Ye(Z_(this.h),$a(this.s),$a(this.l),Ha(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ha(this.opacity);return`${t===1?"hsl(":"hsla("}${Z_(this.h)}, ${$a(this.s)*100}%, ${$a(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Z_(t){return t=(t||0)%360,t<0?t+360:t}function $a(t){return Math.max(0,Math.min(1,t||0))}function yh(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}var q_=t=>()=>t;function mI(t,e){return function(n){return t+n*e}}function gI(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function _I(t){return(t=+t)==1?W_:function(e,n){return n-e?gI(e,n,t):q_(isNaN(e)?n:e)}}function W_(t,e){var n=e-t;return n?mI(t,n):q_(isNaN(t)?e:t)}var K_=function t(e){var n=_I(e);function r(s,a){var l=n((s=vh(s)).r,(a=vh(a)).r),c=n(s.g,a.g),f=n(s.b,a.b),p=W_(s.opacity,a.opacity);return function(m){return s.r=l(m),s.g=c(m),s.b=f(m),s.opacity=p(m),s+""}}return r.gamma=t,r}(1);function Gn(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var wh=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,xh=new RegExp(wh.source,"g");function vI(t){return function(){return t}}function yI(t){return function(e){return t(e)+""}}function wI(t,e){var n=wh.lastIndex=xh.lastIndex=0,r,s,a,l=-1,c=[],f=[];for(t=t+"",e=e+"";(r=wh.exec(t))&&(s=xh.exec(e));)(a=s.index)>n&&(a=e.slice(n,a),c[l]?c[l]+=a:c[++l]=a),(r=r[0])===(s=s[0])?c[l]?c[l]+=s:c[++l]=s:(c[++l]=null,f.push({i:l,x:Gn(r,s)})),n=xh.lastIndex;return n<e.length&&(a=e.slice(n),c[l]?c[l]+=a:c[++l]=a),c.length<2?f[0]?yI(f[0].x):vI(e):(e=f.length,function(p){for(var m=0,_;m<e;++m)c[(_=f[m]).i]=_.x(p);return c.join("")})}var j_=180/Math.PI,Eh={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function G_(t,e,n,r,s,a){var l,c,f;return(l=Math.sqrt(t*t+e*e))&&(t/=l,e/=l),(f=t*n+e*r)&&(n-=t*f,r-=e*f),(c=Math.sqrt(n*n+r*r))&&(n/=c,r/=c,f/=c),t*r<e*n&&(t=-t,e=-e,f=-f,l=-l),{translateX:s,translateY:a,rotate:Math.atan2(e,t)*j_,skewX:Math.atan(f)*j_,scaleX:l,scaleY:c}}var Za;function xI(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Eh:G_(e.a,e.b,e.c,e.d,e.e,e.f)}function EI(t){return t==null||(Za||(Za=document.createElementNS("http://www.w3.org/2000/svg","g")),Za.setAttribute("transform",t),!(t=Za.transform.baseVal.consolidate()))?Eh:(t=t.matrix,G_(t.a,t.b,t.c,t.d,t.e,t.f))}function Y_(t,e,n,r){function s(p){return p.length?p.pop()+" ":""}function a(p,m,_,v,x,A){if(p!==_||m!==v){var S=x.push("translate(",null,e,null,n);A.push({i:S-4,x:Gn(p,_)},{i:S-2,x:Gn(m,v)})}else(_||v)&&x.push("translate("+_+e+v+n)}function l(p,m,_,v){p!==m?(p-m>180?m+=360:m-p>180&&(p+=360),v.push({i:_.push(s(_)+"rotate(",null,r)-2,x:Gn(p,m)})):m&&_.push(s(_)+"rotate("+m+r)}function c(p,m,_,v){p!==m?v.push({i:_.push(s(_)+"skewX(",null,r)-2,x:Gn(p,m)}):m&&_.push(s(_)+"skewX("+m+r)}function f(p,m,_,v,x,A){if(p!==_||m!==v){var S=x.push(s(x)+"scale(",null,",",null,")");A.push({i:S-4,x:Gn(p,_)},{i:S-2,x:Gn(m,v)})}else(_!==1||v!==1)&&x.push(s(x)+"scale("+_+","+v+")")}return function(p,m){var _=[],v=[];return p=t(p),m=t(m),a(p.translateX,p.translateY,m.translateX,m.translateY,_,v),l(p.rotate,m.rotate,_,v),c(p.skewX,m.skewX,_,v),f(p.scaleX,p.scaleY,m.scaleX,m.scaleY,_,v),p=m=null,function(x){for(var A=-1,S=v.length,R;++A<S;)_[(R=v[A]).i]=R.x(x);return _.join("")}}}var TI=Y_(xI,"px, ","px)","deg)"),bI=Y_(EI,", ",")",")"),br=0,Fs=0,Us=0,X_=1e3,qa,Vs,Wa=0,Ai=0,Ka=0,Hs=typeof performance=="object"&&performance.now?performance:Date,Q_=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Th(){return Ai||(Q_(PI),Ai=Hs.now()+Ka)}function PI(){Ai=0}function ja(){this._call=this._time=this._next=null}ja.prototype=J_.prototype={constructor:ja,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Th():+n)+(e==null?0:+e),!this._next&&Vs!==this&&(Vs?Vs._next=this:qa=this,Vs=this),this._call=t,this._time=n,bh()},stop:function(){this._call&&(this._call=null,this._time=1/0,bh())}};function J_(t,e,n){var r=new ja;return r.restart(t,e,n),r}function AI(){Th(),++br;for(var t=qa,e;t;)(e=Ai-t._time)>=0&&t._call.call(void 0,e),t=t._next;--br}function tv(){Ai=(Wa=Hs.now())+Ka,br=Fs=0;try{AI()}finally{br=0,SI(),Ai=0}}function II(){var t=Hs.now(),e=t-Wa;e>X_&&(Ka-=e,Wa=t)}function SI(){for(var t,e=qa,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:qa=n);Vs=t,bh(r)}function bh(t){if(!br){Fs&&(Fs=clearTimeout(Fs));var e=t-Ai;e>24?(t<1/0&&(Fs=setTimeout(tv,t-Hs.now()-Ka)),Us&&(Us=clearInterval(Us))):(Us||(Wa=Hs.now(),Us=setInterval(II,X_)),br=1,Q_(tv))}}function ev(t,e,n){var r=new ja;return e=e==null?0:+e,r.restart(s=>{r.stop(),t(s+e)},e,n),r}var CI=w_("start","end","cancel","interrupt"),LI=[],nv=0,iv=1,Ph=2,Ga=3,rv=4,Ah=5,Ya=6;function Xa(t,e,n,r,s,a){var l=t.__transition;if(!l)t.__transition={};else if(n in l)return;NI(t,n,{name:e,index:r,group:s,on:CI,tween:LI,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:nv})}function Ih(t,e){var n=Xe(t,e);if(n.state>nv)throw new Error("too late; already scheduled");return n}function fn(t,e){var n=Xe(t,e);if(n.state>Ga)throw new Error("too late; already running");return n}function Xe(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function NI(t,e,n){var r=t.__transition,s;r[e]=n,n.timer=J_(a,0,n.time);function a(p){n.state=iv,n.timer.restart(l,n.delay,n.time),n.delay<=p&&l(p-n.delay)}function l(p){var m,_,v,x;if(n.state!==iv)return f();for(m in r)if(x=r[m],x.name===n.name){if(x.state===Ga)return ev(l);x.state===rv?(x.state=Ya,x.timer.stop(),x.on.call("interrupt",t,t.__data__,x.index,x.group),delete r[m]):+m<e&&(x.state=Ya,x.timer.stop(),x.on.call("cancel",t,t.__data__,x.index,x.group),delete r[m])}if(ev(function(){n.state===Ga&&(n.state=rv,n.timer.restart(c,n.delay,n.time),c(p))}),n.state=Ph,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Ph){for(n.state=Ga,s=new Array(v=n.tween.length),m=0,_=-1;m<v;++m)(x=n.tween[m].value.call(t,t.__data__,n.index,n.group))&&(s[++_]=x);s.length=_+1}}function c(p){for(var m=p<n.duration?n.ease.call(null,p/n.duration):(n.timer.restart(f),n.state=Ah,1),_=-1,v=s.length;++_<v;)s[_].call(t,m);n.state===Ah&&(n.on.call("end",t,t.__data__,n.index,n.group),f())}function f(){n.state=Ya,n.timer.stop(),delete r[e];for(var p in r)return;delete t.__transition}}function MI(t,e){var n=t.__transition,r,s,a=!0,l;if(!!n){e=e==null?null:e+"";for(l in n){if((r=n[l]).name!==e){a=!1;continue}s=r.state>Ph&&r.state<Ah,r.state=Ya,r.timer.stop(),r.on.call(s?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[l]}a&&delete t.__transition}}function kI(t){return this.each(function(){MI(this,t)})}function RI(t,e){var n,r;return function(){var s=fn(this,t),a=s.tween;if(a!==n){r=n=a;for(var l=0,c=r.length;l<c;++l)if(r[l].name===e){r=r.slice(),r.splice(l,1);break}}s.tween=r}}function OI(t,e,n){var r,s;if(typeof n!="function")throw new Error;return function(){var a=fn(this,t),l=a.tween;if(l!==r){s=(r=l).slice();for(var c={name:e,value:n},f=0,p=s.length;f<p;++f)if(s[f].name===e){s[f]=c;break}f===p&&s.push(c)}a.tween=s}}function DI(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=Xe(this.node(),n).tween,s=0,a=r.length,l;s<a;++s)if((l=r[s]).name===t)return l.value;return null}return this.each((e==null?RI:OI)(n,t,e))}function Sh(t,e,n){var r=t._id;return t.each(function(){var s=fn(this,r);(s.value||(s.value={}))[e]=n.apply(this,arguments)}),function(s){return Xe(s,r).value[e]}}function sv(t,e){var n;return(typeof e=="number"?Gn:e instanceof zs?K_:(n=zs(e))?(e=n,K_):wI)(t,e)}function BI(t){return function(){this.removeAttribute(t)}}function zI(t){return function(){this.removeAttributeNS(t.space,t.local)}}function FI(t,e,n){var r,s=n+"",a;return function(){var l=this.getAttribute(t);return l===s?null:l===r?a:a=e(r=l,n)}}function UI(t,e,n){var r,s=n+"",a;return function(){var l=this.getAttributeNS(t.space,t.local);return l===s?null:l===r?a:a=e(r=l,n)}}function VI(t,e,n){var r,s,a;return function(){var l,c=n(this),f;return c==null?void this.removeAttribute(t):(l=this.getAttribute(t),f=c+"",l===f?null:l===r&&f===s?a:(s=f,a=e(r=l,c)))}}function HI(t,e,n){var r,s,a;return function(){var l,c=n(this),f;return c==null?void this.removeAttributeNS(t.space,t.local):(l=this.getAttributeNS(t.space,t.local),f=c+"",l===f?null:l===r&&f===s?a:(s=f,a=e(r=l,c)))}}function $I(t,e){var n=za(t),r=n==="transform"?bI:sv;return this.attrTween(t,typeof e=="function"?(n.local?HI:VI)(n,r,Sh(this,"attr."+t,e)):e==null?(n.local?zI:BI)(n):(n.local?UI:FI)(n,r,e))}function ZI(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function qI(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function WI(t,e){var n,r;function s(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&qI(t,a)),n}return s._value=e,s}function KI(t,e){var n,r;function s(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&ZI(t,a)),n}return s._value=e,s}function jI(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=za(t);return this.tween(n,(r.local?WI:KI)(r,e))}function GI(t,e){return function(){Ih(this,t).delay=+e.apply(this,arguments)}}function YI(t,e){return e=+e,function(){Ih(this,t).delay=e}}function XI(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?GI:YI)(e,t)):Xe(this.node(),e).delay}function QI(t,e){return function(){fn(this,t).duration=+e.apply(this,arguments)}}function JI(t,e){return e=+e,function(){fn(this,t).duration=e}}function tS(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?QI:JI)(e,t)):Xe(this.node(),e).duration}function eS(t,e){if(typeof e!="function")throw new Error;return function(){fn(this,t).ease=e}}function nS(t){var e=this._id;return arguments.length?this.each(eS(e,t)):Xe(this.node(),e).ease}function iS(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;fn(this,t).ease=n}}function rS(t){if(typeof t!="function")throw new Error;return this.each(iS(this._id,t))}function sS(t){typeof t!="function"&&(t=P_(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var a=e[s],l=a.length,c=r[s]=[],f,p=0;p<l;++p)(f=a[p])&&t.call(f,f.__data__,p,a)&&c.push(f);return new Sn(r,this._parents,this._name,this._id)}function oS(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,s=n.length,a=Math.min(r,s),l=new Array(r),c=0;c<a;++c)for(var f=e[c],p=n[c],m=f.length,_=l[c]=new Array(m),v,x=0;x<m;++x)(v=f[x]||p[x])&&(_[x]=v);for(;c<r;++c)l[c]=e[c];return new Sn(l,this._parents,this._name,this._id)}function aS(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function uS(t,e,n){var r,s,a=aS(e)?Ih:fn;return function(){var l=a(this,t),c=l.on;c!==r&&(s=(r=c).copy()).on(e,n),l.on=s}}function lS(t,e){var n=this._id;return arguments.length<2?Xe(this.node(),n).on.on(t):this.each(uS(n,t,e))}function cS(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function hS(){return this.on("end.remove",cS(this._id))}function fS(t){var e=this._name,n=this._id;typeof t!="function"&&(t=mh(t));for(var r=this._groups,s=r.length,a=new Array(s),l=0;l<s;++l)for(var c=r[l],f=c.length,p=a[l]=new Array(f),m,_,v=0;v<f;++v)(m=c[v])&&(_=t.call(m,m.__data__,v,c))&&("__data__"in m&&(_.__data__=m.__data__),p[v]=_,Xa(p[v],e,n,v,p,Xe(m,n)));return new Sn(a,this._parents,e,n)}function dS(t){var e=this._name,n=this._id;typeof t!="function"&&(t=b_(t));for(var r=this._groups,s=r.length,a=[],l=[],c=0;c<s;++c)for(var f=r[c],p=f.length,m,_=0;_<p;++_)if(m=f[_]){for(var v=t.call(m,m.__data__,_,f),x,A=Xe(m,n),S=0,R=v.length;S<R;++S)(x=v[S])&&Xa(x,e,n,S,v,A);a.push(v),l.push(m)}return new Sn(a,l,e,n)}var pS=Er.prototype.constructor;function mS(){return new pS(this._groups,this._parents)}function gS(t,e){var n,r,s;return function(){var a=xr(this,t),l=(this.style.removeProperty(t),xr(this,t));return a===l?null:a===n&&l===r?s:s=e(n=a,r=l)}}function ov(t){return function(){this.style.removeProperty(t)}}function _S(t,e,n){var r,s=n+"",a;return function(){var l=xr(this,t);return l===s?null:l===r?a:a=e(r=l,n)}}function vS(t,e,n){var r,s,a;return function(){var l=xr(this,t),c=n(this),f=c+"";return c==null&&(f=c=(this.style.removeProperty(t),xr(this,t))),l===f?null:l===r&&f===s?a:(s=f,a=e(r=l,c))}}function yS(t,e){var n,r,s,a="style."+e,l="end."+a,c;return function(){var f=fn(this,t),p=f.on,m=f.value[a]==null?c||(c=ov(e)):void 0;(p!==n||s!==m)&&(r=(n=p).copy()).on(l,s=m),f.on=r}}function wS(t,e,n){var r=(t+="")==="transform"?TI:sv;return e==null?this.styleTween(t,gS(t,r)).on("end.style."+t,ov(t)):typeof e=="function"?this.styleTween(t,vS(t,r,Sh(this,"style."+t,e))).each(yS(this._id,t)):this.styleTween(t,_S(t,r,e),n).on("end.style."+t,null)}function xS(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function ES(t,e,n){var r,s;function a(){var l=e.apply(this,arguments);return l!==s&&(r=(s=l)&&xS(t,l,n)),r}return a._value=e,a}function TS(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,ES(t,e,n==null?"":n))}function bS(t){return function(){this.textContent=t}}function PS(t){return function(){var e=t(this);this.textContent=e==null?"":e}}function AS(t){return this.tween("text",typeof t=="function"?PS(Sh(this,"text",t)):bS(t==null?"":t+""))}function IS(t){return function(e){this.textContent=t.call(this,e)}}function SS(t){var e,n;function r(){var s=t.apply(this,arguments);return s!==n&&(e=(n=s)&&IS(s)),e}return r._value=t,r}function CS(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,SS(t))}function LS(){for(var t=this._name,e=this._id,n=av(),r=this._groups,s=r.length,a=0;a<s;++a)for(var l=r[a],c=l.length,f,p=0;p<c;++p)if(f=l[p]){var m=Xe(f,e);Xa(f,t,n,p,l,{time:m.time+m.delay+m.duration,delay:0,duration:m.duration,ease:m.ease})}return new Sn(r,this._parents,t,n)}function NS(){var t,e,n=this,r=n._id,s=n.size();return new Promise(function(a,l){var c={value:l},f={value:function(){--s==0&&a()}};n.each(function(){var p=fn(this,r),m=p.on;m!==t&&(e=(t=m).copy(),e._.cancel.push(c),e._.interrupt.push(c),e._.end.push(f)),p.on=e}),s===0&&a()})}var MS=0;function Sn(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function kS(t){return Er().transition(t)}function av(){return++MS}var Cn=Er.prototype;Sn.prototype=kS.prototype={constructor:Sn,select:fS,selectAll:dS,selectChild:Cn.selectChild,selectChildren:Cn.selectChildren,filter:sS,merge:oS,selection:mS,transition:LS,call:Cn.call,nodes:Cn.nodes,node:Cn.node,size:Cn.size,empty:Cn.empty,each:Cn.each,on:lS,attr:$I,attrTween:jI,style:wS,styleTween:TS,text:AS,textTween:CS,remove:hS,tween:DI,delay:XI,duration:tS,ease:nS,easeVarying:rS,end:NS,[Symbol.iterator]:Cn[Symbol.iterator]};const uC=t=>+t;function RS(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var OS={time:null,delay:0,duration:250,ease:RS};function DS(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function BS(t){var e,n;t instanceof Sn?(e=t._id,t=t._name):(e=av(),(n=OS).time=Th(),t=t==null?null:t+"");for(var r=this._groups,s=r.length,a=0;a<s;++a)for(var l=r[a],c=l.length,f,p=0;p<c;++p)(f=l[p])&&Xa(f,t,e,p,l,n||DS(f,e));return new Sn(r,this._parents,t,e)}Er.prototype.interrupt=kI;Er.prototype.transition=BS;export{FS as A,iC as B,YS as C,GS as D,jS as E,an as F,sC as L,nC as M,eC as O,WS as a,Ad as b,ZS as c,Re as d,Yw as e,KS as f,VS as g,ew as h,QS as i,qS as j,JS as k,rC as l,id as m,oC as n,$S as o,US as p,J_ as q,HS as r,aC as s,zS as t,kS as u,tC as v,lw as w,uC as x,Vr as y,XS as z};
